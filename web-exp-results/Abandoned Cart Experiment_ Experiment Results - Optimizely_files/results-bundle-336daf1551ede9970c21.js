(window.__optlyJsonp=window.__optlyJsonp||[]).push([[19],{3661:function(e,t,r){"use strict";r.r(t),r.d(t,"pages",(function(){return p}));var n=r(1408),a=r.n(n),i=r(4743),o=r(4771),s=r(4773),c=r(4784),l=r(4786),u=r(4789),p={abtest:i.a,individual:o.a,multiarmed_bandit:s.a,mvt_rollup:c.a,p13n_single_experiment:l.a,p13n_overview:u.a};a.a.setOptions({global:{useUTC:!1},lang:{thousandsSep:","}}),t.default={pages:p}},3683:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=function LoadingDots(e){var t=o.a.createElement("ul",{className:"lego-progress-dots"},o.a.createElement("li",null),o.a.createElement("li",null),o.a.createElement("li",null));return e.shouldFill?o.a.createElement("div",{"data-ui-component":!0,className:"lego-overlay"},o.a.createElement("div",{className:"flex--dead-center"},t)):t};s.propTypes={shouldFill:a.a.bool},s.defaultProps={shouldFill:!1},t.a=s},3697:function(e,t,r){"use strict";t.a={PluginType:"audience_integration"}},3712:function(e,t,r){"use strict";var n=r(3713);r.d(t,"a",(function(){return n.a}));var a=r(3697);r.d(t,"b",(function(){return a.a}));var i=r(1382),o=r(1390);n.a,a.a,i.a,o.a},3713:function(e,t,r){"use strict";var n=r(36),a=r(3),i=r(14),o=r(3761),s=r(3697),c=r(1382),l=n.default.createEntityActions(c.a);t.a=Object.assign({},l,{fetchCustomAudienceIntegrationDataForProject:function fetchCustomAudienceIntegrationDataForProject(e){var t=this;return this.fetchAll({project_id:e,archived:!1,is_enabled_in_client:!0,plugin_type:s.a.PluginType}).then((function(){var e=t.__getEnabledCustomAudienceIntegrationIds(),r={};return e.forEach((function(e){r[e]=o.a.fetchAll({integration_id:e})})),r}))},__getEnabledCustomAudienceIntegrationIds:function __getEnabledCustomAudienceIntegrationIds(){return a.default.evaluateToJS(i.getters.enabledCustomAudienceIntegrations).map((function(e){return e.id}))}})},3714:function(e,t,r){"use strict";var n=r(36),a=r(1405),i=n.default.createEntityActions(a.a);t.a=Object.assign({},i)},3715:function(e,t,r){"use strict";r.r(t);var n,a,i,o=r(1),s=r.n(o),c=r(0),l=r.n(c),u=r(134),p=r(98),f=r(19),d=r(71),m=r(2),y=r(5),h=r(3),b=r(28),g=r(871),v=r(43),_=r(49),E=r(38),S=r(50),O=r(23),R=r(20),P=r(157),C=r(128),w=r(215),T=r(3747),x=r.n(T),k=r(39),I=r(34),j=r(209),A=r(556),N=r(884);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=(n=Object(b.a)((function(e){return{canUseOutlierFiltering:[v.getters.accountPermissions,E.getters.layer,_.fns.canUseOutlierFiltering],canUseStatsAccelerator:k.default.canUseStatsAccelerator,currentLayerABExperimentTrafficAllocationPolicy:E.getters.currentLayerABExperimentTrafficAllocationPolicy,currentLayerUsesManualTrafficAllocationPolicyOnly:E.getters.currentLayerUsesManualTrafficAllocationPolicyOnly,outlierFilter:w.b.getters.outlierFilter,workingMetricWrappers:w.b.getters.workingMetricWrappers}})),Object(g.b)(a=Object(d.withTrack)(a=n(((i=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MetricsManager,e);var t=_createSuper(MetricsManager);function MetricsManager(e){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MetricsManager),(r=t.call(this,e)).beforeLeave=function(){return C.actions.confirmNavigation(r.isDirty(),"experiment")},r.createEventAction=function(e,t){if(r.props.useFullstackCreateDialog)return C.actions.showFullstackEventConfigDialog(e,t);y.default.showReactDialog(A.a,{props:{onSave:t,clickEventsDisabled:!0}},{isOuiDialog:!0,fullScreen:!0,dismissOnBack:!0})},r.finishEditingMetric=function(){r.setState({isEditingMetric:!1})},r.isDirty=function(){var e=r.props,t=e.canUseOutlierFiltering,n=e.layer,a=e.metricWrappers,i=e.outlierFilter,o=e.workingMetricWrappers,s=a.map((function(e){return e.get("metric")})),c=o.map((function(e){return e.get("metric")})),l=!!t&&!m.default.is(i,w.b.fns.getOriginalOutlierFilter(n));return!m.default.is(s,c)||l},r.isAbsenceOfPrimaryMetricAndTrafficAllocationPolicyCombinationValid=function(){var e=r.props,t=e.currentLayerUsesManualTrafficAllocationPolicyOnly;return e.workingMetricWrappers.getIn([0,"metric"])||t},r.isPrimaryMetricAndTrafficAllocationPolicyCombinationValid=function(){var e=r.props,t=e.currentLayerABExperimentTrafficAllocationPolicy,n=e.layer,a=e.workingMetricWrappers;if(!t||O.fns.isPersonalizationLayer(n))return!0;var i=a.getIn([0,"metric"]);return R.fns.allocationPolicyAndSelectedPrimaryMetricAreValid(t,i)},r.saveLayerAction=function(){var e=r.props,t=e.canUseOutlierFiltering,n=e.layer,a=e.metricWrappers,i=e.outlierFilter,o=e.workingMetricWrappers,s=o.map((function(e){var t=e.get("metric"),r=P.b.getAggregatorSelected(t),n=P.a.aggregationOperations[r].aggregator;return t.set("aggregator",n).toJS()})),c={id:n.get("id"),metrics:s};return t&&(c.outlier_filter=i),O.actions.save(c).then((function(e){var t=P.b.createMetricWrappers(Object(m.toImmutable)(e.metrics),Object(m.toImmutable)(e),h.default.evaluate(I.getters.entityCache),h.default.evaluate(S.getters.entityCache));w.b.actions.updateWorkingMetricWrappers(t);var r=a.filter((function(e){return!o.some((function(t){return t.get("alias")===e.get("alias")}))})),n=m.default.List();r.forEach((function(e){var t=e.getIn(["metric","event_id"]),r=h.default.evaluate(S.getters.byId(t));if(r&&r.get("variation_specific")){var a=o.some((function(e){return e.getIn(["metric","event_id"])===t})),i=n.some((function(e){return e.get("id")===t}));a||i||(n=n.push(r))}})),n.forEach((function(e){S.actions.archive(e.toJS())}))}))},r.saveLayerMetrics=function(){var e=r.props,t=e.canSaveEmptyMetrics,n=e.experiment,a=e.isDialog,i=e.onSave,o=e.requeryResults,s=e.shouldSaveOnConfirm,c=e.shouldShowSaveNotification,l=e.track,u=e.workingMetricWrappers,p=((null==n?void 0:n.get("environments"))||[]).reduce((function(e,t){return _extends({},e,function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t.get("environment_name"),t.get("status")))}),{});if(s){if(!t&&!u.size){var f="Please add at least one metric to this campaign.";return r.setState({error:f}),void y.default.showNotification({message:f,type:"error"})}r.setState({error:null}),r.saveLayerAction().then(i).then((function(){o&&o((function(){})),c&&y.default.showNotification({message:tr("Your changes have been saved.")}),a&&y.default.hideDialog(),l("Metrics Manager Edits Saved",{environmentsStatus:p,experimentId:null==n?void 0:n.get("id")})}))}else a&&y.default.hideDialog()},r.startEditingMetric=function(){r.setState({isEditingMetric:!0})},r.undoChanges=function(){var e=r.props,t=e.canUseOutlierFiltering,n=e.isDialog,a=e.layer,i=e.metricWrappers;r.setState({error:null}),w.b.actions.updateWorkingMetricWrappers(i),t&&w.b.actions.setOriginalOutlierFilter(a),n&&y.default.hideDialog()},e.setBeforeLeave(r.beforeLeave),r.state={error:null,isEditingMetric:!1},r}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MetricsManager,[{key:"render",value:function render(){var e=this.props,t=e.canUpdateLayer,r=(e.canUseStatsAccelerator,e.containerFn),n=e.isDialog,a=e.layer,i=e.metricWrappers,o=e.shouldSaveOnConfirm,s=this.state,c=s.error,d=s.isEditingMetric,m=!this.isDirty()&&!n||d,y=!this.isDirty()||d||!t||!this.isAbsenceOfPrimaryMetricAndTrafficAllocationPolicyCombinationValid()||!this.isPrimaryMetricAndTrafficAllocationPolicyCombinationValid();return l.a.createElement("div",{className:"flex--1 overflow-y--auto"},l.a.createElement("div",{className:"reading-column"},l.a.createElement("div",{className:"push-double--bottom"},l.a.createElement("div",{className:"flex align-items-baseline"},l.a.createElement("h1",null,"Metrics"),l.a.createElement(x.a,null)),!O.fns.isMultiArmedBandit(a)&&l.a.createElement("p",{"data-test-section":"metrics-picker-title"},"Create one or more metrics for this campaign. Choose a primary metric that best determines your campaignâ€™s success. Secondary metrics help gather additional insights but may take longer to achieve statistical significance.",l.a.createElement("span",null),l.a.createElement("a",{href:"https://help.optimizely.com/Ideate_and_Hypothesize/Set_primary%2C_secondary%2C_and_monitoring_metrics",target:"_blank",rel:"noopener noreferrer"}," Learn More")),O.fns.isMultiArmedBandit(a)&&l.a.createElement("p",{"data-test-section":"metrics-picker-title"},"Add one or more metrics and define a primary metric.")),l.a.createElement(N.a,{containerFn:r,createEvent:this.createEventAction,layer:a,metricWrappers:i,onEditMetric:this.startEditingMetric,onEditMetricFinish:this.finishEditingMetric}),c&&l.a.createElement("div",{className:"color--bad-news micro push--top","data-test-section":"metrics-manager-error-message"},c),!this.isPrimaryMetricAndTrafficAllocationPolicyCombinationValid()&&l.a.createElement("div",{className:"push-double--top push--bottom"},l.a.createElement(u.a,{alignment:"center",testSection:"traffic-automation-configuration-error",type:"bad-news"},l.a.createElement("div",null,l.a.createElement("strong",null,"Stats Accelerator works best with Unique Conversions"),l.a.createElement("p",null,"In an Experiment, Stats Accelerator requires a Primary Metric that tracks Unique Conversions. Unique conversion rates are more stable and make Stats Accelerator predictions of statistical significance more reliable. If youâ€™d like to use Stats Accelerator, use a Primary Metric that tracks Unique Conversions.",l.a.createElement("a",{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/Stats_Accelerator",target:"_blank",rel:"noopener noreferrer"}," ","Learn more")," ","about why this is best.")))),l.a.createElement("div",{className:"lego-form__footer"},l.a.createElement(p.a,{rightGroup:[l.a.createElement(f.a,{isDisabled:m,key:"cancel",onClick:this.undoChanges,style:"plain",testSection:"metrics-manager-undo-button"},n?"Cancel":"Revert"),l.a.createElement(f.a,{isDisabled:y,key:"save",onClick:this.saveLayerMetrics,style:"highlight",testSection:"metrics-manager-save-button"},o?"Save":"Update")]}))))}}]),MetricsManager}(l.a.Component)).propTypes={canSaveEmptyMetrics:s.a.bool.isRequired,canUpdateLayer:s.a.bool,canUseOutlierFiltering:s.a.bool,canUseStatsAccelerator:s.a.bool.isRequired,containerFn:s.a.func,currentLayerABExperimentTrafficAllocationPolicy:s.a.oneOf([j.TrafficAllocationPolicyTypes.MANUAL,j.TrafficAllocationPolicyTypes.MAXIMIZE_CONVERSIONS,j.TrafficAllocationPolicyTypes.MINIMIZE_TIME]),currentLayerUsesManualTrafficAllocationPolicyOnly:s.a.bool,experiment:s.a.instanceOf(m.default.Map),isDialog:s.a.bool,layer:s.a.instanceOf(m.default.Map).isRequired,metricWrappers:s.a.instanceOf(m.default.List).isRequired,onSave:s.a.func,outlierFilter:s.a.instanceOf(m.default.Map).isRequired,requeryResults:s.a.func,shouldSaveOnConfirm:s.a.bool.isRequired,shouldShowSaveNotification:s.a.bool,track:s.a.func,useFullstackCreateDialog:s.a.bool,workingMetricWrappers:s.a.instanceOf(m.default.List)},i.defaultProps={canUpdateLayer:!0,containerFn:function containerFn(){return document.body},isDialog:!1,onSave:function onSave(){},requeryResults:function requeryResults(){},shouldShowSaveNotification:!1,track:function track(){},useFullstackCreateDialog:!1},a=i))||a)||a)||a);t.default=D},3727:function(e,t,r){"use strict";var n=r(3728);function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,a,_next,_throw,"throw",e)}_next(void 0)}))}}function setHeaders(){return new Headers({Accept:"application/json","Content-Type":"application/json"})}function _makeGetRequest(){return(_makeGetRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee(e,t){var r,a,i;return regeneratorRuntime.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return r={method:"GET",headers:t,mode:"cors",credentials:"include"},a="https://".concat(n.a.API_HOST,"/").concat(e),o.next=4,fetch(a,r);case 4:return i=o.sent,o.abrupt("return",i.json());case 6:case"end":return o.stop()}}),_callee)})))).apply(this,arguments)}function _makePostRequest(){return(_makePostRequest=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(e,t,r){var a,i,o;return regeneratorRuntime.wrap((function _callee2$(s){for(;;)switch(s.prev=s.next){case 0:return a={method:"POST",headers:r,mode:"cors",credentials:"include",body:t},i="https://".concat(n.a.API_HOST,"/").concat(e),s.next=4,fetch(i,a);case 4:return o=s.sent,s.abrupt("return",o);case 6:case"end":return s.stop()}}),_callee2)})))).apply(this,arguments)}t.a={registerExperiment:function registerExperiment(e){var t=e.accountId,r=e.experimentId,n=e.projectId,a=e.variationProbabilities,i=setHeaders();i.append("Account",t),i.append("Project",n);var o=JSON.stringify({variation_probabilities:a});return function makePostRequest(e,t,r){return _makePostRequest.apply(this,arguments)}("ssrm/v0/experiments/".concat(r),o,i)},getSSRMResults:function getSSRMResults(e,t,r){var n=setHeaders();return n.append("Account",e),n.append("Project",r),function makeGetRequest(e,t){return _makeGetRequest.apply(this,arguments)}("ssrm/v0/experiments/".concat(t,"/results"),n)}}},3728:function(e,t,r){"use strict";t.a={API_HOST:"api-k8s.app.optimizely.com"}},3747:function(e,t,r){var n=r(0),a=r(16).HelpPopover;e.exports=function MetricsPopover(){return n.createElement(a,{horizontalAttachment:"left",popoverTitle:"What is a metric?",testSection:"metrics-help-popover-btn",verticalAttachment:"top"},n.createElement("p",null,"A metric is a quantitative measurement of a visitor action. Metrics allow you to measure the performance of your campaigns or experiments."),n.createElement("p",null,"While events track the actions that a visitor takes, such as form submissions and purchases, metrics allow you to express these actions in a quantitative manner. Metrics are computed from events."),n.createElement("a",{target:"_blank",href:"https://help.optimizely.com/Measure_success%3A_Track_visitor_behaviors/Build_metrics_in_Optimizely_X_Web",rel:"noopener noreferrer"},"Learn more"))}},3761:function(e,t,r){"use strict";var n=r(3714);r.d(t,"a",(function(){return n.a}));var a=r(1391);n.a,a.a},3785:function(e,t,r){"use strict";var n=r(59),a=r.n(n),i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=function LastUpdated(e){var t=e.endDate;return c.a.createElement("div",{className:"text--right muted zeta weight--normal"},"Results last updated: ".concat(a()(t).format("LL")," at ").concat(a()(t).format("LT")))};l.propTypes={endDate:o.a.oneOfType([o.a.string,o.a.number]).isRequired},t.a=l},3786:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(2),u=r(190),p=r(28),f=r(20),d=r(1378),m=r(3674),y=r(4113);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=Object(p.a)({currencyType:m.e.currencyType,differenceType:m.e.differenceType,selectedExperiment:m.e.selectedExperiment})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(LiftCell,e);var t=_createSuper(LiftCell);function LiftCell(){return _classCallCheck(this,LiftCell),t.apply(this,arguments)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(LiftCell,[{key:"render",value:function render(){var e=this.props,t=e.currencyType,r=e.differenceType,n=e.differenceTypeOverride,a=e.lift,i=e.metricWrapper,o=e.selectedExperiment,s=e.showHoverState;if(a&&a.value&&f.fns.shouldShowDataOnResultsPage(o)){var l=c.a.createElement("span",null,function getLiftValueForMetric(e,t,r,n,a){var i=function formatFunction(e){return e},o=m.b.currencies[a],s=m.d.shouldPreserveDecimalValue(a,!0);if(e){var c=n||r;i=m.d.getLiftFormatFunction(e,c)}if(t&&t.value){var l=t.value;return r===d.b.DIFFERENCE_TYPES.ABSOLUTE&&n===d.b.DIFFERENCE_TYPES.RELATIVE&&t.valueScaled&&(l=t.valueScaled),i(l,!1,o,s)}return null}(i,a,r,n,t));if(s){var p=n||r;return c.a.createElement(u.a,{trigger:"mouseenter",content:p===d.b.DIFFERENCE_TYPES.RELATIVE?"Relative value":"Absolute value",position:"right"},l)}return l}return c.a.createElement(y.a,null)}}]),LiftCell}(c.a.Component)).propTypes={currencyType:o.a.oneOf(Object.keys(m.b.currencyTypes)),differenceType:d.b.DIFFERENCE_TYPE_PROP.isRequired,differenceTypeOverride:d.b.DIFFERENCE_TYPE_PROP,lift:d.b.LIFT_SHAPE,metricWrapper:o.a.instanceOf(l.default.Map).isRequired,selectedExperiment:o.a.instanceOf(l.default.Map).isRequired,showHoverState:o.a.bool},a.defaultProps={currencyType:m.b.currencyTypes.DOLLAR,differenceTypeOverride:null,lift:null,showHoverState:!1},n=a))||n;t.a=h},3787:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=function PageTitle(e){var t,r=e.pageType,n=void 0===r?"ab":r,a=e.rightSideContent,i=void 0===a?null:a;switch(n){case"p13n_overview":t="Campaign";break;case"p13n_individual":t="Experience";break;case"multiarmed_bandit":t="Multi-Armed Bandit";break;default:t="Experiment"}return o.a.createElement("div",{className:"soft--top push-double--sides push-double--top flex flex--row flex-align--center"},o.a.createElement("h1",{className:"flex--1","data-test-section":"results-page-title"},t," Results"),i)};s.propTypes={pageType:a.a.oneOf(["ab","multiarmed_bandit","mvt","p13n_individual","p13n_overview"]),rightSideContent:a.a.node},s.defaultProps={pageType:"ab",rightSideContent:null},t.a=s},3788:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=_createClass((function ResultsQueryChangeEmitter(){var e=this;_classCallCheck(this,ResultsQueryChangeEmitter),this.execFns=function(){for(;e.requeryFns.length>0;)e.requeryFns.shift()();e.operations=[]},this.addFn=function(t,r){e.requeryFns.push(t),e.operations.push(r)},this.destroy=function(){delete e.requeryFns,delete e.onQueryFn},this.onQuery=function(t){if(e.onQueryFn)throw new Error("Query function already defined");e.onQueryFn=t},this.requeryFns=[],this.operations=[],this.onQueryFn=null,this.execQuery=function(){e.onQueryFn(e.execFns,e.operations)}}));t.a=function resultsContext(e){var t;return(t=function(t){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(_class,t);var r=_createSuper(_class);function _class(){var e;_classCallCheck(this,_class);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).requeryResults=function(t,r){_assertThisInitialized(e)&&e._emitter&&(e._emitter.addFn(t,r),e._emitter.execQuery())},e}return _createClass(_class,[{key:"getChildContext",value:function getChildContext(){return{requeryResults:this.requeryResults}}},{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){this._emitter=new s}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._emitter.destroy(),delete this._emitter}},{key:"render",value:function render(){return o.a.createElement(e,_extends({resultsQueryChangeEmitter:this._emitter},this.props))}}]),_class}(o.a.Component)).displayName="ResultsContext",t.childContextTypes={requeryResults:a.a.func},t}},3789:function(e,t,r){"use strict";var n,a,i,o=r(59),s=r.n(o),c=r(1),l=r.n(c),u=r(0),p=r.n(u),f=r(245),d=r(71),m=r(95),y=r(2),h=r(3),b=r(35),g=r(5),v=r(28),_=r(24),E=r(142),S=r.n(E),O=r(374),R=r(3674),P=r(14),C=r(38),w=r(83),T=r(1378),x=r(50),k=r(3876),I=r(3821),j=r(34),A=r(4758);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=(n=Object(v.a)({andOrSegmentCondition:R.c.getters.andOrSegmentCondition,campaignTimerange:T.d.campaignTimerange,currencyType:R.c.getters.currencyType,currentLayer:C.getters.layer,currentLayerLiveCommitTag:C.getters.liveCommitTag,currentLayerShareLink:R.c.getters.currentLayerShareLink,currentLayerShareToken:C.getters.shareToken,currentProject:P.getters.project,eventsMap:x.getters.entityCache,isCleaningResults:R.c.getters.getIsCleaningResultsFilters,isFlagsProject:P.getters.isFlagsProject,isFullStackProject:P.getters.isFullStackProject,isRestrictDaterangeFeatureEnabled:O.a.isFeatureEnabled(m.b.FEATURES.restricts_daterange.FEATURE_KEY),metricWrappers:C.getters.currentLayerMetricWrappers,segmentCondition:R.c.getters.segmentCondition,selectedExperiment:R.c.getters.selectedExperiment,selectedSection:R.c.getters.selectedSection,selectedSegmentIds:R.c.getters.selectedSegmentIds,selectedSegments:R.c.getters.selectedSegments,selectedSegmentsForDisplay:I.a.segments,selectedTimerange:[R.c.getters.timerange,y.toJS],selectedVariation:R.c.getters.selectedBaselineVariation,variations:C.getters.variationsFromAllExperimentsPointingToLayer,viewsMap:j.getters.entityCache}),Object(d.withTrack)(a=n(((i=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ResultsToolbarContainer,e);var t=_createSuper(ResultsToolbarContainer);function ResultsToolbarContainer(e){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsToolbarContainer),(r=t.call(this,e)).handleResetResults=function(){r.onSelectedTimerangeChange(h.default.evaluate(T.d.campaignTimerange))},r.onMetricChange=function(e){(0,r.context.requeryResults)((function(){R.c.actions.setSelectedMetric(e,!0)}))},r.onSectionChange=function(e){var t=h.default.evaluate(P.getters.id),r=h.default.evaluate(C.getters.id),n=h.default.evaluate(R.c.getters.selectedExperimentId),a=S()(window.location.search);delete a[R.c.constants.queryParams.BASELINE_VARIATION_ID],e.id===R.c.constants.allCombinationsSection.id?(R.c.actions.clearSelectedSectionId(),b.default.go(_.default.layerExperimentResults(t,r,n,a))):b.default.go(_.default.mvtRollupResults(t,n,e.id,a))},r.onSegmentConditionChange=function(){(0,r.context.requeryResults)((function(){}))},r.onSelectedTimerangeChange=function(e){var t=e.begin,n=e.end,a=r.props,i=a.track,o=a.isRestrictDaterangeFeatureEnabled,c=r.context.requeryResults,l=s()(t),u=s()(n);o&&f.a.track(m.b.EVENTS.click_calendar_open,{attributes:{begin:new Date(l).toUTCString(),end:new Date(u).toUTCString()},eventTags:{begin:new Date(l).toUTCString(),end:new Date(u).toUTCString()}}),i("Results Date Range Applied",{numberOfDays:u.diff(l,"days")+1}),c((function(){var e=h.default.evaluate(T.d.campaignTimerange),r=new Date(e.begin).getTime(),a=new Date(e.end).getTime();R.c.actions.setTimerange(t<r?r:t,n>a?a:n,!0)}))},r.onBaselineChange=function(e){var t=r.props.track,n=r.context.requeryResults;t("Results Baseline Applied"),n((function(){R.c.actions.setSelectedVariation(e,!0)}))},r.onClearAllClick=function(){var e=r.props,t=e.currentLayer,n=e.variations,a=r.context.requeryResults,i=w.default.isPersonalizationLayer(t)?R.c.constants.holdbackVariation:n.get(0).toJS(),o=t.get("metrics").get(0);R.c.actions.setSelectedVariation(i),R.c.actions.setSelectedMetric(o);var s=R.c.actions.getURLWithoutFilters();b.default.go(s),R.c.actions.setDefaults(),a((function(){R.c.actions.setInitialTimerange(),R.c.actions.clearSelectedSegments(),k.a.reset()}))},g.default.$on(R.c.constants.emittedEventTypes.RESET_RESULTS,r.handleResetResults),r}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ResultsToolbarContainer,[{key:"componentWillUnmount",value:function componentWillUnmount(){g.default.$off(R.c.constants.emittedEventTypes.RESET_RESULTS,this.handleResetResults)}},{key:"render",value:function render(){var e=this.props,t=e.campaignTimerange,r=e.selectedTimerange;return t&&r?p.a.createElement(A.a,_extends({},this.props,{onUpdateIsCleaningFilterResultsToFalse:R.c.actions.updateIsCleaningFilterResultsToFalse,onClearAllClick:this.onClearAllClick,onMetricChange:this.onMetricChange,onSegmentChange:this.onSegmentConditionChange,onSelectedTimerangeChange:this.onSelectedTimerangeChange,onBaselineChange:this.onBaselineChange,onSectionChange:this.onSectionChange})):p.a.createElement("div",{className:"toolbar height--50","data-test-section":"empty-results-header"})}}]),ResultsToolbarContainer}(p.a.Component)).propTypes={campaignTimerange:l.a.shape({begin:l.a.number.isRequired,end:l.a.number.isRequired}).isRequired,currencyType:l.a.oneOf(Object.keys(R.c.constants.currencyTypes)).isRequired,currentLayer:l.a.instanceOf(y.default.Map).isRequired,currentLayerLiveCommitTag:l.a.instanceOf(y.default.Map).isRequired,isRestrictDaterangeFeatureEnabled:l.a.bool.isRequired,selectedTimerange:l.a.shape({begin:l.a.number.isRequired,end:l.a.number.isRequired}).isRequired,track:l.a.func,variations:l.a.instanceOf(y.default.List).isRequired},i.defaultProps={track:function track(){}},i.contextTypes={vueEvents:l.a.object.isRequired,requeryResults:l.a.func.isRequired},a=i))||a)||a);t.a=N},3790:function(e,t,r){"use strict";r.d(t,"a",(function(){return ExperimentBanner}));var n=r(0),a=r.n(n),i=r(1),o=r.n(i),s=r(40),c=r(134),l=r(31),u=r(2);function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}(e,t)||function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=a.a.createElement(s.a,{href:"https://support.optimizely.com/hc/en-us/articles/4410289080077-Events-from-paused-experiments-stopped-variations-and-archived-experiments",newWindow:!0},"learn more"),f=a.a.createElement(a.a.Fragment,null,"Archived results are snapshots of the experiment at the time of archival, some features are limited, ",p,"."),d=a.a.createElement(a.a.Fragment,null,"Our architecture has been updated. We don't anticipate you will notice any changes, but if you notice something out of the ordinary please"," ",a.a.createElement(s.a,{href:"https://forms.office.com/Pages/ResponsePage.aspx?id=eQ3APhoC1EKqyNyzWXPf8v6Kprci8qxFs3CmCikLcSNUMUdOWTlUN05FMFRITlZXNzhOMjg0UzA3Vy4u",newWindow:!0},"reach out"," "),"to us or ",p," about the update.");function ExperimentBanner(e){var t=e.currentLayer,r=e.isFlagsProject,i=Object(l.isFeatureEnabled)("disable_unarchive_experiment"),o=Object(l.isFeatureEnabled)("results_architecture_banner"),s=t.get("archived")&&!r,u=s?f:d,p=s?i:o,m=_slicedToArray(Object(n.useState)(!0),2),y=m[0],h=m[1];return p&&y?a.a.createElement(c.a,{alignment:"left",type:"warning",onDismiss:function onDismiss(){return h(!1)}},u):null}ExperimentBanner.propTypes={currentLayer:o.a.instanceOf(u.default.Map).isRequired,isFlagsProject:o.a.bool},ExperimentBanner.defaultProps={isFlagsProject:!1}},3825:function(e,t,r){"use strict";var n=r(0),a=r.n(n),i=r(134),o=r(40);function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return i}(e,t)||function _unsupportedIterableToArray(e,t){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.a=function FDRDisabledNotification(){var e=_slicedToArray(Object(n.useState)(!0),2),t=e[0],r=e[1];return t?a.a.createElement(i.a,{alignment:"center",onDismiss:function onDismiss(){return r(!1)},testSection:"fdr-disabled-notification",type:"warning"},"Segments and filters should only be used for data exploration, not making decisions."," ",a.a.createElement(o.a,{href:"https://help.optimizely.com/Analyze_Results/Statistical_significance_in_Optimizely#Segmentation_and_statistical_significance",newWindow:!0},"Learn more")):null}},3826:function(e,t,r){"use strict";var n,a,i,o=r(1),s=r.n(o),c=r(0),l=r.n(c),u=r(273),p=r(19),f=r(40),d=r(31),m=r(4),y=r(71),h=r(2),b=r(28),g=r(3683),v=r(4112),_=r(3674),E=r(20),S=r(1378),O=r(4753);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=(n=Object(b.a)({differenceType:_.e.differenceType,epochEnabled:_.e.epochEnabled,selectedExperiment:_.e.selectedExperiment}),Object(y.withTrack)(a=n(((i=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MetricCards,e);var t=_createSuper(MetricCards);function MetricCards(){var e;_classCallCheck(this,MetricCards);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={metricCardStates:{},isExpandAllButtonDisabled:!1,isCollapseAllButtonDisabled:!0},e.isResultsPageRedesignEnabled=Object(d.isFeatureEnabled)("results_page_redesign"),e.handleGraphStateChange=function(t){var r=t.metricWrapper,n=t.showGraph,a=t.selectedChartType,i=e.props,o=i.timeseriesDataByMetricAlias,s=i.timeseriesDataFetchFn,c=r.get("alias"),l=o[c];n&&!l&&s(r);var u=e.state.metricCardStates;u[c]=_extends({},u[c],{showGraph:n,selectedChartType:a}),e.setState({metricCardStates:u})},e.handleDiscloseStateChange=function(t){var r=t.metricWrapper,n=t.isOpen,a=r.get("alias"),i=e.state.metricCardStates,o=Object(m.cloneDeep)(i);o[a]=_extends({},i[a],{isOpen:n}),e.setState({metricCardStates:o})},e.expandAllMetrics=function(){var t=e.state.metricCardStates,r=e.props.track,n=Object.keys(t).reduce((function(e,r){var n=t[r];return e[r]=_extends({},n,{isOpen:!n.isPrimary||n.isOpen}),e}),{});e.isResultsPageRedesignEnabled&&r("Results All Secondary Metrics Expanded"),e.setState({metricCardStates:n})},e.collapseAllMetrics=function(){var t=e.state.metricCardStates,r=e.props.track,n=Object.keys(t).reduce((function(e,r){var n=t[r];return e[r]=_extends({},n,{isOpen:!!n.isPrimary&&n.isOpen}),e}),{});e.isResultsPageRedesignEnabled&&r("Results All Secondary Metrics Collapsed"),e.setState({metricCardStates:n})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MetricCards,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t=this.props,r=t.metricWrappers,n=t.selectedExperiment,a=r.reduce((function(t,r){var a=r.get("alias"),i=r.get("isPrimary");return t[a]={selectedChartType:E.fns.shouldShowDataOnResultsPage(n)?_.b.chartType.IMPROVEMENT:_.b.chartType.SAMPLES,showGraph:e.isResultsPageRedesignEnabled&&i,isOpen:i,isPrimary:i},t}),{});this.setState({metricCardStates:a})}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){var r=this.props.metricWrappers,n=this.state.metricCardStates,a=Object.values(n).filter((function(e){return e.isOpen&&!e.isPrimary})).length;a!==Object.values(t.metricCardStates).filter((function(e){return e.isOpen&&!e.isPrimary})).length&&(a===r.filter((function(e){return!e.get("isPrimary")})).length?this.setState({isExpandAllButtonDisabled:!0}):this.setState({isExpandAllButtonDisabled:!1}),0===a?this.setState({isCollapseAllButtonDisabled:!0}):this.setState({isCollapseAllButtonDisabled:!1}))}},{key:"render",value:function render(){var e=this,t=this.props,r=t.canUpdateLayer,n=t.differenceType,a=t.epochEnabled,i=t.isEmpty,o=t.isLoading,s=t.currentLayer,c=t.selectedExperiment,d=t.metricWrappers,m=t.metricResults,y=t.variations,b=t.timeseriesDataFetchFn,v=t.timeseriesDataByMetricAlias,R=!1;m&&(R=d.toJS().some((function(e){return!m.metrics.some((function(t){return t.alias===e.alias}))})));var P=this.state,C=P.metricCardStates,w=P.isExpandAllButtonDisabled,T=P.isCollapseAllButtonDisabled;if(o||!m||R)return l.a.createElement("div",{className:"flex--dead-center push-quad--top push-triple--bottom"},l.a.createElement(g.a,null));var x=Object(h.toImmutable)({}).withMutations((function(e){y.forEach((function(t){e.set(String(t.get("variation_id")),t)}))}));if(i){var k=d.map((function(t){return l.a.createElement(O.a,{canUpdateLayer:r,conclusion:null,key:t.get("alias"),isEmpty:i,onGraphStateChange:e.handleGraphStateChange,refreshTimeseries:b,currentLayer:s,metricWrapper:t,outlierFiltered:!1,overviewData:null,variationNamesMap:x,timeseriesData:null,variations:y})}));return l.a.createElement("div",null,k)}var I=function getMetricWrapper(e){return d.find((function(t){return t.get("alias")===e.alias}))},j=function isPrimaryMetric(e){return e.get("isPrimary")},A=function createCard(t,o){var u=function getCardData(t){var r,i=I(t);i&&(r=C[i.get("alias")]),r||(r={selectedChartType:E.fns.shouldShowDataOnResultsPage(c)?_.b.chartType.IMPROVEMENT:_.b.chartType.SAMPLES,showGraph:e.isResultsPageRedesignEnabled&&i.get("isPrimary"),isOpen:i.get("isPrimary")});var o=n===S.b.DIFFERENCE_TYPES.ABSOLUTE&&a&&j(i),s=v[i.get("alias")];return{metricWrapper:i,cardState:r,isEditButtonDisabled:o,timeseriesData:s}}(t),p=u.metricWrapper,f=u.cardState,d=u.isEditButtonDisabled,m=u.timeseriesData;return l.a.createElement(O.a,{canUpdateLayer:r,conclusion:t.conclusion,editButtonDisabled:d,key:p.get("alias"),isEmpty:i,isOpen:f.isOpen,showGraph:f.showGraph,selectedChartType:f.selectedChartType,selectedExperiment:c,onDiscloseStateChange:e.handleDiscloseStateChange,onGraphStateChange:e.handleGraphStateChange,refreshTimeseries:b,currentLayer:s,metricIndex:o,metricWrapper:p,outlierFiltered:t.outlierFiltered,overviewData:t.results,variationNamesMap:x,timeseriesData:m,variations:y})},N=m.metrics.map(A),D=m.metrics.filter((function(e){var t=I(e);return!!j(t)})).map((function(e){return _extends({},e,{isOpen:!0})})).map(A)[0],M=m.metrics.filter((function(e){var t=I(e);return!j(t)})).map((function(e){return _extends({},e,{isOpen:!1})})).map(A);return this.isResultsPageRedesignEnabled?l.a.createElement("div",{className:"metrics-cards"},l.a.createElement(u.a,{tag:"h4",type:"header4"},"Primary Metric"),D,M.length?l.a.createElement(l.a.Fragment,null,l.a.createElement(u.a,{tag:"h4",type:"header4"},"Secondary Metrics"),l.a.createElement("div",{className:"flex flex-align--left push-double--bottom"},l.a.createElement(p.a,{style:"unstyled",onClick:this.expandAllMetrics,isDisabled:w},l.a.createElement(f.a,{className:"milli",isDisabled:w},"Expand all")),l.a.createElement("span",{className:"display--inline-block push--sides milli"}," ","|"," "),l.a.createElement(p.a,{style:"unstyled",onClick:this.collapseAllMetrics,isDisabled:T},l.a.createElement(f.a,{className:"milli",isDisabled:T},"Collapse all"))),M):null):l.a.createElement("div",null,N)}}]),MetricCards}(l.a.Component)).propTypes={canUpdateLayer:s.a.bool.isRequired,currentLayer:s.a.object.isRequired,differenceType:S.b.DIFFERENCE_TYPE_PROP.isRequired,epochEnabled:s.a.bool.isRequired,isEmpty:s.a.bool.isRequired,isLoading:s.a.bool.isRequired,metricResults:v.b.isRequired,metricWrappers:s.a.instanceOf(h.default.List).isRequired,selectedExperiment:s.a.instanceOf(h.default.Map).isRequired,timeseriesDataByMetricAlias:s.a.object.isRequired,timeseriesDataFetchFn:s.a.func.isRequired,track:s.a.func,variations:s.a.instanceOf(h.default.List).isRequired},i.defaultProps={track:function track(){}},a=i))||a)||a);t.a=R},3827:function(e,t,r){"use strict";var n,a,i=r(0),o=r.n(i),s=r(1),c=r.n(s),l=r(2),u=r(223),p=r(222),f=r(40),d=r(28),m=r(192),y=r.n(m),h=r(3674),b=r(3875);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=Object(d.a)({appliedAndOrSegmentCondition:b.b.andOrSegmentCondition,appliedSegments:b.b.segments,andOrSegmentCondition:h.e.andOrSegmentCondition,segments:h.e.selectedSegments})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(SegmentDisplay,e);var t=_createSuper(SegmentDisplay);function SegmentDisplay(e){var r;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SegmentDisplay),r=t.call(this,e);var n=e.andOrSegmentCondition,a=e.segments;return b.a.setSegmentConditions(n,a),r}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(SegmentDisplay,[{key:"render",value:function render(){var e,t=this.props,r=t.appliedAndOrSegmentCondition,n=t.appliedSegments;if(!n.size)return null;var a=h.d.formatSegmentValues(n);if(e="".concat(a.first()),a.size>1&&(e="".concat(e," ").concat(r," ").concat(a.size-1," more attribute value").concat(2===a.size?"":"s")),1===a.size)return o.a.createElement("span",{alt:e,className:"muted",title:e},"Â for ",y()(e,60));var i=o.a.createElement(u.a,null,o.a.createElement("div",null,a&&a.join(" ".concat(r," "))));return o.a.createElement(p.a,{overlay:i,verticalAttachment:"bottom",verticalTargetAttachment:"top"},o.a.createElement("span",{className:"push-half--left"},o.a.createElement(f.a,null," for ".concat(e))))}}]),SegmentDisplay}(o.a.Component)).propTypes={appliedAndOrSegmentCondition:c.a.oneOf(Object.values(h.b.AND_OR)),appliedSegments:c.a.instanceOf(l.default.List),andOrSegmentCondition:c.a.oneOf(Object.values(h.b.AND_OR)),segments:c.a.instanceOf(l.default.List)},a.defaultProps={appliedAndOrSegmentCondition:h.b.AND_OR.AND,appliedSegments:l.default.List(),andOrSegmentCondition:h.b.AND_OR.AND,segments:l.default.List()},n=a))||n;t.a=g},3895:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(2),u=r(59),p=r.n(u),f=r(28),d=r(186),m=r(228),y=r.n(m),h=r(37),b=r(352),g=r(66),v=r.n(g),_=r(13),E=r(22),S=r(56),O=r(665),R=r(3726),P=r(282),C=r(3683),w=r(4745),T=r(4111);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function MuteOperator(e){var t=e.input.map((function(e,t){return b.default.shouldStylizeAudienceConditionOperator(e)?c.a.createElement("span",{className:"muted style--italic",key:t},"".concat(e," ")):"".concat(e," ")}));return c.a.createElement("span",null,t)};x.propTypes={input:o.a.instanceOf(l.default.List).isRequired};var k=Object(f.a)({campaignTimerange:O.default.campaignTimerange,canResetResults:[_.default.project,E.default.canResetResults],currentLayer:v.a.layer,currentProject:_.default.project,isAdmin:h.default.isAdmin,liveCommitTag:v.a.liveCommitTag,selectedExperiment:R.a.selectedExperiment,viewsMap:P.default.entityCache,shareToken:v.a.shareToken})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ABResultsSidebar,e);var t=_createSuper(ABResultsSidebar);function ABResultsSidebar(){return _classCallCheck(this,ABResultsSidebar),t.apply(this,arguments)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ABResultsSidebar,[{key:"render",value:function render(){var e=this.props,t=e.canResetResults,r=e.currentLayer,n=e.currentProject,a=e.isAdmin,i=e.liveCommitTag,o=e.campaignTimerange,s=e.previousView,l=e.selectedExperiment,u=e.viewsMap,f=e.shareToken;if(o){var m=r.get("view_ids").map((function(e){return u.getIn([e,"name"])})),h=l.get("audienceLabels"),b=[{label:"Days Running",value:p()(o.end).diff(o.begin,"days")},{label:1===l.get("audiences").size?"Audience":"Audiences",value:c.a.createElement(x,{input:h})}];i&&b.unshift({label:"Last Published",value:y()(i.get("last_modified"))}),S.default.isCustomProject(n)||b.push({label:1===r.get("view_ids").size?"Page":"Pages",value:c.a.createElement(w.a,{items:m,joinText:"and"})}),void 0!==this.props.totalCount&&b.push({label:"Visitors",value:d.a.formatWholeNumber(this.props.totalCount)});var g=l.get("description");return g&&g.length&&b.push({label:"Description",title:g,value:g.length>150?"".concat(g.substring(0,150),"..."):g}),c.a.createElement(T.a,{canResetResults:t,currentLayer:r,currentProject:n,selectedExperiment:l,shareToken:f,campaignTimerange:o,isAdmin:a},c.a.createElement(T.b,{currentProject:n,currentLayer:r,details:b,isFullHeight:!0,previousView:s,showBackLink:!f,selectedExperiment:l,selectedExperimentId:l.get("id")}))}return c.a.createElement("div",{className:"background--light position--relative two-col__nav"},c.a.createElement(C.a,{shouldFill:!0}))}}]),ABResultsSidebar}(c.a.Component)).displayName="ABResultsSidebar",a.propTypes={campaignTimerange:o.a.shape({begin:o.a.number.isRequired,end:o.a.number.isRequired}).isRequired,canResetResults:o.a.bool.isRequired,currentProject:o.a.instanceOf(l.default.Map).isRequired,currentLayer:o.a.instanceOf(l.default.Map).isRequired,isAdmin:o.a.bool,liveCommitTag:o.a.instanceOf(l.default.Map),previousView:o.a.string,role:o.a.string,selectedExperiment:o.a.instanceOf(l.default.Map).isRequired,viewsMap:o.a.instanceOf(l.default.Map).isRequired,totalCount:o.a.number,shareToken:o.a.string},n=a))||n;t.a=k},3896:function(e,t,r){"use strict";var n,a,i,o=r(1),s=r.n(o),c=r(0),l=r.n(c),u=r(71),p=r(2),f=r(28),d=r(186),m=r(4112),y=r(38),h=r(20),b=r(1378),g=r(3674),v=r(4749),_=r(4752),E=r(3786),S=r(4114);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O="metric",R="row_name",P="sample_count",C=(n=Object(f.a)({currencyType:g.c.getters.currencyType,currentLayer:y.getters.layer,differenceType:g.c.getters.differenceType,epochEnabled:g.c.getters.epochEnabled,resultsFilteringEnabled:g.c.getters.resultsFilteringEnabled,selectedSectionId:g.c.getters.selectedSectionId}),Object(u.withTrack)(a=n(((i=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ExperimentPerformanceSummary,e);var t=_createSuper(ExperimentPerformanceSummary);function ExperimentPerformanceSummary(){var e;_classCallCheck(this,ExperimentPerformanceSummary);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={showAllVariations:!1,sortBy:null,sortByMetricAlias:null,sortDirection:null},e.inverseSortDirection=function(e){return e===g.c.constants.SORT_DIRECTIONS.ASC?g.c.constants.SORT_DIRECTIONS.DESC:g.c.constants.SORT_DIRECTIONS.ASC},e.showLinkForMoreVariations=function(){return e.props.experimentVariations.size>g.c.constants.DEFAULT_VARIATIONS_TO_SHOW},e.sortByAlias=function(t){var r,n=e.props.track;e.setState((function(n){return r=n.sortByMetricAlias===t&&n.sortDirection?e.inverseSortDirection(n.sortDirection):g.c.constants.SORT_DIRECTIONS.DESC,{sortBy:O,sortByMetricAlias:t,sortByRowName:!1,sortDirection:r}}),(function(){n("Results Table Sorted",{sortDirection:r,sortedObject:"Summary",sortType:"Metric"})}))},e.sortByRowName=function(){var t,r=e.props.track;e.setState((function(r){return t=r.sortBy===R&&r.sortDirection?e.inverseSortDirection(r.sortDirection):g.c.constants.SORT_DIRECTIONS.ASC,{sortBy:R,sortByMetricAlias:null,sortDirection:t}}),(function(){r("Results Table Sorted",{sortDirection:t,sortedObject:"Summary",sortType:"Variation Name"})}))},e.sortBySampleCount=function(){var t,r=e.props.track;e.setState((function(r){return t=r.sortBy===P&&r.sortDirection?e.inverseSortDirection(r.sortDirection):g.c.constants.SORT_DIRECTIONS.DESC,{sortBy:P,sortByMetricAlias:null,sortDirection:t}}),(function(){r("Results Table Sorted",{sortDirection:t,sortedObject:"Summary",sortType:"Sample Count"})}))},e.toggleMoreVariations=function(){e.setState((function(e){return{showAllVariations:!e.showAllVariations}}))},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ExperimentPerformanceSummary,[{key:"render",value:function render(){var e=this,t=this.props,r=t.baselineVariationId,n=t.countLabel,a=t.currencyType,i=t.currentLayer,o=t.differenceType,s=t.epochEnabled,c=t.experimentResults,u=t.experimentVariations,f=t.integrations,m=t.metricWrappers,y=t.resultsFilteringEnabled,C=t.selectedExperiment,w=t.selectedSectionId,T=t.statsAcceleratorEnabled,x=this.state,k=x.showAllVariations,I=x.sortBy,j=x.sortByMetricAlias,A=x.sortDirection,N=c.reach,D=c.metrics,M=null;I===O&&(M=Object.values(D.find((function(e){return e.alias===j})).results).sort((function(e,t){return e.isBaseline?-1:t.isBaseline?1:A===g.c.constants.SORT_DIRECTIONS.DESC?t.lift.value-e.lift.value:e.lift.value-t.lift.value})).map((function(e){return e.variationId.toString()}))),I===R&&(M=u.sort((function(e,t){var n=e.get("variation_id"),a=t.get("variation_id"),i=e.get("name"),o=t.get("name");if(n===r)return-1;if(a===r)return 1;if(A===g.c.constants.SORT_DIRECTIONS.DESC){if(i>o)return-1;if(o>i)return 1}if(A===g.c.constants.SORT_DIRECTIONS.ASC){if(o>i)return-1;if(i>o)return 1}return 0})).map((function(e){return e.get("variation_id").toString()}))),I===P&&(M=Object.values(N.variations).sort((function(e,t){return e.variationId===r.toString()?-1:t.variationId===r.toString()?1:A===g.c.constants.SORT_DIRECTIONS.DESC?t.count-e.count:e.count-t.count})).map((function(e){return e.variationId.toString()})));var L=M?Object(p.toImmutable)(M.map((function(e){return u.find((function(t){return t.get("variation_id").toString()===e}))}))).filter((function(e){return!!e})):u;k||(L=L.slice(0,g.c.constants.DEFAULT_VARIATIONS_TO_SHOW));var F=L.map((function(e,t){var r=N.variations[e.get("variation_id")];return r?l.a.createElement(_.a,{key:e.get("variation_id"),muted:!1,primaryValue:d.a.formatWholeNumber(r.count),primaryLabel:n,secondaryValue:d.a.formatPercentForDisplay(r.variationReach),secondaryLabel:"Reach"}):null})),q=l.a.createElement(_.b,{onHeaderClick:this.sortBySampleCount,sortIndicator:I===P?A:null,title:n},F),B=D.map((function(t){var r=m.find((function(e){return e.get("alias")===t.alias}));if(!r)return null;var n=L.map((function(e){var n=e.get("variation_id"),i=t.results[n],c=g.c.constants.currencies[a],u=g.c.fns.shouldPreserveDecimalValue(a,!0);if(!i)return null;var p=l.a.createElement(E.a,{lift:i&&i.lift?i.lift:null,metricWrapper:r}),f=null,d=o===b.b.DIFFERENCE_TYPES.ABSOLUTE&&s?"Weighted Improvement":"Improvement",m=r.get("description"),v=r.get("rateFormatFn")(i.rate,!1,c,u),S=g.c.fns.v2IsStatSigPositive(i),O=g.c.fns.v2IsStatSigNegative(i);return(S||O)&&h.fns.shouldShowDataOnResultsPage(C)&&!y&&(f=i.lift.status),l.a.createElement(_.a,{key:n,muted:!1,primaryValue:p,primaryLabel:d,resultStatus:f,secondaryValue:v,secondaryLabel:m})}));return l.a.createElement(_.b,{key:r.get("alias"),onHeaderClick:function headerClickFn(){e.sortByAlias(r.get("alias"))},sortIndicator:j===r.get("alias")?A:null,title:r.get("name")},n)})),V=L.map((function(e){return{name:e.get("name")||e.get("api_name"),description:e.get("description")}})).toJS(),W=g.c.fns.getExperimentGroupingForLayer(i,!!w);return l.a.createElement(v.a,{borderBottomFirstRow:!0,integrations:f,firstRowMuted:!1,footer:this.showLinkForMoreVariations()&&l.a.createElement("div",{className:"push-double--left soft--bottom push-half--bottom"},l.a.createElement(S.a,{currentLayer:i,isSectionView:!!w,onClick:this.toggleMoreVariations,showAll:k,testSection:"toggle-more-variations-summary"})),mainColumnTitle:W,onRowLabelsHeaderClick:this.sortByRowName,rowLabels:V,rowLabelSortOrder:I===R&&A||null,statsAcceleratorEnabled:T},q,B)}}]),ExperimentPerformanceSummary}(l.a.Component)).componentId="ExperimentPerformanceSummary",i.propTypes={baselineVariationId:s.a.oneOfType([s.a.number,s.a.string]).isRequired,countLabel:s.a.oneOf(["Visitors","Sessions"]).isRequired,currencyType:s.a.oneOf(Object.keys(g.c.constants.currencyTypes)),currentLayer:s.a.instanceOf(p.default.Map).isRequired,differenceType:b.b.DIFFERENCE_TYPE_PROP,epochEnabled:s.a.bool,experimentResults:m.a,experimentVariations:s.a.instanceOf(p.default.List).isRequired,integrations:s.a.instanceOf(p.default.List),metricWrappers:s.a.instanceOf(p.default.List).isRequired,resultsFilteringEnabled:s.a.bool.isRequired,selectedExperiment:s.a.instanceOf(p.default.Map),selectedSectionId:s.a.number,statsAcceleratorEnabled:s.a.bool,track:s.a.func},i.defaultProps={statsAcceleratorEnabled:!1,track:function track(){}},a=i))||a)||a);t.a=C},3897:function(e,t,r){"use strict";var n=r(9),a=r.n(n),i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(19),u=r(31),p=r(5),f=r(2),d=r(360),m=r(4117);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MetricDescription,e);var t=_createSuper(MetricDescription);function MetricDescription(){var e;_classCallCheck(this,MetricDescription);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).isResultsPageRedesignEnabled=Object(u.isFeatureEnabled)("results_page_redesign"),e.openEditMetricDialog=function(){var t=e.context.requeryResults,r=e.props.metricWrapper;p.default.showReactDialog(m.a,{props:{metricWrapper:r,requeryResults:t}},{fullScreen:!0})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MetricDescription,[{key:"render",value:function render(){var e=this.props,t=e.canUpdateLayer,r=e.editButtonDisabled,n=e.metricWrapper,i=e.muted;return c.a.createElement("div",{className:a()({flex:this.isResultsPageRedesignEnabled,"flex-align--center":this.isResultsPageRedesignEnabled})},c.a.createElement("div",{className:a()({"flex--1":this.isResultsPageRedesignEnabled})},c.a.createElement("span",{className:a()({muted:i,"display--inline-block":this.isResultsPageRedesignEnabled,"push-double--bottom":this.isResultsPageRedesignEnabled})},c.a.createElement("span",{"data-test-section":"metric-card-description"},n.get("description")),!d.default.isMetricOverallRevenue(n.get("metric"))&&c.a.createElement("span",null,c.a.createElement("span",null," for "),c.a.createElement("span",{className:"weight--bold","data-test-section":"metric-card-event"},n.get("eventName")),c.a.createElement("span",null," event")))),this.isResultsPageRedesignEnabled&&t&&c.a.createElement(l.a,{isDisabled:r,style:"outline",testSection:"edit-metric-button",onClick:this.openEditMetricDialog},"Edit"))}}]),MetricDescription}(c.a.Component);y.propTypes={canUpdateLayer:o.a.bool,editButtonDisabled:o.a.bool,metricWrapper:o.a.instanceOf(f.default.Map).isRequired,muted:o.a.bool},y.defaultProps={canUpdateLayer:!1,editButtonDisabled:!1,muted:!1},y.contextTypes={requeryResults:o.a.func.isRequired},t.a=y},3898:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(71),u=r(196),p=r(188),f=r(11),d=r(2),m=r(157),y=r(3674),h=r(1378),b=r(64);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=Object(l.withTrack)(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MetricHeader,e);var t=_createSuper(MetricHeader);function MetricHeader(){var e;_classCallCheck(this,MetricHeader);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).generatePopover=function(){var t,r,n=e.props,a=n.differenceType,i=n.info,o=n.metric,s=n.showSamples,l=y.d.getHeaderValue(o,"".concat(i,"_POPOVER"));return i===m.a.metricCopyProperties.IMPROVEMENT&&a===h.b.DIFFERENCE_TYPES.ABSOLUTE&&(t=c.a.createElement("div",null,c.a.createElement("p",null,c.a.createElement("span",null,y.d.getHeaderValue(o,"".concat(i,"_ABSOLUTE_POPOVER"))," "),c.a.createElement("a",{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/Stats_Accelerator#Technical_FAQ",rel:"noopener noreferrer",target:"_blank"},"Learn more.")),c.a.createElement("h6",{className:"soft-half--top text--center"},"How to Calculate:"),c.a.createElement("div",{className:"border--all"},c.a.createElement("img",{alt:"",className:"anchor--middle",src:"/static/img/p13n/".concat(y.d.getHeaderValue(o,"".concat(i,"_ABSOLUTE_SVG")))})),c.a.createElement("div",{className:"'lego-pop--over__footer push--top text--center"},c.a.createElement("span",null,y.d.getHeaderValue(o,"".concat(i,"_KEY"))))),r=c.a.createElement("div",{className:"oui-pop--over__title"},"Relative")),c.a.createElement("div",null,t&&c.a.createElement("p",null,t),i!==m.a.metricCopyProperties.MEASURE_TYPE&&c.a.createElement("div",null,r,c.a.createElement("p",null,l)),i===m.a.metricCopyProperties.MEASURE_TYPE&&l&&c.a.createElement("div",null,c.a.createElement("div",null,l.top),s&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"oui-pop--over__title"},m.b.getScopeForDisplay(o,!0,!0)),c.a.createElement("div",null,l.bottom))),(i===m.a.metricCopyProperties.IMPROVEMENT||i===m.a.metricCopyProperties.IMPACT)&&c.a.createElement("div",null,c.a.createElement("h6",{className:"soft-half--top text--center"},"How to Calculate:"),c.a.createElement("div",{className:"border--all"},c.a.createElement("img",{alt:"",className:"anchor--middle",src:"/static/img/p13n/".concat(y.d.getHeaderValue(o,"".concat(i,"_SVG")))})),c.a.createElement("div",{className:"'lego-pop--over__footer push--top text--center"},c.a.createElement("span",null,y.d.getHeaderValue(o,"".concat(i,"_KEY"))))))},e.trackSortClick=function(t,r){var n=e.props,a=n.parent;(0,n.track)("Results Table Sorted",{sortDirection:r,sortedObject:a,sortType:t})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MetricHeader,[{key:"render",value:function render(){var e=this.props,t=e.differenceType,r=e.field,n=e.info,a=e.isNumerical,i=e.joyrideId,o=e.metric,s=e.parent,l=e.showSamples,d=n===m.a.metricCopyProperties.MEASURE_TYPE&&l?c.a.createElement("span",{"data-test-section":"header-scope-label",className:"flex flex-justified--end"},m.b.getScopeForDisplay(o,!0,!0)):null,g=c.a.createElement(u.Track,{eventName:"Tooltip Opened",eventType:"click",properties:{tooltipType:"".concat(s," - ").concat(y.d.getHeaderValue(o,n))}},c.a.createElement(p.a,{behavior:"click",popoverTitle:"".concat(y.d.getHeaderValue(o,n),"\n          ").concat(t===h.b.DIFFERENCE_TYPES.ABSOLUTE?" (Absolute)":""),onClick:function onClick(e){return e.stopPropagation()}},this.generatePopover()));return r?c.a.createElement(b.SortableTableHeader,{additionalContent:g,field:r,isNumerical:a,joyrideId:i,onClick:this.trackSortClick,sortMax:1,style:{padding:"0px"}},c.a.createElement("span",{"data-test-section":"header-".concat(n),className:"flex--column"},y.d.getHeaderValue(o,n),d)):c.a.createElement(f.a.TH,{isNumerical:a},c.a.createElement("span",{className:"flex--row","data-joyride-step":i},c.a.createElement("span",{"data-test-section":"header-".concat(n),className:"flex--column"},y.d.getHeaderValue(o,n),d),g))}}]),MetricHeader}(c.a.Component)).propTypes={differenceType:h.b.DIFFERENCE_TYPE_PROP,field:o.a.string,info:o.a.string.isRequired,isNumerical:o.a.bool,joyrideId:o.a.string,metric:o.a.instanceOf(d.default.Map),parent:o.a.string,showSamples:o.a.bool,track:o.a.func},a.defaultProps={joyrideId:null,parent:"Metrics Card",showSamples:!0,track:function track(){}},n=a))||n;t.a=g},3899:function(e,t,r){"use strict";r.d(t,"a",(function(){return ResultsRetryBanner}));var n=r(0),a=r.n(n),i=r(1),o=r.n(i),s=r(134),c=r(350);function ResultsRetryBanner(e){var t=e.retryCount,r=e.shouldRetry,n=t<c.MAX_RESULTS_RETRIES?"We are still gathering all of the latest data for this experiment. This page will automatically reload when the latest results are ready":"Something went wrong. Our engineering team has been notified. Reload the page to try again.";return!r||t<3?null:a.a.createElement(s.a,{alignment:"left",type:"warning"},n)}ResultsRetryBanner.propTypes={retryCount:o.a.number,shouldRetry:o.a.bool},ResultsRetryBanner.defaultProps={retryCount:0,shouldRetry:!1}},4111:function(e,t,r){"use strict";r.d(t,"b",(function(){return F})),r.d(t,"a",(function(){return q}));var n,a,i,o,s=r(0),c=r.n(s),l=r(1),u=r.n(l),p=r(19),f=r(71),d=r(87),m=r(59),y=r.n(m),h=r(270),b=r(2),g=r(5),v=r(28),_=r(35),E=r(182),S=r.n(E),O=r(24),R=r(1164),P=r(66),C=r.n(P),w=r(13),T=r(21),x=r(29),k=r(56),I=r(1398),j=r(350),A=r(1436),N=r(1435),D=(r(54),r(4746)),M=r(91),L=r(4748);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=Object(v.a)((function(){return{isFullStackProject:w.default.isFullStackProject,isFlagsProject:w.default.isFlagsProject}}))(n=Object(d.b)("user_friendly_names")(((a=function(e){_inherits(ResultsSidebarHeader,e);var t=_createSuper(ResultsSidebarHeader);function ResultsSidebarHeader(){var e;_classCallCheck(this,ResultsSidebarHeader);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).navigateBack=function(t){var r=e.props,n=r.currentLayer,a=r.currentProject,i=r.isFullStackProject,o=r.isFlagsProject,s=r.previousView,c=r.selectedExperimentId;switch(t.preventDefault(),I.a.setDateNow(null),s){case j.default.previousViews.CAMPAIGNS:_.default.go(S.a.layersHome(a.get("id")));break;case j.default.previousViews.EXPERIMENTS:_.default.go(O.default.xFullStackHome(a.get("id")));break;case j.default.previousViews.MULTIVARIATE_SECTIONS:_.default.go(O.default.mvtSectionsDashboard(a.get("id"),c));break;case j.default.previousViews.MULTIVARIATE_COMBINATIONS:_.default.go(O.default.mvtCombinationsDashboard(a.get("id"),c));break;case j.default.previousViews.EXPERIENCES:case j.default.previousViews.VARIATIONS:i?_.default.go(O.default.fullStackManagerVariations(a.get("id"),c)):_.default.go(S.a.layerEdit(a.get("id"),n.get("id")));break;default:o?h.actions.replaceHref(O.default.reportsHome(a.get("id"))):_.default.go("/v2/projects")}},e.getBackLinkText=function(){var t,r=e.props,n=r.previousView,a=r.isFlagsProject;switch(n){case j.default.previousViews.EXPERIENCES:t=R.a.EXPERIENCES;break;case j.default.previousViews.VARIATIONS:t=R.a.VARIATIONS;break;case j.default.previousViews.MULTIVARIATE_SECTIONS:t=R.a.MULTIVARIATE_SECTIONS;break;case j.default.previousViews.MULTIVARIATE_COMBINATIONS:t=R.a.MULTIVARIATE_COMBINATIONS;break;case j.default.previousViews.EXPERIMENTS:case j.default.previousViews.CAMPAIGNS:default:t=a?R.a.REPORTS:R.a.EXPERIMENTS_OVERVIEW}return t},e}return _createClass(ResultsSidebarHeader,[{key:"render",value:function render(){var e=this.props,t=e.currentLayer,r=e.currentProject,n=e.isFullHeight,a=e.isFullStackProject,i=e.details,o=e.selectedExperiment,s=e.showBackLink,l=a&&o&&o.get("name")||t.get("name"),u=a&&o&&o.get("key");return c.a.createElement(M.c,{scrollHeader:!0,projectName:r.get("project_name"),backLinkText:this.getBackLinkText(),backLinkOnClick:this.navigateBack,showBackLink:s,title:l,isFullHeight:n,isResultsPage:!0},this.user_friendly_names&&u&&c.a.createElement("div",{className:"zeta monospace micro muted color--base word-break--all","data-test-section":"header-subtitle",style:{marginTop:"-1px"}},u),c.a.createElement(A.a,null),!a&&c.a.createElement("div",{className:"push--bottom","data-test-section":"layer-action-buttons"},c.a.createElement(N.a,{hideResultsButton:!0,currentLayer:t})),c.a.createElement("hr",null),c.a.createElement(M.b,{items:i}))}}]),ResultsSidebarHeader}(c.a.Component)).propTypes={currentProject:u.a.instanceOf(b.default.Map).isRequired,currentLayer:u.a.instanceOf(b.default.Map).isRequired,isFullHeight:u.a.bool,isFullStackProject:u.a.bool.isRequired,isFlagsProject:u.a.bool,isResultsPage:u.a.bool,details:u.a.arrayOf(u.a.shape({label:u.a.string.isRequired,value:u.a.oneOfType([u.a.string,u.a.number,u.a.node]).isRequired})).isRequired,showBackLink:u.a.bool,previousView:u.a.string,selectedExperiment:u.a.instanceOf(b.default.Map),selectedExperimentId:u.a.number},a.defaultProps={isFullHeight:!1,selectedExperiment:Object(b.toImmutable)({})},n=a))||n)||n,q=Object(v.a)({isFlagsProject:w.default.isFlagsProject})(i=Object(f.withTrack)(((o=function(e){_inherits(ResultsSidebar,e);var t=_createSuper(ResultsSidebar);function ResultsSidebar(){var e;_classCallCheck(this,ResultsSidebar);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).resetResults=function(){var t=e.props,r=t.isFlagsProject,n=t.selectedExperiment,a=t.track;g.default.showReactDialog(D.a,{dataBindings:{currentLayer:C.a.layer},props:_extends({},r&&n&&{alternateResetResultsUrl:n.get("reset_results_url")})}),a("Results Reset Dialog Opened")},e}return _createClass(ResultsSidebar,[{key:"render",value:function render(){var e=this.props,t=e.canResetResults,r=e.children,n=e.currentLayer,a=e.currentProject,i=e.events,o=e.isAdmin,s=e.isFlagsProject,l=e.layerExperiments,u=e.selectedExperiment,f=e.shareToken,d=e.views,m=window.location.href.indexOf("fake_data")>-1,h=!t||n.get("status")===T.default.entityStatus.ARCHIVED||k.default.isFullStackProject(a)&&u&&u.get("status")===x.default.ActualStatus.ARCHIVED;return c.a.createElement(M.a,null,r,o&&m&&c.a.createElement(L.a,{events:i,layer:n,layerExperiments:l,project:a,views:d}),!f&&c.a.createElement("div",{className:"soft-double--sides soft--ends flex flex--column flex-align--center"},n.get("earliest")!==n.get("earliest_original")&&!s&&c.a.createElement("div",{className:"muted micro push-half--bottom","data-test-section":"last-reset-notification"},"Results last reset:"," ",y()(n.get("earliest")).format("LL")),c.a.createElement(p.a,{isDisabled:h,style:"danger-outline",width:"full",testSection:"results-sidebar-reset-results","data-track-id":"results-sidebar-reset-results",onClick:this.resetResults},"Reset Results")))}}]),ResultsSidebar}(c.a.Component)).propTypes={campaignTimerange:u.a.shape({begin:u.a.number.isRequired,end:u.a.number.isRequired}).isRequired,canResetResults:u.a.bool.isRequired,children:u.a.node.isRequired,currentProject:u.a.instanceOf(b.default.Map).isRequired,currentLayer:u.a.instanceOf(b.default.Map).isRequired,events:u.a.instanceOf(b.default.List),isAdmin:u.a.bool,isFlagsProject:u.a.bool,layerExperiments:u.a.instanceOf(b.default.List),selectedExperiment:u.a.instanceOf(b.default.Map),shareToken:u.a.string,track:u.a.func,views:u.a.instanceOf(b.default.List)},o.defaultProps={isAdmin:!1,track:function track(){}},i=o))||i)||i},4112:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return u}));var n=r(1),a=r.n(n),i=a.a.objectOf(a.a.shape({count:a.a.number.isRequired,variationId:a.a.string.isRequired,variationReach:a.a.number.isRequired})),o=a.a.shape({totalCount:a.a.number.isRequired,baselineCount:a.a.number.isRequired,treatmentCount:a.a.number.isRequired,baselineReach:a.a.number.isRequired,treatmentReach:a.a.number.isRequired,variations:i.isRequired}),s=a.a.shape({isBaseline:a.a.bool.isRequired,samples:a.a.number.isRequired,value:a.a.number.isRequired,rate:a.a.number.isRequired,variationId:a.a.string,lift:a.a.shape({confidenceInterval:a.a.array,isSignificant:a.a.bool,value:a.a.number,significance:a.a.number,visitorsRemaining:a.a.number})}),c=a.a.shape({eventId:a.a.number,eventType:a.a.string,eventName:a.a.string,aggregator:a.a.string.isRequired,scope:a.a.string.isRequired,alias:a.a.string.isRequired,results:a.a.objectOf(s).isRequired}),l=a.a.shape({metrics:a.a.arrayOf(c).isRequired}),u=a.a.shape({experimentId:a.a.number.isRequired,metrics:a.a.arrayOf(c).isRequired,reach:o.isRequired});a.a.shape({layerId:a.a.string.isRequired,begin:a.a.number.isRequired,end:a.a.number.isRequired,metrics:a.a.arrayOf(c).isRequired}),a.a.shape({layerId:a.a.string.isRequired,begin:a.a.number.isRequired,end:a.a.number.isRequired,experiments:a.a.objectOf(u).isRequired})},4113:function(e,t,r){"use strict";var n=r(0),a=r.n(n);t.a=function EmptyCell(){return a.a.createElement("span",null,"--")}},4114:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(2),c=r(40),l=r(8),u=r.n(l),p=r(3674),f=function ShowLink(e){var t=e.currentLayer,r=e.isSectionView,n=e.onClick,a=e.showAll,i=e.testSection;return o.a.createElement(c.a,{style:"default",onClick:n,testSection:i},function getTextForToggleAllLink(){var e=a?"fewer":"more",n=p.d.getExperimentGroupingForLayer(t,r);return"".concat(u()("Show")," ").concat(u()(e)," ").concat(u()(n))}())};f.propTypes={currentLayer:a.a.instanceOf(s.default.Map).isRequired,isSectionView:a.a.bool,onClick:a.a.func.isRequired,showAll:a.a.bool.isRequired,testSection:a.a.string},t.a=f},4115:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n,a=r(4),i=r(9),o=r.n(i),s=r(0),c=r.n(s),l=r(1),u=r.n(l),p=r(2),f=r(28),d=r(186),m=r(17),y=r.n(m),h=r(1378),b=r(3674);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=y()({GREEN:null,GREY:null,RED:null}),v=Object(f.a)({currencyType:b.e.currencyType})(n=Object(f.b)({alternateContent:c.a.createElement("span",null,"--")})(n=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(BoxPlot,e);var t=_createSuper(BoxPlot);function BoxPlot(){return _classCallCheck(this,BoxPlot),t.apply(this,arguments)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(BoxPlot,[{key:"render",value:function render(){var e,t=this.props,r=t.alignment,n=t.color,i=t.currencyType,s=t.differenceType,l=t.lift,u=t.metricWrapper,p=t.range,f=t.width,m=l.confidenceIntervalScaled,y=l.valueScaled,v=l.confidenceInterval,_=l.value;s!==h.b.DIFFERENCE_TYPES.RELATIVE||Object(a.isUndefined)(y)||(v=m,_=y);var E=p?b.d.calculateTotalWidthForConfidenceIntChart(p):null,S={left:b.d.calculateLeftEdgeForMidMarkerConfidenceIntChart(v,_,E)},O={left:b.d.calculateLeftEdgeForConfidenceIntChart(v,E),width:b.d.calculateWidthForConfidenceIntChart(v,E)},R="anchor--".concat(r),P="width--".concat(f.toString()),C=d.a.formatPercentLift;u&&(C=b.d.getLiftFormatFunction(u,s));var w=b.b.currencies[i],T=b.d.shouldPreserveDecimalValue(i,!0),x="".concat(C(v[0],!1,w,T)),k="".concat(C(v[1],!1,w,T));return c.a.createElement("div",{className:o()((e={boxplot:!0,"push-double--ends":!0,"width--100":!0,"boxplot--good-news":n===g.GREEN,"boxplot--bad-news":n===g.RED},_defineProperty(e,R,!0),_defineProperty(e,P,!0),e))},c.a.createElement("div",{className:"boxplot__mid"},"0"),c.a.createElement("div",{className:"boxplot__range__mid",style:S}),c.a.createElement("div",{className:"boxplot__range","data-boxplot-range-lower":x,"data-boxplot-range-upper":k,style:O}),s===h.b.DIFFERENCE_TYPES.ABSOLUTE&&m&&c.a.createElement("div",{className:"boxplot__range__scaled","data-boxplot-range-scaled-lower":d.a.formatPercentLift(m[0]),"data-boxplot-range-scaled-upper":d.a.formatPercentLift(m[1]),style:O}))}}]),BoxPlot}(c.a.Component))||n)||n;v.propTypes={alignment:u.a.oneOf(["left","middle","right"]),color:u.a.oneOf(Object(a.values)(g)),differenceType:h.b.DIFFERENCE_TYPE_PROP,lift:h.b.LIFT_SHAPE.isRequired,metricWrapper:u.a.instanceOf(p.default.Map),range:u.a.arrayOf(u.a.number),width:u.a.number},v.defaultProps={alignment:"left",color:g.GREY,differenceType:h.b.DIFFERENCE_TYPES.RELATIVE,width:100},t.b=v},4116:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(273),u=r(594),p=r(19),f=r(31),d=r(9),m=r.n(d),y=r(5),h=r(28),b=r(2),g=r(957),v=r(13),_=r(3897),E=r(4117),S=r(3827);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=Object(h.a)({isFlagsProject:v.default.isFlagsProject})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MetricCardHeader,e);var t=_createSuper(MetricCardHeader);function MetricCardHeader(){var e;_classCallCheck(this,MetricCardHeader);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).editMetric=function(){var t=e.context.requeryResults,r=e.props.metricWrapper;y.default.showReactDialog(E.a,{props:{metricWrapper:r,requeryResults:t}},{fullScreen:!0})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MetricCardHeader,[{key:"render",value:function render(){var e=this.props,t=e.canUpdateLayer,r=e.editButtonDisabled,n=e.isFlagsProject,a=e.metricWrapper,i=e.outlierFiltered,o=Object(f.isFeatureEnabled)("results_page_redesign");return c.a.createElement("div",{className:m()({flex:!0,"flex-align--center":!0,"soft--left":o,"soft--bottom":!o})},c.a.createElement("div",{className:"flex--1"},c.a.createElement("div",{className:m()({flex:!o,"flex--row":!o,"shadow-box__title":!o}),"data-test-section":"results-metric-table-row-name"},o?c.a.createElement(l.a,{type:"body"},a.get("name")):a.get("name"),c.a.createElement(S.a,null),a.get("isPrimary")&&!o&&c.a.createElement("div",{className:"push--left position--relative",style:{top:"-4px"}},c.a.createElement(u.a,{color:"primary"},"Primary Metric"))),!o&&c.a.createElement(_.a,{metricWrapper:a,muted:!0}),i&&c.a.createElement("div",{className:"muted style--italic","data-test-section":"metric-card-outlier-notification"},c.a.createElement("span",null,"Extreme values are smoothed for the results"),c.a.createElement(g.a,null))),!o&&t&&!n&&c.a.createElement(p.a,{isDisabled:r,style:"outline",testSection:"edit-metric-button",onClick:this.editMetric},"Edit"))}}]),MetricCardHeader}(c.a.Component)).propTypes={canUpdateLayer:o.a.bool.isRequired,editButtonDisabled:o.a.bool,isFlagsProject:o.a.bool.isRequired,metricWrapper:o.a.instanceOf(b.default.Map).isRequired,outlierFiltered:o.a.bool},a.defaultProps={editButtonDisabled:!1,outlierFiltered:!1},a.contextTypes={requeryResults:o.a.func.isRequired},n=a))||n;t.a=O},4117:function(e,t,r){"use strict";var n,a,i=r(2),o=r(1),s=r.n(o),c=r(0),l=r.n(c),u=r(71),p=r(3),f=r(5),d=r(28),m=r(2125),y=r(38),h=r(23),b=r(215),g=r(3674);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=u.virtualPageview("Results","Metric Builder","edit_metric")(n=Object(d.a)({currentLayerId:y.getters.id,selectedMetricWrapper:g.e.selectedMetricWrapper,workingMetricWrappers:b.c.workingMetricWrappers})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MetricEditorDialog,e);var t=_createSuper(MetricEditorDialog);function MetricEditorDialog(){var e;_classCallCheck(this,MetricEditorDialog);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).saveMetric=function(t){var r=e.props,n=r.currentLayerId,a=r.metricWrapper,i=r.requeryResults,o=r.selectedMetricWrapper,s=r.workingMetricWrappers.map((function(e){return(e.get("alias")===t.get("alias")?t:e).get("metric")}));h.actions.save({id:n,metrics:s.toJS()}).then((function(){i((function(){b.a.updateWorkingMetricWrappers(p.default.evaluate(y.getters.currentLayerMetricWrappers)),o.get("alias")===a.get("alias")&&g.a.setSelectedMetric(t.get("metric"),!1)})),f.default.hideDialog()}))},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MetricEditorDialog,[{key:"componentWillMount",value:function componentWillMount(){var e=p.default.evaluate(y.getters.currentLayerMetricWrappers);b.a.updateWorkingMetricWrappers(e)}},{key:"render",value:function render(){var e=this.props.metricWrapper;return l.a.createElement("div",{className:"reading-column"},l.a.createElement(m.a,{isDialog:!0,layer:p.default.evaluate(y.getters.layer),metricWrapper:e,onCancel:f.default.hideDialog,onConfirm:this.saveMetric}))}}]),MetricEditorDialog}(l.a.Component)).propTypes={currentLayerId:s.a.number.isRequired,metricWrapper:s.a.instanceOf(i.default.Map).isRequired,requeryResults:s.a.func.isRequired,selectedMetricWrapper:s.a.instanceOf(i.default.Map).isRequired,workingMetricWrappers:s.a.instanceOf(i.default.List).isRequired},n=a))||n)||n;t.a=v},4118:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(40),c=r(1440),l=r(4770);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(SAJoyride,e);var t=_createSuper(SAJoyride);function SAJoyride(){var e;_classCallCheck(this,SAJoyride);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).handleStateChange=function(t){var r=e.props.onClose,n=t.action;"close"!==n&&"skip"!==n||r(n)},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(SAJoyride,[{key:"render",value:function render(){var e=this.props.run;return e?o.a.createElement(l.a,{callback:this.handleStateChange,continuous:!0,floaterProps:{disableAnimation:!0},run:e,steps:[{content:o.a.createElement("p",null,"It looks like this is your first time using Stats Accelerator. The results page works a little differently when Stats Accelerator is switched on, so let's take a quick tour of the important differences."),placement:"center",target:"body",title:"Welcome to Stats Accelerator Results"},{content:o.a.createElement("p",null,"When you see this, it means your experiment is using Stats Accelerator to calculate results."),disableBeacon:!0,spotlightPadding:10,target:'[data-joyride-step="sa-results-2"]',title:"Stats Accelerator is Enabled"},{content:o.a.createElement("p",null,"When Stats Accelerator is active, experiments use dynamic traffic allocation and a different algorithm to calculate improvement. Thatâ€™s why you should use this value to determine your experiment outcome instead of the conversion rate. Improvement is shown here in both absolute and relative values.",o.a.createElement(s.a,{href:"https://assets.ctfassets.net/zw48pl1isxmc/6pXCGuidi0aqGWUKUwss68/7389e80af1e441db7510542ad6121000/EpochStatsEngine.pdf",newWindow:!0}," ","Learn More.")),disableBeacon:!0,spotlightPadding:10,target:'[data-joyride-step="sa-results-3"]',title:"Improvement"},{content:o.a.createElement("p",null,"When using Stats Accelerator, traffic allocation is updated based on confidence intervals. Confidence intervals and statistical significance are based on weighted improvement instead of conversion rate. Use these values to interpret the results of your experiment.",o.a.createElement(s.a,{href:"https://assets.ctfassets.net/zw48pl1isxmc/6pXCGuidi0aqGWUKUwss68/7389e80af1e441db7510542ad6121000/EpochStatsEngine.pdf",newWindow:!0}," ","Learn More.")),disableBeacon:!0,spotlightPadding:10,styles:{spotlight:{width:500}},target:'[data-joyride-step="sa-results-4"]',title:"Confidence Intervals and Statistical Significance"}],styles:{options:{zIndex:1e5}},tooltipComponent:c.a}):null}}]),SAJoyride}(o.a.Component);u.props={onClose:a.a.func,run:a.a.bool},u.defaultProps={onClose:function onClose(){},run:!0}},4119:function(e,t,r){"use strict";r.d(t,"a",(function(){return freshnessNotification}));var n=r(59),a=r.n(n),i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(134),u=r(19),p=r(40);function freshnessNotification(e){var t=e.hasFresherResults,r=e.isStale,n=e.lastUpdated,i=e.onReloadClick;return t||r?c.a.createElement(l.a,{alignment:"center",isDismissable:!1,type:"warning"},r&&!t&&c.a.createElement("span",null,"The latest results are being calculated. Last updated:"," ",a()(n).format("LL")," at"," ",a()(n).format("LT")),t&&c.a.createElement("span",null,"Updated results data now available."," ",c.a.createElement(u.a,{style:"unstyled",onClick:i},c.a.createElement(p.a,null,"Reload to see the latest data.")))):null}freshnessNotification.propTypes={hasFresherResults:o.a.bool.isRequired,isStale:o.a.bool.isRequired,lastUpdated:o.a.oneOfType([o.a.string,o.a.number]).isRequired,onReloadClick:o.a.func.isRequired}},4120:function(e,t,r){"use strict";var n,a,i=r(4),o=r.n(i),s=r(9),c=r.n(s),l=r(59),u=r.n(l),p=r(1),f=r.n(p),d=r(0),m=r.n(d),y=r(28),h=r(35),b=r(2),g=r(186),v=r(142),_=r.n(v),E=r(228),S=r.n(E),O=r(24),R=r(43),P=r(38),C=r(14),w=r(45),T=r(49),x=r(29),k=r(1378),I=r(3674),j=r(3683),A=r(4111),N=r(4788),D=r(3786);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function getStatusClass(e){switch(e){case P.enums.snippetStatuses.RUNNING:return"color--good-news";default:return"muted"}}var M=function ResultsSidebarListItem(e){var t,r=e.resultsFilteringEnabled;e.formattedSelectedSegment&&(t=m.a.createElement("div",{className:"micro flex-justified--center"},m.a.createElement("span",null,"Filtered by",m.a.createElement("span",{className:"weight--bold"},e.formattedSelectedSegment))));var n=!1,a=!1;e.metricVariationResults&&(n=I.c.fns.v2IsStatSigPositive(e.metricVariationResults),a=I.c.fns.v2IsStatSigNegative(e.metricVariationResults));var i,s=!n&&!a;return e.metricVariationResults&&(i=e.metricVariationResults.lift),m.a.createElement("li",{className:c()({"nav-list__link":!0,flex:!0,"flex-align--center":!0,"is-active":e.isActive}),onClick:e.onClick,"data-test-section":"results-sidebar-experiment"},m.a.createElement("div",{className:"flex flex--1 flex-align--center soft--ends soft-double--sides"},m.a.createElement("div",{className:"flex--1"},m.a.createElement("div",{className:"line--tight force-break","data-test-section":"sidebar-experiment-name"},e.name),t,!o.a.isUndefined(e.reach)&&m.a.createElement("div",{className:"micro muted","data-test-section":"sidebar-audience-reach"},"".concat(g.a.formatPercentForDisplay(e.reach)," Audience Reach")),e.snippetStatus&&m.a.createElement("div",{className:"micro ".concat(getStatusClass(e.snippetStatus)," ")},function formatExperimentStatus(e){switch(e){case P.enums.snippetStatuses.CAMPAIGN_PAUSED:return tr("Campaign Paused");case P.enums.snippetStatuses.NOT_STARTED:return tr("Not Started");case P.enums.snippetStatuses.PAUSED:return tr("Paused");case P.enums.snippetStatuses.RUNNING:return tr("Running");default:return""}}(e.snippetStatus))),m.a.createElement("div",{className:c()({"text--right":!0,"weight--bold":!0,"delta push--left":!0,"color--good-news":!s&&!r&&e.metricVariationResults.lift.status===w.default.liftStatus.BETTER,"color--bad-news":!s&&!r&&e.metricVariationResults.lift.status===w.default.liftStatus.WORSE,muted:s||r})},m.a.createElement("div",null,m.a.createElement(D.a,{differenceTypeOverride:k.b.DIFFERENCE_TYPES.RELATIVE,lift:i,metricWrapper:e.metricWrapper})),m.a.createElement("div",{className:"micro muted"},"Improvement"))))};M.propTypes={formattedSelectedSegment:f.a.string,isActive:f.a.bool.isRequired,metricVariationResults:f.a.object,metricWrapper:f.a.instanceOf(b.default.Map),name:f.a.string.isRequired,onClick:f.a.func.isRequired,reach:f.a.number,resultsFilteringEnabled:f.a.bool,snippetStatus:f.a.string},M.defaultProps={isActive:!1,resultsFilteringEnabled:!1};var L=Object(y.a)({campaignTimerange:k.d.campaignTimerange,canResetResults:[C.getters.project,T.fns.canResetResults],currentLayer:P.getters.layer,currentProject:C.getters.project,experiments:I.c.getters.experiments,isAdmin:R.getters.isAdmin,liveCommitTag:P.getters.liveCommitTag,resultsFilteringEnabled:I.c.getters.resultsFilteringEnabled,shareToken:P.getters.shareToken,selectedExperiment:I.c.getters.selectedExperiment,selectedExperimentId:I.c.getters.selectedExperimentId,selectedMetricWrapper:I.c.getters.selectedMetricWrapper})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(P13nResultsSidebar,e);var t=_createSuper(P13nResultsSidebar);function P13nResultsSidebar(){var e;_classCallCheck(this,P13nResultsSidebar);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).renderOverviewListItem=function(t){var r,n=e.props,a=n.layerResults,i=n.resultsFilteringEnabled,s=n.selectedMetricWrapper;if(a){var c=o.a.find(a.metrics,{alias:s.get("alias")});c&&(r=c.results.variation)}return m.a.createElement(M,{name:"Campaign Summary",isActive:!e.props.selectedExperimentId,metricVariationResults:r,metricWrapper:s,onClick:e.clickOverview,resultsFilteringEnabled:i})},e.renderExperimentListItem=function(t){if(t.get("actual_status")===x.ActualStatus.ARCHIVED)return null;var r,n,a=e.props,i=a.layerExperimentResults,s=a.resultsFilteringEnabled,c=a.selectedExperimentId,l=a.selectedMetricWrapper,u=t.get("id");if(i&&i.experiments[u]){var p=i.experiments[u],f=p.metrics,d=o.a.find(f,{alias:l.get("alias")});d&&(r=d.results[I.c.constants.RESULTS_TREATMENT_KEY]),n=p.reach.audienceReachUnavailable?void 0:p.reach.audienceReach}return m.a.createElement(M,{name:t.get("name"),key:t.get("id"),reach:n,isActive:c===t.get("id"),metricVariationResults:r,metricWrapper:l,resultsFilteringEnabled:s,snippetStatus:t.get("snippetStatus"),onClick:function onClick(){e.clickExperiment(t.get("id"))}})},e.getUrlOpts=function(){var t=e.props,r=t.shareToken,n=t.previousView,a={};return n&&(a.previousView=n),r&&(a.share_token=r),a},e.clickOverview=function(){var t=e.props,r=t.currentLayer,n=t.currentProject.get("id"),a=r.get("id"),i=o.a.merge(_()(window.location.search),e.getUrlOpts()),s=O.default.layerResults(n,a,i);h.default.go(s)},e.clickExperiment=function(t){var r=e.props,n=r.currentLayer,a=r.currentProject,i=r.selectedExperimentId,s=a.get("id"),c=n.get("id"),l=o.a.merge(_()(window.location.search),e.getUrlOpts()),u=O.default.layerExperimentResults(s,c,t,l);h.default.go(u),i&&e.context.requeryResults((function(){I.c.actions.setSelectedExperimentId(t)}),"selectExperiment"),I.c.actions.setDefaults()},e.handleFilterChange=function(t){I.c.actions.setSelectedExperimentIdsForFilter(t),setTimeout((function(){e.context.requeryResults((function(){}))}),0)},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(P13nResultsSidebar,[{key:"render",value:function render(){var e=this,t=this.props,r=t.canResetResults,n=t.currentLayer,a=t.currentProject,i=t.experiments,o=t.isAdmin,s=t.liveCommitTag,c=t.campaignTimerange,l=t.previousView,p=t.selectedExperiment,f=t.selectedExperimentIds,d=t.shareToken;if(s&&[].push({label:"Last Publish",value:S()(s.get("last_modified"))}),c){var y=[{label:"Days Running",value:u()(c.end).diff(c.begin,"days")}],h=i;f.size&&(h=i.filter((function(e){return f.includes(e.get("id"))})));var g=b.default.Map();return i.forEach((function(e){g=g.set(e.get("id"),e)})),m.a.createElement(A.a,{canResetResults:r,currentLayer:n,currentProject:a,selectedExperiment:p,shareToken:d,campaignTimerange:c,isAdmin:o},m.a.createElement(A.b,{currentProject:a,currentLayer:n,details:y,isFullHeight:!1,previousView:l,showBackLink:!d}),m.a.createElement("div",{className:"sidenav__body vue-transition--opacity"},m.a.createElement("div",{className:"sidenav__section push-triple--bottom"},m.a.createElement("div",{className:"sidenav__section__title flex"},m.a.createElement("h6",{className:"flex--1"},"Overview"),m.a.createElement("h6",null,"Selected Metric")),m.a.createElement("ul",{className:"nav-list nav-list--tall line--tight"},this.renderOverviewListItem())),m.a.createElement("div",{className:"sidenav__section"},m.a.createElement("div",{className:"sidenav__section__title flex"},m.a.createElement("h5",{className:"flex--1"},"Experiences"),i.size>=I.c.constants.MAX_EXPERIMENTS_FOR_DETAILED_RESULTS&&m.a.createElement(N.a,{experimentIdsMap:g,onUpdate:this.handleFilterChange,selectedExperimentIds:f})),m.a.createElement("div",{className:"sidenav__section__title flex"},m.a.createElement("h6",{className:"flex--1"},"Name"),m.a.createElement("h6",null,"Selected Metric")),m.a.createElement("ul",{className:"nav-list nav-list--tall line--tight"},h.map((function(t){return e.renderExperimentListItem(t)}))))))}return m.a.createElement("div",{className:"background--light position--relative two-col__nav"},m.a.createElement(j.a,{shouldFill:!0}))}}]),P13nResultsSidebar}(m.a.Component)).propTypes={campaignTimerange:f.a.shape({begin:f.a.number.isRequired,end:f.a.number.isRequired}).isRequired,canResetResults:f.a.bool.isRequired,currentLayer:f.a.instanceOf(b.default.Map).isRequired,currentProject:f.a.instanceOf(b.default.Map).isRequired,experiments:f.a.instanceOf(b.default.List).isRequired,isAdmin:f.a.bool,layerExperimentResults:f.a.object,layerResults:f.a.object,liveCommitTag:f.a.instanceOf(b.default.Map),previousView:f.a.string,resultsFilteringEnabled:f.a.bool.isRequired,role:f.a.string,selectedExperiment:f.a.instanceOf(b.default.Map),selectedExperimentId:f.a.number,selectedExperimentIds:f.a.instanceOf(b.default.List),selectedMetricWrapper:f.a.instanceOf(b.default.Map).isRequired,shareToken:f.a.string},a.contextTypes={requeryResults:f.a.func.isRequired},n=a))||n;t.a=L},4121:function(e,t){e.exports="/dist/static/img/p13n/overall-improvement-empty-5ce8b8639d192f68f468beec8d9b0245.svg"},4743:function(e,t,r){"use strict";var n=r(4744);t.a={component:n.a}},4744:function(e,t,r){"use strict";var n,a,i,o=r(4),s=r.n(o),c=r(9),l=r.n(c),u=r(59),p=r.n(u),f=r(1),d=r.n(f),m=r(0),y=r.n(m),h=r(40),b=r(134),g=r(31),v=r(71),_=r(101),E=r(2),S=r(28),O=r(263),R=r(3683),P=r(66),C=r.n(P),w=r(13),T=r(886),x=r(765),k=r(453),I=r(68),j=r(22),A=r(39),N=r(1398),D=r(1056),M=r(1378),L=r(3895),F=r(3785),q=r(3896),B=r(3825),V=r(3826),W=r(3787),U=r(3788),z=r(3789),H=r(4118),Y=r(3674),G=r(3899),J=(r(350),r(3790));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=(n=Object(S.a)({campaignTimerange:M.d.campaignTimerange,canUpdateLayer:[w.default.project,j.default.canUpdateLayer],canUseStatsAccelerator:A.default.canUseStatsAccelerator,currentLayer:C.a.layer,hasAnyProcessingAdaptiveAudienceConditions:C.a.hasAnyProcessingAdaptiveAudienceConditions,integrations:C.a.integrations,isFlagsProject:w.default.isFlagsProject,queryTimerange:[Y.c.getters.timerange,E.toJS],metricWrappers:C.a.currentLayerMetricWrappers,resultsFilteringEnabled:Y.c.getters.resultsFilteringEnabled,selectedExperiment:Y.c.getters.selectedExperiment,selectedBaselineVariationId:Y.c.getters.selectedBaselineVariationId}),Object(v.withTrack)(a=n(((i=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ABTestResultsPage,e);var t=_createSuper(ABTestResultsPage);function ABTestResultsPage(){var e;_classCallCheck(this,ABTestResultsPage);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={experimentResults:null,isEmpty:!1,isLoading:!0,renderDataExpiredBanner:!1,renderDataRetentionBanner:!1,retryCount:0,segments:[],segmentsLoading:!0,shouldRetry:!1,shouldShowJoyride:!1,timeseriesDataByMetricAlias:{}},e.getDataExpirationDate=function(){var t=e.props.campaignTimerange.restrictedBegin,r=new Date(t);return new Date(r.setMonth(r.getMonth()+18))},e.resetDefaultsAndFetchData=s.a.debounce((function(){Y.c.actions.setDefaults(),e.refreshResults(!1)}),500),e.fetchTimeseriesData=function(t){Y.c.actions.v2FetchTimeseriesForABExperiment(t).then((function(t){var r=e.state.timeseriesDataByMetricAlias;t.metrics.forEach((function(e){r[e.alias]=e.results})),e.setState({timeseriesDataByMetricAlias:r})}))},e.fetchResults=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!!t.initialLoad,n=e.props.queryTimerange;n?(N.a.generateNewTraceId(),e.experimentResultsQuery.query({expectedEndDate:n.end,initialLoad:r})):setTimeout((function(){e.fetchResults(t)}),Y.c.constants.RESULTS_FETCH_DELAY_TIMEOUT)},e.handleJoyrideClose=function(t){"close"===t?x.a.markJoyrideAsSeen(k.a.JOYRIDE_IDS.SA_RESULTS):"skip"===t&&x.a.markJoyrideAsSkipped(k.a.JOYRIDE_IDS.SA_RESULTS),e.setState((function(){return{shouldShowJoyride:!1}}))},e.refreshResults=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({isLoading:!0,isEmpty:!1,experimentResults:null}),e.fetchResults({initialLoad:t})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ABTestResultsPage,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t=this.props,r=t.campaignTimerange.restrictedBegin,n=t.canUseStatsAccelerator,a=t.currentLayer,i=t.resultsQueryChangeEmitter,o=t.selectedExperiment,s=Object(g.isFeatureEnabled)("data_retention_banner"),c=Y.c.fns.getExpirationDate({begin:r,monthsToExpire:18}),l=Y.c.fns.getDaysToExpirationDate({expirationDate:c});this.setState({renderDataRetentionBanner:s&&l<30&&l>=0,renderDataExpiredBanner:s&&l<0}),this.experimentResultsQuery=new Y.c.RetryQuery({queryFn:Y.c.actions.v2FetchExperimentResults,onResults:function onResults(t){var r=t.results,i=t.isZeroSecondResponse,s=t.retryCount,c=t.initialLoad,l=t.timeSinceFetch,u=t.timeSinceRouteStart,p=r.shouldRetry,f=r.fallback,d=r.begin===r.end||r.reach&&0===r.reach.totalCount;c&&!i&&Y.c.actions.v2TrackDataReady({pageName:O.b.p13nPages.RESULTS_AB,isCached:!p,timeSinceFetch:l,timeSinceRouteStart:u,retryCount:s,layer:a,experiment:o}),!d&&n&&setTimeout((function(){e.setState({shouldShowJoyride:!x.a.hasJoyrideBeenSeen(k.a.JOYRIDE_IDS.SA_RESULTS)&&I.default.isStatsAcceleratorExperiment(o)})}),100),e.setState({experimentResults:r,isEmpty:d,shouldRetry:p,retryCount:s,isLoading:f})}}),i.onQuery((function(t){e.setState({experimentResults:null,isLoading:!0,timeseriesDataByMetricAlias:{}}),t(),e.fetchResults()})),this.fetchResults({initialLoad:!0}),Y.c.actions.fetchSegments().then((function(t){e.setState({segments:t.map((function(e){return e.id=parseInt(e.id,10),e})),segmentsLoading:!1})})),this.unlistenPopState=Object(_.addPopStateListener)(this.resetDefaultsAndFetchData)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unlistenPopState()}},{key:"render",value:function render(){var e=this,t=this.props,r=t.canUpdateLayer,n=t.canUseStatsAccelerator,a=t.currentLayer,i=t.hasAnyProcessingAdaptiveAudienceConditions,o=t.integrations,s=t.isFlagsProject,c=t.metricWrappers,u=t.previousView,f=t.resultsFilteringEnabled,d=t.selectedBaselineVariationId,m=t.selectedExperiment,v=this.state,_=v.experimentResults,S=v.isEmpty,O=v.isLoading,P=v.renderDataExpiredBanner,C=v.renderDataRetentionBanner,w=v.retryCount,x=v.segments,k=v.segmentsLoading,j=v.shouldRetry,A=v.shouldShowJoyride,N=v.timeseriesDataByMetricAlias,M=E.default.List();m&&(M=Y.c.fns.orderVariationsList(m.get("variations"),d));var U={previousView:u};_&&_.reach&&(U.totalCount=_.reach.totalCount);var Q=I.default.isStatsAcceleratorExperiment(m)&&n&&!S&&!O&&y.a.createElement(h.a,{onClick:function onClick(){e.setState((function(){return{shouldShowJoyride:!0}}))},testSection:"sa-guided-tour-link"},"Take a tour of this page")||null,K={"flex--1":!0,"js-popover-scroll-area":!0,"results-col":!0,"overflow-y--auto":!A},Z=function getDataRetentionBannerContent(e){return Object(g.getFeatureVariableString)("data_retention_banner",e)||""};return y.a.createElement(y.a.Fragment,null,y.a.createElement("div",{className:"two-col"},y.a.createElement(L.a,U),y.a.createElement("div",{className:l()(K)},y.a.createElement(W.a,{pageType:"ab",rightSideContent:Q}),y.a.createElement(z.a,{segments:x,segmentsLoading:k,isLoading:O,variations:M}),y.a.createElement("div",{className:"overflow-y--auto results-col js-popover-scroll-area flex--1"},y.a.createElement("div",{className:"soft-double--sides push--top"},y.a.createElement("div",{className:"flex flex--column push--bottom",style:{gap:"8px"}},!O&&_&&y.a.createElement(F.a,{endDate:_.end}),C&&y.a.createElement(b.a,{alignment:"center",onDismiss:function onDismiss(){(0,e.props.track)("Data retention banner dismissed"),e.setState({renderDataRetentionBanner:!1})},testSection:"data-retention-banner",type:"warning"},function getDataExpirationBannerContent(){return y.a.createElement(y.a.Fragment,null,"".concat(Z("banner_intro")," "),"".concat(p()(Y.c.fns.getExpirationDate({begin:e.props.campaignTimerange.restrictedBegin,monthsToExpire:18})).format("MMM D[,] YYYY"),". "),"".concat(Z("learn_more_link_description")," "),y.a.createElement(h.a,{href:Z("learn_more_link_url"),newWindow:!0},Z("learn_more_link_content")))}()),P&&y.a.createElement(b.a,{alignment:"center",onDismiss:function onDismiss(){(0,e.props.track)("Data expired banner dismissed"),e.setState({renderDataExpiredBanner:!1})},testSection:"data-expired-banner",type:"bad-news"},function getDataExpiredBannerContent(){var t=e.props.campaignTimerange.restrictedBegin,r=Y.c.fns.getExpirationDate({begin:t,monthsToExpire:18}),n=Math.abs(Y.c.fns.getDaysToExpirationDate({expirationDate:r})),a=p()(t).add(n,"days");return y.a.createElement(y.a.Fragment,null,"".concat(Z("expired_banner_intro")," "),"".concat(p()(a).format("MMM D[,] YYYY")," "),"".concat(Z("expired_banner_end")," "),y.a.createElement(h.a,{href:Z("learn_more_link_url"),newWindow:!0},Z("expired_banner_link_description")))}()),y.a.createElement(J.a,{currentLayer:a,isFlagsProject:s}),y.a.createElement(G.a,{retryCount:w,shouldRetry:j}),f&&y.a.createElement(B.a,null),i&&y.a.createElement("div",{"data-test-section":"processing-adaptive-audience-attention-experiment"},y.a.createElement(D.b,{subject:T.default.Subjects.EXPERIMENT}))),O&&y.a.createElement("div",{className:"shadow-box push-double--bottom position--relative hard height--200"},y.a.createElement(R.a,{shouldFill:!0})),!O&&y.a.createElement(y.a.Fragment,null,y.a.createElement(q.a,{key:"PerformanceSummary",experimentResults:_,integrations:o,metricWrappers:c,experimentVariations:M,baselineVariationId:d,countLabel:"Visitors",selectedExperiment:m,statsAcceleratorEnabled:I.default.isStatsAcceleratorExperiment(m)&&n}),y.a.createElement(V.a,{canUpdateLayer:r,key:"MetricCards",isEmpty:S,isLoading:O,currentLayer:a,metricWrappers:c,variations:M,metricResults:_,timeseriesDataByMetricAlias:N,timeseriesDataFetchFn:this.fetchTimeseriesData})))))),A&&y.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n              body {\n                background-color: white;\n              }\n            "}}),y.a.createElement(H.a,{onClose:this.handleJoyrideClose,run:A}))}}]),ABTestResultsPage}(y.a.Component)).propTypes={campaignTimerange:d.a.shape({begin:d.a.number.isRequired,end:d.a.number.isRequired,restrictedBegin:d.a.number.isRequired}).isRequired,canUpdateLayer:d.a.bool.isRequired,canUseStatsAccelerator:d.a.bool.isRequired,currentLayer:d.a.instanceOf(E.default.Map).isRequired,hasAnyProcessingAdaptiveAudienceConditions:d.a.bool.isRequired,integrations:d.a.instanceOf(E.default.List),isFlagsProject:d.a.bool,metricWrappers:d.a.instanceOf(E.default.List).isRequired,previousView:d.a.string,queryTimerange:d.a.shape({begin:d.a.number.isRequired,end:d.a.number.isRequired}).isRequired,resultsFilteringEnabled:d.a.bool.isRequired,resultsQueryChangeEmitter:d.a.object.isRequired,selectedBaselineVariationId:d.a.number.isRequired,selectedExperiment:d.a.instanceOf(E.default.Map).isRequired,track:d.a.func.isRequired},a=i))||a)||a),K=Object(U.a)(Q);K.componentId="results-ab-test",t.a=K},4745:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(2),c=function JoinedList(e){var t=e.items,r=e.joinText,n=Object(s.isImmutable)(t)?t.size:t.length,a=[];return t.forEach((function(e,t){a.push(e),n>1&&t!==n-1&&a.push(o.a.createElement("span",{key:"join-".concat(t),className:"style--italic muted"}," ".concat(r," ")))})),o.a.createElement("span",null,a)};c.propTypes={items:a.a.oneOfType([a.a.array,a.a.instanceOf(s.default.List)]).isRequired,joinText:a.a.string},c.defaultProps={joinText:"and"},t.a=c},4746:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(151),c=r(26),l=r(5),u=r(2),p=r(4747),f=r(23),d=r(3674),m=function ResetResultsConfirmation(e){return o.a.createElement(p.a,{afterCheckboxesContent:o.a.createElement("div",{className:"push--ends flex flex--row"},o.a.createElement(c.a,{className:"lego-icon push-half--right",name:"circle-exclamation",size:"small"}),o.a.createElement("span",{className:"micro"},"You will still be able to access previous raw event data via Data Export")),beforeCheckboxesContent:o.a.createElement("div",{className:"color--bad-news push--bottom weight--bold"},"Warning: This cannot be undone."),confirmationItems:["This action will clear all your current results","There will be no way to access any previous results","Results will be re-calculated from this point onwards"],primaryActionOnClick:function resetResults(){var t,r=e.currentLayer,n=e.alternateResetResultsUrl;if(n)t=fetch(n,{method:"POST",credentials:"include"});else{var a={id:r.get("id"),earliest:new Date(Date.now())};t=f.actions.save(a)}Promise.resolve(t).then((function(){l.default.hideDialog(),l.default.showNotification({message:tr("The results for {0} have been reset.",r.get("name"))}),l.default.$broadcast(d.b.emittedEventTypes.RESET_RESULTS),s.api.track("Results Reset Confirmed")}))},primaryActionText:"Reset Results",title:"Reset Results"})};m.propTypes={alternateResetResultsUrl:a.a.string,currentLayer:a.a.instanceOf(u.default.Map).isRequired},t.a=m},4747:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(0),a=r.n(n),i=r(1),o=r.n(i),s=r(295),c=r(98),l=r(19),u=r(5);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(CheckboxConfirmationDialog,e);var t=_createSuper(CheckboxConfirmationDialog);function CheckboxConfirmationDialog(){var e;_classCallCheck(this,CheckboxConfirmationDialog);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={confirmationItemValues:e.props.confirmationItems.map((function(){return!1}))},e.updateCheckboxStatus=function(t,r){var n=e.state.confirmationItemValues;n[r]=t,e.setState({confirmationItemValues:n})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(CheckboxConfirmationDialog,[{key:"render",value:function render(){var e=this,t=this.props,r=t.afterCheckboxesContent,n=t.beforeCheckboxesContent,i=t.confirmationItems,o=t.primaryActionButtonStyle,p=t.primaryActionOnClick,f=t.primaryActionText,d=t.title,m=i.map((function(t,r){return a.a.createElement(s.a,{label:t,key:r,onChange:function onChangeFunc(t){var n=t.target.checked;e.updateCheckboxStatus(n,r)},"data-test-section":t.replace(/ /g,"-")})})),y="dialog-".concat(f.replace(/ /g,"-"),"-button");return a.a.createElement("div",{"data-ui-component":!0},a.a.createElement("div",{className:"soft-double"},a.a.createElement("div",{className:"push-double"},a.a.createElement("h3",null,d),n,a.a.createElement("div",null,m),r),a.a.createElement(c.a,{rightGroup:[a.a.createElement(l.a,{key:"1",onClick:u.default.hideDialog,style:"plain",testSection:"dialog-cancel-button"},"Cancel"),a.a.createElement(l.a,{isDisabled:this.state.confirmationItemValues.some((function(e){return!e})),key:"2",onClick:p,style:o,testSection:y},f)]})))}}]),CheckboxConfirmationDialog}(a.a.Component);p.propTypes={afterCheckboxesContent:o.a.node,beforeCheckboxesContent:o.a.node,confirmationItems:o.a.arrayOf(o.a.string).isRequired,primaryActionButtonStyle:o.a.string,primaryActionOnClick:o.a.func.isRequired,primaryActionText:o.a.string.isRequired,title:o.a.string},p.defaultProps={primaryActionButtonStyle:"danger"}},4748:function(e,t,r){"use strict";var n=r(4),a=r.n(n),i=r(3),o=r(149),s=r.n(o),c=r(59),l=r.n(c),u=r(1),p=r.n(u),f=r(0),d=r.n(f),m=r(2),y=r(52),h=r(19),b=r(50),g=r(20),v=r(34);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(FakeData,e);var t=_createSuper(FakeData);function FakeData(e){var r;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FakeData),(r=t.call(this,e)).state={expectedRevenue:1e4,expectedValue:1e6,generateDisable:!0,timespan:l.a.now().valueOf()-l()(r.props.layer.get("earliest")).valueOf(),visitors:1e3},r._generateDecision=function(e,t,n){return{campaign_id:String(r.props.layer.get("id")),experiment_id:String(t),variation_id:String(n),is_campaign_holdback:e}},r._generateEventMap=function(e){var t=r.state,n=t.events,a=t.views,i=m.default.Map();return e.forEach((function(e){var t;t="pageview"===e.get("event_type")?a.find((function(t){return t.get("id")===e.get("event_id")})):n.find((function(t){return t.get("id")===e.get("event_id")}));var r={id:e.get("event_id"),key:t.get("api_name"),event_type:e.get("event_type")};r.conversion_rate=(40*Math.random()+30)/100,i=i.set(e.get("event_id"),Object(m.toImmutable)(r))})),i},r._generateEvents=function(e){var t=e.averageEventValue,n=e.averageRevenueValue,a=e.timestamp,i=e.isHoldback,o=e.eventMap,c=e.currentVariation,l=[{entity_id:String(r.props.layer.get("id")),uuid:String(s()()),key:"campaign_activated",timestamp:a}];return o.forEach((function(e){var r=Math.random(),o=e.get("conversion_rate");i?o-=.05:o+=c.get("conversion_lift"),r<=o&&l.push({key:e.get("key"),timestamp:a,uuid:String(s()()),entity_id:String(e.get("id"))?e.get("id"):"",revenue:n,tags:{},value:t===parseInt(t,10)?1.00000001*t:t})})),l},r._generateExperimentMap=function(){var e=r.state.layerExperiments,t=m.default.Map();return e.forEach((function(e){t=t.set(e.get("id"),e.set("variations",e.get("variations").map((function(e){return e.set("conversion_lift",(e.get("name")||e.get("api_name")).toLowerCase().indexOf("original")>-1?-5*Math.random()/100:(5*Math.random()+5)/100)}))))})),t},r.generateFakeData=function(){var e,t,n,i,o,s,c=r.props,u=c.layer,p=c.project.get("account_id"),f={account_id:String(p),project_id:String(r.props.project.get("id")),visitors:[],anonymize_ip:!0,client_name:"ricky/fakedata.pwned",client_version:"1.0.0"},d=r._generateExperimentMap(),y=a.a.clone(f),h=m.default.Set(u.get("metrics").map((function(e){return Object(m.toImmutable)({event_id:e.get("event_id"),event_type:e.get("event_type")})}))).filter((function(e){return e.get("event_id")})),b=r._generateEventMap(h),g=parseInt(r.state.expectedRevenue/r.state.visitors*100,10),v=r.state.expectedValue/r.state.visitors,_=l()().valueOf();u.get("earliest")&&l()(u.get("earliest")).valueOf()<_&&(_=l()(u.get("earliest")).valueOf());for(var E=0;E<r.state.visitors;E++)E>0&&E%100==0&&console.log("Generated ".concat(E," out of ").concat(r.state.visitors," visitors")),e=r._selectRandomFromArray(d.keySeq().toArray()),t=r._selectRandomFromArray(d.get(e).get("variations")),n=String(t.get("variation_id")),i=!!(u.get("holdback")&&u.get("holdback")/1e4>Math.random()),o=parseInt(Math.max(_+r.state.timespan/r.state.visitors*E,_),10),s={attributes:r._generateFeatures(),session_id:"session_".concat(o),snapshots:[{decisions:[r._generateDecision(i,e,n)],events:r._generateEvents({averageEventValue:v,averageRevenueValue:g,currentVariation:t,eventMap:b,isHoldback:i,timestamp:o})}],visitor_id:"visitor_".concat(o)},y.visitors.push(s),E&&E%1e3==0&&(r._postBatch(y),y=a.a.clone(f));r._postBatch(y)},r._generateFeatures=function(){return[{entity_id:100,type:"browserId",value:r._selectRandomFromArray(["ff","gc","ie","safari"])},{entity_id:200,type:"campaign",value:r._selectRandomFromArray(["winter campaign","discount","frequent visitors"])},{entity_id:300,type:"device",value:r._selectRandomFromArray(["desktop","ipad","iphone","mobile","tablet"])},{entity_id:600,type:"source_type",value:r._selectRandomFromArray(["campaign","direct","referral","search"])}]},r._selectRandomFromArray=function(e){return m.default.List.isList(e)?e.get(Math.floor(Math.random()*e.size)):e[Math.floor(Math.random()*e.length)]},r._postBatch=function(e){fetch("https://logx.optimizely.com/v1/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},r.setRevenue=function(e){r.setState({expectedRevenue:parseInt(e.target.value,10)})},r.setValue=function(e){r.setState({expectedValue:parseFloat(e.target.value)})},r.setTimespan=function(e){r.setState({timespan:parseInt(e.target.value,10)})},r.setVisitors=function(e){r.setState({visitors:parseInt(e.target.value,10)})};var n=e.layer,o=e.project;return Promise.all([b.actions.fetchAll({project_id:o.get("id")}),g.actions.fetchAll({project_id:o.get("id"),layer_id:n.get("id")}),v.actions.fetchAll({project_id:o.get("id")})]).then((function(){r.setState({events:i.default.evaluate(["entityCache","events"]),generateDisable:!1,layerExperiments:i.default.evaluate(["entityCache","layer_experiments"]),views:i.default.evaluate(["entityCache","views"])})})),r}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(FakeData,[{key:"render",value:function render(){return d.a.createElement("div",{className:"soft-double border--bottom"},d.a.createElement("div",{className:"soft--ends"},d.a.createElement(y.a,{label:"Total Visitors",onInput:this.setVisitors,type:"number",value:this.state.visitors})),d.a.createElement("div",{className:"soft--ends"},d.a.createElement(y.a,{label:"Timespan in milliseconds",onInput:this.setTimespan,type:"number",value:this.state.timespan})),d.a.createElement("div",{className:"soft--ends"},d.a.createElement(y.a,{label:"Expected revenue",onInput:this.setRevenue,type:"number",value:this.state.expectedRevenue})),d.a.createElement("div",{className:"soft--ends"},d.a.createElement(y.a,{label:"Expected value",onInput:this.setValue,type:"number",value:this.state.expectedValue})),d.a.createElement("div",{className:"soft--ends"},d.a.createElement(h.a,{isDisabled:this.state.generateDisable,onClick:this.generateFakeData,style:"danger",width:"full"},"Generate Fake Data")))}}]),FakeData}(d.a.Component);_.propTypes={layer:p.a.instanceOf(m.default.Map).isRequired,project:p.a.instanceOf(m.default.Map).isRequired},_.contextTypes={requeryResults:p.a.func.isRequired},t.a=_},4749:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(9),c=r.n(s),l=r(594),u=r(31),p=r(2),f=r(4750),d=r(64),m=r(185),y=r(95),h=r(350),b=r(4751);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(PerformanceSummaryTable,e);var t=_createSuper(PerformanceSummaryTable);function PerformanceSummaryTable(){var e;_classCallCheck(this,PerformanceSummaryTable);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).renderSummaryHeaderSection=function(){var t=e.props,r=t.integrations,n=t.statsAcceleratorEnabled,a=o.a.createElement("h3",{className:"shadow-box__title flush--bottom push--right"},"Summary");if(n)return o.a.createElement("div",{className:"flex"},a,o.a.createElement("span",{className:"push--left push--top position--relative",style:{left:"-10px"},"data-joyride-step":"sa-results-2","data-test-section":"sa-notification-badge"},o.a.createElement(l.a,{color:"primary"},"Stats Accelerator Enabled")));var i=!!r.find((function(e){return e.getIn(["layerLevelData","enabled"])&&e.get("masterLabel").includes("SSRM")}));return Object(u.isFeatureEnabled)(y.b.FEATURES.ssrm_service.FEATURE_KEY)&&i?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"float--left"},a),o.a.createElement("div",{className:"push--left position--relative",style:{top:"-7px",left:"-3px"}},o.a.createElement(b.a,null))):o.a.createElement("div",{className:"flex"},a)},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(PerformanceSummaryTable,[{key:"componentDidMount",value:function componentDidMount(){Object(m.trackHeroElement)("campaign_results_summary_table")}},{key:"render",value:function render(){var e=this.props,t=e.children,r=e.firstRowMuted,n=e.footer,a=e.mainColumnTitle,i=e.onRowLabelsHeaderClick,s=e.rowLabels,l=e.rowLabelSortOrder;return o.a.createElement("div",{className:"shadow-box position--relative"},this.renderSummaryHeaderSection(),o.a.createElement("div",{className:"performance-summary vue-transition--opacity"},o.a.createElement("div",{className:"performance-summary__titles no-border--right hard--top"},o.a.createElement("div",{className:c()({"cursor--pointer":i,"performance-summary__cell":!0,"performance-summary__cell--variation":!0,"performance-summary__cell--title":!0,"border--bottom":!0}),style:{textTransform:"capitalize"},"data-test-section":"performance-summary-main-column-title",onClick:function onRowLabelsHeaderClickFn(){i&&i()}},a,"Â ",l&&o.a.createElement(d.SortDirIndicator,{dir:l})),s.map((function(e,t){var n=e.name,a=e.description;return o.a.createElement("div",{key:t,className:c()({"performance-summary__cell":!0,"performance-summary__cell--variation":!0,"background--faint":!t&&r}),"data-test-section":"performance-summary-title-".concat(t)},o.a.createElement("div",{className:"vertical-align--middle"},o.a.createElement("div",{className:"width--250 truncate",title:n},n),a&&o.a.createElement("div",{className:"micro muted"},a)))}))),o.a.createElement(f.a,{direction:"horizontal",leftClassName:"shadow--inner__left",rightClassName:"shadow--inner__right",bothClassName:"shadow--inner__sides"},o.a.createElement("div",{className:"performance-summary__events hard--top"},o.a.createElement("div",{className:"performance-summary__events--inner"},t)))),n)}}]),PerformanceSummaryTable}(o.a.Component);g.propTypes={borderBottomFirstRow:a.a.bool,children:a.a.node.isRequired,integrations:a.a.instanceOf(p.default.List),firstRowMuted:a.a.bool,footer:a.a.node,mainColumnTitle:a.a.string.isRequired,onRowLabelsHeaderClick:a.a.func,rowLabels:a.a.arrayOf(a.a.object).isRequired,rowLabelSortOrder:a.a.oneOf([h.SORT_DIRECTIONS.ASC,h.SORT_DIRECTIONS.DESC]),statsAcceleratorEnabled:a.a.bool,useSessions:a.a.bool},g.defaultProps={borderBottomFirstRow:!1,firstRowMuted:!1,statsAcceleratorEnabled:!1,useSessions:!1},t.a=g},4750:function(e,t,r){"use strict";var n=r(12),a=r.n(n),i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(104),u=r.n(l);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ScrollClasses,e);var t=_createSuper(ScrollClasses);function ScrollClasses(){return _classCallCheck(this,ScrollClasses),t.apply(this,arguments)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ScrollClasses,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.direction,r=e.rightClassName,n=e.leftClassName,i=e.bothClassName,o=e.topClassName,s=e.bottomClassName,c=u.a.findDOMNode(this);this.__applyHorizontalClasses=function(){if(c){var e=0!==c.scrollLeft,t=c.offsetWidth+c.scrollLeft>=c.scrollWidth;e&&a()(c).addClass(n),t||a()(c).addClass(r),!t&&e&&a()(c).addClass(i),e||(a()(c).removeClass(n),a()(c).removeClass(i)),t&&(a()(c).removeClass(r),a()(c).removeClass(i))}},this.__applyVerticalClasses=function(){if(c&&c.offsetHeight<c.scrollHeight){var e=0!==c.scrollTop,t=c.offsetHeight+c.scrollTop>=c.scrollHeight;e&&a()(c).addClass(o),t||a()(c).addClass(s),!t&&e&&a()(c).addClass(i),e||(a()(c).removeClass(o),a()(c).removeClass(i)),t&&(a()(c).removeClass(s),a()(c).removeClass(i))}},"horizontal"===t?a()(c).on("scroll.scrollClasses",this.__applyHorizontalClasses):"verical"===t&&a()(c).on("scroll.scrollClasses",this.__applyVerticalClasses)}},{key:"componentWillUnmount",value:function componentWillUnmount(){var e=u.a.findDOMNode(this);e&&a()(e).off("scroll.scrollClasses")}},{key:"render",value:function render(){return this.props.children}}]),ScrollClasses}(c.a.Component);p.propTypes={children:o.a.node.isRequired,direction:o.a.oneOf(["horizontal","verical"]).isRequired,rightClassName:o.a.string,leftClassName:o.a.string,topClassName:o.a.string,bottomClassName:o.a.string,bothClassName:o.a.string},t.a=p},4751:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(26),u=r(594),p=r(19),f=r(65),d=r(9),m=r.n(d),y=r(59),h=r.n(y),b=r(3),g=r(5),v=r(1399),_=r(2),E=r(28),S=r(43),O=r(38),R=r(70),P=r(1384),C=r(186),w=r(3683),T=r(3727);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=Object(E.a)({experiments:O.getters.allExperimentsPointingToLayer})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(SSRMSummary,e);var t=_createSuper(SSRMSummary);function SSRMSummary(){var e;_classCallCheck(this,SSRMSummary);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={isGraphOpen:!1,isTimeSeriesLoaded:!1,isTokenExpired:!1,SSRMTimeSeries:[]},e.generateSSRMTimeSeriesConfig=function(){var t=e.props.track,r=e.state.SSRMTimeSeries,n=r.map(Object.values),a=[];return n.forEach((function(e){return e[0]=Math.round(new Date(e[0])),a.push(e),a})),{chart:{style:{fontFamily:"Inter, Arial, Helvetica"},zoomType:"x",resetZoomButton:{theme:{fill:"white",stroke:"#8D96A8",r:2,height:13,style:{fontSize:"11px"},states:{hover:{fill:"white",stroke:"#0074B4",style:{color:"#0074B4"}}}}},events:{selection:function selection(e){var r=e.resetSelection?"SSRM Graph Zoom Reset":"SSRM Graph Zoom Set";t(r,{graphType:"SSRM"})}}},credits:{enabled:!1},title:{text:""},yAxis:{title:{text:"Statistical Significance"},labels:{x:-5}},tooltip:{crosshairs:!0,formatter:function formatter(){var e=this.points.map((function(e){return"<div>\n\t\t\t\t\t\t\t\t".concat(C.a.formatPercentForDisplay(e.y),"\n              </div>")}));return"<div>\n              <div>".concat(h()(this.x).format("dddd, MMMM D, YYYY"),"</div>\n              ").concat(e.join(""),"\n            </div>")},shared:!0,useHTML:!0},plotOptions:{line:{marker:{enabled:!1}}},series:[{color:"#C34687",dashStyle:"ShortDash",data:a,step:"left"}],xAxis:{type:"datetime"}}},e.handleIsGraphOpenState=function(){e.setState((function(e){return{isGraphOpen:!e.isGraphOpen}}))},e.renderSSRMGraph=function(){if(0===e.state.SSRMTimeSeries.length)return c.a.createElement("div",{"data-test-section":"empty-graph-section"},c.a.createElement(v.a,null));var t=e.generateSSRMTimeSeriesConfig();return c.a.createElement("div",{key:"chart","data-test-section":"populated-graph-section"},c.a.createElement("h5",{className:"muted push--bottom"},"Statistical Significance of a Sample Ratio Mismatch Over Time"),c.a.createElement(P.a,{config:t}))},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(SSRMSummary,[{key:"componentDidMount",value:function(){var e=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,a,_next,_throw,"throw",e)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(){var e,t,r,n,a,i;return regeneratorRuntime.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return e=this.props.experiments,t=e.first().get("id"),r=b.default.evaluate(O.getters.layer),n=b.default.evaluate(S.getters.id),a=b.default.evaluate(R.getters.byId(r.get("project_id"))).get("id"),o.next=7,T.a.getSSRMResults(n,t,a);case 7:i=o.sent,Array.isArray(i)?this.setState({isTimeSeriesLoaded:!0,SSRMTimeSeries:i}):this.setState({isTokenExpired:!0});case 9:case"end":return o.stop()}}),_callee,this)})));return function componentDidMount(){return e.apply(this,arguments)}}()},{key:"render",value:function render(){var e=this.state,t=e.isGraphOpen,r=e.isTimeSeriesLoaded,n=e.isTokenExpired,a=e.SSRMTimeSeries;if(n&&g.default.showNotification({message:tr("Unable to fetch SSRM results because your session has expired. Please sign back in.")}),r){var i=m()({"lego-arrow-inline--down":!t,"lego-arrow-inline--up":t}),o=t?"Close ":"Show Details ",s=null,d=!1;return a&&a.length>0&&a[a.length-1].significance&&(d=a[a.length-1].significance>=.99),d&&(s=c.a.createElement("div",{style:{color:"orange",fontWeight:"500",fontSize:"13px"}},c.a.createElement("span",{className:"push-half--left position--relative",style:{bottom:"-3px"}},c.a.createElement(l.a,{color:f.orangeBase,size:"small",name:"circle-exclamation"})),c.a.createElement("span",{className:"push-half--left"},"Potential Ratio Mismatch Detected"))),c.a.createElement("div",null,c.a.createElement("div",{className:"flex flex-align--center soft--bottom","data-test-section":"main-section"},c.a.createElement("div",null,c.a.createElement(u.a,{color:"primary"},"SRM Monitoring Enabled")),c.a.createElement("div",{className:"push-quarter--bottom"},c.a.createElement(p.a,{onClick:this.handleIsGraphOpenState,style:"outline",size:"small"},c.a.createElement("span",null,o,c.a.createElement("span",{className:i})))),s),t?this.renderSSRMGraph():null)}return c.a.createElement("div",{className:"flex push-half--top","data-test-section":"loading-dots"},c.a.createElement(w.a,null))}}]),SSRMSummary}(c.a.Component)).propTypes={experiments:o.a.instanceOf(_.default.List).isRequired,track:o.a.func},a.defaultProps={track:function track(){}},n=a))||n;t.a=x},4752:function(e,t,r){"use strict";r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return y}));var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(9),c=r.n(s),l=r(192),u=r.n(l),p=r(64),f=r(45),d=r(350),m=function PerformanceSummaryColumn(e){var t=e.onHeaderClick;return o.a.createElement("div",{className:"performance-summary__column"},o.a.createElement("div",{className:c()({"performance-summary__cell":!0,"performance-summary__cell--title":!0,"border--bottom":!0,"cursor--pointer":e.onHeaderClick}),"data-test-section":"performance-summary-title",onClick:function headerClickFn(){if(t)return t()},title:e.title},u()(e.title,20),"Â ",e.sortIndicator&&o.a.createElement(p.SortDirIndicator,{dir:e.sortIndicator})),e.children)};m.propTypes={children:a.a.node.isRequired,onHeaderClick:a.a.func,sortIndicator:a.a.oneOf([d.SORT_DIRECTIONS.ASC,d.SORT_DIRECTIONS.DESC]),title:a.a.string.isRequired},m.defaultProps={sortIndicator:null};var y=function PerformanceSummaryCell(e){return o.a.createElement("div",{className:c()({"performance-summary__cell":!0,"color--good-news":e.resultStatus===f.default.liftStatus.BETTER,"color--bad-news":e.resultStatus===f.default.liftStatus.WORSE,"background--faint":e.muted,"border--bottom":e.borderBottom}),"data-test-section":"performance-summary-cell"},o.a.createElement("div",{className:"performance-summary__improvement-block"},o.a.createElement("div",null,o.a.createElement("div",{className:"weight--normal","data-test-section":"performance-summary-cell-primary-value"},e.primaryValue),o.a.createElement("div",{className:"performance-summary__improvement-block__note"},e.primaryLabel),o.a.createElement("div",{className:"micro muted","data-test-section":"performance-summary-cell-secondary-value"},e.secondaryValue),o.a.createElement("div",{className:"performance-summary__improvement-block__note"},e.secondaryLabel))))};y.propTypes={borderBottom:a.a.bool,muted:a.a.bool,primaryLabel:a.a.string.isRequired,primaryValue:a.a.oneOfType([a.a.number,a.a.string]).isRequired,resultStatus:a.a.oneOf([null,f.default.liftStatus.BETTER,f.default.liftStatus.WORSE]),secondaryLabel:a.a.string.isRequired,secondaryValue:a.a.oneOfType([a.a.number,a.a.string]).isRequired},y.defaultProps={borderBottom:!1,muted:!1,resultStatus:null}},4753:function(e,t,r){"use strict";var n,a,i,o=r(4),s=r.n(o),c=r(1),l=r.n(c),u=r(0),p=r.n(u),f=r(9),d=r.n(f),m=r(59),y=r.n(m),h=r(11),b=r(188),g=r(40),v=r(26),_=r(186),E=r(2),S=r(28),O=r(71),R=r(31),P=r(99),C=r.n(P),w=r(732),T=r.n(w),x=r(83),k=r(68),I=r(45),j=r(360),A=r(39),N=r(309),D=r(3674),M=r(1399),L=r(1384),F=r(64),q=r(3683),B=r(155),V=r(4754),W=r(4755),U=r(4115),z=r(4113),H=r(4116),Y=r(3897),G=r(3898),J=r(4756),Q=r(4114),K=r(4757),Z=r.n(K);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=l.a.instanceOf(E.default.Map),$=function MetricTableHeader(e){var t=e.canUseStatsAccelerator,r=e.differenceType,n=e.epochEnabled,a=e.isPrimary,i=e.metric,o=e.selectedSectionId,s=r===N.b.DIFFERENCE_TYPES.ABSOLUTE?" (Absolute)":"",c="Confidence Interval ".concat(s),l={loser:{},neutral:{},winner:{}};return l.loser={confidenceInterval:[-.3,-.1],value:-.2},l.neutral={confidenceInterval:[-.2,.5],value:.15},l.winner={confidenceInterval:[.1,.3],value:.2},r===N.b.DIFFERENCE_TYPES.ABSOLUTE&&(l.loser.confidenceIntervalScaled=[-.5,-.2],l.neutral.confidenceIntervalScaled=[-.4,.7],l.winner.confidenceIntervalScaled=[.2,.5]),p.a.createElement(h.a.TR,{className:"border--bottom"},!o&&p.a.createElement(h.a.TH,null),o&&p.a.createElement(J.a,null),p.a.createElement(G.a,{field:"value",info:I.default.metricCopyProperties.MEASURE_TYPE,isNumerical:!0,metric:i}),p.a.createElement(G.a,{field:"rate",info:I.default.metricCopyProperties.MEASURE_RATE,isNumerical:!0,metric:i}),(!n||r===N.b.DIFFERENCE_TYPES.RELATIVE)&&p.a.createElement(G.a,{differenceType:r,field:"liftValue",info:I.default.metricCopyProperties.IMPROVEMENT,isNumerical:!0,metric:i}),n&&r===N.b.DIFFERENCE_TYPES.ABSOLUTE&&p.a.createElement(F.SortableTableHeader,{additionalContent:p.a.createElement(b.a,{horizontalAttachment:"center",popoverTitle:"Weighted Improvement".concat(t?"":" (Absolute)"),verticalAttachment:"top"},!t&&p.a.createElement(p.a.Fragment,null,p.a.createElement("p",null,p.a.createElement("span",null,"When Stats Accelerator is enabled, the percentage of traffic in each variation is updated every\n                      hour. To avoid bias in the results in this case, Stats Engine calculates a weighted improvement\n                      value to represent an estimate of the true difference in\n                      ".concat(D.c.fns.getHeaderValue(i,I.default.metricCopyProperties.MEASURE_RATE).toLocaleLowerCase(),",\n                      derived from inspecting the intervals of time between the adjustments. ")),p.a.createElement(g.a,{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/Stats_Accelerator#Technical_FAQ",newWindow:!0},"Learn more.")),p.a.createElement("h6",{className:"text--center"},"How to Calculate:"),p.a.createElement("div",{className:"border--all soft"},p.a.createElement("img",{alt:"",className:"anchor--middle",src:Z.a})),p.a.createElement("div",{className:"push--top"},p.a.createElement("div",{className:"oui-pop--over__title"},"Relative"),p.a.createElement("p",null,"The value is the relative improvement due to the variation, calculated as the weighted improvement\n                        divided by the current baseline\n                        ".concat(D.c.fns.getHeaderValue(i,I.default.metricCopyProperties.MEASURE_RATE).toLocaleLowerCase(),".")))),t&&p.a.createElement(p.a.Fragment,null,p.a.createElement("p",null,p.a.createElement("span",null,"Stats Accelerator updates the traffic allocation hourly and calculates a weighted value to represent the true difference in"," ",D.c.fns.getHeaderValue(i,I.default.metricCopyProperties.MEASURE_RATE).toLocaleLowerCase()," ","and avoid results bias. It's recommended you use this result to evaluate the outcome of your experiment.Â "),p.a.createElement(g.a,{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/Stats_Accelerator#Technical_FAQ",newWindow:!0},"Learn More.")),p.a.createElement("div",{className:"oui-pop--over__title"},"What are percentage points (PP)?"),p.a.createElement("p",null,"A PP is a unit that measures the absolute difference between two percentages. Alternately, a percentage (%) measures the relative difference. For example, an increase of 10% to 12% is an overall increase of 20% or 2pp."))),field:"liftValue",isNumerical:!0,joyrideId:a?"sa-results-3":null,sortMax:1},"Weighted Improvement"),p.a.createElement(h.a.TH,{isNumerical:!0,style:{paddingBottom:0}},p.a.createElement("span",{"data-joyride-step":a?"sa-results-4":null},p.a.createElement("div",{className:"flex flex-align--center flex-justified--end"},p.a.createElement("span",{className:"flex"},"Confidence Interval"),p.a.createElement(b.a,{horizontalAttachment:"center",popoverTitle:c,verticalAttachment:"top"},p.a.createElement("p",null,"The confidence interval measures the uncertainty around improvement. It starts out wide and shrinks as more data comes in. Significance means that the confidence interval is completely above or completely below 0."),p.a.createElement("p",null,"If the result is significant and positive, the confidence interval is to the right of 0."),p.a.createElement(U.b,{alignment:"middle",color:U.a.GREEN,differenceType:r,lift:l.winner,width:150}),p.a.createElement("p",{className:"soft--top"},"If the result is significant and negative, the confidence interval is to the left of 0."),p.a.createElement(U.b,{alignment:"middle",color:U.a.RED,differenceType:r,lift:l.loser,width:150}),p.a.createElement("p",{className:"soft--top"},"If the result is inconclusive, the confidence interval includes 0."),p.a.createElement(U.b,{alignment:"middle",color:U.a.GREY,differenceType:r,lift:l.neutral,width:150}),r===N.b.DIFFERENCE_TYPES.ABSOLUTE&&p.a.createElement("div",{className:"soft--top"},p.a.createElement("h6",null,"Relative"),p.a.createElement("p",null,"The values in gray are confidence bounds on the relative improvement scale. They are calculated by dividing both absolute improvement confidence bounds by the current baseline conversion rate.")))))),p.a.createElement(G.a,{field:"liftSignificance",info:I.default.metricCopyProperties.STATISTICAL_SIGNIFICANCE,joyrideId:a?"sa-results-4":null,metric:i,isNumerical:!0}))};$.propTypes={canUseStatsAccelerator:l.a.bool.isRequired,differenceType:N.b.DIFFERENCE_TYPE_PROP,epochEnabled:l.a.bool,isPrimary:l.a.bool,metric:l.a.instanceOf(E.default.Map).isRequired,selectedSectionId:l.a.number},$.defaultProps={differenceType:N.b.DIFFERENCE_TYPES.RELATIVE,epochEnabled:!1,isPrimary:!1,selectedSectionId:null};var ee=function(e){_inherits(MetricTableRow,e);var t=_createSuper(MetricTableRow);function MetricTableRow(){var e;_classCallCheck(this,MetricTableRow);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).formatVisitorsRemaining=function(){var t=e.props,r=t.data,n=t.metricWrapper.get("metric");if(r.get("isBaseline"))return tr("Baseline");var a=r.get("liftvisitorsRemaining");if(a){var i=_.a.formatWholeNumber(a);return a>1e5&&(i=">".concat(_.a.formatWholeNumber(1e5))),"".concat(i," ").concat(T()(a,n.get("scope"),"".concat(n.get("scope"),"s"))," remaining")}return""},e.getSignificanceDisplayValue=function(){var t=e.props.data;return t.get("isBaseline")?"--":_.a.formatStatSig(t.get("liftSignificance"))},e.getVariationResultStatus=function(){var t=e.props,r=t.conclusion,n=t.selectedExperiment,a=t.variationId;return k.default.shouldShowDataOnResultsPage(n)?r.winner===a?D.c.constants.campaignResultStates.WINNER:r.loser===a?D.c.constants.campaignResultStates.LOSER:D.c.constants.campaignResultStates.INCONCLUSIVE:D.c.constants.campaignResultStates.INCONCLUSIVE},e}return _createClass(MetricTableRow,[{key:"render",value:function render(){var e=this.props,t=e.currencyType,r=e.data,n=e.differenceType,a=e.isSimpsonsParadox,i=e.metricWrapper,o=e.resultsFilteringEnabled,s=e.selectedExperiment,c=e.variationId,l=e.variationName,u=e.variationDescription,f=r.get("isBaseline"),m=!f&&r.get("liftIsSignificant"),y=r.get("liftConfidenceInterval"),b=r.get("liftConfidenceIntervalRange"),g=_.a.formatWholeNumber(r.get("samples")),v=r.get("lift"),E=r.get("liftStatus"),S=U.a.GREY,O=!1,R=!1;m&&k.default.shouldShowDataOnResultsPage(s)&&!o&&(E===I.default.liftStatus.BETTER?(S=U.a.GREEN,O=!0):(S=U.a.RED,R=!0));var P={"weight--normal":!0,"color--good-news":O},C=d()(P),w=function getClasses(e){var t=e.toString().includes("-");return d()(_extends({},P,{"color--bad-news":R&&t}))},T=D.c.fns.formatConversionValue(t,r.get("value"),i),x=D.c.fns.formatConversionRate(t,r.get("rate"),i);return p.a.createElement(h.a.TR,{borderStyle:"none"},p.a.createElement(h.a.TD,{verticalAlign:"middle"},p.a.createElement("div",{className:"flex flex-align--center width--auto truncate","data-variation-id":c},p.a.createElement("div",{className:d()({"color--good-news":O,"color--bad-news":R,"push-half--left":!0,"soft--left":!0}),"data-test-section":"variation-name"},p.a.createElement("div",{title:l},l),u&&p.a.createElement("div",{className:"micro muted"},u)))),p.a.createElement(h.a.TD,{isNumerical:!0,verticalAlign:"top"},p.a.createElement("span",{className:w(T)},p.a.createElement("div",{"data-test-section":"conversion-value"},T),p.a.createElement("div",{"data-test-section":"samples",className:"micro muted"},g))),p.a.createElement(h.a.TD,{isNumerical:!0,verticalAlign:"top"},p.a.createElement("span",{"data-test-section":"conversion-rate-value",className:w(x)},x)),p.a.createElement(h.a.TD,{isNumerical:!0,verticalAlign:"top"},p.a.createElement("span",{"data-joyride-step":i.get("isPrimary")?"sa-results-3":null,"data-test-section":"improvement-value",className:d()(_extends({},P,{"color--bad-news":R}))},p.a.createElement(W.a,{isSimpsonsParadox:a,lift:v?v.toJS():null,metricWrapper:i}))),p.a.createElement(h.a.TD,{isNumerical:!0,verticalAlign:"top"},p.a.createElement("span",{"data-test-section":"confidence-interval-value","data-joyride-step":i.get("isPrimary")?"sa-results-4":null,className:C},(f||!k.default.shouldShowDataOnResultsPage(s))&&p.a.createElement(z.a,null),!f&&y&&k.default.shouldShowDataOnResultsPage(s)&&p.a.createElement("div",{className:"flex flex--row flex-align--center float--right"},p.a.createElement(U.b,{alignment:"right",color:S,differenceType:n,isSignificant:m,lift:v&&v.toJS(),metricWrapper:i,range:b&&b.toJS()})))),p.a.createElement(h.a.TD,{isNumerical:!0,verticalAlign:"top"},k.default.shouldShowDataOnResultsPage(s)&&p.a.createElement("div",{className:"flex flex--row flex-align--center flex-justified--end"},p.a.createElement("span",{className:C,"data-joyride-step":i.get("isPrimary")?"sa-results-4":null},p.a.createElement("div",{"data-test-section":"significance-value"},this.getSignificanceDisplayValue()),p.a.createElement("div",{"data-test-section":"visitors-remaining",className:"micro muted"},this.formatVisitorsRemaining()))),!k.default.shouldShowDataOnResultsPage(s)&&p.a.createElement(z.a,null)))}}]),MetricTableRow}(p.a.Component);ee.propTypes={conclusion:l.a.object.isRequired,currencyType:l.a.oneOf(Object.keys(D.c.constants.currencyTypes)),data:l.a.instanceOf(E.default.Map).isRequired,differenceType:N.b.DIFFERENCE_TYPE_PROP,isSimpsonsParadox:l.a.bool,metricWrapper:l.a.instanceOf(E.default.Map).isRequired,resultsFilteringEnabled:l.a.bool.isRequired,selectedExperiment:l.a.instanceOf(E.default.Map),variationDescription:l.a.string.isRequired,variationId:l.a.string.isRequired,variationName:l.a.string.isRequired},ee.defaultProps={currencyType:D.c.constants.currencyTypes.DOLLAR,differenceType:N.b.DIFFERENCE_TYPES.RELATIVE,isSimpsonsParadox:!1,selectedExperiment:null};var te=function MetricsCardDisclose(e){var t=e.children,r=e.isOpen,n=e.title,a=e.onClickHandler,i=d()("oui-disclose",{"is-active":r});return p.a.createElement("div",{className:i,style:{marginTop:"-1px"}},p.a.createElement("a",{onClick:a,className:"oui-disclose__link soft-half flush link--dark",role:"button",tabIndex:0},p.a.createElement("div",{className:"flex flex-align--center oui-disclose__arrow"},p.a.createElement(v.a,{name:r?"chevron-down":"chevron-right",size:"small"}),n)),p.a.createElement("div",{className:"oui--disclose__content"},r&&t))};te.propTypes={children:l.a.node.isRequired,isOpen:l.a.bool.isRequired,onClickHandler:l.a.func.isRequired,title:l.a.node.isRequired};var re=(n=Object(S.a)({canUseStatsAccelerator:A.default.canUseStatsAccelerator,currencyType:D.c.getters.currencyType,differenceType:D.c.getters.differenceType,epochEnabled:D.c.getters.epochEnabled,resultsFilteringEnabled:D.c.getters.resultsFilteringEnabled,selectedSectionId:D.c.getters.selectedSectionId}),Object(O.withTrack)(a=n(((i=function(e){_inherits(MetricsCard,e);var t=_createSuper(MetricsCard);function MetricsCard(){var e;_classCallCheck(this,MetricsCard);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={showAllVariations:!1},e.isResultsPageRedesignEnabled=Object(R.isFeatureEnabled)("results_page_redesign"),e.getConfidenceIntervalSpanningRange=function(){var t=e.props,r=t.overviewData,n=t.variations,a=null,i=null;return n.forEach((function(e){var t=e.get("variation_id").toString(),n=r[t],o=n&&n.lift?n.lift.confidenceInterval:null;if(o){var s=Number.isFinite(o[0])?o[0]:null,c=Number.isFinite(o[1])?o[1]:null;s&&(i=null===i?s:Math.min(i,s)),c&&(a=null===a?c:Math.max(a,c))}})),null===i||null===a?null:Object(E.toImmutable)([i,a])},e.flattenOverviewData=function(){var t=e.props,r=t.overviewData,n=t.variations,a=e.getConfidenceIntervalSpanningRange(),i=E.default.OrderedMap(),o=E.default.List();return n.forEach((function(e){var t=e.get("variation_id").toString(),n=Object(E.toImmutable)(r[t]);if(n){var s=Object(E.toImmutable)({isBaseline:n.get("isBaseline"),lift:n.get("lift"),liftConfidenceInterval:n.getIn(["lift","confidenceInterval"]),liftConfidenceIntervalRange:a,liftIsSignificant:n.getIn(["lift","isSignificant"]),liftSignificance:n.getIn(["lift","significance"])||0,liftStatus:n.getIn(["lift","status"]),liftValue:n.getIn(["lift","value"])||0,liftvisitorsRemaining:n.getIn(["lift","visitorsRemaining"]),rate:n.get("rate"),samples:n.get("samples"),value:n.get("value"),variation_id:t});s.get("isBaseline")?o=o.push(s):i=i.set(t,s)}})),E.default.List([o,i.toList()])},e.generateAverageLabel=function(){var t=e.props.metricWrapper.get("metric"),r=j.default.getAverageLabelsForDisplay(t,!0);return"".concat(r," Over Time")},e.generateAverageSublabel=function(){var t=e.props.metricWrapper.get("metric"),r=j.default.getAverageLabelsForDisplay(t,!1);return"Cumulative ".concat(r," for the variations and ").concat(e.generateControlLabel(),".")},e.generateChartData=function(){var t=e.props,r=t.timeseriesData,n=t.selectedChartType,a="value",i="value";n===D.c.constants.chartType.STAT_SIG&&(a="significance"),n===D.c.constants.chartType.CONVERSION_RATE&&(i="rate"),n===D.c.constants.chartType.SAMPLES&&(i="samples");var o=[],c=0;return s.a.forEach(r,(function(t,r){if(e.getVariationName(r)){var l={color:e.getVariationColor(r),dashStyle:D.c.fns.getDashStyle(c,t.baseline),name:e.getVariationName(r),data:[]};s.a.forEach(t.timeseries,(function(e){if(s.a.includes([D.c.constants.chartType.IMPROVEMENT,D.c.constants.chartType.STAT_SIG],n)){if(e.isBaseline)return null;Number.isNaN(Number(e.lift[a]))||"Infinity"===e.lift[a]||l.data.push([e.timestamp,e.lift[a]])}else{var t=Number.isNaN(Number(e[i]))||"Infinity"===e[i]?null:e[i];l.data.push([e.timestamp,t])}}));var u=s.a.some(l.data,(function(e){return!s.a.isNull(e[1])&&"Infinity"!==e[1]}));l.data.length&&u&&o.push(l),c+=1}})),o},e.generateControlLabel=function(){var t=e.props.currentLayer;return x.default.isPersonalizationLayer(t)?"holdback":"baseline"},e.generateConversionLabel=function(){var t=e.props.metricWrapper,r=t.getIn(["metric","aggregator"]),n=C()(I.default.aggregatorHumanReadable[r]),a=j.default.getMetricValueTypeForDisplay(t.get("metric"),!0,!0);return"".concat(n," ").concat(a," Over Time")},e.generateConversionSublabel=function(){var t=e.props.metricWrapper,r=t.getIn(["metric","aggregator"]),n=C()(I.default.aggregatorHumanReadable[r]),a=j.default.getMetricValueTypeForDisplay(t.get("metric"),!1,!0),i=e.generateControlLabel();return"".concat(n," ").concat(a," for the variations and ").concat(i,".")},e.generateSamplesLabel=function(){var t=e.props.metricWrapper;return"".concat(j.default.getScopeForDisplay(t.get("metric"),!0,!0)," Over Time")},e.generateSamplesSublabel=function(){var t=e.props.metricWrapper;return"Total ".concat(j.default.getScopeForDisplay(t.get("metric"),!1,!0)," for the\n    variations and ").concat(e.generateControlLabel(),".")},e.getChartTooltip=function(e,t,r){var n={circle:"&#9679",diamond:"&#9670",square:"&#9632",triangle:"&#9650","triangle-down":"&#9660"};return{shape:"rect",backgroundColor:"#FFFFFF",borderColor:"none",crosshairs:!0,outside:!0,animation:!1,followPointer:!1,positioner:function positioner(){var e=this.chart,t=e.pointer.chartPosition,r=t.left,n=t.top,a=e.tooltip.container,i=a.offsetWidth,o=a.offsetHeight;return{x:r+e.plotLeft+e.hoverPoint.plotX-i/2,y:Math.max(60,n-o+25)}},formatter:function formatter(){return'<div>\n                  <div class="hljs-strong">\n                    '.concat(y()(this.x).format("ddd, MMM D, YYYY"),'\n                  </div>\n                  <div class="push--bottom">\n                    ').concat(y()(this.x).format("h:mm a"),"\n                  </div>\n                  ").concat(function getVariations(a){return a.map((function(a){return'<div class="flex flex-align--space-between" style="gap: 10px">\n                    <div class="oui-text--center" \n                    style="color: '.concat(a.series.color,'; width: 15px; ">\n                      ').concat(n[a.series.symbol]||"",'\n                    </div>\n                    <span class="max-width--150 truncate">\n                      ').concat(a.series.name,'\n                    </span>\n                    <span class="anchor--right">\n                      ').concat(e(a.y,!1,t,r),"\n                    </span>\n                  </div>")})).join("")}(this.points),"\n                </div>")},shared:!0,useHTML:!0}},e.generateTimeseriesConfig=function(){var t=e.props,r=t.currencyType,n=t.metricWrapper,a=t.selectedChartType,i=t.track,o=e.generateControlLabel(),c=e.getFormatFunctionBasedOnMetricAndChartType(),l=n.get("metric"),u=D.c.constants.currencies[r],p=D.c.fns.shouldPreserveDecimalValue(r,!0),f=D.c.fns.getChartYAxisLabelMap(l),d=a===D.c.constants.chartType.SAMPLES?j.default.getScopeForDisplay(l,!0,!0):f[a],m=e.generateChartData(),y={className:"proximate-legend-optimizely-graph",align:"right",layout:"proximate",useHTML:!0,margin:8},h=m.length>=4;h&&(y={className:"grouped-legend-optimizely-graph",align:"right",layout:"vertical",verticalAlign:"top",borderColor:"#D6D6D6",borderWidth:1,width:143,useHTML:!0,margin:8});var b=e.getChartTooltip(c,u,p);return{chart:{spacingRight:h?0:-32,style:{fontFamily:"Inter, Arial, Helvetica"},zoomType:"x",resetZoomButton:{theme:{fill:"white",stroke:"#8D96A8",r:2,height:13,style:{fontSize:"11px"},states:{hover:{fill:"white",stroke:"#0074B4",style:{color:"#0074B4"}}}}},events:{selection:function selection(e){var t=e.resetSelection?"Results Graph Zoom Reset":"Results Graph Zoom Set";i(t,{graphType:a})}}},legend:y,credits:{enabled:!1},title:{text:""},yAxis:{plotLines:!e.value&&s.a.includes([D.c.constants.chartType.IMPROVEMENT,D.c.constants.chartType.STAT_SIG],a)?[{color:"#9E9E9E",width:3,zIndex:1,value:0}]:[],title:{text:d},labels:{x:-5,formatter:function formatter(){return!this.value&&s.a.includes([D.c.constants.chartType.IMPROVEMENT,D.c.constants.chartType.STAT_SIG],a)?C()(o):c(this.value,!1,u,p)}}},tooltip:b,plotOptions:{line:{marker:{enabled:!1}}},series:m,xAxis:{type:"datetime"}}},e.getFormatFunctionBasedOnMetricAndChartType=function(){var t=e.props,r=t.differenceType,n=t.metricWrapper,a=t.selectedChartType,i=n.get("metric");return a===D.c.constants.chartType.SAMPLES?function(e){return e}:a===D.c.constants.chartType.STAT_SIG?_.a.formatPercentForDisplay:a===D.c.constants.chartType.IMPROVEMENT?D.c.fns.getLiftFormatFunction(n,r):j.default.isRevenueMetric(i)?_.a.formatPriceForDisplay:a!==D.c.constants.chartType.CONVERSION_RATE||i.get("field")||i.get("aggregator")!==I.default.aggregator.UNIQUE?function(e){return e}:_.a.formatPercent},e.getVariationColor=function(t){var r=e.props.variationNamesMap;return"baseline"===t?D.c.constants.chartColors.BASELINE:"variation"===t?D.c.constants.chartColors.PERSONALIZED:r&&r.get(t)&&r.get(t).get("color")||""},e.getVariationName=function(t){var r=e.props.variationNamesMap;if(r){var n=r.get(t);return r.get(t)&&(n.get("name")||n.get("api_name"))||""}return""},e.getVariationDescription=function(t){var r=e.props.variationNamesMap;return r&&r.get(t)&&r.get(t).get("description")||""},e.handleSelectedChartTypeChange=function(t){var r=e.props,n=r.metricIndex,a=r.metricWrapper,i=r.onGraphStateChange,o=r.showGraph,s=r.track,c=a.get("isPrimary"),l=a.get("name");i({showGraph:o,metricWrapper:a,selectedChartType:t}),e.isResultsPageRedesignEnabled?s("Results Graph Type Selected",_extends({graphType:t,metricType:c?"primary":"secondary"},!c&&{metricName:l,metricIndex:n})):s("Results Graph Type Selected",{graphType:t})},e.isSimpsonsParadox=function(t){var r=e.props,n=r.canUseStatsAccelerator,a=r.overviewData,i=r.selectedExperiment,o=a[t];if(!o||o.isBaseline||!i||!k.default.isStatsAcceleratorExperiment(i)||!n)return!1;var s=Object.values(a).find((function(e){return e.isBaseline}));if(!s||!s.rate||Number.isNaN(Number(s.rate))||0===Number(s.rate))return!1;var c=o.rate-s.rate,l=o.lift.valueScaled;return c*l!==Math.abs(c*l)},e.toggleShowGraph=function(t){var r=e.props,n=r.metricWrapper;(0,r.onGraphStateChange)({showGraph:t,selectedChartType:r.selectedChartType,metricWrapper:n})},e.toggleAllVariations=function(){e.setState((function(e){return{showAllVariations:!e.showAllVariations}}))},e.getVariationsToShow=function(){var t=e.props.variations;return e.state.showAllVariations?t.size:D.c.constants.DEFAULT_VARIATIONS_TO_SHOW},e.showLinkForMoreVariations=function(){return e.props.variations.size>D.c.constants.DEFAULT_VARIATIONS_TO_SHOW},e.renderMetricTableHeader=function(){var t=e.props,r=t.canUseStatsAccelerator,n=t.differenceType,a=t.epochEnabled,i=t.metricWrapper,o=t.selectedSectionId;return p.a.createElement($,{canUseStatsAccelerator:r,differenceType:n,epochEnabled:a,isPrimary:i.get("isPrimary"),metric:i.get("metric"),selectedSectionId:o})},e.renderMetricTableRow=function(t){var r=e.props,n=r.conclusion,a=r.currencyType,i=r.differenceType,o=r.metricWrapper,s=r.resultsFilteringEnabled,c=r.selectedExperiment;return p.a.createElement(ee,{conclusion:n,currencyType:a,data:t,differenceType:i,isSimpsonsParadox:e.isSimpsonsParadox(t.get("variation_id")),metricWrapper:o,resultsFilteringEnabled:s,selectedExperiment:c,variationId:t.get("variation_id"),variationName:e.getVariationName(t.get("variation_id")),variationDescription:e.getVariationDescription(t.get("variation_id")),key:"metricTableRow-".concat(t.get("variation_id"))})},e.renderContents=function(){var t=e.props,r=t.isEmpty,n=t.currentLayer,a=t.metricIndex,i=t.metricWrapper,o=t.selectedChartType,s=t.selectedExperiment,c=t.showGraph,l=t.timeseriesData,u=e.state.showAllVariations;if(r)return p.a.createElement(M.a,null);var f=[];k.default.shouldShowDataOnResultsPage(s)&&f.push({description:"Improvement for the variations compared to the ".concat(e.generateControlLabel(),"."),label:"Improvement Over Time",value:D.c.constants.chartType.IMPROVEMENT}),f=f.concat([{description:e.generateSamplesSublabel(),label:e.generateSamplesLabel(),value:D.c.constants.chartType.SAMPLES},{description:e.generateConversionSublabel(),label:e.generateConversionLabel(),value:D.c.constants.chartType.CONVERSIONS},{description:e.generateAverageSublabel(),label:e.generateAverageLabel(),value:D.c.constants.chartType.CONVERSION_RATE}]),k.default.shouldShowDataOnResultsPage(s)&&f.push({description:"Cumulative statistical significance for the variations.",label:"Statistical Significance Over Time",value:D.c.constants.chartType.STAT_SIG});var d=[p.a.createElement(F.SortableTable,{sections:e.flattenOverviewData(),density:"tight",key:"table",renderTableHeader:e.renderMetricTableHeader,renderTableRow:e.renderMetricTableRow,tableId:"metrics-card-".concat(i.get("alias")),tableLayoutAlgorithm:"fixed",limit:e.getVariationsToShow()}),p.a.createElement("div",{key:"linkForMoreVariations"},e.showLinkForMoreVariations()&&p.a.createElement("div",{className:"soft--bottom push-half--bottom"},p.a.createElement(Q.a,{currentLayer:n,onClick:e.toggleAllVariations,showAll:u,testSection:"toggle-more-variations-metric-card"}))),p.a.createElement("div",{key:"chartWrapper",className:"flex"},p.a.createElement("div",{className:"flex flex--row width--1-1"},p.a.createElement("div",{className:"flex flex--1"},p.a.createElement(V.a,{defaultState:c,isPrimary:i.get("isPrimary"),metricData:{name:i.get("name"),index:a},onChange:e.toggleShowGraph,testSection:"toggle-graph-button"})),!k.default.shouldShowDataOnResultsPage(s)&&p.a.createElement("div",{className:"flex micro"},p.a.createElement("span",null,"Distribution Mode:"," ",k.default.getTrafficAllocationLabelFromExperimentPolicy(s)),p.a.createElement(b.a,{verticalAttachment:"bottom"},p.a.createElement("h6",null,"Distribution Mode"),p.a.createElement("p",null,"The distribution mode for this experiment is set to ".concat(k.default.getTrafficAllocationLabelFromExperimentPolicy(s)," so typical results are not applicable. "),p.a.createElement(g.a,{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/Stats_Accelerator#The_Accelerate_Impact_algorithm",newWindow:!0},"Learn more"))))))];if(c&&f.find((function(e){return e.value===o}))&&d.push(p.a.createElement("div",{className:"flex"},p.a.createElement("div",{className:"anchor--right"},p.a.createElement(B.default,{items:f,dropdownDirection:"left",minDropdownWidth:300,onChange:e.handleSelectedChartTypeChange,value:o,testSection:"select-graph-dropdown"})))),c&&!l&&d.push(p.a.createElement("div",{key:"loading",className:"flex--dead-center push-quad--top push-triple--bottom"},p.a.createElement(q.a,null))),c&&l){var m=e.generateTimeseriesConfig();m.series.length?d.push(p.a.createElement("div",{key:"chart"},p.a.createElement(L.a,{config:m}))):d.push(p.a.createElement(M.a,{key:"chart"}))}return d},e}return _createClass(MetricsCard,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.metricWrapper,r=e.showGraph,n=e.timeseriesData,a=e.refreshTimeseries;r&&!n&&a(t)}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){var r=this.props;return!Object.keys(r).every((function(t){return"track"===t||(Object(E.isImmutable)(r[t])?r[t].equals(e[t]):s.a.isEqual(r[t],e[t]))}))||!s.a.isEqual(t,this.state)}},{key:"render",value:function render(){var e=this.props,t=e.canUpdateLayer,r=e.editButtonDisabled,n=e.isOpen,a=e.metricIndex,i=e.metricWrapper,o=e.outlierFiltered,s=e.onDiscloseStateChange,c=e.track,l=i.get("isPrimary");return p.a.createElement("div",{"data-event-api-name":i.get("eventApiName")||"none","data-event-id":i.getIn(["metric","event_id"])||"none"},p.a.createElement("div",{className:d()({"shadow-box":!this.isResultsPageRedesignEnabled,"soft--ends":this.isResultsPageRedesignEnabled,"position--relative":!0}),style:{"border-bottom":this.isResultsPageRedesignEnabled&&!l?"1px solid #F5F5F5":""}},this.isResultsPageRedesignEnabled?p.a.createElement(te,{title:p.a.createElement(H.a,{canUpdateLayer:t,editButtonDisabled:r,metricWrapper:i,outlierFiltered:o}),isOpen:n,onClickHandler:function onClickHandler(){var e="Results Metric";c(e+=n?" Collapsed":" Expanded",_extends({metricType:l?"primary":"secondary"},!l&&{metricName:i.get("name"),metricIndex:a})),s({metricWrapper:i,isOpen:!n})}},p.a.createElement(Y.a,{canUpdateLayer:t,editButtonDisabled:r,metricWrapper:i,muted:!0}),this.renderContents()):p.a.createElement(p.a.Fragment,null,p.a.createElement(H.a,{canUpdateLayer:t,editButtonDisabled:r,metricWrapper:i,outlierFiltered:o}),this.renderContents())))}}]),MetricsCard}(p.a.Component)).propTypes={canUpdateLayer:l.a.bool.isRequired,canUseStatsAccelerator:l.a.bool.isRequired,conclusion:l.a.object,currencyType:l.a.oneOf(Object.keys(D.c.constants.currencyTypes)),currentLayer:l.a.object.isRequired,differenceType:N.b.DIFFERENCE_TYPE_PROP,editButtonDisabled:l.a.bool,epochEnabled:l.a.bool,isEmpty:l.a.bool,isOpen:l.a.bool,metricIndex:l.a.number.isRequired,metricWrapper:X.isRequired,onDiscloseStateChange:l.a.func,onGraphStateChange:l.a.func.isRequired,outlierFiltered:l.a.bool.isRequired,overviewData:l.a.objectOf(D.c.constants.resultShape).isRequired,refreshTimeseries:l.a.func.isRequired,resultsFilteringEnabled:l.a.bool.isRequired,selectedChartType:l.a.string,selectedExperiment:l.a.instanceOf(E.default.Map),selectedSectionId:l.a.number,showGraph:l.a.bool,timeseriesData:l.a.objectOf(l.a.shape({timeseries:l.a.arrayOf(D.c.constants.timeseriesShape)})),track:l.a.func,variationNamesMap:l.a.object,variations:l.a.instanceOf(E.default.List).isRequired},i.defaultProps={conclusion:{status:"inconclusive"},currencyType:D.c.constants.currencyTypes.DOLLAR,differenceType:N.b.DIFFERENCE_TYPES.RELATIVE,editButtonDisabled:!1,epochEnabled:!1,isEmpty:!1,isOpen:!1,onDiscloseStateChange:function onDiscloseStateChange(){},showGraph:!1,selectedChartType:D.c.constants.chartType.IMPROVEMENT,selectedExperiment:null,selectedSectionId:null,timeseriesData:null,track:function track(){},variationNamesMap:{}},i.contextTypes={requeryResults:l.a.func.isRequired},a=i))||a)||a);t.a=re},4754:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(19),u=r(9),p=r.n(u),f=r(71);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=Object(f.withTrack)(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ChartDisclose,e);var t=_createSuper(ChartDisclose);function ChartDisclose(e){var r;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ChartDisclose),(r=t.call(this,e)).toggle=function(){var e=r.props,t=e.isPrimary,n=e.metricData,a=n.name,i=n.index,o=e.onChange,s=e.track,c=r.state.enabled,l="Results Metric Graph";l+=c?" Collapsed":" Expanded",r.setState({enabled:!c}),o(!c),s(l,_extends({metricType:t?"primary":"secondary"},!t&&{metricName:a,metricIndex:i}))};var n=e.defaultState;return r.state={enabled:!!n},r}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ChartDisclose,[{key:"render",value:function render(){var e=this.props.testSection,t=this.state.enabled,r=p()({"lego-arrow-inline--down":!t,"lego-arrow-inline--up":t}),n=t?"Hide Graph ":"View Graph ";return c.a.createElement(l.a,{onClick:this.toggle,style:"outline",size:"small",testSection:e},c.a.createElement("span",null,n,c.a.createElement("span",{className:r})))}}]),ChartDisclose}(c.a.Component)).propTypes={defaultState:o.a.bool,isPrimary:o.a.bool.isRequired,metricData:o.a.shape({index:o.a.number.isRequired,name:o.a.string.isRequired}).isRequired,onChange:o.a.func.isRequired,testSection:o.a.string,track:o.a.func},a.defaultProps={defaultState:!1,testSection:"results-chart-disclose",track:function track(){}},n=a))||n;t.a=d},4755:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(65),u=r(222),p=r(223),f=r(40),d=r(26),m=r(31),y=r(2),h=r(28),b=r(68),g=r(39),v=r(309),_=r(3726),E=r(3786);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=Object(h.a)({canUseStatsAccelerator:g.default.canUseStatsAccelerator,differenceType:_.a.differenceType,selectedExperiment:_.a.selectedExperiment})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ComboLiftCell,e);var t=_createSuper(ComboLiftCell);function ComboLiftCell(){var e;_classCallCheck(this,ComboLiftCell);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={isHovered:!1},e.onMouseEnterHandler=function(){e.setState((function(){return{isHovered:!0}}))},e.onMouseLeaveHandler=function(){e.setState((function(){return{isHovered:!1}}))},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ComboLiftCell,[{key:"render",value:function render(){var e=this.props,t=e.canUseStatsAccelerator,r=e.differenceType,n=e.isSimpsonsParadox,a=e.lift,i=e.metricWrapper,o=e.selectedExperiment,s=Object(m.isFeatureEnabled)("show_simpsons_paradox_notification"),y=this.state.isHovered,h=t&&o&&b.default.isStatsAcceleratorExperiment(o),g=c.a.createElement("div",{className:"flex flex--column",onMouseEnter:this.onMouseEnterHandler,onMouseLeave:this.onMouseLeaveHandler},c.a.createElement(E.a,{lift:a,metricWrapper:i,showHoverState:h}),r===v.b.DIFFERENCE_TYPES.ABSOLUTE&&y&&!!a&&c.a.createElement("div",{className:"micro"},c.a.createElement(E.a,{differenceTypeOverride:v.b.DIFFERENCE_TYPES.RELATIVE,lift:a,metricWrapper:i,showHoverState:h})));return n&&s?c.a.createElement("div",{className:"flex flex--row flex-justified--end"},c.a.createElement("div",{className:"push--right"},c.a.createElement(u.a,{overlay:c.a.createElement(p.a,{title:"Simpson's Paradox Detected"},"These results are an example of Simpsonâ€™s Paradox, which means the delta of the conversion rates may not accurately represent the conclusions of the underlying data.Â ",c.a.createElement(f.a,{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/Stats_Accelerator#simpsons_paradox",newWindow:!0},"Learn More."))},c.a.createElement("span",{className:"flex push-half--top cursor--pointer"},c.a.createElement(d.a,{color:l.yellowBase,size:"small",name:"circle-exclamation"})))),g):g}}]),ComboLiftCell}(c.a.Component)).propTypes={canUseStatsAccelerator:o.a.bool.isRequired,differenceType:v.b.DIFFERENCE_TYPE_PROP.isRequired,isSimpsonsParadox:o.a.bool,lift:v.b.LIFT_SHAPE,metricWrapper:o.a.instanceOf(y.default.Map).isRequired,selectedExperiment:o.a.instanceOf(y.default.Map)},a.defaultProps={isSimpsonsParadox:!1,lift:null,selectedExperiment:null},n=a))||n;t.a=S},4756:function(e,t,r){"use strict";var n=r(0),a=r.n(n),i=r(11),o=r(188),s=r(40);t.a=function SectionVariationHeader(e){return a.a.createElement(i.a.TH,{isNumerical:!1},a.a.createElement("span",null,a.a.createElement("div",{className:"flex flex-align--center soft-half--left"},a.a.createElement("span",{className:"flex"},"Section Variations"),a.a.createElement(o.a,{horizontalAttachment:"center",popoverTitle:"Section Variations",verticalAttachment:"top"},a.a.createElement("p",null,a.a.createElement("span",null,"Metrics for a section variation are calculated by aggregating data collected for all MVT\n                  combinations containing the section variation. "),a.a.createElement(s.a,{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/Section_rollups_in_multivariate_tests",newWindow:!0},"Learn more."))))))}},4757:function(e,t){e.exports="/dist/static/img/p13n/equation_weighted_improvement-7545723c112867d94fd8262b37636167.svg"},4758:function(e,t,r){"use strict";var n,a,i=r(59),o=r.n(i),s=r(1),c=r.n(s),l=r(0),u=r.n(l),p=r(71),f=r(31),d=r(151),m=r(196),y=r(75),h=r(2),b=r(5),g=r(182),v=r.n(g),_=r(38),E=r(243),S=r(23),O=r(70),R=r(49),P=r(1378),C=r(3674),w=r(24),T=r(20),x=r(3681),k=r(3715),I=r(4759),j=r(4760),A=r(4761),N=r(4765),D=r(4766),M=r(4767),L=r(4768),F=r(4769);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=Object(p.withTrack)(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ResultsToolbar,e);var t=_createSuper(ResultsToolbar);function ResultsToolbar(){var e;_classCallCheck(this,ResultsToolbar);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={printBtnLabel:"Print View",printView:!1,printBtnTrack:"Results - Presentation Mode Open"},e.editMetrics=function(){var t=e.props,r=t.currentLayer,n=t.isFullStackProject;b.default.showReactDialog(k.default,{props:{isDialog:!0,requeryResults:e.context.requeryResults,shouldSaveOnConfirm:!0,useFullstackCreateDialog:n},dataBindings:{canSaveEmptyMetrics:S.getters.isLayerInDraftStatus(r.get("id")),experiment:E.getters.currentlyEditingExperimentWrapper,layer:_.getters.layer,metricWrappers:_.getters.currentLayerMetricWrappers}},{fullScreen:!0,dismissOnBack:!0,noPadding:!0}),d.api.virtualPageview("Results","Manage Metrics","manage_metrics")},e.renderDatepicker=function(){var t=e.props,r=t.campaignTimerange,n=t.currentLayer,a=t.currentLayerLiveCommitTag,i=t.onSelectedTimerangeChange,s=t.selectedTimerange,c=n.get("archived"),l=Object(f.isFeatureEnabled)("data_retention_banner"),p=Object(y.default)(r),d=Object(y.default)(s);d.end=o()(d.end).subtract(1,"ms").valueOf();var m=C.d.getExpirationDate({begin:d.begin,monthsToExpire:18}),h=C.d.getDaysToExpirationDate({expirationDate:m});if(h<0&&l){var b=Math.abs(h);d.begin=o()(d.begin).add(b,"days").valueOf(),p.begin=o()(p.begin).add(b,"days").valueOf()}var g=[];return a&&g.push({label:tr("Since Last Publish"),millisecondsBefore:C.d.millisecondsSinceLastPublish(a,r)}),u.a.createElement(A.a,{isDisabled:c,value:d,limit:p,customTimeRanges:g,onChange:function timerangeChangeCallback(e){var t=_extends({},e);t.end=o()(t.end).add(1,"ms").valueOf(),i(t)}})},e.renderSectionPickerDropdown=function(){var t=e.props,r=t.currentLayer,n=t.currentProject,a=t.onSectionChange,i=t.previousView,o=r.get("archived"),s=o?u.a.createElement("div",null,"MVT Section Rollups are not ",u.a.createElement("br",null)," available for archived experiments."):u.a.createElement("div",null,"MVT Section Rollups are not currently ",u.a.createElement("br",null)," available for Full Stack results.");return u.a.createElement(N.a,{isDisabled:!O.fns.isWebProject(n)||o,isDisabledReason:s,onChange:a,previousView:i})},e.renderSegmentPickerDropdown=function(){var t=e.props,r=t.andOrSegmentCondition,n=t.currentLayer,a=t.onSegmentChange,i=t.selectedSegmentIds,o=t.selectedSegments,s=t.selectedSegmentsForDisplay,c=t.segments,l=t.segmentsLoading,p=t.isCleaningResults,f=t.onUpdateIsCleaningFilterResultsToFalse,d=n.get("archived");return u.a.createElement(D.a,{andOrSegmentCondition:r,isDisabled:d,isLoading:l,segments:c,onChange:a,selectedSegmentIds:i,selectedSegments:o,selectedSegmentsForDisplay:s,isCleaningResults:p,onUpdateIsCleaningFilterResultsToFalse:f})},e.renderMetricSelector=function(){var t=e.props.metricWrappers;return u.a.createElement(I.a,{metricWrappers:t,onChange:e.props.onMetricChange})},e.renderBaselinePickerDropdown=function(){var t=e.props,r=t.currentLayer,n=t.onBaselineChange,a=t.selectedExperiment,i=t.selectedVariation,o=t.variations,s=r.get("archived");return a&&i?u.a.createElement(M.a,{isDisabled:s,useHoldbackVariation:!1,selectedExperiment:a,selectedVariation:i,onChange:n,variations:o}):null},e.renderShareLinkPopover=function(){var t=e.props,r=t.currentLayerShareLink,n=t.currentProject,a="".concat(r),i=R.fns.canCreateShareTokens(n);return u.a.createElement(j.a,{shareLink:a,canCreateShareTokens:i})},e.generateEditExperimentUrl=function(){var t=e.props,r=t.currentProject,n=t.currentLayer,a=t.selectedExperiment,i=O.fns.isCustomProject(r);return r&&n?i?w.default.fullStackManagerVariations(r.get("id"),a.get("id")):v.a.layerEdit(r.get("id"),n.get("id")):null},e.shouldRenderSectionPicker=function(){var t=e.props,r=t.currentLayer,n=t.selectedExperiment;return S.fns.isMultivariateTestLayer(r)&&T.fns.hasFullFactorialTrafficPolicy(n)},e.togglePresentationMode=function(){var t=e.state.printView;["h1",".two-col__nav",".root-nav",'[data-test-section="export-csv-btn"]','[data-test-section="results-header-share"]','[data-test-section="manage-metrics-btn"]','[data-test-section="edit-campaign-btn"]','[data-test-section="edit-campaign-btn"]'].forEach((function(e){1===document.querySelectorAll(e).length&&(t?document.querySelector(e).classList.remove("display--none"):document.querySelector(e).classList.add("display--none"))})),e.setState((function(e){return{printBtnLabel:e.printView?"Print View":"Close",printView:!e.printView,printBtnTrack:e.printView?"Results - Presentation Mode Open":"Results - Presentation Mode Close"}}))},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ResultsToolbar,[{key:"componentWillUnmount",value:function componentWillUnmount(){P.a.setDateNow(null)}},{key:"render",value:function render(){var e=this.props,t=e.currentLayer,r=e.currentLayerShareToken,n=e.currentProject,a=e.isFlagsProject,i=e.isLoading,o=e.onClearAllClick,s=e.segmentCondition,c=e.selectedExperiment,l=e.selectedSection,p=e.selectedTimerange,f=e.selectedVariation,d=R.fns.canViewShareTokens(n),y=R.fns.canViewVariationsInP13N(n,t),h=S.fns.isPersonalizationLayer(t),b=S.fns.isMultiArmedBandit(t),g=t.get("archived"),v=c?c.get("id"):t.get("id"),_=h?"Edit Campaign":"Edit Experiment";b&&(_="Edit");var E=this.generateEditExperimentUrl(),O=c?"experiments":"campaigns";return u.a.createElement(x.Toolbar,{testSection:"results-header"},u.a.createElement(x.Left,null,this.renderDatepicker(),h&&this.renderMetricSelector(),(!h||y)&&this.renderSegmentPickerDropdown(),this.shouldRenderSectionPicker()&&this.renderSectionPickerDropdown(),!h&&!b&&this.renderBaselinePickerDropdown(),u.a.createElement(L.a,{onClick:o})),u.a.createElement(x.Right,null,u.a.createElement(m.Track,{eventName:this.state.printBtnTrack,eventType:"click"},u.a.createElement(x.ToolbarButton,{id:"presentation-mode",label:this.state.printBtnLabel,onClick:this.togglePresentationMode,testSection:"presentation-mode-btn"})),!r&&(!l||-1===l.get("id"))&&!b&&u.a.createElement(F.a,{type:O,label:"Export CSV",segmentConditions:s?C.d.encodeSegmentCondition(s.toJS()):null,variation:f,contentId:v,timeRange:p,testSection:"export-csv-btn",isLoading:i}),d&&this.renderShareLinkPopover(),!r&&!a&&u.a.createElement(x.ToolbarButton,{isDisabled:g,label:"Manage Metrics",onClick:this.editMetrics,testSection:"manage-metrics-btn"}),!!E&&!r&&!a&&u.a.createElement(x.ToolbarLink,{href:E,isDisabled:g,label:_,testSection:"edit-campaign-btn"})))}}]),ResultsToolbar}(u.a.Component)).displayName="ResultsToolbar",a.propTypes={andOrSegmentCondition:c.a.oneOf(Object.values(C.b.AND_OR)),campaignTimerange:c.a.shape({begin:c.a.number.isRequired,end:c.a.number.isRequired}).isRequired,currentLayer:c.a.instanceOf(h.default.Map).isRequired,currentLayerShareLink:c.a.string,currentLayerShareToken:c.a.instanceOf(h.default.Map),currentProject:c.a.instanceOf(h.default.Map).isRequired,currentLayerLiveCommitTag:c.a.instanceOf(h.default.Map),isCleaningResults:c.a.bool,isFlagsProject:c.a.bool.isRequired,isFullStackProject:c.a.bool.isRequired,isLoading:c.a.bool,metricWrappers:c.a.instanceOf(h.default.List).isRequired,onBaselineChange:c.a.func,onClearAllClick:c.a.func,onMetricChange:c.a.func,onSectionChange:c.a.func,onSegmentChange:c.a.func,onSelectedTimerangeChange:c.a.func.isRequired,onUpdateIsCleaningFilterResultsToFalse:c.a.func,previousView:c.a.string,segmentCondition:c.a.instanceOf(h.default.List),segments:c.a.array,segmentsLoading:c.a.bool,selectedExperiment:c.a.instanceOf(h.default.Map),selectedSection:c.a.instanceOf(h.default.Map),selectedSegmentIds:c.a.instanceOf(h.default.Set),selectedSegments:c.a.instanceOf(h.default.List),selectedSegmentsForDisplay:c.a.instanceOf(h.default.List),selectedTimerange:c.a.shape({begin:c.a.number.isRequired,end:c.a.number.isRequired}).isRequired,selectedVariation:c.a.instanceOf(h.default.Map),track:c.a.func,variations:c.a.instanceOf(h.default.List)},a.defaultProps={segments:[],track:function track(){}},a.contextTypes={requeryResults:c.a.func.isRequired},n=a))||n;t.a=q},4759:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(5),c=r(192),l=r.n(c),u=r(2),p=r(594),f=r(3681),d=r(76),m=r(3674);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){_inherits(MetricDropdownItem,e);var t=_createSuper(MetricDropdownItem);function MetricDropdownItem(){var e;_classCallCheck(this,MetricDropdownItem);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onClick=function(){var t=e.props,r=t.metric;t.isSelected||e.props.onClick(r),e.context.hideDropdown()},e}return _createClass(MetricDropdownItem,[{key:"render",value:function render(){var e=this.props,t=e.name,r=e.description,n=e.isPrimary,a=e.isSelected,i=n?o.a.createElement(p.a,{color:"primary"},"Primary Metric"):null;return o.a.createElement(d.f,null,o.a.createElement(d.b,{isLink:!a,testSection:"results-header-non-selected-metric",onClick:this.onClick},o.a.createElement("div",null,i),t,o.a.createElement("div",{className:"micro muted"},r)))}}]),MetricDropdownItem}(o.a.Component);y.propTypes={metric:a.a.instanceOf(u.default.Map).isRequired,name:a.a.string.isRequired,description:a.a.string.isRequired,isPrimary:a.a.bool.isRequired,isSelected:a.a.bool.isRequired,onClick:a.a.func.isRequired},y.contextTypes={hideDropdown:a.a.func.isRequired};var h=function(e){_inherits(MetricSelector,e);var t=_createSuper(MetricSelector);function MetricSelector(){var e;_classCallCheck(this,MetricSelector);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onClick=function(t){e.props.onChange(t)},e.renderContents=function(){var t=e.props,r=t.metricWrappers,n=t.selectedMetricWrapper;return o.a.createElement(d.e,{minWidth:300,direction:"right"},r.map((function(t,r){return o.a.createElement(y,{key:r,onClick:e.props.onChange,metric:t.get("metric"),name:t.get("name"),description:t.get("description"),isPrimary:t.get("isPrimary"),isSelected:u.default.is(t,n)})})))},e}return _createClass(MetricSelector,[{key:"render",value:function render(){var e=this.props,t=e.metricWrappers,r=e.selectedMetricWrapper,n=t.find((function(e){return u.default.is(e,r)}));n||(n=t.first());var a=o.a.createElement("span",null,l()(n.get("name"),15),n.get("isPrimary")&&o.a.createElement("span",{className:"style--italic"}," (Primary)"));return o.a.createElement(d.a,{activator:o.a.createElement(f.ToolbarButton,{testSection:"results-header-selected-metric",title:"Metric",label:a,isDropdown:!0})},this.renderContents())}}]),MetricSelector}(o.a.Component);h.propTypes={onChange:a.a.func.isRequired,metricWrappers:a.a.instanceOf(u.default.List).isRequired,selectedMetricWrapper:a.a.instanceOf(u.default.Map)},t.a=s.default.connectGetters(h,{selectedMetricWrapper:m.e.selectedMetricWrapper})},4760:function(e,t,r){"use strict";var n,a,i,o=r(12),s=r.n(o),c=r(1),l=r.n(c),u=r(0),p=r.n(u),f=r(104),d=r.n(f),m=r(19),y=r(26),h=r(52),b=r(98),g=r(223),v=r(222),_=r(245),E=r(71),S=r(2),O=r(3681),R=r(1392),P=r(54),C=r(8),w=r.n(C),T=r(5),x=r(28),k=r(43),I=r(872),j=r(38),A=r(14),N=(r(23),r(152)),D=r(3674);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=(n=Object(x.a)({adminAccountInfo:k.getters.accountInfo,collaborators:I.d.entityCache,currentLayer:j.getters.layer,currentProjectId:A.getters.id,selectedExperiment:D.e.selectedExperiment}),Object(E.withTrack)(a=n(((i=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ShareLinkPopover,e);var t=_createSuper(ShareLinkPopover);function ShareLinkPopover(){var e;_classCallCheck(this,ShareLinkPopover);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={isLoading:!1,isPopoverShown:!1},e.handleResetLinkClick=function(){var t=e.props.track;t("Results Share Link Reset Button Clicked"),T.default.confirm({title:w()("Reset Link"),message:w()("This action will revoke access to the current share link. Are you sure you want to reset this link?"),confirmText:w()("Reset Link"),isWarning:!0}).then((function(){t("Results Share Link Reset"),e.forceOpenShareLinkPopover(),e.setState({isLoading:!0}),D.a.resetShareLink().then((function(){e.setState({isLoading:!1})}))}),e.forceOpenShareLinkPopover)},e.handleCreateLinkClick=function(){e.forceOpenShareLinkPopover(),e.setState({isLoading:!0}),D.a.resetShareLink().then((function(){e.setState({isLoading:!1})}))},e.forceOpenShareLinkPopover=function(){setTimeout((function(){var t=d.a.findDOMNode(_assertThisInitialized(e));s()(t).find('[data-test-section="results-header-share"]').click()}),0)},e.getShareLink=function(){return e.props.shareLink},e.onPopoverShow=function(){e.setState({isPopoverShown:!0})},e.onPopoverHide=function(){e.setState({isPopoverShown:!1})},e.renderSharingContents=function(){var t=e.props,r=t.canCreateShareTokens,n=t.shareLink,a=t.track,i=[p.a.createElement(R.a,{textToCopy:e.getShareLink()||"",key:"copy"},p.a.createElement(m.a,{isDisabled:!n,onClick:function trackEmailClick(){a("Results Share Link Copied"),_.a.track(N.enums.EVENTS.share_link_copy)},style:"outline",testSection:"share-link-copy-btn",width:"full"},p.a.createElement("span",null,p.a.createElement(y.a,{className:"oui-icon color--brand vertical-align--middle",name:"clipboard",size:"small"}),"Â "),"Copy Link")),p.a.createElement(m.a,{key:"reset",style:"danger-outline",testSection:"share-link-reset",width:"full",isDisabled:!r,onClick:e.handleResetLinkClick},p.a.createElement("span",null,p.a.createElement(y.a,{className:"oui-icon color--bad-news vertical-align--middle",name:"arrows-rotate",size:"small"}),"Â "),"Reset Link")];return p.a.createElement("div",{className:"lego-pop--over__body soft","data-test-section":"share-link-popover"},p.a.createElement("h5",{className:"micro soft--bottom"},"Share Results"),p.a.createElement("p",{className:"micro"},"Anyone with this link can access this page. No sign-in required."),p.a.createElement(h.a,{type:"text",testSection:"share-link-input",isReadOnly:!0,value:e.getShareLink()||"Share links cannot be generated by viewers"}),p.a.createElement("div",{className:"push--top"},p.a.createElement(b.a,{centerGroup:i})))},e.renderCreationContents=function(){var t=e.props.canCreateShareTokens;return p.a.createElement("div",{className:"lego-pop--over__body soft","data-test-section":"share-link-popover"},p.a.createElement("h5",{className:"micro soft--bottom"},"Share Results"),p.a.createElement("p",{className:"micro"},"Create a link to give anyone access to this page."),p.a.createElement("div",{className:"push--top"},p.a.createElement(b.a,{centerGroup:[p.a.createElement(m.a,{key:1,style:"outline",testSection:"share-link-create",width:"full",isDisabled:!t,onClick:e.handleCreateLinkClick},"Create Link")]})))},e.renderOverlayContents=function(){var t=e.props.shareLink.indexOf("null")<0;return p.a.createElement(g.a,null,p.a.createElement(P.default,{isLoading:e.state.isLoading},e.state.isLoading&&p.a.createElement("div",{style:{width:300,height:90}}),t&&!e.state.isLoading&&e.renderSharingContents(),!t&&!e.state.isLoading&&e.renderCreationContents()))},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ShareLinkPopover,[{key:"render",value:function render(){var e=this.props.track;return p.a.createElement(v.a,{horizontalAttachment:"right",horizontalTargetAttachment:"right",overlay:this.renderOverlayContents(),onShow:this.onPopoverShow,onHide:this.onPopoverHide,verticalAttachment:"top",verticalTargetAttachment:"bottom"},p.a.createElement(O.ToolbarButton,{label:"Share",isActive:this.state.isPopoverShown,onClick:function onClick(){e("Results Share Opened")},testSection:"results-header-share"}))}}]),ShareLinkPopover}(p.a.Component)).propTypes={adminAccountInfo:l.a.instanceOf(S.default.Map).isRequired,canCreateShareTokens:l.a.bool.isRequired,collaborators:l.a.instanceOf(S.default.Map).isRequired,currentLayer:l.a.instanceOf(S.default.Map).isRequired,currentProjectId:l.a.number.isRequired,selectedExperiment:l.a.instanceOf(S.default.Map),shareLink:l.a.string,track:l.a.func},i.defaultProps={track:function track(){}},a=i))||a)||a);t.a=M},4761:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(71),u=r(4762),p=r(3681),f=r(8),d=r.n(f);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function formatDate(e,t){var r=d.a.date(e);return t&&(r=r.utcOffset(t)),r.format("ll")},y=Object(l.withTrack)(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(DatePickerDropdown,e);var t=_createSuper(DatePickerDropdown);function DatePickerDropdown(){var e;_classCallCheck(this,DatePickerDropdown);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).handleActivatorClick=function(){(0,e.props.track)("Results Date Range Picker Opened",{test:"test"})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(DatePickerDropdown,[{key:"render",value:function render(){var e=this.props,t=e.customTimeRanges,r=e.isDisabled,n=e.limit,a=e.onChange,i=e.timezoneOffset,o=e.value,s="".concat(m(o.begin,i)," - ").concat(m(o.end,i));return c.a.createElement(u.a,{activator:c.a.createElement(p.ToolbarButton,{title:"Date Range",label:s,icon:"#calendar",isDropdown:!0,onClick:this.handleActivatorClick,testSection:"results-header-datepicker",isDisabled:r}),customTimeRanges:t,isDisabled:r,onChange:a,limit:n,value:o,timezoneOffset:i})}}]),DatePickerDropdown}(c.a.Component)).propTypes={customTimeRanges:o.a.arrayOf(o.a.shape({label:o.a.string.isRequired,daysBefore:o.a.number,millisecondsBefore:o.a.number})),isDisabled:o.a.bool.isRequired,limit:o.a.shape({begin:o.a.number.isRequired,end:o.a.number.isRequired}).isRequired,onChange:o.a.func.isRequired,timezoneOffset:o.a.string,track:o.a.func,value:o.a.shape({begin:o.a.number.isRequired,end:o.a.number.isRequired}).isRequired},a.defaultProps={timezoneOffset:"",track:function track(){}},n=a))||n;t.a=y},4762:function(e,t,r){"use strict";var n=r(12),a=r.n(n),i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=(r(4763),r(59)),u=r.n(l),p=r(8),f=r.n(p),d=r(4764),m=r.n(d);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=[{label:f()("All time")},{label:f()("Last 30 days"),daysBefore:30},{label:f()("Last 60 days"),daysBefore:60}],h=function changeTime(e,t){var r=u()(e).utcOffset();return u()(e).utcOffset(t).utcOffset(r,!0)},b=function reverseTimeChange(e,t){return e.utcOffset(t,!0)},g=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(DatePickerDropdown,e);var t=_createSuper(DatePickerDropdown);function DatePickerDropdown(e){var r;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DatePickerDropdown),(r=t.call(this,e)).onChange=function(e,t){var n=r.props.timezoneOffset,a=e.clone(),i=t.clone();n&&(a=b(a,n),i=b(i,n)),r.props.onChange({begin:a.valueOf(),end:i.valueOf()})},r.setActivatorRef=function(e){r.activator=e},r.setContentsRef=function(e){r.contents=e},r.initializePicker=function(){var e=r.props,t=e.isDisabled,n=e.value,i=e.limit,o=e.timezoneOffset,s=a()(r.activator),c=(new Date).toString().match("[^(]+(\\([A-Za-z]+\\))"),l="";c&&c.length>1&&(l=" ".concat(c[1]));var p=u()().format("Z")+l,f=n.begin,d=n.end,y=i.begin,b=i.end;o&&(f=h(f,o).valueOf(),d=h(d,o).valueOf(),y=h(y,o).valueOf(),b=h(b,o).valueOf(),p=o);var g={autoUpdateInput:!0,parentEl:r.contents,template:m.a,startDate:new Date(f),endDate:new Date(d),minDate:new Date(y),maxDate:new Date(b),ranges:r.getPresetRanges(),doNotMoveRanges:!0,rangesUl:'<ul class="lego-tabs-nav"></ul>',rangesLi:'<li class="lego-tabs-nav__item"></li>',calendarsAlwaysVisible:!0,timePicker:!0,showTimeZoneNotification:!0,timeZoneNotificationHTML:"<div>GMT".concat(p,"</div>")};!t&&(r.daterangepicker=s.daterangepicker(g,r.onChange))},r.getPresetRanges=function(){var e=r.props,t=e.limit,n=e.customTimeRanges,a=e.timezoneOffset,i=y;n&&(i=i.concat(n));var o=u()(t.begin),s=u()(t.end);a&&(o=h(t.begin,a),s=h(t.end,a));var c={};return i.forEach((function(e){var t=o;void 0!==e.millisecondsBefore?t=u()(s).subtract({ms:e.millisecondsBefore}):void 0!==e.daysBefore&&(t=u()(s).subtract({days:e.daysBefore}).startOf("day")),u()(t).diff(o)>=0&&(c[e.label]=[t,s])})),c},r.state={value:e.value},r}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(DatePickerDropdown,[{key:"getSnapshotBeforeUpdate",value:function getSnapshotBeforeUpdate(e,t){return e.value.begin!==t.value.begin||e.value.end!==t.value.end}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t,r){r&&this.initializePicker()}},{key:"componentDidMount",value:function componentDidMount(){this.initializePicker()}},{key:"render",value:function render(){return c.a.createElement("div",{"data-ui-component":!0},c.a.createElement("div",{ref:this.setActivatorRef},this.props.activator),c.a.createElement("div",{style:{position:"absolute"},ref:this.setContentsRef}))}}]),DatePickerDropdown}(c.a.Component);g.propTypes={activator:o.a.node.isRequired,isDisabled:o.a.bool.isRequired,onChange:o.a.func.isRequired,value:o.a.shape({begin:o.a.number.isRequired,end:o.a.number.isRequired}).isRequired,limit:o.a.shape({begin:o.a.number.isRequired,end:o.a.number.isRequired}).isRequired,timezoneOffset:o.a.string,customTimeRanges:o.a.arrayOf(o.a.shape({label:o.a.string.isRequired,daysBefore:o.a.number,millisecondsBefore:o.a.number}))},g.defaultProps={timezoneOffset:""},t.a=g},4764:function(e,t){e.exports='<div\n  class="js-daterangepicker daterangepicker lego-pop--over"\n>\n  <div\n    class="js-daterangepicker-ranges lego-tabs lego-tabs--small lego-tabs--sub"\n  ></div>\n\n  <div class="flex flex-direction--row">\n    <div\n      class="js-daterangepicker-left  js-daterangepicker-calendar daterangepicker-calendar daterangepicker-calendar--left flex--1"\n    >\n      <div class="soft--right daterangepicker_input width--250">\n        <label class="lego-label" for="daterangepicker_start">Start date</label>\n        <div class="lego-icon-input position--relative">\n          <input\n            type="text"\n            class="lego-text-input lego-text-input--disabled soft-quad--left"\n            readonly=""\n            type="text"\n            name="daterangepicker_start"\n            value=""\n          />\n          <svg class="lego-icon lego-input-icon__left lego-input-icon__muted">\n            <use xlink:href="#calendar"></use>\n          </svg>\n        </div>\n        <div class="calendar-time push-half--top display--none">\n          <div>\n            <select class="hourselect"></select>\n            <select class="minuteselect"></select>\n            <select class="ampmselect"></select>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div\n      class="js-daterangepicker-right js-daterangepicker-calendar daterangepicker-calendar daterangepicker-calendar--right flex--1"\n    >\n      <div class="daterangepicker_input width--250">\n        <label class="lego-label" for="daterangepicker_end">End date</label>\n        <div class="lego-icon-input position--relative">\n          <input\n            class="lego-text-input lego-text-input--disabled soft-quad--left"\n            type="text"\n            name="daterangepicker_end"\n            value=""\n            readonly=""\n          />\n          <svg class="lego-icon lego-input-icon__left lego-input-icon__muted">\n            <use xlink:href="#calendar"></use>\n          </svg>\n        </div>\n        <div class="calendar-time push-half--top display--none">\n          <div>\n            <select class="hourselect"></select>\n            <select class="minuteselect"></select>\n            <select class="ampmselect"></select>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="push-half--left push-half--top">\n    <label class="lego-label">Time Zone</label>\n    <div class="timezone-notification"></div>\n  </div>\n  <div class="flex flex-direction--row">\n    <div\n      class="js-daterangepicker-left  js-daterangepicker-calendar daterangepicker-calendar daterangepicker-calendar--left flex--1"\n    >\n      <div\n        class="js-daterangepicker-calendar-table daterangepicker-calendar-table"\n      ></div>\n    </div>\n    <div\n      class="js-daterangepicker-right js-daterangepicker-calendar daterangepicker-calendar daterangepicker-calendar--right flex--1"\n    >\n      <div\n        class="js-daterangepicker-calendar-table daterangepicker-calendar-table"\n      ></div>\n    </div>\n  </div>\n\n  <div class="soft--ends soft--right lego-button-row--right">\n    <button\n      class="js-daterangepicker-cancel-btn lego-button lego-button--plain"\n      type="button"\n    ></button>\n    <button\n      class="js-daterangepicker-apply-btn lego-button lego-button--highlight"\n      disabled="disabled"\n      type="button"\n      data-test-section="daterange-apply-button"\n    ></button>\n  </div>\n</div>\n'},4765:function(e,t,r){"use strict";var n,a,i,o=r(9),s=r.n(o),c=r(1),l=r.n(c),u=r(0),p=r.n(u),f=r(190),d=r(71),m=r(2),y=r(192),h=r.n(y),b=r(28),g=r(76),v=r(3681),_=r(38),E=r(14),S=r(3674);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){_inherits(SectionValueItem,e);var t=_createSuper(SectionValueItem);function SectionValueItem(){var e;_classCallCheck(this,SectionValueItem);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onClick=function(){var t=e.props,r=t.isSelected,n=t.onClick,a=t.section;r||(n(a),e.context.hideDropdown())},e}return _createClass(SectionValueItem,[{key:"render",value:function render(){var e=this.props,t=e.isSelected,r=e.section;return p.a.createElement("div",{className:s()(["flush--sides","word-break--all","truncate","width--300","lego-dropdown__block-link","flex","flex--row"],{link:!t}),"data-test-section":"section-picker-dropdown-item",key:r.id,onClick:this.onClick,title:r.value},r.value)}}]),SectionValueItem}(p.a.Component);O.propTypes={isSelected:l.a.bool,onClick:l.a.func,section:l.a.object.isRequired},O.contextTypes={hideDropdown:l.a.func.isRequired};var R=(n=Object(b.a)((function(e){return{currentLayerId:_.getters.id,currentProjectId:E.getters.id,sections:_.getters.allActiveSectionsPointingToLayer,selectedExperimentId:S.e.selectedExperimentId,selectedSection:S.e.selectedSection,selectedSectionId:S.e.selectedSectionId,shareToken:_.getters.shareToken}})),Object(d.withTrack)(a=n(((i=function(e){_inherits(SectionPickerDropdown,e);var t=_createSuper(SectionPickerDropdown);function SectionPickerDropdown(){var e;_classCallCheck(this,SectionPickerDropdown);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).renderContents=function(){var t=e.props,r=t.onChange,n=t.sections,a=t.selectedSectionId,i=t.track,o=[S.b.allCombinationsSection];return n.forEach((function(e){o.push({id:e.get("id"),value:e.get("name")})})),o.map((function(e){var t=e.id===a||e.id===S.b.allCombinationsSection.id&&!a;return p.a.createElement(O,{isSelected:t,key:e.id,onClick:function onClickHandler(){r(e),i("Results Section Selected")},section:e})}))},e}return _createClass(SectionPickerDropdown,[{key:"render",value:function render(){var e=this.props,t=e.isDisabled,r=e.isDisabledReason,n=e.selectedSection,a=e.track,i=p.a.createElement(v.ToolbarButton,{isDisabled:t,isDropdown:!0,label:n?h()(n.get("name"),30):"Unknown Section",onClick:function onClick(){a("Results Section Picker Opened")},testSection:"selected-section-name",title:"Section"});return t&&(i=p.a.createElement(f.a,{content:r},i)),p.a.createElement(g.a,{activator:i},p.a.createElement(g.e,{canScroll:!0,direction:"right",minWidth:150},this.renderContents()))}}]),SectionPickerDropdown}(p.a.Component)).propTypes={currentLayerId:l.a.number.isRequired,currentProjectId:l.a.number.isRequired,isDisabled:l.a.bool,isDisabledReason:l.a.node,onChange:l.a.func.isRequired,previousView:l.a.string,sections:l.a.instanceOf(m.default.List).isRequired,selectedExperimentId:l.a.number.isRequired,selectedSection:l.a.instanceOf(m.default.Map),selectedSectionId:l.a.number,shareToken:l.a.string,track:l.a.func},i.defaultProps={isDisabled:!1,isDisabledReason:"This feature is not available for this experiment",track:function track(){}},a=i))||a)||a);t.a=R},4766:function(e,t,r){"use strict";var n,a,i,o,s=r(4),c=r.n(s),l=r(1),u=r.n(l),p=r(0),f=r.n(p),d=r(9),m=r.n(d),y=r(98),h=r(19),b=r(40),g=r(188),v=r(851),_=r(52),E=r(848),S=r(295),O=r(196),R=r(71),P=r(2),C=r(28),w=r(335),T=r.n(w),x=r(192),k=r.n(x),I=r(3681),j=r(76),A=r(3683),N=r(3674),D=r(3875);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=(_defineProperty(n={},N.b.AND_OR.AND,"Match All Values"),_defineProperty(n,N.b.AND_OR.OR,"Match Any Value"),n),L=function(e){_inherits(ActionButtons,e);var t=_createSuper(ActionButtons);function ActionButtons(){var e;_classCallCheck(this,ActionButtons);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onApplyClick=function(){var t=e.props.onApply,r=e.context.hideDropdown;t(),r()},e.onClearClick=function(){var t=e.props.onClear;N.a.clearSelectedSegments(),t()},e}return _createClass(ActionButtons,[{key:"render",value:function render(){var e=this.props,t=e.isApplyDisabled,r=e.selectedSegmentsSize;return f.a.createElement(j.f,{hideOnClick:!1,key:"actionButtons"},f.a.createElement("div",{className:"flex flex-align--center width--1-1 soft--ends"},!!r&&f.a.createElement("span",{className:"muted"},"".concat(r," attribute value").concat(r>1?"s":""," selected")),f.a.createElement("span",{className:"flex flex--1 flex-justified--end"},f.a.createElement(y.a,{rightGroup:[f.a.createElement(h.a,{isDisabled:!r,key:"cancel",onClick:this.onClearClick,style:"plain",testSection:"segment-picker-clear-button"},"Clear"),f.a.createElement(h.a,{isDisabled:t,key:"apply",onClick:this.onApplyClick,style:"highlight",testSection:"segment-picker-apply-button"},"Apply")]}))))}}]),ActionButtons}(f.a.Component);L.propTypes={isApplyDisabled:u.a.bool,onApply:u.a.func,onClear:u.a.func,selectedSegmentsSize:u.a.number},L.defaultProps={isApplyDisabled:!0,onApply:function onApply(){},onClear:function onClear(){},selectedSegmentsSize:0},L.contextTypes={hideDropdown:u.a.func.isRequired};var F=function(e){_inherits(HelpPopoverContent,e);var t=_createSuper(HelpPopoverContent);function HelpPopoverContent(){return _classCallCheck(this,HelpPopoverContent),t.apply(this,arguments)}return _createClass(HelpPopoverContent,[{key:"render",value:function render(){var e=this.context.hideOverlay;return f.a.createElement("div",null,f.a.createElement("p",null,f.a.createElement("span",{className:"weight--bold"},"Match All Values:"),f.a.createElement("span",null," A visitor will be displayed in segmented results if they match all of the selected attribute values.")),f.a.createElement("p",null,f.a.createElement("span",{className:"weight--bold"},"Match Any Value:"),f.a.createElement("span",null," A visitor will be displayed in segmented results if they match one or more of the selected attribute values.")),f.a.createElement(b.a,{href:"https://help.optimizely.com/Analyze_Results/Segment_your_results_in_Optimizely_X_Web#Segment_the_Results_page",newWindow:!0,onClick:e},"Learn more"))}}]),HelpPopoverContent}(f.a.PureComponent);F.contextTypes={hideOverlay:u.a.func.isRequired};var q=(a=Object(C.b)({alternateContent:f.a.createElement("div",{className:"toolbar__button soft-half--top soft-half--left"},f.a.createElement(g.a,null,"There was a problem loading this part of the page. We have logged this error. It would help our investigation if you filed a support ticket with additional details."))}),Object(R.withTrack)(i=a(((o=function(e){_inherits(SegmentPickerDropdown,e);var t=_createSuper(SegmentPickerDropdown);function SegmentPickerDropdown(e){var r;_classCallCheck(this,SegmentPickerDropdown),(r=t.call(this,e)).setIsCleaningResultsFiltersToFalseAndCallOnChange=function(){r.props.isCleaningResults&&setTimeout((function(){var e=r.props,t=e.onUpdateIsCleaningFilterResultsToFalse,n=e.onChange;t(),n()}),0)},r.resetSegmentPickerState=function(){var e=r.props,t=e.andOrSegmentCondition,n=e.selectedSegments,a=e.selectedSegmentIds;r.setState({initialAndOrSegmentCondition:t,initialSelectedSegments:n,openSegmentIds:a,searchTerm:""})},r.handleDiscloseClick=function(e){r.state.openSegmentIds.includes(e)?r.setState((function(t){return{openSegmentIds:t.openSegmentIds.filter((function(t){return t!==e}))}})):r.setState((function(t){return{openSegmentIds:t.openSegmentIds.add(e)}}))},r.isApplyDisabled=function(){var e=r.props,t=e.andOrSegmentCondition,n=e.selectedSegments,a=r.state,i=a.initialAndOrSegmentCondition,o=a.initialSelectedSegments;return t===i&&P.default.is(n,o)},r.search=function(e){var t=r.props,n=t.segments,a=t.selectedSegmentIds,i=e.target.value;r.setState({searchTerm:i,openSegmentIds:P.default.Set(i?n.map((function(e){return e.id})):a)})},r.selectMatchAll=function(){var e=r.props.track;N.a.setAndOrSegmentCondition(N.b.AND_OR.AND),e("Results Segment Picker Match Type Selected",{matchType:N.b.AND_OR.AND})},r.selectMatchAny=function(){var e=r.props.track;N.a.setAndOrSegmentCondition(N.b.AND_OR.OR),e("Results Segment Picker Match Type Selected",{matchType:N.b.AND_OR.OR})},r.toggleSegment=function(e){var t=r.props.selectedSegments,n=Object(P.toImmutable)({id:e.get("originalId"),value:e.get("value")});N.d.isSegmentSelected(n,t)?N.a.removeSelectedSegment(n):N.a.addSelectedSegment(n)},r.handleSegmentConditionOnChange=function(){var e=r.props,t=e.andOrSegmentCondition,n=e.onChange,a=e.selectedSegments,i=e.track;N.a.setSegmentConditionParam(),D.a.setSegmentConditions(t,a),r.setState({initialAndOrSegmentCondition:t,initialSelectedSegments:a}),n(),i("Results Segment Applied",{matchType:t,numberOfValues:a.size})},r.trackSearch=c.a.debounce((function(){var e=r.props.track,t=r.state.searchTerm;e("Results Segment Picker Attribute Values Searched",{numberOfValues:r.__getMatchingSegmentValueCount(),searchText:t})}),2e3),r.__filterSegmentValue=function(e){var t=r.state.searchTerm;return""===t||T.a.isFilterTermInItem(t,e)},r.__getMatchingSegmentValueCount=function(){var e=r.props.segments,t=r.state.searchTerm;return e.reduce((function(e,n){return e+(n.name.includes(t)?n.values.length:n.values.filter((function(e){return r.__filterSegmentValue(N.d.formatSegmentValue(n,e))})).length)}),0)},r.renderContents=function(){var e=r.props,t=e.andOrSegmentCondition,n=e.isLoading,a=e.segments,i=e.selectedSegments,o=r.state,s=o.openSegmentIds,l=o.searchTerm,u=a.map((function(e){var t=c.a.clone(e);return t.values=t.values.map((function(r){var n=i.find((function(t){return t.get("id")===e.id&&t.get("value")===r}));return{value:r,formattedValue:N.d.formatSegmentValue(t,r),isSelected:!!n,originalId:t.id}})).filter((function(e){return t.name.toLowerCase().indexOf(l.toLowerCase())>-1||r.__filterSegmentValue(e.formattedValue)})),t}));if(a.length){var p=u.find((function(e){return e.id===N.b.DEVICE_SEGMENT_ID})),d=u.find((function(e){return e.id===N.b.DEVICE_TYPE_SEGMENT_ID}));p&&d&&(p.values=p.values.concat(d.values),u=u.filter((function(e){return![N.b.DEVICE_SEGMENT_ID,N.b.DEVICE_TYPE_SEGMENT_ID].includes(e.id)})),p.values.sort(N.d.deviceSegmentValueSortFn),u.unshift(p))}var m=u.filter((function(e){return e.values.length}));return f.a.createElement(j.e,{canScroll:!1,direction:"right",minHeight:"auto",minWidth:350,customStyles:{overflowY:"hidden"}},n&&f.a.createElement("div",{key:"loading",className:"flex--dead-center push-quad--top push-triple--bottom"},f.a.createElement(A.a,null)),!n&&[f.a.createElement(j.f,{hideOnClick:!1,key:"andOrSelect"},f.a.createElement("div",{className:"flex width--1-1 soft--ends flex-align--center"},f.a.createElement("span",{className:"flex flex--1"},f.a.createElement("div",{className:"flex flex--row width--1-1"},f.a.createElement("div",{className:"width--1-2"},f.a.createElement(v.a,{checked:N.b.AND_OR.AND===t,label:M[N.b.AND_OR.AND],onChange:r.selectMatchAll,testSection:"match-all-values-condition"})),f.a.createElement("div",{className:"width--1-2"},f.a.createElement(v.a,{checked:N.b.AND_OR.OR===t,label:M[N.b.AND_OR.OR],onChange:r.selectMatchAny,testSection:"match-any-value-condition"})))),f.a.createElement("span",{className:"push-half--top"},f.a.createElement(O.Track,{eventName:"Tooltip Opened",eventType:"click",properties:{tooltipType:"Segment Picker - Match Type"}},f.a.createElement(g.a,null,f.a.createElement(F,null)))))),f.a.createElement(j.f,{className:"lego-dropdown__item",key:"search"},f.a.createElement("form",{className:"soft-half--ends lego-search"},f.a.createElement(_.a,{type:"text",isFilter:!0,value:l,placeholder:"Browse by Attribute Value",onChange:r.search,onKeyDown:r.trackSearch,testSection:"segments-search-input"}))),f.a.createElement(j.f,{hardSides:!0,key:"segments"},f.a.createElement("ul",{style:{height:"150px",minHeight:"auto",overflowY:"scroll"}},m.map((function(e){var t=Boolean(s&&s.includes(e.id));return f.a.createElement(E.a,{id:e.id,key:e.id,onClick:function onClick(){return r.handleDiscloseClick(e.id)},title:e.name,isOpen:t,testSection:"segments-disclose-".concat(e.name),headerStyle:"header"},e.values.map((function(t){return f.a.createElement(B,{key:"".concat(t.originalId,"-").concat(t.value),entry:t,segment:e,isSelected:t.isSelected,onChange:r.toggleSegment})})))})))),f.a.createElement(L,{isApplyDisabled:r.isApplyDisabled(),key:"action-buttons",onApply:r.handleSegmentConditionOnChange,selectedSegmentsSize:i.size})])};var n=e.andOrSegmentCondition,a=e.selectedSegments,i=e.selectedSegmentIds;return r.state={initialAndOrSegmentCondition:n,initialSelectedSegments:a,openSegmentIds:i,searchTerm:""},r}return _createClass(SegmentPickerDropdown,[{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props,r=t.selectedSegmentIds,n=t.isCleaningResults;0===r.size&&n&&this.setIsCleaningResultsFiltersToFalseAndCallOnChange(),!1===n&&e.isCleaningResults&&this.resetSegmentPickerState()}},{key:"render",value:function render(){var e=this.props,t=e.isDisabled,r=e.selectedSegmentsForDisplay,n=e.track,a=r.size?"".concat(r.size," attribute").concat(r.size>1?"s":""):"All Visitors",i=f.a.createElement("div",{className:"truncate flex flex--row",style:{maxWidth:150},title:a},a),o=f.a.createElement(I.ToolbarButton,{title:"Segment",label:i,isDisabled:t,isDropdown:!0,onClick:function onClick(){n("Results Segment Picker Opened")},testSection:"selected-segment-name"});return f.a.createElement(j.a,{activator:o,ref:this.dropdown},this.renderContents())}}]),SegmentPickerDropdown}(f.a.Component)).displayName="SegmentPickerDropdown",o.propTypes={andOrSegmentCondition:u.a.oneOf(Object.values(N.b.AND_OR)),isCleaningResults:u.a.bool,isDisabled:u.a.bool.isRequired,isLoading:u.a.bool,onChange:u.a.func.isRequired,onUpdateIsCleaningFilterResultsToFalse:u.a.func.isRequired,segments:u.a.arrayOf(u.a.shape({id:u.a.number.isRequired,name:u.a.string,values:u.a.array.isRequired})),selectedSegmentIds:u.a.instanceOf(P.default.Set),selectedSegments:u.a.instanceOf(P.default.List),selectedSegmentsForDisplay:u.a.instanceOf(P.default.List),track:u.a.func},o.defaultProps={andOrSegmentCondition:N.b.AND_OR.AND,isCleaningResults:!1,isLoading:!1,segments:[],selectedSegmentIds:P.default.Set(),selectedSegments:P.default.List(),selectedSegmentsForDisplay:P.default.List(),track:function track(){}},i=o))||i)||i),B=function(e){_inherits(SegmentValueItem,e);var t=_createSuper(SegmentValueItem);function SegmentValueItem(){var e;_classCallCheck(this,SegmentValueItem);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onChange=function(){var t=e.props,r=t.entry;(0,t.onChange)(Object(P.toImmutable)(r))},e}return _createClass(SegmentValueItem,[{key:"render",value:function render(){var e=this.props,t=e.isSelected,r=e.entry,n=r.formattedValue?k()(r.formattedValue,45):r.value;return f.a.createElement("div",{"data-test-section":"segment-value-item",className:m()({"flush--sides":!0,"word-break--all":!0,truncate:!0,"lego-dropdown__block-link":!0,flex:!0,"flex--row":!0}),title:r.formattedValue},f.a.createElement(S.a,{checked:t,label:n,onChange:this.onChange}))}}]),SegmentValueItem}(f.a.Component);B.propTypes={entry:u.a.object.isRequired,isSelected:u.a.bool.isRequired,onChange:u.a.func},B.defaultProps={onChange:function onChange(){}},B.contextTypes={hideDropdown:u.a.func.isRequired},B.displayName="SegmentValueItem",t.a=q},4767:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(71),u=r(2),p=r(3681),f=r(76),d=r(192),m=r.n(d),y=r(3674);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=Object(l.withTrack)(((a=function(e){_inherits(BaselinePickerDropdown,e);var t=_createSuper(BaselinePickerDropdown);function BaselinePickerDropdown(){var e;_classCallCheck(this,BaselinePickerDropdown);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onSelectVariation=function(t){e.props.onChange(t)},e.renderContents=function(){var t,r=e.props,n=r.selectedVariation,a=r.useHoldbackVariation,i=r.direction,o=e.props.variations;return o&&(a&&(o=o.unshift(Object(u.toImmutable)(y.b.holdbackVariation))),t=o.map((function(t){var r=t.get("variation_id")===n.get("variation_id");return c.a.createElement(b,{key:t.get("variation_id"),variation:t,isSelected:r,onClick:e.onSelectVariation})}))),c.a.createElement(f.e,{direction:i,minWidth:250},t)},e}return _createClass(BaselinePickerDropdown,[{key:"render",value:function render(){var e=this.props,t=e.isDisabled,r=e.selectedVariation,n=e.track,a=m()(r.get("name")||r.get("api_name"),30);return c.a.createElement(f.a,{activator:c.a.createElement(p.ToolbarButton,{label:a,isDropdown:!0,isDisabled:t,onClick:function onClick(){n("Results Baseline Picker Opened")},testSection:"selected-baseline-name",title:"Baseline"})},this.renderContents())}}]),BaselinePickerDropdown}(c.a.Component)).propTypes={isDisabled:o.a.bool.isRequired,selectedExperiment:o.a.instanceOf(u.default.Map).isRequired,selectedVariation:o.a.instanceOf(u.default.Map).isRequired,onChange:o.a.func.isRequired,useHoldbackVariation:o.a.bool.isRequired,direction:o.a.oneOf(["left","right"]).isRequired,track:o.a.func,variations:o.a.instanceOf(u.default.List)},a.defaultProps={direction:"right",track:function track(){},useHoldbackVariation:!0},n=a))||n,b=function(e){_inherits(VariationItem,e);var t=_createSuper(VariationItem);function VariationItem(){var e;_classCallCheck(this,VariationItem);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onClick=function(){if(!e.props.isSelected){var t=e.props.variation;e.props.onClick(t),e.context.hideDropdown()}},e}return _createClass(VariationItem,[{key:"render",value:function render(){var e=this.props,t=e.isSelected,r=e.variation,n=r.get("name")||r.get("api_name");return c.a.createElement(f.f,null,c.a.createElement(f.b,{isLink:!t,onClick:this.onClick},c.a.createElement("div",{className:"width--250 truncate",title:n},n)))}}]),VariationItem}(c.a.Component);b.propTypes={onClick:o.a.func.isRequired,variation:o.a.instanceOf(u.default.Map).isRequired,isSelected:o.a.bool.isRequired},b.contextTypes={hideDropdown:o.a.func.isRequired},t.a=h},4768:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(19),c=r(150),l=r(3726),u=function ClearAllButton(e){var t=Object(c.b)({resultsFilteringEnabled:l.a.resultsFilteringEnabled}),r=e.onClick;return t.resultsFilteringEnabled?o.a.createElement(s.a,{onClick:r,style:"plain",testSection:"clear-all-button"},o.a.createElement("span",{className:"color--brand"},"Clear all")):null};u.propTypes={onClick:a.a.func.isRequired},t.a=u},4769:function(e,t,r){"use strict";var n=r(0),a=r.n(n),i=r(59),o=r.n(i),s=r(1),c=r.n(s),l=r(196),u=r(132),p=r.n(u),f=r(24),d=r(3681),m=function ResultsExportButton(e){var t=e.type,r=e.label,n=e.segmentConditions,i=e.variation,s=e.contentId,c=e.timeRange,u=e.testSection,m=e.isLoading;return a.a.createElement(l.Track,{eventName:"Results CSV Exported",eventType:"click"},a.a.createElement(d.ToolbarButton,{label:r,onClick:function exportCSV(){var e=o()(c.end).toISOString(),r=o()(c.begin).toISOString();p.a.setLocation(Object(f.resultsCSV)({type:t,contentId:s,startTime:r,endTime:e,baselineVariationId:i.get("variation_id"),segmentConditions:n}))},testSection:u,isDisabled:m}))};m.propTypes={type:c.a.string,label:c.a.string,variation:c.a.object,contentId:c.a.number,timeRange:c.a.object,testSection:c.a.string,isLoading:c.a.bool,segmentConditions:c.a.string},t.a=m},4770:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(1439),a=r(1),i=r.n(a),o=r(0),s=r.n(o);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MultiSelectWrapper,e);var t=_createSuper(MultiSelectWrapper);function MultiSelectWrapper(){var e;_classCallCheck(this,MultiSelectWrapper);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={anchorDivs:[],newSteps:[]},e.setSteps=function(){var t=e.props.steps,r=[];t.forEach((function(e,t){var n=e.target.split(",");if(0!==n.length){var a="".concat("multi-select-").concat(t),i=!0;if(n.forEach((function(t){var a=document.querySelectorAll(t);a&&0!==a.length&&1===n.length&&1===a.length&&(r.push(e),i=!1)})),i){var o=e.content,c=e.disableBeacon,l=e.spotlightPadding,u=e.title,p={content:s.a.createElement("p",null,o.props.children),disableBeacon:c,spotlightPadding:l,title:u};p.target="[data-joyride-step=".concat(a),r.push(p)}}})),e.setState({newSteps:r})},e.createAnchorDivs=function(){var t=e.props.steps,r=[],n=document.querySelector('[data-test-section="p13n-root-navbar"]'),a=n&&n.getBoundingClientRect().width||0;t.forEach((function(e,t){var n=e.target.split(",");if(0!==n.length){var i="".concat("multi-select-").concat(t),o=0,c=0,l=0,u=0,p=!0;n.forEach((function(e){var t=document.querySelectorAll(e);t&&0!==t.length&&(1!==n.length||1!==t.length?t.forEach((function(e){var t=e.getBoundingClientRect();(!o||t.x-a<o)&&(o=t.x-a),(!c||t.x+t.width-a>c)&&(c=t.x+t.width-a),(!l||t.y<l)&&(l=t.y),(!u||t.y+t.height>u)&&(u=t.y+t.height)})):p=!1)})),p&&r.push(s.a.createElement("div",{"data-joyride-step":i,key:i,style:{height:u-l,left:o,opacity:0,position:"absolute",top:l,width:c-o}}))}})),e.setState({anchorDivs:r})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MultiSelectWrapper,[{key:"componentDidMount",value:function componentDidMount(){this.createAnchorDivs(),this.setSteps(),window.addEventListener("resize",this.createAnchorDivs),window.addEventListener("scroll",this.createAnchorDivs)}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("resize",this.createAnchorDivs),window.removeEventListener("scroll",this.createAnchorDivs)}},{key:"render",value:function render(){var e=this.state,t=e.anchorDivs,r=e.newSteps,a=Object.assign({},this.props,{steps:r});return s.a.createElement(s.a.Fragment,null,s.a.createElement(n.a,a),t)}}]),MultiSelectWrapper}(s.a.Component);c.propTypes={steps:i.a.arrayOf(i.a.object).isRequired}},4771:function(e,t,r){"use strict";var n=r(244),a=r(3),i=r(43),o=r(14),s=r(38),c=r(3712),l=r(539),u=r(23),p=r(49),f=r(39),d=r(261),m=r.n(d),y=r(3674),h=r(4772);t.a={routingSetup:function routingSetup(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h.a.parseParams(e);var d=e.currentProject.id,b=[m.a.revalidateCrossProjectMetrics()],g=a.default.evaluate(s.getters.layer),v=a.default.evaluate(o.getters.isFullStackProject),_={layer_experiment_id:e.params.experiment_id};u.fns.isMultivariateTestLayer(g)&&b.push(n.a.fetchAll(_));var E=a.default.evaluate(f.canUseAnalyticsIntegrationExtensions),S=a.default.evaluateToJS([i.getters.accountPermissions,p.fns.canUseCustomAudienceIntegrations]);if(E&&!v){var O={project_id:d,archived:!1,plugin_type:l.enums.plugin_type.ANALYTICS_INTEGRATION};b.push(l.actions.fetchAll(O))}S&&!v&&b.push(c.a.fetchAll({project_id:d,archived:!1})),Promise.all(b).then((function(){y.a.setDefaults(r),t()}))}}},4772:function(e,t,r){"use strict";var n=r(3674);t.a={parseParams:function parseParams(e){var t=Number(e.params.experiment_id);n.a.setSelectedExperimentId(t);var r=e.params.section_id;r&&n.a.setSelectedSectionId(Number(r)),e&&e.queryParams[n.b.DIFFERENCE_TYPE_PARAM]&&n.a.setDifferenceTypeOverride(e.queryParams[n.b.DIFFERENCE_TYPE_PARAM])}}},4773:function(e,t,r){"use strict";var n=r(4774);t.a={component:n.a}},4774:function(e,t,r){"use strict";var n,a,i=r(9),o=r.n(i),s=r(4),c=r(1),l=r.n(c),u=r(0),p=r.n(u),f=r(71),d=r(40),m=r(848),y=r(28),h=r(101),b=r(2),g=r(765),v=r(453),_=r(263),E=r(66),S=r.n(E),O=r(13),R=r(22),P=r(1398),C=r(3683),w=r(3895),T=r(3785),x=r(4775),k=r(4776),I=r(4779),j=r(3787),A=r(3788),N=r(3789),D=r(3674),M=r(4783),L=r(3790),F=r(3899);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=Object(y.a)({canUpdateLayer:[O.default.project,R.default.canUpdateLayer],currencyType:D.c.getters.currencyType,currentLayer:S.a.layer,hasAnyProcessingAdaptiveAudienceConditions:S.a.hasAnyProcessingAdaptiveAudienceConditions,isFlagsProject:O.default.isFlagsProject,queryTimerange:[D.c.getters.timerange,b.toJS],metricWrappers:S.a.currentLayerMetricWrappers,selectedExperiment:D.c.getters.selectedExperiment,selectedBaselineVariationId:D.c.getters.selectedBaselineVariationId})(n=Object(f.withTrack)(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MultiArmedBanditOptimization,e);var t=_createSuper(MultiArmedBanditOptimization);function MultiArmedBanditOptimization(){var e;_classCallCheck(this,MultiArmedBanditOptimization);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={experimentResults:null,isLoading:!0,isExperimentLoading:!0,segments:[],segmentsLoading:!0,shouldShowJoyride:!1,timeseriesData:null,retryCount:0,shouldRetry:!1},e.resetDefaultsAndFetchData=Object(s.debounce)((function(){D.c.actions.setDefaults(!0),e.refreshResults(!1)}),500),e.addImprovementOverOriginal=function(e){if(!e.metrics||!e.metrics.length)return e;var t={originalConversions:0,originalRate:0,originalVisitors:0,totalConversions:0,totalRate:0,totalVisitors:0},r=Object(s.cloneDeep)(e),n=r.metrics[0].results;return Object.values(Object(s.filter)(n,(function(e){return e.baseline})))[0].timeseries.map((function(e,a){Object.values(n).map((function(e){e.baseline&&(t.originalConversions+=e.timeseries[a].value,t.originalVisitors+=e.timeseries[a].samples),t.totalConversions+=e.timeseries[a].value,t.totalVisitors+=e.timeseries[a].samples})),t.originalRate=0===t.originalVisitors?0:t.originalConversions/t.originalVisitors,t.totalRate=0===t.totalVisitors?0:t.totalConversions/t.totalVisitors,r.bandit_performance[a].improvementOverOriginal=t.totalRate-t.originalRate,r.bandit_performance[a].totalImprovement=t.totalVisitors*t.totalRate-t.totalVisitors*t.originalRate})),r},e.fetchResults=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!!t.initialLoad,n=e.props.queryTimerange;n?(P.a.generateNewTraceId(),e.experimentResultsQuery.query({expectedEndDate:n.end,initialLoad:r}),e.timeseriesQuery.query({expectedEndDate:n.end,initialLoad:r})):setTimeout((function(){e.fetchResults(t)}),D.c.constants.RESULTS_FETCH_DELAY_TIMEOUT)},e.flattenExperimentResults=function(t){var r=e.state.experimentResults,n=e.getVariationNamesMap(),a=e.getOrderedVariations();return M.a.flattenExperimentResults(r,t,n,a)},e.getVariationNamesMap=function(){var t=e.getOrderedVariations();return Object(b.toImmutable)({}).withMutations((function(e){t.forEach((function(t){e.set(String(t.get("variation_id")),t)}))}))},e.getOrderedVariations=function(){var t=e.props,r=t.selectedBaselineVariationId,n=t.selectedExperiment,a=b.default.List();return n&&(a=D.c.fns.orderVariationsList(n.get("variations"),r)),a},e.handleJoyrideClose=function(){g.a.markJoyrideAsSeen(v.a.JOYRIDE_IDS.MAB_RESULTS),e.setState((function(){return{shouldShowJoyride:!1}}))},e.refreshResults=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({isLoading:!0,experimentResults:null,timeseriesData:null}),e.fetchResults({initialLoad:t})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MultiArmedBanditOptimization,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t=this.props,r=t.metricWrappers,n=t.resultsQueryChangeEmitter,a=t.currentLayer,i=t.selectedExperiment;this.experimentResultsQuery=new D.c.RetryQuery({queryFn:D.c.actions.v2FetchExperimentResults,onResults:function onResults(t){var r=t.results,n=t.isZeroSecondResponse,o=t.retryCount,s=t.initialLoad,c=t.timeSinceFetch,l=t.timeSinceRouteStart,u=r.shouldRetry,p=r.fallback;r.begin===r.end||r.reach&&0===r.reach.totalCount||e.setState({shouldShowJoyride:!g.a.hasJoyrideBeenSeen(v.a.JOYRIDE_IDS.MAB_RESULTS)}),s&&!n&&D.c.actions.v2TrackDataReady({pageName:_.b.p13nPages.RESULTS_AB,isCached:!u,timeSinceFetch:c,timeSinceRouteStart:l,retryCount:o,layer:a,experiment:i}),e.setState({experimentResults:r,shouldRetry:u,retryCount:o,isExperimentLoading:p})}}),this.timeseriesQuery=new D.c.RetryQuery({queryFn:function queryFn(){return D.c.actions.v2FetchTimeseriesForABExperiment(r.first())},onResults:function onResults(t){var r=t.results;t.isZeroSecondResponse||e.setState({timeseriesData:e.addImprovementOverOriginal(r),isLoading:!1})}}),n.onQuery((function(t){e.setState({experimentResults:null,isLoading:!0,timeseriesData:null}),t(),e.fetchResults()})),this.fetchResults({initialLoad:!0}),D.c.actions.fetchSegments().then((function(t){e.setState({segments:t.map((function(e){return e.id=parseInt(e.id,10),e})),segmentsLoading:!1})})),this.unlistenPopState=Object(h.addPopStateListener)(this.resetDefaultsAndFetchData)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unlistenPopState()}},{key:"render",value:function render(){var e=this,t=this.props,r=t.currentLayer,n=t.canUpdateLayer,a=t.currencyType,i=t.isFlagsProject,s=t.metricWrappers,c=t.previousView,l=t.track,u=this.state,f=u.experimentResults,y=u.isLoading,h=u.isExperimentLoading,b=u.segments,g=u.segmentsLoading,v=u.shouldShowJoyride,_=u.timeseriesData,E=u.retryCount,S=u.shouldRetry,O=this.getOrderedVariations(),R={previousView:c};f&&f.reach&&(R.totalCount=f.reach.totalCount);var P={"flex--1":!0,"js-popover-scroll-area":!0,"results-col":!0,"overflow-y--auto":!v,"soft-quad--bottom":!0};return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"two-col"},p.a.createElement(w.a,R),p.a.createElement("div",{className:"two-col__content background--faint overflow-x--auto"},p.a.createElement(j.a,{pageType:"multiarmed_bandit",rightSideContent:p.a.createElement(d.a,{onClick:function onClick(){e.setState((function(){return{shouldShowJoyride:!0}})),l("Results MAB Page Tour Started")}},"Take a tour of this page")}),p.a.createElement(N.a,{segments:b,segmentsLoading:g,isLoading:y,variations:O}),p.a.createElement("div",{className:o()(P)},p.a.createElement("div",{className:"soft-double--sides push--top"},p.a.createElement("div",{className:"flex flex--column push--bottom",style:{gap:"8px"}},!y&&f&&p.a.createElement(T.a,{endDate:f.end}),p.a.createElement(L.a,{currentLayer:r,isFlagsProject:i}),p.a.createElement(F.a,{retryCount:E,shouldRetry:S})),h&&p.a.createElement("div",{className:"shadow-box push-double--bottom position--relative hard height--200"},p.a.createElement(C.a,{shouldFill:!0})),!h&&p.a.createElement(p.a.Fragment,null,p.a.createElement(I.a,{data:f,isEmpty:!f||!f.reach.totalCount,isLoading:y,metricWrapper:s.first(),timeseriesData:_||null,variationNamesMap:this.getVariationNamesMap()}),p.a.createElement("h2",null,"Metrics"),p.a.createElement(k.a,{canUpdateLayer:!1,currencyType:a,data:this.flattenExperimentResults(s.first()),joyrideId:"mab-results-6",metricWrapper:s.first()}),s.size>1&&p.a.createElement(m.a,{title:"Additional Metrics"},s.map((function(t,r){return r?p.a.createElement(k.a,{canUpdateLayer:n,currencyType:a,data:e.flattenExperimentResults(t),key:t.get("alias"),metricWrapper:t}):null})))))))),p.a.createElement(x.a,{metricWrapper:s.first(),onClose:this.handleJoyrideClose,run:v}))}}]),MultiArmedBanditOptimization}(p.a.Component)).propTypes={canUpdateLayer:l.a.bool.isRequired,currencyType:l.a.oneOf(Object.keys(D.c.constants.currencyTypes)),currentLayer:l.a.instanceOf(b.default.Map).isRequired,hasAnyProcessingAdaptiveAudienceConditions:l.a.bool.isRequired,isFlagsProject:l.a.bool.isRequired,metricWrappers:l.a.instanceOf(b.default.List).isRequired,previousView:l.a.string.isRequired,queryTimerange:l.a.shape({begin:l.a.number.isRequired,end:l.a.number.isRequired}).isRequired,resultsQueryChangeEmitter:l.a.object.isRequired,selectedBaselineVariationId:l.a.number.isRequired,selectedExperiment:l.a.instanceOf(b.default.Map).isRequired,track:l.a.func},a.defaultProps={currencyType:D.c.constants.currencyTypes.DOLLAR,track:function track(){}},n=a))||n)||n,B=Object(A.a)(q);B.componentId="results-mab-optimization",t.a=B},4775:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(1439),a=r(1),i=r.n(a),o=r(0),s=r.n(o),c=r(40),l=r(1440);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MABJoyride,e);var t=_createSuper(MABJoyride);function MABJoyride(){var e;_classCallCheck(this,MABJoyride);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).handleStateChange=function(t){var r=e.props.onClose;"close"!==t.action&&"skip"!==t.action||r()},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MABJoyride,[{key:"render",value:function render(){var e=this.props.run;return e?s.a.createElement(n.a,{callback:this.handleStateChange,continuous:!0,floaterProps:{disableAnimation:!0},run:e,steps:[{content:s.a.createElement("p",null,"Because the goal of a multi-armed bandit optimization is to drive results quickly instead of finding a statistically-significant winner, the results are different from those of a traditional A/B test. Click through this tour to learn what those differences mean."),placement:"center",target:"body",title:"Multi-Armed Bandit Results"},{content:s.a.createElement("p",null,"This measures the performance of your primary metric for this optimization across all variations. Conversions, revenue, and value are each measured differently.",s.a.createElement(c.a,{href:"https://help.optimizely.com/Measure_success%3A_Track_visitor_behaviors/Types_of_metrics_and_when_to_use_them",newWindow:!0},"Â Learn More")),disableBeacon:!0,spotlightPadding:0,target:'[data-joyride-step="mab-results-2"]',title:"Primary Metric Performance"},{content:s.a.createElement("p",null,"This represents the estimated gain using a multi-armed bandit optimization instead of a standard A/B test. Multi-armed bandits and A/B tests allocate traffic differently.",s.a.createElement(c.a,{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/When_to_experiment_and_when_to_optimize#MAB_optimization_vs._A.2FB_testing:_a_demonstration",newWindow:!0},"Â Learn More")),disableBeacon:!0,spotlightPadding:0,target:'[data-joyride-step="mab-results-3"]',title:"Improvement Over Equal Allocation"},{content:s.a.createElement("p",null,"The multi-armed bandit uses your primary metric to evaluate the performance of each variation and determine how traffic is allocated.",s.a.createElement(c.a,{href:"https://help.optimizely.com/Build_Campaigns_and_Experiments/Multi-armed_bandits%3A_When_to_experiment_and_when_to_optimize",newWindow:!0},"Â Learn More")),disableBeacon:!0,spotlightPadding:0,target:'[data-joyride-step="mab-results-4"]',title:"Primary Metric"},{content:s.a.createElement("p",null,"This graph shows the cumulative improvement over equal allocation over time."),disableBeacon:!0,spotlightPadding:0,target:'[data-joyride-step="mab-results-5"]',title:"Improvement Over Time"},{content:s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"This table shows how your primary metric is performing for each variation, as well as the number of visitors who see each one."),s.a.createElement("p",null,"If you set up secondary metrics, you can view them by expanding the Additional Metrics section.")),disableBeacon:!0,spotlightPadding:10,target:'[data-joyride-step="mab-results-6"]',title:"Variation Metrics"}],styles:{options:{zIndex:1e5}},tooltipComponent:l.a}):null}}]),MABJoyride}(s.a.Component);u.props={onClose:i.a.func,run:i.a.bool},u.defaultProps={onClose:function onClose(){},run:!0}},4776:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(2),c=r(4116),l=r(4777),u=r(350);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MultiArmedBanditMetricCard,e);var t=_createSuper(MultiArmedBanditMetricCard);function MultiArmedBanditMetricCard(){return _classCallCheck(this,MultiArmedBanditMetricCard),t.apply(this,arguments)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MultiArmedBanditMetricCard,[{key:"render",value:function render(){var e=this.props,t=e.canUpdateLayer,r=e.currencyType,n=e.data,a=e.joyrideId,i=e.metricWrapper;return o.a.createElement("div",{className:"soft-double--bottom","data-joyride-step":a},o.a.createElement(c.a,{canUpdateLayer:t,editButtonDisabled:i.get("isPrimary"),metricWrapper:i}),o.a.createElement(l.a,{currencyType:r,data:n,metricWrapper:i}))}}]),MultiArmedBanditMetricCard}(o.a.Component);p.propTypes={canUpdateLayer:a.a.bool.isRequired,currencyType:a.a.oneOf(Object.keys(u.default.currencyTypes)),data:a.a.instanceOf(s.default.List),joyrideId:a.a.string,metricWrapper:a.a.instanceOf(s.default.Map).isRequired},p.defaultProps={currencyType:u.default.currencyTypes.DOLLAR,data:s.default.List(),joyrideId:null}},4777:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(11),c=r(188),l=(r(99),r(2)),u=r(45),p=r(360),f=r(350),d=r(64),m=r(1399),y=r(4778),h=r(3898);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MetricCardTable,e);var t=_createSuper(MetricCardTable);function MetricCardTable(){var e;_classCallCheck(this,MetricCardTable);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).renderMetricTableHeader=function(){var t=e.props.metricWrapper.get("metric"),r=p.default.getScopeForDisplay(t,!0,!0);return o.a.createElement(s.a.TR,null,o.a.createElement(s.a.TH,null),o.a.createElement(d.SortableTableHeader,{additionalContent:o.a.createElement(c.a,{popoverTitle:r},p.default.getScopeDescriptionsForDisplay(t)),field:"samples",isNumerical:!0},r),o.a.createElement(h.a,{field:"value",info:u.default.metricCopyProperties.MEASURE_TYPE,isNumerical:!0,metric:t,showSamples:!1}),o.a.createElement(h.a,{field:"rate",info:u.default.metricCopyProperties.MEASURE_RATE,isNumerical:!0,metric:t}))},e.renderMetricTableRow=function(t){var r=e.props,n=r.currencyType,a=r.metricWrapper;return o.a.createElement(y.a,{currencyType:n,data:t,metricWrapper:a})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MetricCardTable,[{key:"render",value:function render(){var e=this.props,t=e.data,r=e.metricWrapper;return o.a.createElement(o.a.Fragment,null,!t&&o.a.createElement(m.a,null),t&&o.a.createElement(d.SortableTable,{sections:t,density:"tight",renderTableHeader:this.renderMetricTableHeader,renderTableRow:this.renderMetricTableRow,tableId:"metrics-card-".concat(r.get("alias")),tableLayoutAlgorithm:"fixed"}))}}]),MetricCardTable}(o.a.Component);b.propTypes={currencyType:a.a.oneOf(Object.keys(f.default.currencyTypes)),data:a.a.instanceOf(l.default.List),metricWrapper:a.a.instanceOf(l.default.Map).isRequired},b.defaultProps={currencyType:f.default.currencyTypes.DOLLAR,data:[]}},4778:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(11),c=r(2),l=r(186),u=r(350),p=r(3748);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MetricCardTableRow,e);var t=_createSuper(MetricCardTableRow);function MetricCardTableRow(){return _classCallCheck(this,MetricCardTableRow),t.apply(this,arguments)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MetricCardTableRow,[{key:"render",value:function render(){var e=this.props,t=e.currencyType,r=e.data,n=e.metricWrapper,a="NaN"!==r.get("rate")?r.get("rate"):0;return o.a.createElement(s.a.TR,{borderStyle:"top",testSection:"mab-metric-card-table-row"},o.a.createElement(s.a.TD,{isNumerical:!1},r.get("variationId")&&o.a.createElement("span",{className:"flex flex--row flex-align--center"},n.get("isPrimary")&&o.a.createElement("span",{className:"push--left","data-test-section":"variation-color-swatch",style:{backgroundColor:r.get("color"),borderRadius:"3px",height:"16px",width:"16px"}}),o.a.createElement("span",{className:"push--left"},r.get("name")))),o.a.createElement(s.a.TD,{isNumerical:!0},r.get("samples")?l.a.formatWholeNumber(r.get("samples")):0),o.a.createElement(s.a.TD,{isNumerical:!0},p.a.formatConversionValue(t,r.get("value"),n)),o.a.createElement(s.a.TD,{isNumerical:!0},r.get("variationId")?p.a.formatConversionRate(t,a,n):""))}}]),MetricCardTableRow}(o.a.Component);f.propTypes={currencyType:a.a.oneOf(Object.keys(u.default.currencyTypes)),data:a.a.object.isRequired,metricWrapper:a.a.instanceOf(c.default.Map).isRequired},f.defaultProps={currencyType:u.default.currencyTypes.DOLLAR}},4779:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(71),u=r(2),p=r(1399),f=r(4780),d=r(3674),m=r(4781);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=Object(l.withTrack)(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MultiArmedBanditSummary,e);var t=_createSuper(MultiArmedBanditSummary);function MultiArmedBanditSummary(){var e;_classCallCheck(this,MultiArmedBanditSummary);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={selectedChartType:d.b.chartType.NET_IMPROVEMENT},e.getTimeseries=function(){var t=e.props.timeseriesData,r=e.state.selectedChartType;return t?r===d.b.chartType.NET_IMPROVEMENT||r===d.b.chartType.IMPROVEMENT_OVER_ORIGINAL?t.bandit_performance:t.metrics&&t.metrics[0]&&t.metrics[0].results:null},e.isEmpty=function(){var t=e.props.data;return!t||!t.reach||0===t.reach.totalCount},e.setSelectedChartType=function(t){var r=e.props.track;e.setState((function(){return{selectedChartType:t}})),r("Results Graph Type Selected",{graphType:t})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MultiArmedBanditSummary,[{key:"componentDidMount",value:function componentDidMount(){this.improvementChart=d.b.chartType.IMPROVEMENT_OVER_ORIGINAL,this.setState({selectedChartType:this.improvementChart})}},{key:"render",value:function render(){var e=this.props,t=e.isEmpty,r=e.isLoading,n=e.metricWrapper,a=e.timeseriesData,i=e.variationNamesMap,o=this.state.selectedChartType,s=a&&a.bandit_performance&&a.bandit_performance.length&&a.bandit_performance[a.bandit_performance.length-1],l=[d.b.chartType.SAMPLES,this.improvementChart,d.b.chartType.CONVERSION_RATE];return c.a.createElement("div",{className:"push--top soft-quad--top shadow-box"},!r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Summary"),c.a.createElement(m.a,{data:s,isEmpty:t,metricWrapper:n}),this.isEmpty()&&c.a.createElement("div",{"data-joyride-step":"mab-results-5"},c.a.createElement(p.a,null)),!this.isEmpty()&&c.a.createElement("div",{className:"push-double--top"},c.a.createElement(f.a,{availableCharts:l,chartJoyrideId:"mab-results-5",data:this.getTimeseries(),metricWrapper:n,onChartTypeChange:this.setSelectedChartType,selectedChartType:o,variationNamesMap:i}))))}}]),MultiArmedBanditSummary}(c.a.Component)).propTypes={data:o.a.object,isEmpty:o.a.bool.isRequired,isLoading:o.a.bool,metricWrapper:o.a.instanceOf(u.default.Map).isRequired,timeseriesData:o.a.object,track:o.a.func,variationNamesMap:o.a.instanceOf(u.default.Map).isRequired},a.defaultProps={data:{},isLoading:!1,timeseriesData:null,track:function track(){}},n=a))||n;t.a=y},4780:function(e,t,r){"use strict";var n,a,i=r(59),o=r.n(i),s=r(1),c=r.n(s),l=r(0),u=r.n(l),p=r(4),f=r(71),d=r(290),m=r(1384),y=r(3683),h=r(155),b=r(28),g=r(2),v=r(99),_=r.n(v),E=r(186),S=r(66),O=r.n(S),R=r(83),P=r(45),C=r(360),w=r(309),T=r(3674);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=Object(b.a)({currencyType:T.e.currencyType,currentLayer:O.a.layer,differenceType:T.e.differenceType})(n=Object(f.withTrack)(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ChartManager,e);var t=_createSuper(ChartManager);function ChartManager(){var e;_classCallCheck(this,ChartManager);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).generateAverageLabel=function(){var t=e.props.metricWrapper.get("metric"),r=C.default.getAverageLabelsForDisplay(t,!0);return"".concat(r," Over Time")},e.generateAverageSublabel=function(){var t=e.props.metricWrapper.get("metric"),r=C.default.getAverageLabelsForDisplay(t,!1);return"Cumulative ".concat(r," for ").concat(e.getTreatmentDescription(),".")},e.generateChartData=function(){var t=e.props,r=t.data,n=t.selectedChartType,a=t.variationNamesMap,i="value",o="value";n===T.b.chartType.STAT_SIG&&(i="significance"),n===T.b.chartType.CONVERSION_RATE&&(o="rate"),n===T.b.chartType.SAMPLES&&(o="samples");var s=[];if(n===T.b.chartType.NET_IMPROVEMENT)return s.push({color:d.d,name:"Improvement over equal allocation",data:r.map((function(e){return[e.timestamp,"NaN"===e.differenceConversionsPerSample?0:e.differenceConversionsPerSample]}))}),s;if(n===T.b.chartType.IMPROVEMENT_OVER_ORIGINAL)return s.push({color:d.d,name:"Improvement over original",data:r.map((function(e){return[e.timestamp,e.improvementOverOriginal]}))}),s;var c=0;return Object(p.forEach)(r,(function(e,t){if(T.d.getVariationName(t,a)){var r={color:T.d.getVariationColor(t,a),dashStyle:T.d.getDashStyle(c,e.baseline),name:T.d.getVariationName(t,a),data:[]};e.timeseries.forEach((function(e){if([T.b.chartType.IMPROVEMENT,T.b.chartType.STAT_SIG].includes(n)){if(e.isBaseline)return null;Number.isNaN(Number(e.lift[i]))||"Infinity"===e.lift[i]||r.data.push([e.timestamp,e.lift[i]])}else{var t=Number.isNaN(Number(e[o]))||"Infinity"===e[o]?null:e[o];r.data.push([e.timestamp,t])}}));var l=r.data.some((function(e){return!Object(p.isNull)(e[1])&&"Infinity"!==e[1]}));r.data.length&&l&&s.push(r),c+=1}})),s},e.generateControlLabel=function(){var t=e.props.currentLayer;return R.default.isPersonalizationLayer(t)?"holdback":"baseline"},e.generateConversionLabel=function(){var t=e.props.metricWrapper,r=t.getIn(["metric","aggregator"]),n=_()(P.default.aggregatorHumanReadable[r]),a=C.default.getMetricValueTypeForDisplay(t.get("metric"),!0,!0);return"".concat(n," ").concat(a," Over Time")},e.generateConversionSublabel=function(){var t=e.props.metricWrapper,r=t.getIn(["metric","aggregator"]),n=_()(P.default.aggregatorHumanReadable[r]),a=C.default.getMetricValueTypeForDisplay(t.get("metric"),!1,!0);return"".concat(n," ").concat(a," for ").concat(e.getTreatmentDescription())},e.generateSamplesLabel=function(){var t=e.props.metricWrapper;return"".concat(C.default.getScopeForDisplay(t.get("metric"),!0,!0)," Over Time")},e.generateSamplesSublabel=function(){var t=e.props.metricWrapper;return"Total ".concat(C.default.getScopeForDisplay(t.get("metric"),!1,!0)," for ").concat(e.getTreatmentDescription(),".")},e.getChartConfig=function(){var t=e.props,r=t.currencyType,n=t.metricWrapper,a=t.selectedChartType,i=t.track,s=e.generateControlLabel(),c=e.getFormatFunctionBasedOnMetricAndChartType(),l=n.get("metric"),u=T.b.currencies[r],p=T.d.shouldPreserveDecimalValue(r,!0),f=T.d.getChartYAxisLabelMap(l);return{chart:{style:{fontFamily:"Inter, Arial, Helvetica"},zoomType:"x",resetZoomButton:{theme:{fill:"white",stroke:"#8D96A8",r:2,height:13,style:{fontSize:"11px"},states:{hover:{fill:"white",stroke:"#0074B4",style:{color:"#0074B4"}}}}},events:{selection:function selection(e){var t=e.resetSelection?"Results Graph Zoom Reset":"Results Graph Zoom Set";i(t,{graphType:a})}}},credits:{enabled:!1},title:{text:""},yAxis:{title:{text:a===T.b.chartType.SAMPLES?C.default.getScopeForDisplay(l,!0,!0):f[a]},labels:{x:-5,formatter:function formatter(){return!this.value&&[T.b.chartType.IMPROVEMENT,T.b.chartType.STAT_SIG].includes(a)?_()(s):c(this.value,!1,u,p)}}},tooltip:{crosshairs:!0,formatter:function formatter(){var e=this.points.map((function(e){return"<div>\n                <b style='color: ".concat(e.series.color,"'>\n                  ").concat(e.series.name,":\n                </b>\n                ").concat(c(e.y,!1,u,p),"\n              </div>")}));return"<div>\n              <div>".concat(o()(this.x).format("dddd, MMMM D, YYYY"),"</div>\n              ").concat(e.join(""),"\n            </div>")},shared:!0,useHTML:!0},plotOptions:{line:{marker:{enabled:!1}}},series:e.generateChartData(),xAxis:{type:"datetime"}}},e.getDescription=function(t){switch(t){case T.b.chartType.CONVERSION_RATE:return e.generateAverageSublabel();case T.b.chartType.CONVERSIONS:return e.generateConversionSublabel();case T.b.chartType.IMPROVEMENT:return"Improvement for the variations compared to the ".concat(e.generateControlLabel(),".");case T.b.chartType.IMPROVEMENT_OVER_ORIGINAL:return"Overall Improvement for the campaign compared to the original variation.";case T.b.chartType.NET_IMPROVEMENT:return"Overall improvement vs an otherwise identical experiment using equal traffic allocation.";case T.b.chartType.SAMPLES:return e.generateSamplesSublabel();case T.b.chartType.STAT_SIG:return"Cumulative statistical significance for the variations.";default:throw Error("Cannot find description for ".concat(t))}},e.getFormatFunctionBasedOnMetricAndChartType=function(){var t=e.props,r=t.currencyType,n=t.differenceType,a=t.metricWrapper,i=t.selectedChartType,o=a.get("metric");return i===T.b.chartType.SAMPLES?function(e){return e}:i===T.b.chartType.STAT_SIG?E.a.formatPercentForDisplay:i===T.b.chartType.IMPROVEMENT?T.d.getLiftFormatFunction(a,n):i===T.b.chartType.NET_IMPROVEMENT||i===T.b.chartType.IMPROVEMENT_OVER_ORIGINAL?function(e){return T.d.formatLift(r,e,a,w.b.DIFFERENCE_TYPES.ABSOLUTE)}:C.default.isRevenueMetric(o)?E.a.formatPriceForDisplay:i!==T.b.chartType.CONVERSION_RATE||o.get("field")||o.get("aggregator")!==P.default.aggregator.UNIQUE?function(e){return e}:E.a.formatPercent},e.getLabel=function(t){switch(t){case T.b.chartType.CONVERSION_RATE:return e.generateAverageLabel();case T.b.chartType.CONVERSIONS:return e.generateConversionLabel();case T.b.chartType.IMPROVEMENT:return"Improvement Over Time";case T.b.chartType.IMPROVEMENT_OVER_ORIGINAL:return"Improvement Over Original Variation Over Time";case T.b.chartType.NET_IMPROVEMENT:return"Improvement Over Equal Allocation Over Time";case T.b.chartType.SAMPLES:return e.generateSamplesLabel();case T.b.chartType.STAT_SIG:return"Statistical Significance Over Time";default:throw Error("Cannot find label for ".concat(t))}},e.getSelectItems=function(){return e.props.availableCharts.map((function(t){return{description:e.getDescription(t),label:e.getLabel(t),value:t}}))},e.getTreatmentDescription=function(){var t=e.props.currentLayer;return R.default.isMultiArmedBandit(t)?"each arm of the bandit":"the variations and ".concat(e.generateControlLabel())},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ChartManager,[{key:"render",value:function render(){var e=this.props,t=e.chartJoyrideId,r=e.data,n=e.onChartTypeChange,a=e.selectedChartType,i=e.selectorJoyrideId,o=e.track;return u.a.createElement(u.a.Fragment,null,!r&&u.a.createElement("div",{className:"flex--dead-center push-quad--top push-triple--bottom"},u.a.createElement(y.a,null)),r&&u.a.createElement("div",{className:"flex flex--column"},u.a.createElement("div",{className:"anchor--right","data-joyride-step":i},u.a.createElement(h.default,{items:this.getSelectItems(),dropdownDirection:"left",minDropdownWidth:300,onButtonClick:function onButtonClick(){o("Graph Dropdown Opened")},onChange:n,value:a,testSection:"select-graph-dropdown"})),u.a.createElement("div",{"data-joyride-step":t},u.a.createElement(m.a,{config:this.getChartConfig()}))))}}]),ChartManager}(u.a.Component)).propTypes={availableCharts:c.a.arrayOf(c.a.oneOf(Object.values(T.b.chartType))).isRequired,chartJoyrideId:c.a.string,currencyType:c.a.oneOf(Object.values(T.b.currencyTypes)).isRequired,currentLayer:c.a.instanceOf(g.default.Map).isRequired,data:c.a.oneOfType([c.a.object,c.a.array]).isRequired,differenceType:c.a.oneOf(Object.values(w.b.DIFFERENCE_TYPES)).isRequired,metricWrapper:c.a.instanceOf(g.default.Map).isRequired,onChartTypeChange:c.a.func,selectedChartType:c.a.oneOf(Object.values(T.b.chartType)).isRequired,selectorJoyrideId:c.a.string,track:c.a.func,variationNamesMap:c.a.instanceOf(g.default.Map).isRequired},a.defaultProps={chartJoyrideId:null,onChartTypeChange:function onChartTypeChange(){},selectorJoyrideId:null,track:function track(){}},n=a))||n)||n;t.a=x},4781:function(e,t,r){"use strict";var n,a,i=r(9),o=r.n(i),s=r(1),c=r.n(s),l=r(0),u=r.n(l),p=r(188),f=(r(65),r(2)),d=r(28),m=r(45),y=r(309),h=r(350),b=r(3748),g=r(3726),v=r(3897),_=r(4782);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=Object(d.a)({currencyType:g.a.currencyType})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(SummaryRibbon,e);var t=_createSuper(SummaryRibbon);function SummaryRibbon(){var e;_classCallCheck(this,SummaryRibbon);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).getImprovementClass=function(){return e.isImprovement()?{"color--good-news":!0}:{}},e.isImprovement=function(){var t=e.props.data;return e.isIncreaseMetric()?t&&t.totalImprovement>0:t&&t.totalImprovement<0},e.isIncreaseMetric=function(){return"increasing"===e.props.metricWrapper.getIn(["metric","winning_direction"])},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(SummaryRibbon,[{key:"render",value:function render(){var e=this.props,t=e.currencyType,r=e.data,n=e.isEmpty,a=e.metricWrapper,i=a.getIn(["metric","aggregator"])===m.default.aggregator.UNIQUE,s=u.a.createElement("div",{className:"flex flex--row width--1-1 flex-align--center"},u.a.createElement("div",{className:"flex"},u.a.createElement("div",{className:o()(_extends({flex:!0,"push-double--right":!0},this.getImprovementClass()))},b.a.formatLift(t,r.improvementOverOriginal,a,y.b.DIFFERENCE_TYPES.ABSOLUTE)),u.a.createElement("div",{className:o()(_extends({flex:!0,"push--right":!0},this.getImprovementClass()))},"".concat(r.differenceConversions>0?"+":"").concat(b.a.formatConversionValue(t,r.totalImprovement,a)))),!n&&u.a.createElement("div",{className:"muted"},u.a.createElement(p.a,{popoverTitle:"Improvement Over Original Variation"},u.a.createElement("div",{className:"soft--top"},u.a.createElement(u.a.Fragment,null,u.a.createElement("p",null,"The estimated gain of running a multi-armed bandit optimization over allocating all traffic to the original variation."),u.a.createElement("p",null,"The left value is the improvement in"," ",i?"percentage points":b.a.getHeaderValue(a.get("metric"),m.default.metricCopyProperties.MEASURE_RATE).toLowerCase(),". The right value is the cumulative gain achieved for the primary metric."),i&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"oui-pop--over__title"},"What are percentage points (PP)?"),u.a.createElement("p",null,"A PP is a unit that measures the absolute difference between two percentages. Alternately, a percentage (%) measures the relative difference. For example, an increase of 10% to 12% is an overall increase of 20% or 2pp.")))))));return u.a.createElement("div",{className:"flex flex--row width-100 border--ends soft-double--ends flex-justified--center"},u.a.createElement("div",{className:"flex flex--row","data-joyride-step":"mab-results-2"},u.a.createElement(_.a,{title:"Overall ".concat(b.a.getHeaderValue(a.get("metric"),m.default.metricCopyProperties.MEASURE_RATE)),value:b.a.formatConversionRate(t,r.rate,a)}),u.a.createElement(_.a,{title:"Overall ".concat(b.a.getHeaderValue(a.get("metric"),m.default.metricCopyProperties.MEASURE_TYPE)),value:b.a.formatConversionValue(t,r.value,a)})),u.a.createElement("div",{className:"flex flex--row flex--1"},u.a.createElement(_.a,{joyrideStep:"mab-results-3",title:"Improvement Over Original Variation",value:s}),u.a.createElement(_.a,{joyrideStep:"mab-results-4",includeBorder:!1,isNumeric:!1,stretch:!0,title:"Primary Metric",value:u.a.createElement(v.a,{metricWrapper:a,muted:!1})})))}}]),SummaryRibbon}(u.a.Component)).propTypes={currencyType:c.a.oneOf(Object.keys(h.default.currencyTypes)),data:c.a.object,isEmpty:c.a.bool.isRequired,metricWrapper:c.a.instanceOf(f.default.Map).isRequired},a.defaultProps={currencyType:h.default.currencyTypes.DOLLAR,data:{}},n=a))||n;t.a=E},4782:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(9),a=r.n(n),i=r(1),o=r.n(i),s=r(0),c=r.n(s);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(SummaryRibbonCell,e);var t=_createSuper(SummaryRibbonCell);function SummaryRibbonCell(){return _classCallCheck(this,SummaryRibbonCell),t.apply(this,arguments)}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(SummaryRibbonCell,[{key:"render",value:function render(){var e=this.props,t=e.includeBorder,r=e.isNumeric,n=e.joyrideStep,i=e.stretch,o=e.title,s=e.value,l=a()({"border--right":t,flex:!0,"flex--column":!0,"soft--sides":!0,"flex--1":i,"min-width--250":r}),u=a()({flex:!0,"flex-align--center":!0,beta:r,"height--1-1":!0});return c.a.createElement("div",{className:l,"data-joyride-step":n},c.a.createElement("div",{className:"muted micro push-half--bottom"},o),c.a.createElement("div",{className:u},s))}}]),SummaryRibbonCell}(c.a.Component);l.propTypes={includeBorder:o.a.bool,isNumeric:o.a.bool,joyrideStep:o.a.string,stretch:o.a.bool,title:o.a.string.isRequired,value:o.a.oneOfType([o.a.string,o.a.node]).isRequired},l.defaultProps={includeBorder:!0,isNumeric:!0,joyrideStep:null,stretch:!1}},4783:function(e,t,r){"use strict";var n=r(2);t.a={flattenExperimentResults:function flattenExperimentResults(e,t,r,a){if(!e||!e.metrics)return Object(n.toImmutable)([]);var i=e.metrics.find((function(e){return e.alias===t.get("alias")})),o=n.default.List(),s={name:"",rate:null,samples:0,value:0,variationId:null};i&&i.results&&a.forEach((function(e){o=o.push(Object(n.toImmutable)({color:r.get(e.get("variation_id").toString()).get("color"),name:r.get(e.get("variation_id").toString()).get("name")||r.get(e.get("variation_id").toString()).get("api_name"),rate:i.results[e.get("variation_id").toString()].rate,samples:i.results[e.get("variation_id").toString()].samples,value:i.results[e.get("variation_id").toString()].value,variationId:i.results[e.get("variation_id").toString()].variationId})),t.get("isPrimary")&&(s.samples+=i.results[e.get("variation_id").toString()].samples||0,s.value+=i.results[e.get("variation_id").toString()].value||0)}));var c=Object(n.toImmutable)([o]);return t.get("isPrimary")&&(c=c.push(Object(n.toImmutable)([s]))),c}}},4784:function(e,t,r){"use strict";var n=r(4785);t.a={component:n.a}},4785:function(e,t,r){"use strict";var n,a,i=r(4),o=r.n(i),s=r(1),c=r.n(s),l=r(0),u=r.n(l),p=r(2),f=r(28),d=r(3683),m=r(101),y=r(263),h=r(1056),b=r(558),g=r(38),v=r(14),_=r(49),E=r(1378),S=r(3895),O=r(3896),R=r(3825),P=r(4119),C=r(3785),w=r(3826),T=r(3787),x=r(3788),k=r(3789),I=r(3674),j=r(3790);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=Object(f.a)({canUpdateLayer:[v.getters.project,_.fns.canUpdateLayer],currentLayer:g.getters.layer,experiments:I.c.getters.experiments,hasAnyProcessingAdaptiveAudienceConditions:g.getters.hasAnyProcessingAdaptiveAudienceConditions,integrations:g.getters.integrations,isFlagsProject:v.getters.isFlagsProject,metricWrappers:g.getters.currentLayerMetricWrappers,queryTimerange:[I.c.getters.timerange,p.toJS],resultsFilteringEnabled:I.c.getters.resultsFilteringEnabled,sectionVariations:I.c.getters.variationsForMvtMetrics,selectedBaselineVariationId:I.c.getters.selectedBaselineVariationId,selectedExperiment:I.c.getters.selectedExperiment,selectedSectionId:I.c.getters.selectedSectionId,variations:I.c.getters.selectedSectionVariations})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(MvtRollupResultsPage,e);var t=_createSuper(MvtRollupResultsPage);function MvtRollupResultsPage(){var e;_classCallCheck(this,MvtRollupResultsPage);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={experimentResults:null,hasFresherResults:!1,isEmpty:!1,isLoading:!0,isStale:!1,segments:[],segmentsLoading:!0,timeseriesDataByMetricAlias:{}},e.resetDefaultsAndFetchData=o.a.debounce((function(){I.c.actions.setDefaults(),e.refreshResults(!1)}),500),e.fetchResults=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!!t.initialLoad,n=e.props.queryTimerange;n?(E.a.generateNewTraceId(),e.setState({hasFresherResults:!1,isStale:!1}),e.experimentResultsQuery.query({expectedEndDate:n.end,initialLoad:r})):setTimeout((function(){e.fetchResults(t)}),I.c.constants.RESULTS_FETCH_DELAY_TIMEOUT)},e.fetchTimeseriesData=function(t){I.c.actions.fetchTimeseriesForMVTSection(t).then((function(t){var r=e.state.timeseriesDataByMetricAlias;t.metrics.forEach((function(e){r[e.alias]=e.results})),e.setState({timeseriesDataByMetricAlias:r})}))},e.refreshResults=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({hasFresherResults:!1,isLoading:!0,isEmpty:!1,experimentResults:null}),e.fetchResults({initialLoad:t})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(MvtRollupResultsPage,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){this.props.selectedSectionId&&e.selectedSectionId&&this.props.selectedSectionId!==e.selectedSectionId&&this.resetDefaultsAndFetchData()}},{key:"componentDidMount",value:function componentDidMount(){var e=this,t=this.props.resultsQueryChangeEmitter;this.experimentResultsQuery=new I.c.RetryQuery({queryFn:I.c.actions.fetchExperimentSectionResults,onResults:function onResults(t){var r=t.results,n=t.isStale,a=t.isZeroSecondResponse,i=t.retryCount,o=t.initialLoad,s=t.timeSinceFetch,c=t.timeSinceRouteStart,l=r.begin===r.end||r.reach&&0===r.reach.totalCount;!a&&n&&e.setState({experimentResults:r,isEmpty:l,isLoading:!1,isStale:n}),n||(e.state.experimentResults?e.setState({hasFresherResults:!0,isEmpty:l,isLoading:!1,isStale:n}):e.setState({experimentResults:r,isEmpty:l,isLoading:!1,isStale:n})),o&&!a&&I.c.actions.v2TrackDataReady({pageName:y.b.p13nPages.RESULTS_MVT_ROLLUP,isCached:n,timeSinceFetch:s,timeSinceRouteStart:c,retryCount:i,layer:e.props.currentLayer,experiment:e.props.selectedExperiment,section:e.props.selectedSectionId})}}),t.onQuery((function(t){e.setState({experimentResults:null,isLoading:!0,timeseriesDataByMetricAlias:{}}),t(),e.fetchResults()})),this.fetchResults({initialLoad:!0}),I.c.actions.fetchSegments().then((function(t){e.setState({segments:t.map((function(e){return e.id=parseInt(e.id,10),e})),segmentsLoading:!1})})),this.unlistenPopState=Object(m.addPopStateListener)(this.resetDefaultsAndFetchData)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unlistenPopState(),I.c.actions.clearSelectedSectionId()}},{key:"render",value:function render(){var e=this.props,t=e.canUpdateLayer,r=e.currentLayer,n=e.hasAnyProcessingAdaptiveAudienceConditions,a=e.integrations,i=e.isFlagsProject,o=e.metricWrappers,s=e.previousView,c=e.resultsFilteringEnabled,l=e.sectionVariations,p=e.selectedBaselineVariationId,f=e.selectedExperiment,m=e.variations,y=this.state,g=y.experimentResults,v=y.hasFresherResults,_=y.isEmpty,E=y.isLoading,x=y.isStale,I=y.segments,A=y.segmentsLoading,N=y.timeseriesDataByMetricAlias,D={previousView:s};return g&&g.reach&&(D.totalCount=g.reach.totalCount),u.a.createElement("div",{className:"two-col"},u.a.createElement(S.a,D),u.a.createElement("div",{className:"two-col__content background--faint overflow-x--auto"},u.a.createElement(T.a,{pageType:"mvt"}),u.a.createElement(k.a,{previousView:s,segments:I,segmentsLoading:A,variations:m}),u.a.createElement(j.a,{currentLayer:r,isFlagsProject:i}),u.a.createElement("div",{className:"overflow-y--auto results-col js-popover-scroll-area flex--1"},u.a.createElement("div",{className:"soft-double--sides push--top"},u.a.createElement("div",{className:"push--bottom"},!E&&g&&!v&&!x&&u.a.createElement(C.a,{endDate:g.end}),u.a.createElement(P.a,{hasFresherResults:v,isStale:x,lastUpdated:g&&g.end,onReloadClick:this.refreshResults})),c&&u.a.createElement("div",{className:"push--bottom"},u.a.createElement(R.a,null)),n&&u.a.createElement("div",{className:"push--bottom","data-test-section":"processing-adaptive-audience-attention-mvt-section"},u.a.createElement(h.b,{subject:b.b.Subjects.MVT_SECTION})),E&&u.a.createElement("div",{className:"shadow-box push-double--bottom position--relative hard height--200"},u.a.createElement(d.a,{shouldFill:!0})),!E&&u.a.createElement(O.a,{key:"PerformanceSummary",experimentResults:g,integrations:a,metricWrappers:o,experimentVariations:l,baselineVariationId:p,countLabel:"Visitors",selectedExperiment:f}),u.a.createElement(w.a,{canUpdateLayer:t,key:"MetricCards",isEmpty:_,isLoading:E,currentLayer:r,metricWrappers:o,variations:l,metricResults:g,timeseriesDataByMetricAlias:N,timeseriesDataFetchFn:this.fetchTimeseriesData})))))}}]),MvtRollupResultsPage}(u.a.Component)).propTypes={canUpdateLayer:c.a.bool.isRequired,currentLayer:c.a.instanceOf(p.default.Map).isRequired,hasAnyProcessingAdaptiveAudienceConditions:c.a.bool.isRequired,integrations:c.a.instanceOf(p.default.List),isFlagsProject:c.a.bool,metricWrappers:c.a.instanceOf(p.default.List).isRequired,previousView:c.a.string,queryTimerange:c.a.shape({begin:c.a.number.isRequired,end:c.a.number.isRequired}).isRequired,resultsFilteringEnabled:c.a.bool.isRequired,resultsQueryChangeEmitter:c.a.object.isRequired,sectionVariations:c.a.instanceOf(p.default.List).isRequired,selectedBaselineVariationId:c.a.number.isRequired,selectedExperiment:c.a.instanceOf(p.default.Map).isRequired,selectedSectionId:c.a.number.isRequired,variations:c.a.instanceOf(p.default.List)},n=a))||n,N=Object(x.a)(A);N.componentId="results-mvt-rollup",t.a=N},4786:function(e,t,r){"use strict";var n=r(4787);t.a={component:n.a}},4787:function(e,t,r){"use strict";var n,a,i=r(4),o=r.n(i),s=r(9),c=r.n(s),l=r(1),u=r.n(l),p=r(0),f=r.n(p),d=r(40),m=r(2),y=r(28),h=r(3683),b=r(101),g=r(263),v=r(1056),_=r(886),E=r(66),S=r.n(E),O=r(13),R=r(765),P=r(453),C=r(68),w=r(22),T=r(39),x=r(1398),k=r(4120),I=r(3785),j=r(3896),A=r(3825),N=r(3789),D=r(3826),M=r(3787),L=r(3788),F=r(4118),q=r(3674),B=r(3899),V=(r(350),r(3790));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=Object(y.a)({canUpdateLayer:[O.default.project,w.default.canUpdateLayer],canUseStatsAccelerator:T.default.canUseStatsAccelerator,currentLayer:S.a.layer,experiments:q.c.getters.experiments,hasAnyProcessingAdaptiveAudienceConditions:q.c.getters.hasAnyProcessingAdaptiveAudienceConditions,integrations:S.a.integrations,isFlagsProject:O.default.isFlagsProject,queryTimerange:[q.c.getters.timerange,m.toJS],metricWrappers:S.a.currentLayerMetricWrappers,resultsFilteringEnabled:q.c.getters.resultsFilteringEnabled,selectedExperiment:q.c.getters.selectedExperiment,selectedBaselineVariationId:q.c.getters.selectedBaselineVariationId,selectedExperimentIds:q.c.getters.selectedExperimentIdsForFilter,shouldFetchOverviewData:q.c.getters.shouldFetchLayerData})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(P13nSingleExperimentResultsPage,e);var t=_createSuper(P13nSingleExperimentResultsPage);function P13nSingleExperimentResultsPage(){var e;_classCallCheck(this,P13nSingleExperimentResultsPage);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={timeseriesDataByMetricAlias:{},isEmpty:!1,isLoading:!0,isStale:!1,hasFresherResults:!1,segments:[],segmentsLoading:!0,shouldShowJoyride:!1,experimentResults:null,layerResults:null,layerExperimentResults:null,retryCount:0,shouldRetry:!1},e.handleJoyrideClose=function(){R.a.markJoyrideAsSeen(P.a.JOYRIDE_IDS.SA_RESULTS),e.setState((function(){return{shouldShowJoyride:!1}}))},e.handlePopState=function(){if(window.location.href.match(/\/results\/\d+\/experiments\/\d+/)){e.setState({experimentResults:null,isLoading:!0});var t=window.location.href.match(/\/results\/\d+\/experiments\/(\d+)/)[1];q.c.actions.setSelectedExperimentId(Number(t)),e.resetDefaultsAndFetchData()}},e.resetDefaultsAndFetchData=o.a.debounce((function(){q.c.actions.setDefaults(),e.fetchResults({initialLoad:!0})}),500),e.fetchTimeseriesData=function(t){q.c.actions.v2FetchTimeseriesForABExperiment(t).then((function(t){var r=e.state.timeseriesDataByMetricAlias;t.metrics.forEach((function(e){r[e.alias]=e.results})),e.setState({timeseriesDataByMetricAlias:r})}))},e.fetchResults=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!!t.initialLoad,n=e.props,a=n.queryTimerange,i=n.shouldFetchOverviewData;a?(x.a.generateNewTraceId(),e.setState({hasFresherResults:!1,isStale:!1}),e.experimentResultsQuery.query({expectedEndDate:a.end,initialLoad:r}),i&&(q.c.actions.v2FetchLayerResults(!1).then((function(t){e.setState({layerResults:t})})),e.layerExperimentResultsQuery.query({expectedEndDate:a.end,initialLoad:r}))):setTimeout((function(){e.fetchResults(t)}),q.c.constants.RESULTS_FETCH_DELAY_TIMEOUT)},e.refreshResults=function(){e.setState({hasFresherResults:!1,isLoading:!0,isEmpty:!1,experimentResults:null}),e.fetchResults({initialLoad:!0})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(P13nSingleExperimentResultsPage,[{key:"componentDidMount",value:function componentDidMount(){var e=this,t=this.props,r=t.canUseStatsAccelerator,n=t.selectedExperiment;this.experimentResultsQuery=new q.c.RetryQuery({queryFn:q.c.actions.v2FetchExperimentResults,onResults:function onResults(t){var a=t.results,i=t.isZeroSecondResponse,o=t.retryCount,s=t.initialLoad,c=t.timeSinceFetch,l=t.timeSinceRouteStart,u=a.shouldRetry,p=a.fallback,f=a.begin===a.end||a.reach&&0===a.reach.totalCount;!i&&s&&q.c.actions.v2TrackDataReady({pageName:g.b.p13nPages.RESULTS_DETAIL,isCached:!u,timeSinceFetch:c,timeSinceRouteStart:l,retryCount:o,layer:e.props.currentLayer,experiment:e.props.selectedExperiment}),!f&&r&&setTimeout((function(){e.setState({shouldShowJoyride:!R.a.hasJoyrideBeenSeen(P.a.JOYRIDE_IDS.SA_RESULTS)&&C.default.isStatsAcceleratorExperiment(n)})}),100),e.setState({experimentResults:a,isEmpty:f,shouldRetry:u,retryCount:o,isLoading:p})}}),this.layerExperimentResultsQuery=new q.c.RetryQuery({queryFn:q.c.actions.v2FetchLayerResultsByExperiment,onResults:function onResults(t){var r=t.results,n=t.isStale;t.isZeroSecondResponse?e.layerExperimentResultsQuery.query({expectedEndDate:e.props.queryTimerange.end,initialLoad:!1}):(e.setState({layerExperimentResults:r}),(n||q.c.fns.hasUnavailableExperimentReachResults(r))&&e.layerExperimentResultsQuery.query({expectedEndDate:e.props.queryTimerange.end,initialLoad:!1}))}}),this.props.resultsQueryChangeEmitter.onQuery((function(t,r){var n;n=o.a.isEqual(r,["selectExperiment"])?{isLoading:!0,experimentResults:null,timeseriesDataByMetricAlias:{}}:{isLoading:!0,experimentResults:null,layerResults:null,layerExperimentResults:null,timeseriesDataByMetricAlias:{}},e.setState(n),t(),e.fetchResults()})),this.fetchResults({initialLoad:!0}),q.c.actions.fetchSegments().then((function(t){e.setState({segments:t.map((function(e){return e.id=parseInt(e.id,10),e})),segmentsLoading:!1})})),this.unlistenPopState=Object(b.addPopStateListener)(this.handlePopState)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unlistenPopState()}},{key:"render",value:function render(){var e=this,t=this.props,r=t.canUpdateLayer,n=t.canUseStatsAccelerator,a=t.currentLayer,i=t.hasAnyProcessingAdaptiveAudienceConditions,o=t.integrations,s=t.isFlagsProject,l=t.metricWrappers,u=t.previousView,p=t.resultsFilteringEnabled,y=t.selectedBaselineVariationId,b=t.selectedExperiment,g=t.selectedExperimentIds,E=this.state,S=E.experimentResults,O=E.hasFresherResults,R=E.isLoading,P=E.isEmpty,w=E.isStale,T=E.layerExperimentResults,x=E.layerResults,L=E.timeseriesDataByMetricAlias,W=E.segments,U=E.segmentsLoading,z=E.shouldShowJoyride,H=E.retryCount,Y=E.shouldRetry,G=b?b.get("variations"):Object(m.toImmutable)([]);G=G.find((function(e){return e.get("variation_id")===q.c.constants.holdbackVariation.variation_id}))?q.c.fns.orderVariationsList(G,q.c.constants.holdbackVariation.variation_id):G.unshift(Object(m.toImmutable)(q.c.constants.holdbackVariation));var J={previousView:u,layerExperimentResults:T,layerResults:x,selectedExperimentIds:g},Q=C.default.isStatsAcceleratorExperiment(b)&&n&&!P&&!R&&f.a.createElement(d.a,{onClick:function onClick(){e.setState((function(){return{shouldShowJoyride:!0}}))},testSection:"sa-guided-tour-link"},"Take a tour of this page")||null,K={"flex--1":!0,"js-popover-scroll-area":!0,"results-col":!0,"overflow-y--auto":!z};return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"two-col"},f.a.createElement(k.a,J),f.a.createElement("div",{className:c()(K)},f.a.createElement(M.a,{pageType:"p13n_individual",rightSideContent:Q}),f.a.createElement(N.a,{segments:W,segmentsLoading:U,isLoading:R,variations:Object(m.toImmutable)([])}),f.a.createElement(V.a,{currentLayer:a,isFlagsProject:s}),f.a.createElement("div",{className:"overflow-y--auto results-col js-popover-scroll-area flex--1"},f.a.createElement("div",{className:"soft-double--sides push--top"},f.a.createElement("div",{className:"push--bottom"},!R&&S&&!O&&!w&&f.a.createElement(I.a,{endDate:S.end}),f.a.createElement(B.a,{retryCount:H,shouldRetry:Y})),p&&f.a.createElement("div",{className:"push--bottom"},f.a.createElement(A.a,null)),i&&f.a.createElement("div",{className:"push--bottom","data-test-section":"processing-adaptive-audience-attention-experience"},f.a.createElement(v.b,{subject:_.default.Subjects.EXPERIENCE})),f.a.createElement("div",{className:"flex push--bottom shadow-box"},f.a.createElement("h2",{className:"flex flex-align--center flush--bottom"},b&&b.get("name"))),R&&f.a.createElement("div",{className:"shadow-box push-double--bottom position--relative hard height--200"},f.a.createElement(h.a,{shouldFill:!0})),!R&&f.a.createElement(j.a,{key:"PerformanceSummary",experimentResults:S,integrations:o,metricWrappers:l,experimentVariations:G,baselineVariationId:y,countLabel:"Sessions",selectedExperiment:b,statsAcceleratorEnabled:C.default.isStatsAcceleratorExperiment(b)&&n}),f.a.createElement(D.a,{canUpdateLayer:r,key:"MetricCards",isEmpty:P,isLoading:R,currentLayer:a,metricWrappers:l,variations:G,metricResults:S,timeseriesDataByMetricAlias:L,timeseriesDataFetchFn:this.fetchTimeseriesData}))))),z&&f.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n              body {\n                background-color: white;\n              }\n            "}}),f.a.createElement(F.a,{onClose:this.handleJoyrideClose,run:z}))}}]),P13nSingleExperimentResultsPage}(f.a.Component)).propTypes={canUpdateLayer:u.a.bool.isRequired,canUseStatsAccelerator:u.a.bool.isRequired,currentLayer:u.a.instanceOf(m.default.Map).isRequired,hasAnyProcessingAdaptiveAudienceConditions:u.a.bool.isRequired,integrations:u.a.instanceOf(m.default.List),isFlagsProject:u.a.bool,metricWrappers:u.a.instanceOf(m.default.List).isRequired,previousView:u.a.string,queryTimerange:u.a.shape({begin:u.a.number.isRequired,end:u.a.number.isRequired}).isRequired,resultsFilteringEnabled:u.a.bool.isRequired,resultsQueryChangeEmitter:u.a.object.isRequired,selectedBaselineVariationId:u.a.oneOfType([u.a.number,u.a.string]).isRequired,selectedExperiment:u.a.instanceOf(m.default.Map).isRequired,selectedExperimentIds:u.a.instanceOf(m.default.List),shouldFetchOverviewData:u.a.bool.isRequired},n=a))||n,U=Object(L.a)(W);U.componentId="results-p13n-single-experiment",t.a=U},4788:function(e,t,r){"use strict";var n=r(1),a=r.n(n),i=r(0),o=r.n(i),s=r(88),c=r(223),l=r(52),u=r(295),p=r(98),f=r(19),d=r(222),m=r(3674),y=r(2);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){_inherits(ExperimentFilterOverlay,e);var t=_createSuper(ExperimentFilterOverlay);function ExperimentFilterOverlay(){var e;_classCallCheck(this,ExperimentFilterOverlay);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).filterInputRef=o.a.createRef(),e.allExperimentsInListSelected=function(){var t=e.props,r=t.filteredExperimentIdsMap,n=t.workingSelectedExperimentIds,a=r.keySeq().toList();return!!a.size&&a.isSubset(n)},e.clearFilterInputValue=function(){e.filterInputRef.current.value="",e.updateFilter("")},e.createDropdownList=function(){var t=e.props,r=t.filteredExperimentIdsMap,n=t.toggleExperimentAction;return r.map((function(t,r){return o.a.createElement(s.a.Item,{key:r},o.a.createElement(b,{checked:e.isExperimentSelected(r),experimentName:m.d.experienceDisplayName(t),experimentId:r,onChange:n}))})).toList()},e.handleApplyClick=function(){var t=e.props;(0,t.applyClickAction)(t.workingSelectedExperimentIds),e.context.hideOverlay(),e.clearFilterInputValue()},e.handleCancelClick=function(){var t=e.props.cancelClickAction;e.context.hideOverlay(),e.clearFilterInputValue(),t()},e.handleFilterInputChange=function(t){e.updateFilter(t.target.value)},e.isExperimentSelected=function(t){return e.props.workingSelectedExperimentIds.includes(t)},e.shouldDisableApply=function(){var t=e.props,r=t.selectedExperimentIds,n=t.workingSelectedExperimentIds;return y.default.is(r,n)},e.updateFilter=function(t){(0,e.props.onFilterUpdate)(t)},e}return _createClass(ExperimentFilterOverlay,[{key:"render",value:function render(){var e=this.props.toggleAllAction;return o.a.createElement(c.a,null,o.a.createElement("div",{className:"width--300 soft-half--ends"},o.a.createElement(l.a,{isFilter:!0,ref:this.filterInputRef,onInput:this.handleFilterInputChange,placeholder:"Filter Results by Experiences",testSection:"experiment-filter-input",type:"search"}),o.a.createElement("div",{style:{marginTop:"-1px"}},o.a.createElement(s.a,{maxHeight:300},o.a.createElement(s.a.Category,null,o.a.createElement(s.a.Item,null,o.a.createElement(u.a,{checked:this.allExperimentsInListSelected(),label:this.allExperimentsInListSelected()?"Unselect All":"Select All",onChange:e,"data-test-section":"select-all-checkbox"}))),o.a.createElement(s.a.Category,null,this.createDropdownList()))),o.a.createElement("div",{className:"push--top"},o.a.createElement(p.a,{rightGroup:[o.a.createElement(f.a,{key:"cancel",onClick:this.handleCancelClick,style:"plain",testSection:"cancel-filter-button"},"Cancel"),o.a.createElement(f.a,{isDisabled:this.shouldDisableApply(),key:"apply",style:"highlight",onClick:this.handleApplyClick,testSection:"apply-filter-button"},"Apply")]}))))}}]),ExperimentFilterOverlay}(o.a.Component);h.propTypes={applyClickAction:a.a.func,cancelClickAction:a.a.func,experimentIdsMap:a.a.instanceOf(y.default.Map),filteredExperimentIdsMap:a.a.instanceOf(y.default.Map),onFilterUpdate:a.a.func,selectedExperimentIds:a.a.instanceOf(y.default.List),toggleAllAction:a.a.func,toggleExperimentAction:a.a.func,workingSelectedExperimentIds:a.a.instanceOf(y.default.List)},h.contextTypes={hideOverlay:a.a.func};var b=function(e){_inherits(ExperimentItem,e);var t=_createSuper(ExperimentItem);function ExperimentItem(){var e;_classCallCheck(this,ExperimentItem);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).onChange=function(){var t=e.props,r=t.experimentId;(0,t.onChange)(r)},e}return _createClass(ExperimentItem,[{key:"render",value:function render(){var e=this.props,t=e.checked,r=e.experimentName;return o.a.createElement(u.a,{label:r,checked:t,onChange:this.onChange,"data-test-section":"experiment-filter-item"})}}]),ExperimentItem}(o.a.Component);b.propTypes={checked:a.a.bool.isRequired,experimentName:a.a.string.isRequired,experimentId:a.a.number.isRequired,onChange:a.a.func.isRequired};var g=function(e){_inherits(FilterSummary,e);var t=_createSuper(FilterSummary);function FilterSummary(){var e;_classCallCheck(this,FilterSummary);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).allExperimentsSelected=function(){var t=e.props,r=t.experimentIds,n=t.selectedExperimentIds;return 0===n.size||n.size===r.size},e}return _createClass(FilterSummary,[{key:"render",value:function render(){var e=this.props,t=e.experimentIds,r=e.onClick,n=e.selectedExperimentIds,a=n.size?n.size:t.size;return!this.allExperimentsSelected()&&o.a.createElement("div",{className:"flex flex-align--center anchor--left","data-test-section":"filter-summary"},o.a.createElement("span",null,"".concat(a," of ").concat(t.size)),o.a.createElement("span",null,"Â â€¢Â "),o.a.createElement("span",{className:"link",onClick:r},"View All"))}}]),FilterSummary}(o.a.Component);g.propTypes={experimentIds:a.a.instanceOf(y.default.List).isRequired,onClick:a.a.func,selectedExperimentIds:a.a.instanceOf(y.default.List).isRequired};var v=function(e){_inherits(ExperimentFilter,e);var t=_createSuper(ExperimentFilter);function ExperimentFilter(e){var r;_classCallCheck(this,ExperimentFilter),(r=t.call(this,e)).clearSelectedExperiments=function(){var e=r.props,t=e.onUpdate,n=e.selectedExperimentIds;y.default.is(n,Object(y.toImmutable)([]))||t(Object(y.toImmutable)([])),r.setState({workingSelectedExperimentIds:Object(y.toImmutable)([])})},r.resetWorkingState=function(){var e=r.props.selectedExperimentIds;r.setState({workingSelectedExperimentIds:e})},r.setSelectedExperimentIdsForFilter=function(){(0,r.props.onUpdate)(r.state.workingSelectedExperimentIds)},r.toggleExperiment=function(e){var t=r.state.workingSelectedExperimentIds;t=t.includes(e)?t.filter((function(t){return t!==e})):t.push(e),r.setState({workingSelectedExperimentIds:t})},r.toggleSelectAll=function(){var e=r.state.filteredExperimentIdsMap,t=r.state.workingSelectedExperimentIds,n=e.keySeq().toList();t=n.isSubset(t)?t.filterNot((function(e){return n.includes(e)})):t.concat(n).toSet().toList(),r.setState({workingSelectedExperimentIds:t})},r.updateFilter=function(e){var t=r.props.experimentIdsMap;e&&(t=t.filter((function(t){return-1!==m.d.experienceDisplayName(t).toLowerCase().indexOf(e.toLowerCase())}))),r.setState({filteredExperimentIdsMap:t})};var n=e.experimentIdsMap,a=e.selectedExperimentIds;return r.state={filteredExperimentIdsMap:n,workingSelectedExperimentIds:a},r}return _createClass(ExperimentFilter,[{key:"render",value:function render(){var e=this.props,t=e.experimentIdsMap,r=e.selectedExperimentIds,n=this.state,a=n.filteredExperimentIdsMap,i=n.workingSelectedExperimentIds;return t.size>20&&o.a.createElement("div",{className:"flex flex--column"},o.a.createElement("div",{className:"flex flex--1 flex-justified--end"},o.a.createElement(d.a,{behavior:"click",horizontalAttachment:"left",horizontalTargetAttachment:"right",isConstrainedToScreen:!0,overlay:o.a.createElement(h,{applyClickAction:this.setSelectedExperimentIdsForFilter,cancelClickAction:this.resetWorkingState,experienceDisplayName:m.d.experienceDisplayName,experimentIdsMap:t,filteredExperimentIdsMap:a,onFilterUpdate:this.updateFilter,selectedExperimentIds:r,toggleAllAction:this.toggleSelectAll,toggleExperimentAction:this.toggleExperiment,workingSelectedExperimentIds:i}),verticalAttachment:"top",verticalTargetAttachment:"top"},o.a.createElement(f.a,{testSection:"experiment-filter-button"},"Filter"))),o.a.createElement(g,{experimentIds:t.keySeq().toList(),selectedExperimentIds:r,onClick:this.clearSelectedExperiments}))}}]),ExperimentFilter}(o.a.Component);v.propTypes={experimentIdsMap:a.a.instanceOf(y.default.Map).isRequired,onUpdate:a.a.func,selectedExperimentIds:a.a.instanceOf(y.default.List).isRequired},t.a=v},4789:function(e,t,r){"use strict";var n=r(3674),a=r(4790);t.a={component:a.a,routingSetup:function routingSetup(e,t){e&&e.queryParams[n.b.DIFFERENCE_TYPE_PARAM]&&n.a.setDifferenceTypeOverride(e.queryParams[n.b.DIFFERENCE_TYPE_PARAM]),n.a.clearSelectedExperimentId(),n.a.setDefaults(),t()}}},4790:function(e,t,r){"use strict";var n,a,i=r(4),o=r.n(i),s=r(12),c=r.n(s),l=r(1),u=r.n(l),p=r(0),f=r.n(p),d=r(2),m=r(28),y=r(3683),h=r(101),b=r(263),g=r(1056),v=r(558),_=r(38),E=r(14),S=r(49),O=r(1378),R=r(4791),P=r(3825),C=r(4119),w=r(3785),T=r(4120),x=r(4793),k=r(3787),I=r(4794),j=r(3788),A=r(3789),N=r(3826),D=r(3674),M=r(3790);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=Object(m.a)({canUpdateLayer:[E.getters.project,S.fns.canUpdateLayer],currencyType:D.c.getters.currencyType,currentLayer:_.getters.layer,experiments:D.c.getters.experiments,hasAnyProcessingAdaptiveAudienceConditions:_.getters.hasAnyProcessingAdaptiveAudienceConditions,isFlagsProject:E.getters.isFlagsProject,metricWrappers:_.getters.currentLayerMetricWrappers,queryTimerange:[D.c.getters.timerange,d.toJS],resultsFilteringEnabled:D.c.getters.resultsFilteringEnabled,selectedExperimentIds:D.c.getters.selectedExperimentIdsForFilter,selectedMetricWrapper:D.c.getters.selectedMetricWrapper,shouldFetchData:D.c.getters.shouldFetchLayerData})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(P13nOverviewPage,e);var t=_createSuper(P13nOverviewPage);function P13nOverviewPage(){var e;_classCallCheck(this,P13nOverviewPage);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={timeseriesDataByMetricAlias:{},isEmpty:!1,isLoading:!0,isStale:!1,hasFresherResults:!1,segments:[],segmentsLoading:!0,layerResults:null,layerReachResults:null,layerExperimentResults:null,layerExperimentResultsAbsolute:null,layerOverallTimeseries:null},e.handlePopState=function(){window.location.href.match(/\/results\/\d+(\?.*)?$/)&&e.resetDefaultsAndFetchData()},e.resetDefaultsAndFetchData=o.a.debounce((function(){D.c.actions.setDefaults(),e.refreshResults()}),500),e.fetchTimeseriesData=function(){D.c.actions.v2FetchLayerTimeseries({onlyOverall:!0}).then((function(t){var r=e.state.timeseriesDataByMetricAlias;t.metrics.forEach((function(e){r[e.alias]=e.results})),e.setState({timeseriesDataByMetricAlias:r})}))},e.refreshResults=function(){e.setState({hasFresherResults:!1,isLoading:!0,isEmpty:!1,layerResults:null,layerReachResults:null,layerExperimentResults:null,layerExperimentResultsAbsolute:null,layerOverallTimeseries:null}),e.fetchResults({initialLoad:!0})},e.fetchResults=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!!t.initialLoad,n=e.props,a=n.queryTimerange,i=n.shouldFetchData;i&&(a?(O.a.generateNewTraceId(),e.setState({hasFresherResults:!1,isStale:!1}),e.layerResultsQuery.query({expectedEndDate:a.end,initialLoad:r}).then((function(t){t.isStale&&e.layerResultsQuery.query({expectedEndDate:a.end,initialLoad:!1});var r=D.c.actions.v2FetchLayerTimeseries({onlyOverall:!0}).then((function(t){e.setState({layerOverallTimeseries:t})})),n=D.c.actions.v2FetchLayerResultsByExperiment({differenceType:"absolute"}).then((function(t){e.setState({layerExperimentResultsAbsolute:t})}));c.a.when(r,n).then((function(){e.setState({isLoading:!1})}))})),e.layerReachQuery.query({expectedEndDate:a.end,initialLoad:r}),e.layerExperimentResultsQuery.query({expectedEndDate:a.end,initialLoad:r})):setTimeout((function(){e.fetchResults(t)}),D.c.constants.RESULTS_FETCH_DELAY_TIMEOUT))},e.renderOverviewSummary=function(){var t=e.props.selectedMetricWrapper,r=e.state,n=r.isEmpty,a=r.layerReachResults,i=r.layerResults,s=r.layerOverallTimeseries,c=null,l=null,u=n||!(!i||i.end!==i.begin);if(i){var p=o.a.find(i.metrics,{alias:t.get("alias")});p&&(c=p.results)}if(s){var d=o.a.find(s.metrics,{alias:t.get("alias")});d&&(l=d.results)}return f.a.createElement(x.a,{isEmpty:u,canViewVariationsInP13N:!0,metricWrapper:t,overviewData:c,reachData:a,timeseriesData:l})},e.renderReachFunnel=function(){var t=e.state,r=t.isEmpty,n=t.layerReachResults;return f.a.createElement(I.a,{isEmpty:r,reachData:n})},e.renderMetricCards=function(){var t=e.props,r=t.canUpdateLayer,n=t.metricWrappers,a=t.currentLayer,i=e.state,o=i.layerResults,s=i.timeseriesDataByMetricAlias;return[f.a.createElement("h3",{key:"title",className:"soft-double--top"},"Summary for all metrics across all experiences"),f.a.createElement(N.a,{canUpdateLayer:r,key:"MetricCards",isEmpty:e.state.isEmpty,isLoading:e.state.isLoading,currentLayer:a,metricWrappers:n,variations:D.c.constants.overviewVariations,metricResults:o,timeseriesDataByMetricAlias:s,timeseriesDataFetchFn:e.fetchTimeseriesData})]},e.renderExperienceBreakdown=function(){var t=e.props,r=t.currencyType,n=t.experiments,a=t.selectedMetricWrapper,i=e.state,o=i.isEmpty,s=i.isLoading,c=i.layerExperimentResults,l=i.layerExperimentResultsAbsolute;if(n.size>=D.c.constants.MAX_EXPERIMENTS_FOR_DETAILED_RESULTS)return null;var u={};return n.forEach((function(e){u[e.get("id")]=e})),f.a.createElement(R.a,{audienceAbsoluteData:l,audienceRelativeData:c,currencyType:r,experimentMap:Object(d.toImmutable)(u),isEmpty:o,isLoading:s||!c||!l,selectedMetricWrapper:a})},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(P13nOverviewPage,[{key:"componentDidMount",value:function componentDidMount(){var e=this;this.layerResultsQuery=new D.c.RetryQuery({queryFn:D.c.actions.v2FetchLayerResults,onResults:function onResults(t){var r=t.results,n=t.isStale,a=t.isZeroSecondResponse,i=t.retryCount,o=t.initialLoad,s=t.timeSinceFetch,c=t.timeSinceRouteStart;!a&&n&&e.setState({layerResults:r,isStale:n}),n||(e.state.layerResults?e.setState({hasFresherResults:!0,isStale:n}):e.setState({layerResults:r,isStale:n})),o&&!a&&D.c.actions.v2TrackDataReady({pageName:b.b.p13nPages.RESULTS_OVERVIEW,isCached:n,timeSinceFetch:s,timeSinceRouteStart:c,retryCount:i,layer:e.props.currentLayer})}}),this.layerReachQuery=new D.c.RetryQuery({queryFn:D.c.actions.v2FetchLayerReachResults,onResults:function onResults(t){var r=t.results;if(!t.isZeroSecondResponse){var n=0===r.audienceSessions;e.setState({isEmpty:n,layerReachResults:r}),r.audienceReachUnavailable&&e.layerReachQuery.query({expectedEndDate:e.props.queryTimerange.end,initialLoad:!1})}}}),this.layerExperimentResultsQuery=new D.c.RetryQuery({queryFn:D.c.actions.v2FetchLayerResultsByExperiment,onResults:function onResults(t){var r=t.results;t.isZeroSecondResponse||(e.setState({layerExperimentResults:r}),D.c.fns.hasUnavailableExperimentReachResults(r)&&e.layerExperimentResultsQuery.query({expectedEndDate:e.props.queryTimerange.end,initialLoad:!1}))}}),this.props.resultsQueryChangeEmitter.onQuery((function(t){e.setState({isLoading:!0,layerResults:null,layerReachResults:null,layerExperimentResults:null,layerExperimentResultsAbsolute:null,timeseriesDataByMetricAlias:{}}),t(),e.fetchResults()})),this.fetchResults({initialLoad:!0}),D.c.actions.fetchSegments().then((function(t){e.setState({segments:t.map((function(e){return e.id=parseInt(e.id,10),e})),segmentsLoading:!1})})),this.unlistenPopState=Object(h.addPopStateListener)(this.handlePopState)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.unlistenPopState()}},{key:"render",value:function render(){var e=this.props,t=e.currentLayer,r=e.hasAnyProcessingAdaptiveAudienceConditions,n=e.isFlagsProject,a=e.previousView,i=e.resultsFilteringEnabled,o=e.selectedExperimentIds,s=e.selectedMetricWrapper,c=e.shouldFetchData,l=this.state,u=l.hasFresherResults,p=l.isLoading,m=l.isStale,h=l.layerExperimentResults,b=l.layerResults,_=l.segments,E=l.segmentsLoading,S={previousView:a,layerExperimentResults:h,layerResults:b,selectedExperimentIds:o},O=s&&s.get("metric")&&!s.get("metric").isEmpty();return f.a.createElement("div",{className:"two-col"},f.a.createElement(T.a,S),f.a.createElement("div",{className:"two-col__content background--faint overflow-x--auto"},f.a.createElement(k.a,{pageType:"p13n_overview"}),f.a.createElement(A.a,{segments:_,segmentsLoading:E,isLoading:p,variations:Object(d.toImmutable)([])}),f.a.createElement(M.a,{currentLayer:t,isFlagsProject:n}),!O&&f.a.createElement("div",{className:"flex flex--dead-center","data-test-section":"p13n-overview-empty-state"},f.a.createElement(y.a,{shouldFill:!0})),O&&f.a.createElement("div",{className:"overflow-y--auto results-col js-popover-scroll-area flex--1"},f.a.createElement("div",{className:"soft-double--sides push--top"},f.a.createElement("div",{className:"push--bottom"},c&&b&&!u&&!m&&f.a.createElement(w.a,{endDate:b.end}),f.a.createElement(C.a,{hasFresherResults:u,isStale:m,lastUpdated:b&&b.end,onReloadClick:this.refreshResults})),i&&f.a.createElement("div",{className:"push--bottom"},f.a.createElement(P.a,null)),r&&f.a.createElement("div",{className:"push--bottom","data-test-section":"processing-adaptive-audience-attention-p13n"},f.a.createElement(g.b,{subject:v.b.Subjects.P13N})),c&&f.a.createElement(f.a.Fragment,null,this.renderOverviewSummary(),this.renderReachFunnel(),this.renderExperienceBreakdown(),this.renderMetricCards()),!c&&f.a.createElement("div",null,"This campaign has too many experiences and the summary can't be shown, please click one of the experiences in the sidebar to see individual results or use the filter to select a subset of experiences.")))))}}]),P13nOverviewPage}(f.a.Component)).propTypes={canUpdateLayer:u.a.bool.isRequired,currencyType:u.a.oneOf(Object.keys(D.c.constants.currencyTypes)),currentLayer:u.a.instanceOf(d.default.Map).isRequired,experiments:u.a.instanceOf(d.default.List).isRequired,hasAnyProcessingAdaptiveAudienceConditions:u.a.bool.isRequired,isFlagsProject:u.a.bool,metricWrappers:u.a.instanceOf(d.default.List).isRequired,previousView:u.a.string,queryTimerange:u.a.shape({begin:u.a.number.isRequired,end:u.a.number.isRequired}).isRequired,resultsFilteringEnabled:u.a.bool.isRequired,resultsQueryChangeEmitter:u.a.object.isRequired,selectedExperimentIds:u.a.instanceOf(d.default.List),selectedMetricWrapper:u.a.instanceOf(d.default.Map).isRequired,shouldFetchData:u.a.bool.isRequired},n=a))||n,F=Object(j.a)(L);F.componentId="results-p13n-overview",t.a=F},4791:function(e,t,r){"use strict";var n,a,i,o=r(4),s=r.n(o),c=r(9),l=r.n(c),u=r(1),p=r.n(u),f=r(0),d=r.n(f),m=r(19),y=r(188),h=r(71),b=r(196),g=r(28),v=r(326),_=r(2),E=r(186),S=r(149),O=r.n(S),R=r(1384),P=r(157),C=r(1378),w=r(3674),T=r(3683),x=r(4792),k=r.n(x),I=r(3786),j=r(3898),A=r(3827);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){_inherits(ExperienceBreakdownRow,e);var t=_createSuper(ExperienceBreakdownRow);function ExperienceBreakdownRow(){var e;_classCallCheck(this,ExperienceBreakdownRow);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).getExperimentName=function(t){return e.props.experimentMap.get(t.experimentId.toString()).get("name")},e.getMetricResult=function(t,r){var n=e.props.selectedMetricWrapper,a=s.a.find(t.metrics,{alias:n.get("alias")});return a?a.results[r]:null},e.getMetricValue=function(t,r,n){var a=e.getMetricResult(t,r);return a?a[n]:null},e}return _createClass(ExperienceBreakdownRow,[{key:"render",value:function render(){var e,t=this.props,r=t.absoluteExperience,n=t.relativeExperience,a=t.currencyType,i=t.includeBorder,o=t.selectedMetricWrapper,s=t.type,c=w.b.currencies[a],u=w.d.shouldPreserveDecimalValue(a,!0),p=w.d.shouldPreserveDecimalValue(a,!1);return n&&(e=this.getMetricResult(n,w.b.RESULTS_TREATMENT_KEY)),d.a.createElement("tr",{className:l()({"no-highlight":!0,"color--good-news":s===w.b.RESULTS_TREATMENT_KEY&&w.d.v2IsStatSigPositive(e),"color--bad-news":s===w.b.RESULTS_TREATMENT_KEY&&w.d.v2IsStatSigNegative(e),"no-border--bottom":s===w.b.RESULTS_CONTROL_KEY&&!i}),"data-test-section":"breakdown-treatment-row",key:"".concat(r.experimentId,"_").concat(s)},s===w.b.RESULTS_TREATMENT_KEY&&[d.a.createElement("td",{rowSpan:2,className:"max-width--150 force-break","data-test-section":"breakdown-experiment-name",key:O()()},this.getExperimentName(r)),d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-treatment-name",key:O()()},"Variations"),d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-treatment-samples",key:O()()},E.a.formatWholeNumber(r.reach.audienceVariationSessions)),d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-treatment-value",key:O()()},o.get("conversionFormatFn")(this.getMetricValue(r,w.b.RESULTS_TREATMENT_KEY,"value"),!1,c,p)),d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-treatment-rate",key:O()()},o.get("rateFormatFn")(this.getMetricValue(r,w.b.RESULTS_TREATMENT_KEY,"rate"),!1,c,u)),d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-treatment-improvement",key:O()()},d.a.createElement(I.a,{differenceTypeOverride:C.b.DIFFERENCE_TYPES.ABSOLUTE,lift:this.getMetricValue(r,w.b.RESULTS_TREATMENT_KEY,"lift"),metricWrapper:o})),d.a.createElement("td",{rowSpan:2,className:"text--right gamma weight--bold","data-test-section":"breakdown-impact",key:O()()},o.get("increaseFormatFn")(this.getMetricValue(r,w.b.RESULTS_TREATMENT_KEY,"totalIncrease").value,!1,c,u))],s===w.b.RESULTS_CONTROL_KEY&&[d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-control-name",key:O()()},"Holdback"),d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-control-samples",key:O()()},E.a.formatWholeNumber(r.reach.audienceBaselineSessions)),d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-control-value",key:O()()},o.get("conversionFormatFn")(this.getMetricValue(r,w.b.RESULTS_CONTROL_KEY,"value"),!1,c,p)),d.a.createElement("td",{className:"text--right","data-test-section":"breakdown-control-rate",key:O()()},o.get("rateFormatFn")(this.getMetricValue(r,w.b.RESULTS_CONTROL_KEY,"rate"),!1,c,u)),d.a.createElement("td",{key:O()()})])}}]),ExperienceBreakdownRow}(d.a.Component);N.propTypes={absoluteExperience:p.a.instanceOf(Object).isRequired,relativeExperience:p.a.instanceOf(Object),currencyType:p.a.oneOf(Object.keys(w.b.currencyTypes)),experimentMap:p.a.instanceOf(_.default.Map),includeBorder:p.a.bool,selectedMetricWrapper:p.a.instanceOf(_.default.Map).isRequired,type:p.a.oneOf([w.b.RESULTS_CONTROL_KEY,w.b.RESULTS_TREATMENT_KEY]).isRequired};var D=(n=Object(g.b)({alternateContent:d.a.createElement("div",{className:"soft-double flex flex--column",title:"Something went wrong","data-test-section":"experience-breakdown-error-boundary"},d.a.createElement("div",{className:"shadow-box__title"},"Experience Breakdown"),"There was an error loading the experience breakdown. Please refresh the page or visit our Help Center if the issue persists.",d.a.createElement("div",{className:"display--block push--top"},d.a.createElement(m.a,{style:"highlight",onClick:v.b},"Optimizely Help Center")))}),Object(h.withTrack)(a=n(((i=function(e){_inherits(ExperienceBreakdown,e);var t=_createSuper(ExperienceBreakdown);function ExperienceBreakdown(){var e;_classCallCheck(this,ExperienceBreakdown);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={showTable:!1},e.generateBreakdownConfig=function(){var t=e.props,r=t.audienceAbsoluteData,n=t.audienceRelativeData,a=t.currencyType,i=t.experimentMap,o=t.selectedMetricWrapper,c=o.get("metric"),l=w.b.currencies[a],u=w.d.formatDataForImpactChart({audienceAbsoluteResults:r,audienceRelativeResults:n,experimentMap:i,metricWrapper:o}),p=w.d.createMapForImpactLabels(u),f=w.d.getHeaderValue(c,P.a.metricCopyProperties.MEASURE_RATE),d="Change in ".concat(f);return{credits:{enabled:!1},chart:{type:"area",height:390},title:{text:""},series:u,xAxis:{title:{text:tr("Audience Reach")},tickPositioner:function tickPositioner(){var e=[];return u.forEach((function(t){e.push(t.data[2][0])})),e},labels:{rotation:-30,formatter:function formatter(){var e=p[this.value],t=i.getIn([e.toString(),"name"]),n=r.experiments[e].reach;return"<b>".concat(t,"</b>\n                    <br>\n                    <span>\n                      ").concat(E.a.formatPercent(n.audienceReach),"% ").concat(tr("reach"),"\n                    </span>")}}},yAxis:{title:{text:d},labels:{x:-5,formatter:function formatter(){return this.value?o.get("absoluteLiftFormatFn")(this.value,!1,l,!1):tr("Holdback")}},endOnTick:!1,lineWidth:1},tooltip:{followPointer:!0,useHTML:!0,headerFormat:"<div><b>{series.name}</b></div>",pointFormatter:function pointFormatter(){var e=this.series.options.data[2][0],t=p[e],r=s.a.find(n.experiments,(function(e){return e.experimentId===t}));if(!r)return"";var a=w.d.getMetricFromResults(r,o).results.variation.lift.significance,i=o.get("absoluteLiftFormatFn")(this.series.options.h,!1,l,!1);return"<div>".concat(this.series.options.w,"% ").concat(tr("Reach"),"</div><div>").concat(i," ").concat(d,"</div><div>").concat(E.a.formatStatSig(a)," ").concat(tr("Statistical Significance "),"</div>")}},legend:{enabled:!1},plotOptions:{area:{fillOpacity:.6,lineWidth:0,marker:{enabled:!1,states:{hover:{enabled:!1}}}}}}},e.generateBreakdownTable=function(){var t=e.props,r=t.audienceRelativeData,n=t.currencyType,a=t.experimentMap,i=t.selectedMetricWrapper,o=[];return s.a.forEach(e.orderedExperiencesByReach(),(function(t,s){var c=s!==e.orderedExperiencesByReach.size-1,l=r.experiments[t.experimentId.toString()];o.push(d.a.createElement(N,{absoluteExperience:t,currencyType:n,experimentMap:a,key:"".concat(t.experimentId,"_").concat(w.b.RESULTS_TREATMENT_KEY),relativeExperience:l,selectedMetricWrapper:i,type:w.b.RESULTS_TREATMENT_KEY})),o.push(d.a.createElement(N,{absoluteExperience:t,currencyType:n,experimentMap:a,key:"".concat(t.experimentId,"_").concat(w.b.RESULTS_CONTROL_KEY),includeBorder:c,selectedMetricWrapper:i,type:w.b.RESULTS_CONTROL_KEY}))})),d.a.createElement("tbody",null,o)},e.getScopePopoverContent=function(){var t=e.props.selectedMetricWrapper.get("metric");return P.b.getScopeDescriptionsForDisplay(t)},e.orderedExperiencesByReach=function(){var t=e.props.audienceAbsoluteData;return s.a.sortBy(t.experiments,(function(e){return-e.reach.audienceReach}))},e.toggleTableState=function(){var t=e.props.track;e.setState((function(e){return{showTable:!e.showTable}}),(function(){var r=e.state.showTable,n="Results Experience Breakdown More Details ".concat(r?"Opened":"Closed");t(n)}))},e}return _createClass(ExperienceBreakdown,[{key:"render",value:function render(){var e=this.props,t=e.audienceAbsoluteData,r=e.isEmpty,n=e.isLoading,a=e.selectedMetricWrapper,i=this.state.showTable,o=a.get("metric"),s=P.b.getScopeForDisplay(o,!0,!0);return d.a.createElement("div",{className:"shadow-box soft-double push-double--bottom"},d.a.createElement("div",{className:"shadow-box__header shadow-box__header--expanded"},d.a.createElement("div",null,d.a.createElement("div",{className:"shadow-box__title"},d.a.createElement("span",null,"Experience Breakdown"),d.a.createElement(A.a,null)),d.a.createElement("div",{className:"shadow-box__subtitle"},"How each experience contributed."))),n&&d.a.createElement("div",{className:"flex flex--dead-center"},d.a.createElement(T.a,{shouldFill:!1})),!n&&r&&d.a.createElement("div",{className:"results__audience-breakdown-chart flex--dead-center","data-test-section":"experience-breakdown-empty-state"},d.a.createElement("div",{className:"text--center"},d.a.createElement("img",{alt:"Audience Breakdown",className:"anchor--middle",src:k.a,width:"200"}),d.a.createElement("h3",{className:"push-half--bottom"},"Not enough data yet."),d.a.createElement("a",{href:"https://help.optimizely.com/hc/en-us/articles/211660447-Personalization-Results-and-metrics-",target:"_blank",rel:"noopener noreferrer"},"Learn more about how results are calculated"))),!n&&!r&&d.a.createElement("div",null,d.a.createElement("div",{className:"results__audience-breakdown-chart position--relative"},!t&&d.a.createElement(T.a,null),t&&d.a.createElement("div",null,d.a.createElement("div",{className:"flex flex-justified--end"},d.a.createElement("div",{className:"flex flex-align--center push--right"},d.a.createElement("div",{className:"legend legend--is-significant-positive"}),d.a.createElement("div",{className:"legend legend--is-significant-negative"}),"Statistically significant"),d.a.createElement("div",{className:"flex flex-align--center"},d.a.createElement("div",{className:"legend legend--is-not-significant"}),"Not statistically significant")),d.a.createElement("div",{className:"width--1-1"},d.a.createElement(R.a,{config:this.generateBreakdownConfig()})))),d.a.createElement("div",{className:l()({"shadow-box__footer":!0,"push-double--top":!0,"lego-disclose":!0,"is-active":i})},d.a.createElement("a",{className:"lego-disclose__link","data-test-section":"breakdown-more-details-link",onClick:this.toggleTableState},d.a.createElement("span",{className:"lego-disclose__symbol push--right"}),"More Details"),i&&d.a.createElement("div",{className:"position--relative"},d.a.createElement("table",{className:"table"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null),d.a.createElement("th",null),d.a.createElement("th",{className:"text--right","data-test-section":"breakdown-scope-header"},s,d.a.createElement(b.Track,{eventName:"Tooltip Opened",properties:{tooltipType:"Experience Breakdown - ".concat(s)}},d.a.createElement(y.a,{horizontalAttachment:"left",popoverTitle:s,verticalAttachment:"top"},this.getScopePopoverContent()))),d.a.createElement("th",{className:"text--right","data-test-section":"breakdown-measure-type-header"},w.d.getHeaderValue(o,P.a.metricCopyProperties.MEASURE_TYPE),d.a.createElement(b.Track,{eventName:"Tooltip Opened",eventType:"click",properties:{tooltipType:"Experience Breakdown - ".concat(w.d.getHeaderValue(o,P.a.metricCopyProperties.MEASURE_TYPE))}},d.a.createElement(y.a,{horizontalAttachment:"left",popoverTitle:w.d.getHeaderValue(o,P.a.metricCopyProperties.MEASURE_TYPE),verticalAttachment:"top"},w.d.getHeaderValue(o,P.a.metricCopyProperties.MEASURE_TYPE_POPOVER).top))),d.a.createElement(j.a,{info:P.a.metricCopyProperties.MEASURE_RATE,metric:o,parent:"Experience Breakdown"}),d.a.createElement(j.a,{differenceType:C.b.DIFFERENCE_TYPES.ABSOLUTE,info:P.a.metricCopyProperties.IMPROVEMENT,metric:o,parent:"Experience Breakdown",sortable:!1}),d.a.createElement(j.a,{info:P.a.metricCopyProperties.IMPACT,metric:o,parent:"Experience Breakdown",sortable:!1}))),this.generateBreakdownTable())))))}}]),ExperienceBreakdown}(d.a.Component)).propTypes={audienceAbsoluteData:p.a.instanceOf(Object),audienceRelativeData:p.a.instanceOf(Object),currencyType:p.a.oneOf(Object.keys(w.b.currencyTypes)).isRequired,experimentMap:p.a.instanceOf(_.default.Map).isRequired,isEmpty:p.a.bool.isRequired,isLoading:p.a.bool.isRequired,selectedMetricWrapper:p.a.instanceOf(_.default.Map).isRequired,track:p.a.func},i.defaultProps={track:function track(){}},a=i))||a)||a);t.a=D},4792:function(e,t){e.exports="/dist/static/img/p13n/audience-breakdown-empty-b5de1ccdf636a9fcd22e93159c784e97.svg"},4793:function(e,t,r){"use strict";var n,a,i=r(4),o=r.n(i),s=r(1),c=r.n(s),l=r(0),u=r.n(l),p=r(9),f=r.n(p),d=r(59),m=r.n(d),y=r(188),h=r(19),b=r(196),g=r(28),v=r(2),_=r(186),E=r(1384),S=r(3683),O=r(157),R=r(1378),P=r(3674),C=r(326),w=r(3827),T=r(3786),x=r(4115),k=r(4121),I=r.n(k);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function ImprovementHelpPopover(){return u.a.createElement(b.Track,{eventName:"Tooltip Opened",eventType:"click",properties:{tooltipType:"Overview Summary - Overall Improvement"}},u.a.createElement(y.a,null,u.a.createElement("div",{className:"lego-pop--over__content soft"},u.a.createElement("div",{className:"lego-pop--over__title"},"Interpreting overall improvement:"),u.a.createElement("div",{className:"lego-pop--over__body"},"This number measures the overall success of your personalization campaign. It is highest when all of the experiences have broad reach and high improvement on your selected metric. You can increase it by targeting broader audiences, sending more traffic to winning variations, or pausing experiences that arenâ€™t performing well."),u.a.createElement("a",{href:"https://help.optimizely.com/Analyze_Results/Interpret_your_results",target:"_blank",rel:"noopener noreferrer"},"Learn more about how results are calculated."))))},A=Object(g.a)({currencyType:P.c.getters.currencyType,differenceType:P.c.getters.differenceType,resultsFilteringEnabled:P.c.getters.resultsFilteringEnabled})(n=Object(g.b)({alternateContent:u.a.createElement("div",{className:"soft-double flex flex--column",title:"Something went wrong","data-test-section":"overview-error-boundary"},u.a.createElement("div",{className:"shadow-box__title"},"Overall Improvement"),"There was an error loading the overall improvement summary. Please refresh the page or visit our Help Center if the issue persists.",u.a.createElement("div",{className:"display--block push--top"},u.a.createElement(h.a,{style:"highlight",onClick:C.b},"Optimizely Help Center")))})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(OverviewSummary,e);var t=_createSuper(OverviewSummary);function OverviewSummary(){var e;_classCallCheck(this,OverviewSummary);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).generateChartConfig=function(){var t=e.props,r=t.differenceType,n=t.metricWrapper,a=t.overviewData,i=t.resultsFilteringEnabled,s=t.timeseriesData;if(!a)return{chart:{style:{fontFamily:"Inter, Arial, Helvetica"},height:250},credits:{enabled:!1},title:{text:""}};var c=P.c.fns.getLiftFormatFunction(n,R.b.DIFFERENCE_TYPES.RELATIVE),l=P.c.fns.formatOverviewImprovementTimeseries(s,i,r),u=a.variation.lift.status;return{chart:{style:{fontFamily:"Inter, Arial, Helvetica"},height:250},credits:{enabled:!1},title:{text:""},series:[{color:P.c.constants.confidenceIntervalChartColors.INCONCLUSIVE_CONFIDENCE_RANGE,data:l.confidenceIntervalSeries[P.c.constants.timeseriesNodeState.INCONCLUSIVE],name:"Confidence Interval",type:"arearange"},{color:P.c.constants.confidenceIntervalChartColors.INCONCLUSIVE_IMPROVEMENT,data:l.conversionRateSeries[P.c.constants.timeseriesNodeState.INCONCLUSIVE],marker:{enabled:!1,states:{hover:{enabled:!1}}},name:"Improvement",type:"line"},{color:u===O.a.liftStatus.BETTER?P.c.constants.confidenceIntervalChartColors.POSITIVE_CONFIDENCE_RANGE:P.c.constants.confidenceIntervalChartColors.NEGATIVE_CONFIDENCE_RANGE,data:l.confidenceIntervalSeries[P.c.constants.timeseriesNodeState.POSITIVE],name:"Confidence Interval",type:"arearange"},{color:u===O.a.liftStatus.BETTER?P.c.constants.confidenceIntervalChartColors.POSITIVE_IMPROVEMENT:P.c.constants.confidenceIntervalChartColors.NEGATIVE_IMPROVEMENT,data:l.conversionRateSeries[P.c.constants.timeseriesNodeState.POSITIVE],marker:{enabled:!1,states:{hover:{enabled:!1}}},name:"Improvement",type:"line"},{color:u===O.a.liftStatus.WORSE?P.c.constants.confidenceIntervalChartColors.NEGATIVE_CONFIDENCE_RANGE:P.c.constants.confidenceIntervalChartColors.POSITIVE_CONFIDENCE_RANGE,data:l.confidenceIntervalSeries[P.c.constants.timeseriesNodeState.NEGATIVE],name:"Confidence Interval",type:"arearange"},{color:u===O.a.liftStatus.WORSE?P.c.constants.confidenceIntervalChartColors.NEGATIVE_IMPROVEMENT:P.c.constants.confidenceIntervalChartColors.POSITIVE_IMPROVEMENT,data:l.conversionRateSeries[P.c.constants.timeseriesNodeState.NEGATIVE],marker:{enabled:!1,states:{hover:{enabled:!1}}},name:"Improvement",type:"line"}],xAxis:{type:"datetime",labels:{rotation:-30}},yAxis:{title:{text:tr("Improvement")},labels:{x:-5,formatter:function formatter(){return c(this.value)}},endOnTick:!1,lineWidth:1},legend:{enabled:!1},tooltip:{crosshairs:!0,shared:!0,valueSuffix:"%",xDateFormat:P.c.constants.P13N_CHART_DATE_TIME_FORMAT,useHTML:!0,formatter:function formatter(){var e=o.a.isNumber(this.points[1].y)?this.points[1].y:"--",t=o.a.isNumber(this.points[0].point.low)?this.points[0].point.low:"--",r=o.a.isNumber(this.points[0].point.high)?this.points[0].point.high:"--";return"\n            <div>\n              <div>\n                ".concat(m()(this.x).format("dddd, MMMM D, YYYY"),'\n              </div>\n              <div class="flex flex--row">\n                <div style="font-weight: bold">Improvement:&nbsp;</div>\n                ').concat(c(e),'\n              </div>\n              <div class="flex flex--row">\n                <div style="font-weight: bold">Confidence Interval:&nbsp;</div>\n                ').concat(c(t)," to ").concat(c(r),"\n              </div>\n            </div>")}},plotOptions:{arearange:{marker:{enabled:!1}},line:{marker:{enabled:!1}}}}},e.generateImprovementText=function(){var t,r,n=e.props,a=n.currencyType,i=n.metricWrapper,o=n.overviewData,s=n.reachData,c=i.get("metric"),l=c.get("scope"),u=c.get("aggregator"),p=[],f=P.c.constants.currencies[a],d=P.c.fns.shouldPreserveDecimalValue(a,!0),m=_.a.formatWholeNumber(s.audienceVariationSessions);O.b.isRevenueMetric(c)&&(t=_.a.formatPriceForDisplay(o.variation.rate,!1,f,d),p.push("a revenue per session of ".concat(t,"."))),O.b.isValueMetric(c)&&(r=_.a.formatFloatForDisplay(o.variation.rate));var y=_.a.formatPercentForDisplay(o.variation.rate);l===O.a.scope.SESSION||l===O.a.scope.EVENT?(p.push("Optimizely personalized ".concat(m," sessions with ")),O.b.isRevenueMetric(c)?p.push("a revenue per session of ".concat(t,".")):O.b.isValueMetric(c)?p.push("a value per session of ".concat(r,".")):O.b.isAbandonmentMetric(c)?p.push("a".concat((u===O.a.aggregator.EXIT?"n ":" ")+u," rate of ").concat(y)):p.push("a ".concat(y," conversion rate."))):i.getIn(["metric","scope"])===O.a.scope.VISITOR&&(p.push("Visitors in ".concat(m," sessions saw a personalized variation and ")),O.b.isRevenueMetric(c)?p.push("generated ".concat(t," average revenue per session.")):O.b.isValueMetric(c)?p.push("a value per session of ".concat(r,".")):p.push("had a ".concat(y," conversion rate on average.")));var h=_.a.formatWholeNumber(s.audienceBaselineSessions),b=_.a.formatPercentForDisplay(o.baseline.rate);if(p.push("There were ".concat(h," holdback sessions with")),O.b.isRevenueMetric(c)){var g=_.a.formatPriceForDisplay(o.baseline.rate,!1,f,d);p.push("a revenue per session of ".concat(g,"."))}else if(O.b.isValueMetric(c)){var v=_.a.formatFloatForDisplay(o.baseline.rate);p.push("a value per session of ".concat(v))}else O.b.isAbandonmentMetric(c)?p.push("a".concat((u===O.a.aggregator.EXIT?"n ":" ")+u," rate of ").concat(b)):p.push("a ".concat(b," conversion rate."));return p.join(" ")},e.generateOverviewDescription=function(){return e.props.canViewVariationsInP13N?"Overall improvement is the relative difference in conversion rate between the holdback and the personalized variations, averaged together and weighted by reach.":"The relative difference in conversion rate for personalized sessions when compared to holdback."},e.getBoxPlotColor=function(){var t=e.props,r=t.overviewData,n=t.resultsFilteringEnabled;return!r||n?x.a.GREY:e.isStatSigNegative()?x.a.RED:e.isStatSigPositive()?x.a.GREEN:x.a.GREY},e.isStatSigNegative=function(){var t=e.props.overviewData;return t.variation.lift.isSignificant&&t.variation.lift.status===O.a.liftStatus.WORSE},e.isStatSigPositive=function(){var t=e.props.overviewData;return t.variation.lift.isSignificant&&t.variation.lift.status===O.a.liftStatus.BETTER},e.renderContents=function(){var t=e.props,r=t.isEmpty,n=t.metricWrapper,a=t.overviewData,i=t.reachData,o=t.resultsFilteringEnabled,s=t.timeseriesData;return r?e.renderEmptyState():u.a.createElement("div",{className:"flex height--1-1"},u.a.createElement("div",{className:"width--1-2 height--1-1 position--relative"},!a&&u.a.createElement(S.a,{shouldFill:!0}),a&&i&&i.audienceSessions&&u.a.createElement("div",{className:"vue-transition--opacity width--1-1 height--1-1 border--right soft-double--right flex--dead-center"},u.a.createElement("div",null,u.a.createElement("div",{className:f()({"text--center":!0,kilo:!0,"color--good-news":e.isStatSigPositive(a)&&!o,"color--bad-news":e.isStatSigNegative(a)&&!o})},u.a.createElement("div",{"data-test-section":"results-overview-lift"},u.a.createElement("span",{"data-test-section":"overview-lift-display"},u.a.createElement(T.a,{differenceTypeOverride:R.b.DIFFERENCE_TYPES.RELATIVE,lift:a.variation.lift,metricWrapper:n})),u.a.createElement(x.b,{alignment:"middle",color:e.getBoxPlotColor(),differenceType:R.b.DIFFERENCE_TYPES.RELATIVE,lift:a.variation.lift,metricWrapper:n,width:200}))),u.a.createElement("div",{className:"push-double--top","data-test-section":"results-overview-description"},u.a.createElement("span",null,e.generateImprovementText()))))),u.a.createElement("div",{className:"width--1-2 soft-double--top","data-test-section":"overview-chart-container"},u.a.createElement("div",{className:"text--center push-double--bottom"},"Improvement over time"),s&&u.a.createElement(E.a,{config:e.generateChartConfig()})))},e.renderEmptyState=function(){return u.a.createElement("div",{className:"flex--dead-center height--1-1","data-test-section":"overview-summary-empty-state"},u.a.createElement("div",{className:"text--center"},u.a.createElement("img",{alt:"Overall Improvement Summary",className:"anchor--middle",src:I.a,width:"200"}),u.a.createElement("h3",{className:"push-half--bottom"},"Not enough data yet."),u.a.createElement("a",{href:"https://help.optimizely.com/hc/en-us/articles/211660447-Personalization-Results-and-metrics-",target:"_blank",rel:"noopener noreferrer"},"Learn more about how results are calculated")))},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(OverviewSummary,[{key:"render",value:function render(){var e=this.props.metricWrapper;return u.a.createElement("div",null,u.a.createElement("h3",{className:"soft--bottom soft-quad--top push--top shadow-box"},"Highlights for Metric: ",e.get("name"),e.get("isPrimary")&&u.a.createElement("span",{className:"style--italic"}," (Primary Metric)")),u.a.createElement("div",{className:"shadow-box soft-double push-double--bottom position--relative"},u.a.createElement("div",{className:"shadow-box__header shadow-box__header--expanded"},u.a.createElement("div",null,u.a.createElement("div",{className:"shadow-box__title"},"Overall Improvement",u.a.createElement(w.a,null),u.a.createElement(j,null)),u.a.createElement("div",{className:"shadow-box__subtitle"},this.generateOverviewDescription()))),u.a.createElement("div",{className:"height--300"},this.renderContents())))}}]),OverviewSummary}(u.a.Component)).propTypes={canViewVariationsInP13N:c.a.bool,currencyType:c.a.oneOf(Object.keys(P.c.constants.currencyTypes)).isRequired,differenceType:R.b.DIFFERENCE_TYPE_PROP.isRequired,isEmpty:c.a.bool.isRequired,metricWrapper:c.a.instanceOf(v.default.Map).isRequired,overviewData:c.a.objectOf(P.c.constants.resultShape),reachData:c.a.shape({audienceBaselineSessions:c.a.number,audienceSessions:c.a.number,audienceVariationSessions:c.a.number}),resultsFilteringEnabled:c.a.bool.isRequired,timeseriesData:c.a.shape({baseline:c.a.shape({timeseries:c.a.arrayOf(P.c.constants.timeseriesShape)}),variation:c.a.shape({timeseries:c.a.arrayOf(P.c.constants.timeseriesShape)})})},n=a))||n)||n;t.a=A},4794:function(e,t,r){"use strict";var n,a,i=r(1),o=r.n(i),s=r(0),c=r.n(s),l=r(9),u=r.n(l),p=r(19),f=r(26),d=r(186),m=r(28),y=r(326),h=r(3683),b=r(3827),g=r(4121),v=r.n(g);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,n=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=Object(m.b)({alternateContent:c.a.createElement("div",{className:"soft-double flex flex--column",title:"Something went wrong","data-test-section":"reach-error-boundary"},c.a.createElement("div",{className:"shadow-box__title"},"Campaign Reach"),"There was an error loading the campaign reach. Please refresh the page or visit our Help Center if the issue persists.",c.a.createElement("div",{className:"display--block push--top"},c.a.createElement(p.a,{style:"highlight",onClick:y.b},"Optimizely Help Center")))})(((a=function(e){!function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}(ReachFunnel,e);var t=_createSuper(ReachFunnel);function ReachFunnel(){var e;_classCallCheck(this,ReachFunnel);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).renderEmptyState=function(){return c.a.createElement("div",{className:"flex--dead-center height--1-1","data-test-section":"campaign-reach-empty-state"},c.a.createElement("div",{className:"text--center"},c.a.createElement("img",{alt:"",className:"anchor--middle",src:v.a,width:"200"}),c.a.createElement("h3",{className:"push-half--bottom"},"Not enough data yet."),c.a.createElement("a",{href:"https://help.optimizely.com/hc/en-us/articles/211660447-Personalization-Results-and-metrics-",target:"_blank",rel:"noopener noreferrer"},"Learn more about how results are calculated")))},e.renderLoadingDots=function(){return c.a.createElement("div",{className:"flex flex--dead-center"},c.a.createElement(h.a,{shouldFill:!0}))},e.renderContents=function(){var t=e.props,r=t.isEmpty,n=t.reachData;return r?e.renderEmptyState():!n||n.audienceReachUnavailable?e.renderLoadingDots():c.a.createElement("div",{className:"vue-transition--opacity"},c.a.createElement("div",{className:"flex flex-align--center push-half--bottom","data-test-section":"reach-funnel-page-reach-text",key:"page-description"},c.a.createElement(f.a,{className:"lego-icon push-half--right",name:"file",size:"small"}),c.a.createElement("b",{className:"push-half--right"},"Page Reach: "),d.a.formatWholeNumber(n.campaignSessions)," sessions occurred on pages in this campaign."),c.a.createElement("div",{className:"lego-progress progress progress--label push-quad--bottom","data-test-section":"reach-funnel-page-reach",key:"page-progress-bar"},c.a.createElement("div",{className:"lego-progress__bar progress__bar progress__bar--full","data-test-section":"reach-funnel-progress-bar"}),c.a.createElement("div",{className:"progress--label__text"},d.a.formatWholeNumber(n.campaignSessions)," sessions")),c.a.createElement("div",{className:"flex flex-align--center push-half--bottom",key:"audience-description"},c.a.createElement(f.a,{className:"lego-icon push-half--right",name:"user-group-thin",size:"small"}),c.a.createElement("b",{className:"push-half--right"},"Audience Reach:"),c.a.createElement("span",null,d.a.formatPercentForDisplay(n.audienceReach)," of page sessions fell into one or more campaign audiences.")),c.a.createElement("div",{className:u()({"lego-progress":!0,progress:!0,"progress--label":!0,"push-quad--bottom":!0,"progress--label--min":n.audienceReach<.15}),"data-test-section":"reach-funnel-audience-reach",key:"audience-progress-bar"},c.a.createElement("div",{className:"lego-progress__bar progress__bar",style:{minWidth:"".concat(100*n.audienceReach,"%")},"data-test-section":"reach-funnel-progress-bar"}),c.a.createElement("div",{className:"progress--label__text"},d.a.formatWholeNumber(n.audienceSessions)," sessions")),c.a.createElement("div",{className:"flex flex-align--center"},c.a.createElement("div",{className:"legend legend--personalized"}),c.a.createElement("b",{className:"push-half--right"}," Variations: "),"Audiences in"," ",d.a.formatWholeNumber(n.audienceVariationSessions)," (",d.a.formatPercentForDisplay(n.audienceVariationReach),") sessions were shown a variation."),c.a.createElement("div",{className:"flex flex-align--center push-half--bottom"},c.a.createElement("div",{className:"legend legend--holdback"}),c.a.createElement("b",{className:"push-half--right"},"Holdback: "),"Audiences in"," ",d.a.formatWholeNumber(n.audienceBaselineSessions)," (",d.a.formatPercentForDisplay(n.audienceBaselineReach),") sessions were shown the holdback."),c.a.createElement("div",{className:"lego-progress progress progress--label","data-test-section":"reach-funnel-campaign-reach"},c.a.createElement("div",{className:"lego-progress__bar progress__bar progress__bar--personalized",style:{minWidth:"".concat(n.audienceReach*n.audienceVariationReach*100,"%")}}),c.a.createElement("div",{className:"lego-progress__bar progress__bar progress__bar--holdback",style:{minWidth:"".concat(n.audienceReach*n.audienceBaselineReach*100,"%")}})))},e}return function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(ReachFunnel,[{key:"render",value:function render(){return c.a.createElement("div",{className:"shadow-box soft-double push-double--bottom"},c.a.createElement("div",{className:"shadow-box__header shadow-box__header--expanded"},c.a.createElement("div",null,c.a.createElement("div",{className:"shadow-box__title"},"Campaign Reach",c.a.createElement(b.a,null)),c.a.createElement("div",{className:"shadow-box__subtitle"},"How sessions in this campaign were distributed within this time period."))),c.a.createElement("div",{className:"position--relative push-double--top height--200 push--bottom","data-test-section":"reach-funnel"},this.renderContents()))}}]),ReachFunnel}(c.a.Component)).propTypes={isEmpty:o.a.bool.isRequired,reachData:o.a.shape({totalSessions:o.a.number,campaignSessions:o.a.number,audienceVariationSessions:o.a.number,audienceBaselineSessions:o.a.number,end:o.a.number,begin:o.a.number,campaignReach:o.a.number,audienceSessions:o.a.number,audienceReach:o.a.number,audienceVariationReach:o.a.number,audienceBaselineReach:o.a.number,audienceReachUnavailable:o.a.bool})},n=a))||n;t.a=_}}]);
//# sourceMappingURL=results-bundle-336daf1551ede9970c21.js.map