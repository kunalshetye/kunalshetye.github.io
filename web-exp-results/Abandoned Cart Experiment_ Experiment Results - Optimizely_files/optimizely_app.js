/*! For license information please see client.min.js.LICENSE.txt */
(function(){var __webpack_modules__={5120:function(n,t,e){var i;!function(r,o){"use strict";var u="function",a="undefined",c="object",s="string",f="model",l="name",d="type",h="vendor",v="version",p="architecture",g="console",m="mobile",y="tablet",_="smarttv",b="wearable",w="embedded",E="Amazon",I="Apple",A="ASUS",S="BlackBerry",T="Firefox",k="Google",R="Huawei",x="LG",D="Microsoft",N="Motorola",C="Opera",O="Samsung",P="Sharp",M="Sony",L="Xiaomi",F="Zebra",U="Facebook",V=function(n){for(var t={},e=0;e<n.length;e++)t[n[e].toUpperCase()]=n[e];return t},z=function(n,t){return typeof n===s&&-1!==j(t).indexOf(j(n))},j=function(n){return n.toLowerCase()},q=function(n,t){if(typeof n===s)return n=n.replace(/^\s\s*/,""),typeof t===a?n:n.substring(0,350)},B=function(n,t){for(var e,i,r,a,s,f,l=0;l<t.length&&!s;){var d=t[l],h=t[l+1];for(e=i=0;e<d.length&&!s&&d[e];)if(s=d[e++].exec(n))for(r=0;r<h.length;r++)f=s[++i],typeof(a=h[r])===c&&a.length>0?2===a.length?typeof a[1]==u?this[a[0]]=a[1].call(this,f):this[a[0]]=a[1]:3===a.length?typeof a[1]!==u||a[1].exec&&a[1].test?this[a[0]]=f?f.replace(a[1],a[2]):o:this[a[0]]=f?a[1].call(this,f,a[2]):o:4===a.length&&(this[a[0]]=f?a[3].call(this,f.replace(a[1],a[2])):o):this[a]=f||o;l+=2}},G=function(n,t){for(var e in t)if(typeof t[e]===c&&t[e].length>0){for(var i=0;i<t[e].length;i++)if(z(t[e][i],n))return"?"===e?o:e}else if(z(t[e],n))return"?"===e?o:e;return n},H={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},$={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[v,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,v],[/opios[\/ ]+([\w\.]+)/i],[v,[l,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[v,[l,C]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[l,v],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[v,[l,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[v,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[v,[l,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure Browser"],v],[/\bfocus\/([\w\.]+)/i],[v,[l,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[v,[l,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[v,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[l,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[v,[l,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[v,[l,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 Browser"],v],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],v],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,v],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,U],v],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,v],[/\bgsa\/([\w\.]+) .*safari\//i],[v,[l,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[v,[l,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,"Chrome WebView"],v],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[v,[l,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,v],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[v,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[v,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[v,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,v],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],v],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[v,[l,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,v],[/(cobalt)\/([\w\.]+)/i],[l,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,j]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",j]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,j]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[h,O],[d,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[h,O],[d,m]],[/\((ip(?:hone|od)[\w ]*);/i],[f,[h,I],[d,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[h,I],[d,y]],[/(macintosh);/i],[f,[h,I]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[h,P],[d,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[h,R],[d,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[h,R],[d,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[h,L],[d,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[h,L],[d,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[h,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[h,"Vivo"],[d,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[f,[h,"Realme"],[d,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[h,N],[d,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[h,N],[d,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[h,x],[d,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[h,x],[d,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[h,"Lenovo"],[d,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[h,"Nokia"],[d,m]],[/(pixel c)\b/i],[f,[h,k],[d,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[h,k],[d,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[h,M],[d,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[h,M],[d,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[h,"OnePlus"],[d,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[h,E],[d,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[h,E],[d,m]],[/(playbook);[-\w\),; ]+(rim)/i],[f,h,[d,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[h,S],[d,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[h,A],[d,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[h,A],[d,m]],[/(nexus 9)/i],[f,[h,"HTC"],[d,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[f,/_/g," "],[d,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[h,"Acer"],[d,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[h,"Meizu"],[d,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,f,[d,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,f,[d,y]],[/(surface duo)/i],[f,[h,D],[d,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[h,"Fairphone"],[d,m]],[/(u304aa)/i],[f,[h,"AT&T"],[d,m]],[/\bsie-(\w*)/i],[f,[h,"Siemens"],[d,m]],[/\b(rct\w+) b/i],[f,[h,"RCA"],[d,y]],[/\b(venue[\d ]{2,7}) b/i],[f,[h,"Dell"],[d,y]],[/\b(q(?:mv|ta)\w+) b/i],[f,[h,"Verizon"],[d,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[h,"Barnes & Noble"],[d,y]],[/\b(tm\d{3}\w+) b/i],[f,[h,"NuVision"],[d,y]],[/\b(k88) b/i],[f,[h,"ZTE"],[d,y]],[/\b(nx\d{3}j) b/i],[f,[h,"ZTE"],[d,m]],[/\b(gen\d{3}) b.+49h/i],[f,[h,"Swiss"],[d,m]],[/\b(zur\d{3}) b/i],[f,[h,"Swiss"],[d,y]],[/\b((zeki)?tb.*\b) b/i],[f,[h,"Zeki"],[d,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],f,[d,y]],[/\b(ns-?\w{0,9}) b/i],[f,[h,"Insignia"],[d,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[h,"NextBook"],[d,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],f,[d,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],f,[d,m]],[/\b(ph-1) /i],[f,[h,"Essential"],[d,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[h,"Envizen"],[d,y]],[/\b(trio[-\w\. ]+) b/i],[f,[h,"MachSpeed"],[d,y]],[/\btu_(1491) b/i],[f,[h,"Rotor"],[d,y]],[/(shield[\w ]+) b/i],[f,[h,"Nvidia"],[d,y]],[/(sprint) (\w+)/i],[h,f,[d,m]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[h,D],[d,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[h,F],[d,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[h,F],[d,m]],[/smart-tv.+(samsung)/i],[h,[d,_]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[h,O],[d,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,x],[d,_]],[/(apple) ?tv/i],[h,[f,"Apple TV"],[d,_]],[/crkey/i],[[f,"Chromecast"],[h,k],[d,_]],[/droid.+aft(\w)( bui|\))/i],[f,[h,E],[d,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[h,P],[d,_]],[/(bravia[\w ]+)( bui|\))/i],[f,[h,M],[d,_]],[/(mitv-\w{5}) bui/i],[f,[h,L],[d,_]],[/Hbbtv.*(technisat) (.*);/i],[h,f,[d,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,q],[f,q],[d,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,f,[d,g]],[/droid.+; (shield) bui/i],[f,[h,"Nvidia"],[d,g]],[/(playstation [345portablevi]+)/i],[f,[h,M],[d,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[h,D],[d,g]],[/((pebble))app/i],[h,f,[d,b]],[/droid.+; (glass) \d/i],[f,[h,k],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[f,[h,F],[d,b]],[/(quest( 2| pro)?)/i],[f,[h,U],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[d,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[f,[d,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[d,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,m]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[v,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[l,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,v],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[v,G,H]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[v,G,H]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,"Mac OS"],[v,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[v,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,v],[/\(bb(10);/i],[v,[l,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[v,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[v,[l,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[l,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[l,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,"Chromium OS"],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,v],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],v],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[l,v]]},W=function(n,t){if(typeof n===c&&(t=n,n=o),!(this instanceof W))return new W(n,t).getResult();var e=n||(typeof r!==a&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=typeof r!==a&&r.navigator&&r.navigator.userAgentData?r.navigator.userAgentData:o,u=t?function(n,t){var e={};for(var i in n)t[i]&&t[i].length%2==0?e[i]=t[i].concat(n[i]):e[i]=n[i];return e}($,t):$;return this.getBrowser=function(){var n,t={};return t.name=o,t.version=o,B.call(t,e,u.browser),t.major=typeof(n=t.version)===s?n.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var n={};return n.architecture=o,B.call(n,e,u.cpu),n},this.getDevice=function(){var n={};return n.vendor=o,n.model=o,n.type=o,B.call(n,e,u.device),!n.type&&i&&i.mobile&&(n.type=m),n},this.getEngine=function(){var n={};return n.name=o,n.version=o,B.call(n,e,u.engine),n},this.getOS=function(){var n={};return n.name=o,n.version=o,B.call(n,e,u.os),!n.name&&i&&"Unknown"!=i.platform&&(n.name=i.platform.replace(/chrome/i,"Chromium").replace(/mac/i,"Mac ")),n},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return e},this.setUA=function(n){return e=typeof n===s&&n.length>350?q(n,350):n,this},this.setUA(e),this};W.VERSION="0.7.33",W.BROWSER=V([l,v,"major"]),W.CPU=V([p]),W.DEVICE=V([f,h,d,g,m,_,y,b,w]),W.ENGINE=W.OS=V([l,v]),typeof t!==a?(n.exports&&(t=n.exports=W),t.UAParser=W):e.amdO?(i=function(){return W}.call(t,e,t,n))===o||(n.exports=i):typeof r!==a&&(r.UAParser=W)}("object"==typeof window?window:this)},3467:function(n,t,e){var i=e(1296)(),r=e(8490);n.exports=function(n,t){function e(t){if(!(this instanceof e))return new e(t);try{throw new Error(t)}catch(o){o.name=n,this.stack=o.stack}i&&this.stack&&(this.stack=r(this.stack,n,t)),this.message=t||"",this.name=n}return e.prototype=new(t||Error),e.prototype.constructor=e,e.prototype.inspect=function(){return this.message?"["+n+": "+this.message+"]":"["+n+"]"},e.prototype.name=n,e}},8490:function(n){"use strict";n.exports=function(n,t,e){var i=t;return e&&(i+=": "+e),n=i+n.slice(n.indexOf("\n"))}},1296:function(n){"use strict";n.exports=function(){var n=new Error("yep");return!!n.stack&&"Error: yep\n"===n.stack.substr(0,11)}},90:function(n,t,e){n.exports=function(){"use strict";function n(n){return"function"==typeof n||"object"==typeof n&&null!==n}function t(n){return"function"==typeof n}undefined;var i=Array.isArray?Array.isArray:function(n){return"[object Array]"===Object.prototype.toString.call(n)},r=0,o=undefined,u=undefined,a=function(n,t){b[r]=n,b[r+1]=t,2===(r+=2)&&(u?u(w):I())};function c(n){u=n}function s(n){a=n}var f="undefined"!=typeof window?window:undefined,l=f||{},d=l.MutationObserver||l.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),v="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){return function(){return process.nextTick(w)}}function g(){return void 0!==o?function(){o(w)}:_()}function m(){var n=0,t=new d(w),e=document.createTextNode("");return t.observe(e,{characterData:!0}),function(){e.data=n=++n%2}}function y(){var n=new MessageChannel;return n.port1.onmessage=w,function(){return n.port2.postMessage(0)}}function _(){var n=setTimeout;return function(){return n(w,1)}}var b=new Array(1e3);function w(){for(var n=0;n<r;n+=2)(0,b[n])(b[n+1]),b[n]=undefined,b[n+1]=undefined;r=0}function E(){try{undefined;var n=e(1821);return o=n.runOnLoop||n.runOnContext,g()}catch(t){return _()}}var I=undefined;function A(n,t){var e=arguments,i=this,r=new this.constructor(k);r[T]===undefined&&Q(r);var o,u=i._state;return u?(o=e[u-1],a((function(){return Y(u,r,o,i._result)}))):B(i,r,n,t),r}function S(n){var t=this;if(n&&"object"==typeof n&&n.constructor===t)return n;var e=new t(k);return V(e,n),e}I=h?p():d?m():v?y():f===undefined?E():_();var T=Math.random().toString(36).substring(16);function k(){}var R=void 0,x=1,D=2,N=new H;function C(){return new TypeError("You cannot resolve a promise with itself")}function O(){return new TypeError("A promises callback cannot return that same promise.")}function P(n){try{return n.then}catch(t){return N.error=t,N}}function M(n,t,e,i){try{n.call(t,e,i)}catch(r){return r}}function L(n,t,e){a((function(n){var i=!1,r=M(e,t,(function(e){i||(i=!0,t!==e?V(n,e):j(n,e))}),(function(t){i||(i=!0,q(n,t))}),"Settle: "+(n._label||" unknown promise"));!i&&r&&(i=!0,q(n,r))}),n)}function F(n,t){t._state===x?j(n,t._result):t._state===D?q(n,t._result):B(t,undefined,(function(t){return V(n,t)}),(function(t){return q(n,t)}))}function U(n,e,i){e.constructor===n.constructor&&i===A&&e.constructor.resolve===S?F(n,e):i===N?(q(n,N.error),N.error=null):i===undefined?j(n,e):t(i)?L(n,e,i):j(n,e)}function V(t,e){t===e?q(t,C()):n(e)?U(t,e,P(e)):j(t,e)}function z(n){n._onerror&&n._onerror(n._result),G(n)}function j(n,t){n._state===R&&(n._result=t,n._state=x,0!==n._subscribers.length&&a(G,n))}function q(n,t){n._state===R&&(n._state=D,n._result=t,a(z,n))}function B(n,t,e,i){var r=n._subscribers,o=r.length;n._onerror=null,r[o]=t,r[o+x]=e,r[o+D]=i,0===o&&n._state&&a(G,n)}function G(n){var t=n._subscribers,e=n._state;if(0!==t.length){for(var i=undefined,r=undefined,o=n._result,u=0;u<t.length;u+=3)i=t[u],r=t[u+e],i?Y(e,i,r,o):r(o);n._subscribers.length=0}}function H(){this.error=null}var $=new H;function W(n,t){try{return n(t)}catch(e){return $.error=e,$}}function Y(n,e,i,r){var o=t(i),u=undefined,a=undefined,c=undefined,s=undefined;if(o){if((u=W(i,r))===$?(s=!0,a=u.error,u.error=null):c=!0,e===u)return void q(e,O())}else u=r,c=!0;e._state!==R||(o&&c?V(e,u):s?q(e,a):n===x?j(e,u):n===D&&q(e,u))}function K(n,t){try{t((function(t){V(n,t)}),(function(t){q(n,t)}))}catch(e){q(n,e)}}var X=0;function J(){return X++}function Q(n){n[T]=X++,n._state=undefined,n._result=undefined,n._subscribers=[]}function Z(n,t){this._instanceConstructor=n,this.promise=new n(k),this.promise[T]||Q(this.promise),i(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&j(this.promise,this._result))):q(this.promise,nn())}function nn(){return new Error("Array Methods must be provided an Array")}function tn(n){return new Z(this,n).promise}function en(n){var t=this;return i(n)?new t((function(e,i){for(var r=n.length,o=0;o<r;o++)t.resolve(n[o]).then(e,i)})):new t((function(n,t){return t(new TypeError("You must pass an array to race."))}))}function rn(n){var t=new this(k);return q(t,n),t}function on(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function un(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function an(n){this[T]=J(),this._result=this._state=undefined,this._subscribers=[],k!==n&&("function"!=typeof n&&on(),this instanceof an?K(this,n):un())}function cn(){var n=undefined;if("undefined"!=typeof e.g)n=e.g;else if("undefined"!=typeof self)n=self;else try{n=Function("return this")()}catch(r){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=n.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(r){}if("[object Promise]"===i&&!t.cast)return}n.Promise=an}return Z.prototype._enumerate=function(){for(var n=this.length,t=this._input,e=0;this._state===R&&e<n;e++)this._eachEntry(t[e],e)},Z.prototype._eachEntry=function(n,t){var e=this._instanceConstructor,i=e.resolve;if(i===S){var r=P(n);if(r===A&&n._state!==R)this._settledAt(n._state,t,n._result);else if("function"!=typeof r)this._remaining--,this._result[t]=n;else if(e===an){var o=new e(k);U(o,n,r),this._willSettleAt(o,t)}else this._willSettleAt(new e((function(t){return t(n)})),t)}else this._willSettleAt(i(n),t)},Z.prototype._settledAt=function(n,t,e){var i=this.promise;i._state===R&&(this._remaining--,n===D?q(i,e):this._result[t]=e),0===this._remaining&&j(i,this._result)},Z.prototype._willSettleAt=function(n,t){var e=this;B(n,undefined,(function(n){return e._settledAt(x,t,n)}),(function(n){return e._settledAt(D,t,n)}))},an.all=tn,an.race=en,an.resolve=S,an.reject=rn,an._setScheduler=c,an._setAsap=s,an._asap=a,an.prototype={constructor:an,then:A,"catch":function(n){return this.then(null,n)}},an.polyfill=cn,an.Promise=an,an}()},5465:function(n){"use strict";n.exports=function(n){var t,e={};if(!(n instanceof Object)||Array.isArray(n))throw new Error("keyMirror(...): Argument must be an object.");for(t in n)n.hasOwnProperty(t)&&(e[t]=t);return e}},7887:function(n){"use strict";n.exports=function(n,t,e,i){Object.defineProperty(n,t,{get:function(){var n=e.call(this);return Object.defineProperty(this,t,{value:n,enumerable:!!i,writable:!0}),n},set:function(n){return Object.defineProperty(this,t,{value:n,enumerable:!!i,writable:!0}),n},enumerable:!!i,configurable:!0})}},2550:function(n){"use strict";var t=Element.prototype,e=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;n.exports=function(n,t){if(e)return e.call(n,t);for(var i=n.parentNode.querySelectorAll(t),r=0;r<i.length;r++)if(i[r]==n)return!0;return!1}},190:function(n){!function(){function t(n,t){var e,i,r,o,u,a,c,s;for(e=3&n.length,i=n.length-e,r=t,u=3432918353,a=461845907,s=0;s<i;)c=255&n.charCodeAt(s)|(255&n.charCodeAt(++s))<<8|(255&n.charCodeAt(++s))<<16|(255&n.charCodeAt(++s))<<24,++s,r=27492+(65535&(o=5*(65535&(r=(r^=c=(65535&(c=(c=(65535&c)*u+(((c>>>16)*u&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,e){case 3:c^=(255&n.charCodeAt(s+2))<<16;case 2:c^=(255&n.charCodeAt(s+1))<<8;case 1:r^=c=(65535&(c=(c=(65535&(c^=255&n.charCodeAt(s)))*u+(((c>>>16)*u&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295}return r^=n.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}var e=t;e.v2=function(n,t){for(var e,i=n.length,r=t^i,o=0;i>=4;)e=1540483477*(65535&(e=255&n.charCodeAt(o)|(255&n.charCodeAt(++o))<<8|(255&n.charCodeAt(++o))<<16|(255&n.charCodeAt(++o))<<24))+((1540483477*(e>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:r^=(255&n.charCodeAt(o+2))<<16;case 2:r^=(255&n.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&n.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0},e.v3=t,n.exports=e}()},6460:function(n,t,e){n=e.nmd(n),function(){var i,r="Expected a function",o="__lodash_hash_undefined__",u=9007199254740991,a="[object Arguments]",c="[object Array]",s="[object Boolean]",f="[object Date]",l="[object Error]",d="[object Function]",h="[object GeneratorFunction]",v="[object Map]",p="[object Number]",g="[object Object]",m="[object RegExp]",y="[object Set]",_="[object String]",b="[object Symbol]",w="[object WeakMap]",E="[object ArrayBuffer]",I="[object Float32Array]",A="[object Float64Array]",S="[object Int8Array]",T="[object Int16Array]",k="[object Int32Array]",R="[object Uint8Array]",x="[object Uint8ClampedArray]",D="[object Uint16Array]",N="[object Uint32Array]",C=/[&<>"'`]/g,O=RegExp(C.source),P=/\w*$/,M=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,F={};F[I]=F[A]=F[S]=F[T]=F[k]=F[R]=F[x]=F[D]=F[N]=!0,F[a]=F[c]=F[E]=F[s]=F[f]=F[l]=F[d]=F[v]=F[p]=F[g]=F[m]=F[y]=F[_]=F[w]=!1;var U={};U[a]=U[c]=U[E]=U[s]=U[f]=U[I]=U[A]=U[S]=U[T]=U[k]=U[v]=U[p]=U[g]=U[m]=U[y]=U[_]=U[b]=U[R]=U[x]=U[D]=U[N]=!0,U[l]=U[d]=U[w]=!1;var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},z={"function":!0,object:!0},j=z[typeof t]&&t&&!t.nodeType?t:i,q=z.object&&n&&!n.nodeType?n:i,B=q&&q.exports===j?j:i,G=on(j&&q&&"object"==typeof e.g&&e.g),H=on(z[typeof self]&&self),$=on(z[typeof window]&&window),W=on(z[typeof this]&&this),Y=G||$!==(W&&W.window)&&$||H||W||Function("return this")();function K(n,t){return n.set(t[0],t[1]),n}function X(n,t){return n.add(t),n}function J(n,t){return nn(It(n),Ae)}function Q(n,t){return!!n.length&&en(n,t,0)>-1}function Z(n,t,e){for(var i=-1,r=n.length;++i<r;)if(e(t,n[i]))return!0;return!1}function nn(n,t){for(var e=-1,i=t.length,r=n.length;++e<i;)n[r+e]=t[e];return n}function tn(n,t,e){for(var r=-1,o=n.length;++r<o;){var u=n[r],a=t(u);if(null!=a&&(c===i?a==a:e(a,c)))var c=a,s=u}return s}function en(n,t,e){if(t!=t)return function(n,t,e){var i=n.length,r=t+(e?0:-1);for(;e?r--:++r<i;){var o=n[r];if(o!=o)return r}return-1}(n,e);for(var i=e-1,r=n.length;++i<r;)if(n[i]===t)return i;return-1}function rn(n,t,e,i,r){return r(n,(function(n,r,o){e=i?(i=!1,n):t(e,n,r,o)})),e}function on(n){return n&&n.Object===Object?n:null}function un(n){return V[n]}function an(n){var t=!1;if(null!=n&&"function"!=typeof n.toString)try{t=!!(n+"")}catch(e){}return t}function cn(n,t){return n="number"==typeof n||L.test(n)?+n:-1,t=null==t?u:t,n>-1&&n%1==0&&n<t}var sn=Array.prototype,fn=Object.prototype,ln=Function.prototype.toString,dn=fn.hasOwnProperty,hn=0,vn=ln.call(Object),pn=fn.toString,gn=Y._,mn=RegExp("^"+ln.call(dn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yn=Y.Reflect,_n=Y.Symbol,bn=Y.Uint8Array,wn=yn?yn.enumerate:i,En=Object.getPrototypeOf,In=Object.getOwnPropertySymbols,An=Object.create,Sn=fn.propertyIsEnumerable,Tn=sn.splice,kn=Y.isFinite,Rn=Object.keys,xn=Math.max,Dn=Ct(Y,"Map"),Nn=Ct(Y,"Set"),Cn=Ct(Y,"WeakMap"),On=Ct(Object,"create"),Pn=Dn?ln.call(Dn):"",Mn=Nn?ln.call(Nn):"",Ln=Cn?ln.call(Cn):"",Fn=_n?_n.prototype:i,Un=Fn?Fn.valueOf:i;function Vn(n){if(ae(n)&&!Zt(n)){if(n instanceof zn)return n;if(dn.call(n,"__wrapped__"))return function(n){var t=new zn(n.u,n.l);return t.m=It(n.m),t}(n)}return new zn(n)}function zn(n,t){this.u=n,this.m=[],this.l=!!t}function jn(){}function qn(n,t){return On?n[t]!==i:dn.call(n,t)}function Bn(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}function Gn(n){var t=-1,e=n?n.length:0;for(this.I=new Bn;++t<e;)this.push(n[t])}function Hn(n,t){var e=n.I;if(Lt(t)){var i=e.I;return("string"==typeof t?i.string:i.hash)[t]===o}return e.has(t)}function $n(n){var t=-1,e=n?n.length:0;for(this.clear();++t<e;){var i=n[t];this.set(i[0],i[1])}}function Wn(n,t){var e=Xn(n,t);return!(e<0)&&(e==n.length-1?n.pop():Tn.call(n,e,1),!0)}function Yn(n,t){var e=Xn(n,t);return e<0?i:n[e][1]}function Kn(n,t){return Xn(n,t)>-1}function Xn(n,t){for(var e=n.length;e--;)if(Xt(n[e][0],t))return e;return-1}function Jn(n,t,e){var i=Xn(n,t);i<0?n.push([t,e]):n[i][1]=e}function Qn(n,t,e,r){return n===i||Xt(n,fn[e])&&!dn.call(r,e)?t:n}function Zn(n,t,e){(e!==i&&!Xt(n[t],e)||"number"==typeof t&&e===i&&!(t in n))&&(n[t]=e)}function nt(n,t,e){var r=n[t];dn.call(n,t)&&Xt(r,e)&&(e!==i||t in n)||(n[t]=e)}function tt(n){return"function"==typeof n?n:Se}function et(n,t,e,r,o,u,c){var l;if(r&&(l=u?r(n,o,u,c):r(n)),l!==i)return l;if(!ue(n))return n;var w=Zt(n);if(w){if(l=function(n){var t=n.length,e=n.constructor(t);t&&"string"==typeof n[0]&&dn.call(n,"index")&&(e.index=n.index,e.input=n.input);return e}(n),!t)return It(n)}else{var C=Pt(n),O=C==d||C==h;if(ie(n))return function(n,t){if(t)return n.slice();var e=new n.constructor(n.length);return n.copy(e),e}(n,t);if(C==g||C==a||O&&!u){if(an(n))return u?n:{};if(l=function(n){return"function"!=typeof n.constructor||Ft(n)?{}:it(En(n))}(O?{}:n),!t)return l=function(n,t){return n&&Tt(t,_e(t),n)}(l,n),e?Rt(n,l):l}else{if(!U[C])return u?n:{};l=function(n,t,e){var i=n.constructor;switch(t){case E:return St(n);case s:case f:return new i(+n);case I:case A:case S:case T:case k:case R:case x:case D:case N:return function(n,t){var e=t?St(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}(n,e);case v:return function(n){return Bt(function(n){var t=-1,e=Array(n.size);return n.forEach((function(n,i){e[++t]=[i,n]})),e}(n),K,new n.constructor)}(n);case p:case _:return new i(n);case m:return function(n){var t=new n.constructor(n.source,P.exec(n));return t.lastIndex=n.lastIndex,t}(n);case y:return Bt(function(n){var t=-1,e=Array(n.size);return n.forEach((function(n){e[++t]=n})),e}(o=n),X,new o.constructor);case b:return r=n,Un?Object(Un.call(r)):{}}var r;var o}(n,C,t)}}c||(c=new $n);var M=c.get(n);return M||(c.set(n,l),(w?at:lt)(n,(function(i,o){nt(l,o,et(i,t,e,r,o,n,c))})),e&&!w?Rt(n,l):l)}function it(n){return ue(n)?An(n):{}}function rt(n,t,e){if("function"!=typeof n)throw new TypeError(r);return setTimeout((function(){n.apply(i,e)}),t)}var ot,ut,at=(ot=lt,function(n,t){if(null==n)return n;if(!ne(n))return ot(n,t);for(var e=n.length,i=ut?e:-1,r=Object(n);(ut?i--:++i<e)&&!1!==t(r[i],i,r););return n});function ct(n,t){var e=[];return at(n,(function(n,i,r){t(n,i,r)&&e.push(n)})),e}function st(n,t,e,i){i||(i=[]);for(var r=-1,o=n.length;++r<o;){var u=n[r];t>0&&te(u)&&(e||Zt(u)||Qt(u))?t>1?st(u,t-1,e,i):nn(i,u):e||(i[i.length]=u)}return i}var ft=function(n){return function(t,e,i){for(var r=-1,o=Object(t),u=i(t),a=u.length;a--;){var c=u[n?a:++r];if(!1===e(o[c],c,o))break}return t}}();function lt(n,t){return n&&ft(n,t,_e)}function dt(n,t){return ct(t,(function(t){return re(n[t])}))}function ht(n,t,e,r,o){return n===t||(null==n||null==t||!ue(n)&&!ae(t)?n!=n&&t!=t:function(n,t,e,r,o,u){var d=Zt(n),h=Zt(t),v=c,y=c;d||(v=(v=pn.call(n))==a?g:v);h||(y=(y=pn.call(t))==a?g:y);var b=v==g&&!an(n),w=y==g&&!an(t),E=v==y;u||(u=[]);var I=jt(u,(function(t){return t[0]===n}));if(I&&I[1])return I[1]==t;if(u.push([n,t]),E&&!b){var A=d||fe(n)?function(n,t,e,r,o,u){var a=-1,c=2&o,s=1&o,f=n.length,l=t.length;if(f!=l&&!(c&&l>f))return!1;var d=!0;for(;++a<f;){var h,v=n[a],p=t[a];if(h!==i){if(h)continue;d=!1;break}if(s){if(!At(t,(function(n){return v===n||e(v,n,r,o,u)}))){d=!1;break}}else if(v!==p&&!e(v,p,r,o,u)){d=!1;break}}return d}(n,t,e,r,o,u):function(n,t,e,i,r,o,u){switch(e){case s:case f:return+n==+t;case l:return n.name==t.name&&n.message==t.message;case p:return n!=+n?t!=+t:n==+t;case m:case _:return n==t+""}return!1}(n,t,v);return u.pop(),A}if(!(2&o)){var S=b&&dn.call(n,"__wrapped__"),T=w&&dn.call(t,"__wrapped__");if(S||T){A=e(S?n.value():n,T?t.value():t,r,o,u);return u.pop(),A}}if(!E)return!1;A=function(n,t,e,r,o,u){var a=2&o,c=_e(n),s=c.length,f=_e(t).length;if(s!=f&&!a)return!1;var l=s;for(;l--;){var d=c[l];if(!(a?d in t:dn.call(t,d)))return!1}var h=!0,v=a;for(;++l<s;){var p,g=n[d=c[l]],m=t[d];if(!(p===i?g===m||e(g,m,r,o,u):p)){h=!1;break}v||(v="constructor"==d)}if(h&&!v){var y=n.constructor,_=t.constructor;y==_||!("constructor"in n)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(h=!1)}return h}(n,t,e,r,o,u);return u.pop(),A}(n,t,ht,e,r,o))}function vt(n){var t=typeof n;return"function"==t?n:null==n?Se:("object"==t?mt:wt)(n)}function pt(n){n=null==n?n:Object(n);var t=[];for(var e in n)t.push(e);return t}function gt(n,t){var e=-1,i=ne(n)?Array(n.length):[];return at(n,(function(n,r,o){i[++e]=t(n,r,o)})),i}function mt(n){var t=_e(n);return function(e){var r=t.length;if(null==e)return!r;for(e=Object(e);r--;){var o=t[r];if(!(o in e)||!ht(n[o],e[o],i,3))return!1}return!0}}function yt(n,t,e,r,o){if(n!==t){var u=Zt(t)||fe(t)?i:be(t);at(u||t,(function(a,c){if(u&&(a=t[c=a]),ue(a))o||(o=new $n),function(n,t,e,r,o,u,a){var c=n[e],s=t[e],f=a.get(s);if(f)return void Zn(n,e,f);var l=u?u(c,s,e+"",n,t,a):i,d=l===i;d&&(l=s,Zt(s)||fe(s)?Zt(c)?l=c:te(c)?l=It(c):(d=!1,l=et(s,!u)):function(n){if(!ae(n)||pn.call(n)!=g||an(n))return!1;var t=En(n);if(null===t)return!0;var e=t.constructor;return"function"==typeof e&&e instanceof e&&ln.call(e)==vn}(s)||Qt(s)?Qt(c)?l=Tt(h=c,be(h)):!ue(c)||r&&re(c)?(d=!1,l=et(s,!u)):l=c:d=!1);var h;a.set(s,l),d&&o(l,s,r,u,a);a["delete"](s),Zn(n,e,l)}(n,t,c,e,yt,r,o);else{var s=r?r(n[c],a,c+"",n,t,o):i;s===i&&(s=a),Zn(n,c,s)}}))}}function _t(n,t){return n=Object(n),Bt(t,(function(t,e){return e in n&&(t[e]=n[e]),t}),{})}function bt(n,t){var e={};return function(n,t){null==n||ft(n,t,be)}(n,(function(n,i){t(n,i)&&(e[i]=n)})),e}function wt(n){return function(t){return null==t?i:t[n]}}function Et(n,t,e){var i=-1,r=n.length;t<0&&(t=-t>r?0:r+t),(e=e>r?r:e)<0&&(e+=r),r=t>e?0:e-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=n[i+t];return o}function It(n){return Et(n,0,n.length)}function At(n,t){var e;return at(n,(function(n,i,r){return!(e=t(n,i,r))})),!!e}function St(n){var t=new n.constructor(n.byteLength);return new bn(t).set(new bn(n)),t}wn&&!Sn.call({valueOf:1},"valueOf")&&(pt=function(n){return function(n){for(var t,e=[];!(t=n.next()).done;)e.push(t.value);return e}(wn(n))});var Tt=kt;function kt(n,t,e,i){e||(e={});for(var r=-1,o=t.length;++r<o;){var u=t[r];nt(e,u,i?i(e[u],n[u],u,e,n):n[u])}return e}function Rt(n,t){return Tt(n,Ot(n),t)}function xt(n){return Kt((function(t,e){var r=-1,o=e.length,u=o>1?e[o-1]:i;for(u="function"==typeof u?(o--,u):i,t=Object(t);++r<o;){var a=e[r];a&&n(t,a,r,u)}return t}))}function Dt(n,t,e,i){if("function"!=typeof n)throw new TypeError(r);var o=1&t,u=function(n){return function(){var t=arguments,e=it(n.prototype),i=n.apply(e,t);return ue(i)?i:e}}(n);return function a(){for(var t=-1,r=arguments.length,c=-1,s=i.length,f=Array(s+r),l=this&&this!==Y&&this instanceof a?u:n;++c<s;)f[c]=i[c];for(;r--;)f[c++]=arguments[++t];return l.apply(o?e:this,f)}}var Nt=wt("length");function Ct(n,t){var e=n[t];return function(n){if(null==n)return!1;if(re(n))return mn.test(ln.call(n));return ae(n)&&(an(n)?mn:M).test(n)}(e)?e:i}var Ot=In||function(){return[]};function Pt(n){return pn.call(n)}function Mt(n){var t=n?n.length:i;return oe(t)&&(Zt(n)||se(n)||Qt(n))?function(n,t){for(var e=-1,i=Array(n);++e<n;)i[e]=t(e);return i}(t,String):null}function Lt(n){var t=typeof n;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=n||null==n}function Ft(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||fn)}(Dn&&Pt(new Dn)!=v||Nn&&Pt(new Nn)!=y||Cn&&Pt(new Cn)!=w)&&(Pt=function(n){var t=pn.call(n),e=t==g?n.constructor:null,i="function"==typeof e?ln.call(e):"";if(i)switch(i){case Pn:return v;case Mn:return y;case Ln:return w}return t});var Ut=Kt((function(n,t){return Zt(n)||(n=null==n?[]:[Object(n)]),t=st(t,1),J(n)}));function Vt(n){return n?n[0]:i}function zt(n){var t=Vn(n);return t.l=!0,t}function jt(n,t){return function(n,t,e,i){var r;return e(n,(function(n,e,o){if(t(n,e,o))return r=i?e:n,!1})),r}(n,vt(t),at)}function qt(n,t){return at(n,tt(t))}function Bt(n,t,e){return rn(n,vt(t),e,arguments.length<3,at)}function Gt(n,t){var e;if("function"!=typeof t)throw new TypeError(r);return n=de(n),function(){return--n>0&&(e=t.apply(this,arguments)),n<=1&&(t=i),e}}var Ht=Kt((function(n,t,e){return Dt(n,33,t,e)})),$t=Kt((function(n,t){return rt(n,1,t)})),Wt=Kt((function(n,t,e){return rt(n,he(t)||0,e)}));var Yt=Kt((function(n,t){return Dt(n,32,i,t)}));function Kt(n,t){if("function"!=typeof n)throw new TypeError(r);return t=xn(t===i?n.length-1:de(t),0),function(){for(var e=arguments,i=-1,r=xn(e.length-t,0),o=Array(r);++i<r;)o[i]=e[t+i];var u=Array(t+1);for(i=-1;++i<t;)u[i]=e[i];return u[t]=o,n.apply(this,u)}}function Xt(n,t){return n===t||n!=n&&t!=t}function Jt(n,t){return n>t}function Qt(n){return te(n)&&dn.call(n,"callee")&&(!Sn.call(n,"callee")||pn.call(n)==a)}var Zt=Array.isArray;function ne(n){return null!=n&&oe(Nt(n))&&!re(n)}function te(n){return ae(n)&&ne(n)}var ee,ie=(ee=!1,function(){return ee});function re(n){var t=ue(n)?pn.call(n):"";return t==d||t==h}function oe(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=u}function ue(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function ae(n){return!!n&&"object"==typeof n}function ce(n){return"number"==typeof n||ae(n)&&pn.call(n)==p}function se(n){return"string"==typeof n||!Zt(n)&&ae(n)&&pn.call(n)==_}function fe(n){return ae(n)&&oe(n.length)&&!!F[pn.call(n)]}function le(n,t){return n<t}var de=Number,he=Number;function ve(n){return"string"==typeof n?n:null==n?"":n+""}var pe=xt((function(n,t){Tt(t,_e(t),n)})),ge=xt((function(n,t){Tt(t,be(t),n)})),me=xt((function(n,t,e,i){kt(t,be(t),n,i)}));var ye=Kt((function(n){return n.push(i,Qn),me.apply(i,n)}));function _e(n){var t=Ft(n);if(!t&&!ne(n))return function(n){return Rn(Object(n))}(n);var e=Mt(n),i=!!e,r=e||[],o=r.length;for(var u in n)!dn.call(n,u)||i&&("length"==u||cn(u,o))||t&&"constructor"==u||r.push(u);return r}function be(n){for(var t=-1,e=Ft(n),i=pt(n),r=i.length,o=Mt(n),u=!!o,a=o||[],c=a.length;++t<r;){var s=i[t];u&&("length"==s||cn(s,c))||"constructor"==s&&(e||!dn.call(n,s))||a.push(s)}return a}var we=xt((function(n,t,e){yt(n,t,e)})),Ee=Kt((function(n,t){return null==n?{}:(t=gt(st(t,1),String),_t(n,function(n,t,e,i){var r,o=-1,u=Q,a=!0,c=n.length,s=[],f=t.length;if(!c)return s;e&&(t=gt(t,(r=e,function(n){return r(n)}))),i?(u=Z,a=!1):t.length>=200&&(u=Hn,a=!1,t=new Gn(t));n:for(;++o<c;){var l=n[o],d=e?e(l):l;if(a&&d==d){for(var h=f;h--;)if(t[h]===d)continue n;s.push(l)}else u(t,d,i)||s.push(l)}return s}(be(n),t)))}));var Ie=Kt((function(n,t){return null==n?{}:_t(n,st(t,1))}));function Ae(n){return n?function(n,t){return gt(t,(function(t){return n[t]}))}(n,_e(n)):[]}function Se(n){return n}var Te,ke=vt;function Re(n,t,e){var i=_e(t),r=dt(t,i);null!=e||ue(t)&&(r.length||!i.length)||(e=t,t=n,n=this,r=dt(t,_e(t)));var o=!ue(e)||!("chain"in e)||e.chain,u=re(n);return at(r,(function(e){var i=t[e];n[e]=i,u&&(n.prototype[e]=function(){var t=this.l;if(o||t){var e=n(this.u),r=e.m=It(this.m);return r.push({func:i,args:arguments,thisArg:n}),e.l=t,e}return i.apply(n,nn([this.value()],arguments))})})),n}zn.prototype=it(Vn.prototype),zn.prototype.constructor=zn,jn.prototype=On?On(null):fn,Bn.prototype.clear=function(){this.I={hash:new jn,map:Dn?new Dn:[],string:new jn}},Bn.prototype["delete"]=function(n){var t=this.I;return Lt(n)?function(n,t){return qn(n,t)&&delete n[t]}("string"==typeof n?t.string:t.hash,n):Dn?t.map["delete"](n):Wn(t.map,n)},Bn.prototype.get=function(n){var t=this.I;return Lt(n)?function(n,t){if(On){var e=n[t];return e===o?i:e}return dn.call(n,t)?n[t]:i}("string"==typeof n?t.string:t.hash,n):Dn?t.map.get(n):Yn(t.map,n)},Bn.prototype.has=function(n){var t=this.I;return Lt(n)?qn("string"==typeof n?t.string:t.hash,n):Dn?t.map.has(n):Kn(t.map,n)},Bn.prototype.set=function(n,t){var e=this.I;return Lt(n)?function(n,t,e){n[t]=On&&e===i?o:e}("string"==typeof n?e.string:e.hash,n,t):Dn?e.map.set(n,t):Jn(e.map,n,t),this},Gn.prototype.push=function(n){var t=this.I;if(Lt(n)){var e=t.I;("string"==typeof n?e.string:e.hash)[n]=o}else t.set(n,o)},$n.prototype.clear=function(){this.I={array:[],map:null}},$n.prototype["delete"]=function(n){var t=this.I,e=t.array;return e?Wn(e,n):t.map["delete"](n)},$n.prototype.get=function(n){var t=this.I,e=t.array;return e?Yn(e,n):t.map.get(n)},$n.prototype.has=function(n){var t=this.I,e=t.array;return e?Kn(e,n):t.map.has(n)},$n.prototype.set=function(n,t){var e=this.I,i=e.array;i&&(i.length<199?Jn(i,n,t):(e.array=null,e.map=new Bn(i)));var r=e.map;return r&&r.set(n,t),this},Vn.assign=pe,Vn.assignIn=ge,Vn.before=Gt,Vn.bind=Ht,Vn.chain=zt,Vn.compact=function(n){return ct(n,Boolean)},Vn.concat=Ut,Vn.create=function(n,t){var e=it(n);return t?pe(e,t):e},Vn.defaults=ye,Vn.defer=$t,Vn.delay=Wt,Vn.filter=function(n,t){return ct(n,vt(t))},Vn.flatten=function(n){return(n?n.length:0)?st(n,1):[]},Vn.flattenDeep=function(n){return(n?n.length:0)?st(n,Infinity):[]},Vn.iteratee=ke,Vn.keys=_e,Vn.map=function(n,t){return gt(n,vt(t))},Vn.mapValues=function(n,t){var e={};return t=vt(t),lt(n,(function(n,i,r){e[i]=t(n,i,r)})),e},Vn.matches=function(n){return mt(pe({},n))},Vn.merge=we,Vn.mixin=Re,Vn.negate=function(n){if("function"!=typeof n)throw new TypeError(r);return function(){return!n.apply(this,arguments)}},Vn.omit=Ee,Vn.omitBy=function(n,t){return t=vt(t),bt(n,(function(n,e){return!t(n,e)}))},Vn.once=function(n){return Gt(2,n)},Vn.partial=Yt,Vn.pick=Ie,Vn.pickBy=function(n,t){return null==n?{}:bt(n,vt(t))},Vn.slice=function(n,t,e){var r=n?n.length:0;return t=null==t?0:+t,e=e===i?r:+e,r?Et(n,t,e):[]},Vn.sortBy=function(n,t){var e=0;return t=vt(t),gt(gt(n,(function(n,i,r){return{value:n,index:e++,criteria:t(n,i,r)}})).sort((function(n,t){return function(n,t){if(n!==t){var e=null===n,r=n===i,o=n==n,u=null===t,a=t===i,c=t==t;if(n>t&&!u||!o||e&&!a&&c||r&&c)return 1;if(n<t&&!e||!c||u&&!r&&o||a&&o)return-1}return 0}(n.criteria,t.criteria)||n.index-t.index})),wt("value"))},Vn.tap=function(n,t){return t(n),n},Vn.thru=function(n,t){return t(n)},Vn.toArray=function(n){return ne(n)?n.length?It(n):[]:Ae(n)},Vn.values=Ae,Vn.extend=ge,Re(Vn,Vn),Vn.clone=function(n){return ue(n)?Zt(n)?It(n):Tt(n,_e(n)):n},Vn.cloneDeep=function(n){return et(n,!0,!0)},Vn.escape=function(n){return(n=ve(n))&&O.test(n)?n.replace(C,un):n},Vn.every=function(n,t,e){return function(n,t){var e=!0;return at(n,(function(n,i,r){return e=!!t(n,i,r)})),e}(n,vt(t=e?i:t))},Vn.find=jt,Vn.findIndex=function(n,t){return n&&n.length?function(n,t,e){for(var i=n.length,r=e?i:-1;e?r--:++r<i;)if(t(n[r],r,n))return r;return-1}(n,vt(t)):-1},Vn.forEach=qt,Vn.forOwn=function(n,t){return n&&lt(n,tt(t))},Vn.has=function(n,t){return null!=n&&dn.call(n,t)},Vn.head=Vt,Vn.identity=Se,Vn.includes=function(n,t,e,i){n=ne(n)?n:Ae(n),e=e&&!i?de(e):0;var r=n.length;return e<0&&(e=xn(r+e,0)),se(n)?e<=r&&n.indexOf(t,e)>-1:!!r&&en(n,t,e)>-1},Vn.indexOf=function(n,t,e){for(var i=n?n.length:0,r=((e="number"==typeof e?e<0?xn(i+e,0):e:0)||0)-1,o=t==t;++r<i;){var u=n[r];if(o?u===t:u!=u)return r}return-1},Vn.isArguments=Qt,Vn.isArray=Zt,Vn.isBoolean=function(n){return!0===n||!1===n||ae(n)&&pn.call(n)==s},Vn.isDate=function(n){return ae(n)&&pn.call(n)==f},Vn.isEmpty=function(n){if(ne(n)&&(Zt(n)||se(n)||re(n.splice)||Qt(n)))return!n.length;for(var t in n)if(dn.call(n,t))return!1;return!0},Vn.isEqual=function(n,t){return ht(n,t)},Vn.isFinite=function(n){return"number"==typeof n&&kn(n)},Vn.isFunction=re,Vn.isNaN=function(n){return ce(n)&&n!=+n},Vn.isNull=function(n){return null===n},Vn.isNumber=ce,Vn.isObject=ue,Vn.isRegExp=function(n){return ue(n)&&pn.call(n)==m},Vn.isString=se,Vn.isUndefined=function(n){return n===i},Vn.last=function(n){var t=n?n.length:0;return t?n[t-1]:i},Vn.max=function(n){return n&&n.length?tn(n,Se,Jt):i},Vn.min=function(n){return n&&n.length?tn(n,Se,le):i},Vn.noConflict=function(){return Y._===this&&(Y._=gn),this},Vn.noop=function(){},Vn.reduce=Bt,Vn.result=function(n,t,e){var r=null==n?i:n[t];return r===i&&(r=e),re(r)?r.call(n):r},Vn.size=function(n){return null==n?0:(n=ne(n)?n:_e(n)).length},Vn.some=function(n,t,e){return At(n,vt(t=e?i:t))},Vn.uniqueId=function(n){var t=++hn;return ve(n)+t},Vn.each=qt,Vn.first=Vt,Re(Vn,(Te={},lt(Vn,(function(n,t){dn.call(Vn.prototype,t)||(Te[t]=n)})),Te),{chain:!1}),Vn.VERSION="4.6.1",at(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],(function(n){var t=(/^(?:replace|split)$/.test(n)?String.prototype:sn)[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",i=/^(?:pop|join|replace|shift)$/.test(n);Vn.prototype[n]=function(){var n=arguments;return i&&!this.l?t.apply(this.value(),n):this[e]((function(e){return t.apply(e,n)}))}})),Vn.prototype.toJSON=Vn.prototype.valueOf=Vn.prototype.value=function(){return n=this.u,Bt(this.m,(function(n,t){return t.func.apply(t.thisArg,nn([n],t.args))}),n);var n},($||H||{})._=Vn,j&&q&&(B&&((q.exports=Vn)._=Vn),j._=Vn)}.call(this)},7023:function(n,t,e){n.exports=e(6460)._.noConflict()},2596:function(n,t,e){var i=e(190).v3,r=Math.pow(2,32),o=function(n,t){return(i(n,t)>>>0)/r};n.exports={Seed:{IGNORING:0,BUCKETING:1,FALLBACK:2,HOLDBACK:3,BEHAVIOR_EVENT:2716770798},hashToHex:function(n,t){var e=i(n,t);return(e>>>16).toString(16)+(65535&e).toString(16)},hashToInt:function(n,t,e){return Math.floor(o(n,t)*e)},hashToReal:o,toByteString:function(n){var t=String.fromCharCode;return n.replace(/[\S\s]/gi,(function(n){n=n.charCodeAt(0);var e=t(255&n);return n>255&&(e=t(n>>>8&255)+e),n>65535&&(e=t(n>>>16)+e),e}))}}},1999:function(n,t){t.generate=function e(n){return n?(n^16*Math.random()>>n/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}},8094:function(n,t,e){var i=e(7023),r=e(9185).get("stores/audience_data"),o=e(3269),u=e(9054),a=e(6922),c=e(1965);function s(n){var t=["type","selector","attributes","value"],e=i.extend({},n);return e.changeSet=i.map(n.changeSet,(function(n){return i.pick(c.dereferenceChangeId(n),t)})),e}t.emitLayerDecided=function(n){var t=n.decisionTicket?n.decisionTicket.audienceIds:[],e=i.map(t,(function(n){return{id:n,name:r.get(n).name}})),a={type:u.TYPES.LIFECYCLE,name:"layerDecided",data:i.extend(n,{audiences:e})},s=c.translateLayerEventToCampaignEvent(a);o.emit(a),o.emit(s)},t.emitViewActivated=function(n){var t={type:u.TYPES.LIFECYCLE,name:"viewActivated",data:n},e=c.translateViewActivatedToPageActivated(t);o.emit(t),o.emit(e)},t.emitViewsActivated=function(n){var t={type:u.TYPES.LIFECYCLE,name:"viewsActivated",data:n};o.emit(t)},t.emitPageDeactivated=function(n){var t={type:u.TYPES.LIFECYCLE,name:"pageDeactivated",data:n};o.emit(t)},t.emitActivateEvent=function(){o.emit({type:u.TYPES.LIFECYCLE,name:"activate"},!0)},t.emitActivatedEvent=function(){o.emit({type:u.TYPES.LIFECYCLE,name:"activated"})},t.emitInitializedEvent=function(){var n={type:u.TYPES.LIFECYCLE,name:"initialized"};window.optimizely&&(window.optimizely.initialized=!0),o.emit(n)},t.emitOriginsSyncedEvent=function(){var n={type:u.TYPES.LIFECYCLE,name:"originsSynced"};o.emit(n)},t.emitActionAppliedEvent=function(n){var t={type:n.type,campaignId:n.layerId,pageId:n.pageId,experimentId:n.experimentId,variationId:n.variationId};a.defineProperty(t,"changes",(function(){return s(n).changeSet}),"actionAppliedEvent");var e={type:u.TYPES.ACTION,name:"applied",data:t};o.emit(e)},t.emitActionsForDecisionAppliedEvent=function(n,t){var e={decision:n};a.defineProperty(e,"actions",(function(){return i.map(t,s)}),"appliedAllForDecisionEvent");var r={type:u.TYPES.ACTION,name:"appliedAllForDecision",data:e};o.emit(r)},t.emitSendEvents=function(){var n={type:u.TYPES.ANALYTICS,name:"sendEvents"};o.emit(n)},t.emitHoldEvents=function(){var n={type:u.TYPES.ANALYTICS,name:"holdEvents"};o.emit(n)}},6979:function(n,t,e){var i=e(7023),r=e(795),o=e(6922),u=e(1965),a=e(1994),c=e(3828);function s(n,t,e,r){var o=n.getLayerState(r),u=t.get(r),c=e.get();if(!o||!u)return c?{layer:{name:c.layerName,id:c.layerId,policy:c.layerPolicy,integrationStringVersion:c.integrationStringVersion},experiment:{name:c.experimentName,id:c.experimentId},variation:{name:c.variationName,id:c.variationId},isLayerHoldback:!1}:null;if(a.isSingleExperimentPolicy(u.policy)&&o.decision.isLayerHoldback)return null;var s,f,l=o.decision.experimentId,d=o.decision.variationId;return l&&d&&(s=i.find(u.experiments,{id:l}))&&(f=i.find(s.variations,{id:d}))?{layer:{name:u.name,id:u.id,policy:u.policy,integrationStringVersion:u.integrationStringVersion},experiment:{name:s.name,id:s.id},variation:{name:f.name,id:f.id},isLayerHoldback:o.decision.isLayerHoldback}:null}function f(n,t,e,r,o,u){var s=[],f=n.getLayerStates();u.onlySingleExperiments&&(f=i.filter(f,(function(n){var e=t.get(n.layerId);return e&&a.isSingleExperimentPolicy(e.policy)})));var l=i.map(f,(function(n){var t=!!n.decision.variationId,e=n.decisionActivationId&&n.decisionActivationId===r.getActivationId(),o=c.getExperimentAndVariation(),u=o?o.variationId:null,a=t&&n.decision.variationId===u;return i.extend(n,{isActive:t&&e||a,visitorRedirected:a})})),d=o?i.filter(l,o):l;return i.each(d,(function(n){var r=function(n,t,e,r){var o,u,a=n.layerId,c=t.get(a)||{},s=i.map(c.experiments,(function(n){return i.pick(n,["id","name"])}));if(!r&&c.decisionMetadata&&c.decisionMetadata.offerConsistency)return;var f={id:a,campaignName:c.name||null,experiment:null,allExperiments:s,variation:null,reason:n.decision.reason,isActive:!!n.isActive,visitorRedirected:n.visitorRedirected,isInCampaignHoldback:n.decision.isLayerHoldback};n.decision&&n.decision.experimentId&&(o=i.find(c.experiments,{id:n.decision.experimentId})),o&&(f.experiment=i.pick(o,["id","name","campaignName"])),o&&n.decision.variationId&&(u=i.find(o.variations,{id:n.decision.variationId})),u&&(f.variation=i.pick(u,["id","name"]));var l=i.map(n.decisionTicket.audienceIds,(function(n){return i.pick(e.get(n),["id","name"])}));return f.audiences=l,c.decisionMetadata&&c.decisionMetadata.offerConsistency&&(f.pageId=n.pageId),f}(n,t,e,u.includeOfferConsistency);r&&s.push(r)})),s}t.data=["stores/audience_data","stores/client_metadata","stores/event_data","stores/layer_data","stores/view_data","stores/group_data","stores/interest_group","stores/tag_group","stores/global",function(n,t,r,a,c,s,f,l,d){e(9326).time("optimizelyGetData");var h={},v={},p={},g={audiences:n.getAudiencesMap(),events:r.getEventsMap(),campaigns:h,pages:c.getPagesMap(),experiments:v,variations:p,projectId:d.getProjectId(),snippetId:d.getSnippetId(),accountId:d.getAccountId(),dcpServiceId:d.getDCPServiceId(),revision:d.getRevision(),clientName:t.getClientName(),clientVersion:t.getClientVersion()},m=u.dereferenceChangeId;return i.each(a.getAll(),(function(n){o.defineProperty(h,n.id,(function(){var t=i.extend({},n);return o.defineProperty(t,"changes",(function(){return i.map(n.changes,m)}),"campaign"),o.defineProperty(t,"experiments",(function(){return i.map(n.experiments,(function(n){return v[n.id]}))}),"campaign"),t}),"campaignMap","byId"),i.each(n.experiments,(function(n){o.defineProperty(v,n.id,(function(){var t=i.extend({},n);return o.defineProperty(t,"changes",(function(){return i.map(n.changes,m)}),"experiment"),o.defineProperty(t,"variations",(function(){return i.map(n.variations,(function(n){return p[n.id]}))}),"experiment"),t}),"experimentMap","byId"),i.each(n.variations,(function(n){o.defineProperty(p,n.id,(function(){var t=i.extend({},n);return o.defineProperty(t,"actions",(function(){return i.map(n.actions,(function(n){return i.extend({},n,{changes:i.map(n.changes,m)})}))}),"variation"),t}),"variationMap","byId")}))}))})),g.groups=s.getGroupsMap(),e(9326).timeEnd("optimizelyGetData"),g}],t.visitor=["stores/visitor",function(n){return i.cloneDeep(n.getVisitorProfile())}],t.visitor_id=["stores/visitor_id",function(n){return{randomId:n.getRandomId()}}],t.state=["stores/audience_data","stores/layer_data","stores/layer","stores/view_data","stores/view","stores/global","stores/observed_redirect",function(n,t,e,o,u,l,d){return{getCampaignStates:function(r){var o={},u=f(e,t,n,l,r,{includeOfferConsistency:!1});return i.each(u,(function(n){o[n.id]=n})),o},getExperimentStates:function(r){var o=f(e,t,n,l,r,{includeOfferConsistency:!1,onlySingleExperiments:!0}),u=["audiences","variation","reason","visitorRedirected","isActive"];return i.reduce(o,(function(n,t){var e=t.allExperiments[0];return n[e.id]=i.extend({},i.pick(t,u),{id:e.id,experimentName:e.name,isInExperimentHoldback:t.isInCampaignHoldback}),n}),{})},getCampaignStateLists:function(r){var o={},u=f(e,t,n,l,r,{includeOfferConsistency:!0});return i.each(u,(function(n){var t=n.id;o[t]||(o[t]=[]),o[t].push(n)})),o},getPageStates:function(n){var t=u.getAll(),e=i.reduce(t,(function(n,t){var e=o.get(t.id);return n[t.id]=i.extend({},i.pick(e,["id","name","apiName","category","staticConditions","tags"]),i.pick(t,["isActive","metadata"])),n[t.id].isActive=!!n[t.id].isActive,n}),{});return n?i.pickBy(e,n):e},isGlobalHoldback:function(){return l.isGlobalHoldback()},getActivationId:function(){return l.getActivationId()},getVariationMap:function(){var n=e.getLayerStates(),r={};return i.each(n,(function(n){var e=t.get(n.layerId);if(n.decision&&n.decision.experimentId&&(r[n.decision.experimentId]={id:n.decision.variationId,name:null,index:null},e)){var o=i.find(e.experiments,{id:n.decision.experimentId});if(o&&n.decision.variationId)var u=i.find(o.variations,{id:n.decision.variationId}),a=i.findIndex(o.variations,{id:n.decision.variationId});u&&(r[n.decision.experimentId]={id:n.decision.variationId,name:u.name,index:a})}})),r},getActiveExperimentIds:function(){var n={};return i.each(this.getCampaignStateLists({isActive:!0}),(function(t){i.each(t,(function(t){n[t.experiment.id]=!0}))})),i.keys(n)},getRedirectInfo:function(){var n=c.getExperimentAndVariation();return n&&(n.referrer=c.getReferrer()),n},getDecisionString:function(n){if(!n)throw new Error("Must pass a config to getDecisionString");n=i.extend({maxLength:255,shouldCleanString:!1},n);var o=s(e,t,d,n.campaignId);return o?r.generateAnalyticsString(o.layer,o.experiment,o.variation,o.isLayerHoldback,n.maxLength,n.shouldCleanString):null},getDecisionObject:function(n){if(!n)throw new Error("Must pass a config to getDecisionObject");n=i.extend({maxLength:255,shouldCleanString:!1},n);var o=s(e,t,d,n.campaignId);if(!o)return null;var u=r.formatNamesAndIdsForAnalytics(o.layer,o.experiment,o.variation,n.shouldCleanString),c=i.mapValues(u.names,(function(t,e){return r.combineAndTruncateIdAndName(t,u.idStrings[e],n.maxLength)})),f={experiment:c.experiment,variation:c.variation};return a.isSingleExperimentPolicy(o.layer.policy)||i.extend(f,{campaign:c.layer,holdback:o.isLayerHoldback}),f}}}],t.utils=e(1343).create(),t.jquery=["env/jquery",function(n){return n}],t.event_emitter=e(954)},6906:function(n,t,e){var i=e(307),r=e(8231),o="optimizelyDataApi";t.registerFunction=function(n,t){var e=r.getGlobal(o);e||(e={},r.setGlobal(o,e)),e[n]||(e[n]=t)},t.unregisterFunction=function(n){var t=r.getGlobal(o);t&&t[n]&&(t[n]=function(){i.log('Ignoring attempt to call "'+o+"."+n+'" which has been unregistered.')})},t.getFunction=function(n){return r.getGlobal(o)[n]}},8202:function(n,t,e){var i=e(7023),r=e(307),o=e(6979),u=e(9185),a=u.get("stores/plugins"),c=e(3005),s=e(5369),f=e(2672),l=[e(9009),e(4696),e(449)],d=["clientMetadata","cookieDomain","disable","load","optOut","rum"];t.push=function(n,t){var e,o,u,a;if(!i.isArray(n)&&i.isObject(n))a=i.isUndefined(n.version)?1:n.version,e=n.type,u=[n];else if(i.isArray(n))a=0,e=n[0],u=n.slice(1);else{if(!i.isString(n))return r.warn("API / Ignoring non-array/object/string argument:",n),!1;a=0,e=n,u=[]}if(l[a]&&(o=l[a][e]),t&&-1===d.indexOf(e))return r.debug("API / Ignoring non high priority function:",e,u),!1;if(!o)return r.warn('API / No function found for "'+e+'" (v'+a+") with arguments:",u),!1;r.log('API / Executing: "'+e,'" with arguments:',u);try{o.apply(null,u),f.dispatch(c.RECORD_API_USAGE,{methodName:a?"v"+a+"."+e:e})}catch(s){r.error(s)}return!0},t.get=function(n){r.log('API / Getting module: "'+n+'"');var t=o[n];if(t?i.isArray(t)&&(t=u.evaluate(t)):t=a.getPlugin(s.PluginTypes.apiModules,n),t)return f.dispatch(c.RECORD_API_USAGE,{methodName:"get."+n}),t;r.warn('Module "'+n+'" not found.')}},6922:function(n,t,e){var i=e(7887),r=e(3005),o=e(2672),u=e(307);t.defineProperty=function(n,t,e,a,c){i(n,t,(function(){var n=["prop",a,c||t].join(".");return u.debug('Evaluating getter: "'+n+'"'),o.dispatch(r.RECORD_API_USAGE,{methodName:n}),e()}),!0)}},9009:function(n,t,e){var i=e(7023),r=e(4696);function o(n){var t,e={};if(n)if(u(n))t=Number(n);else{if("object"!=typeof n)throw new Error("tracker: Revenue argument "+n+"not a number.");if("revenue"in(e=i.extend({},n))){if(!u(e.revenue))throw new Error("tracker: Revenue value "+e.revenue+"not a number.");t=Number(e.revenue),delete e.revenue}}return i.isUndefined(t)||(e.revenue=t),e}function u(n){return i.isNumber(n)||i.isString(n)&&Number(n)==n}t.activateGeoDelayedExperiments=function(n,t){t||(t=n.lists?"odds":"cdn3"),r.dataFromSource({data:n,source:t})},t.activateSiteCatalyst=function(n){n&&n.sVariable&&r.integrationSettings({id:"adobe_analytics",settings:{sVariableReference:n.sVariable}})},t.bucketVisitor=function(n,t){if(n&&t){var e={experimentId:String(n)};t>256?e.variationId=String(t):e.variationIndex=String(t),r.bucketVisitor(e)}},t.bucketUser=t.bucketVisitor,t.disable=function(n){r.disable({scope:n})},t.log=function(n){i.isUndefined(n)&&(n=!0),r.log({level:n?"INFO":"OFF"})},t.optOut=function(n){i.isUndefined(n)&&(n=!0),r.optOut({isOptOut:n})},t.setCookieDomain=function(n){r.cookieDomain({cookieDomain:n})},t.setCookieExpiration=function(n){r.cookieExpiration({cookieExpirationDays:n})},t.setDimensionValue=function(n,t){var e={};e[n]=t,r.user({attributes:e})},t.setUserId=function(n){r.user({userId:n})},t.storeThirdPartyData=function(n,t){r.dataFromSource({source:n,data:t})},t.trackEvent=function(n,t){r.event({eventName:n,tags:o(t)})}},1965:function(n,t,e){var i=e(7023),r=e(9185),o=e(6040),u=e(6922),a=r.get("stores/change_data");t.translateDecisionToCampaignDecision=function(n){return c(i.cloneDeep(n),{layerId:"campaignId",isLayerHoldback:"isCampaignHoldback"})},t.translateLayerEventToCampaignEvent=function(n){var e={};return u.defineProperty(e,"campaign",(function(){return function(n){var e=i.cloneDeep(n);return e.changes&&(e.changes=i.map(e.changes,t.dereferenceChangeId)),e.experiments&&i.each(e.experiments,(function(n){n.changes&&(n.changes=i.map(n.changes,t.dereferenceChangeId)),n.variations&&i.each(n.variations,(function(n){n.actions&&i.each(n.actions,(function(n){n.changes&&(n.changes=i.map(n.changes,t.dereferenceChangeId))}))}))})),e}(n.data.layer)}),"campaignEvent"),e.decisionTicket=n.data.decisionTicket,e.decision=this.translateDecisionToCampaignDecision(n.data.decision),e.audiences=n.data.audiences,{type:"lifecycle",name:"campaignDecided",data:e}},t.translateViewActivatedToPageActivated=function(n){return{type:"lifecycle",name:"pageActivated",data:{page:n.data.view}}},t.dereferenceChangeId=function(n){var t=a.getChange(n);return t?o.safeReference(t):n};var c=function(n,t){var e=i.omit(n,i.keys(t));return i.each(t,(function(t,i){e[t]=n[i]})),e}},1343:function(n,t,e){var i=e(2454).Promise,r=e(9165).t,o=e(2460).poll,u=e(9759).b,a=e(978).A;t.create=function(){return{observeSelector:r,poll:o,Promise:i,waitForElement:u,waitUntil:a}}},3889:function(n){n.exports={DEFAULT_INTERVAL:20}},9165:function(n,t,e){var i=e(7023),r=(e(3005),e(9185)),o=r.get("stores/directive"),u=e(9230),a=(e(1082),e(5369),e(2672),e(1999).generate),c=e(2460),s=e(8231),f=(r.get("stores/rum"),{once:!1,onTimeout:null,timeout:null}),l={},d=function(n){d=function(){if(!o.shouldObserveChangesIndefinitely())return function(n){var t=c.poll(i.partial(v,n));l[n].cancelObservation=function(){t(),delete l[n]}};var n,t=function(){this.disconnect(),i.each(i.keys(l),v),this.observe(r,e)},e={attributes:!0,childList:!0,subtree:!0,characterData:!0},r=u.getDocumentElement();return n=new MutationObserver(t),function(t){var o=l[t];n.observe(r,e),o.cancelObservation=function(){delete l[t],i.isEmpty(l)&&n.disconnect()}}}(),d(n)};function h(n){var t=l[n];t&&t.cancelObservation&&t.cancelObservation()}function v(n){if(l[n]){if(function(n){var t=n.options.timeout;if(null!==t)if("function"==typeof t)try{return t()}catch(e){}else if(Date.now()-n.startTime>t)return!0;return!1}(l[n]))return 0===l[n].matchedCount&&i.isFunction(l[n].options.onTimeout)&&l[n].options.onTimeout(),void h(n);var t=u.querySelectorAll(l[n].selector);t.length&&(i.each(t,(function(t){t.S&&t.S[n]||l[n].callbackQueue.push(t)})),function(n){for(;l[n]&&l[n].callbackQueue.length;){var t=l[n].callbackQueue.shift();if(p(t,n),l[n].matchedCount=l[n].matchedCount+1,l[n].callback(t),l[n]&&l[n].options.once)return void h(n)}}(n))}}function p(n,t){n.S||(n.S={}),n.S[t]=!0}t.t=function(n,t,e){if(!function(n){try{u.querySelector(n)}catch(t){return!1}return!0}(n))throw new Error("observeSelector expects a valid css selector as its first argument");if(!i.isFunction(t))throw new Error("observeSelector expects a function as its second argument");if(e&&(!i.isObject(e)||i.isFunction(e)))throw new Error("observeSelector expects an object as its third argument");var r=a();return e=i.assign({},f,e||{}),l[r]={callback:t,callbackQueue:[],matchedCount:0,options:e,selector:n,startTime:Date.now()},d(r),s.setTimeout(i.bind(v,null,r),0),i.partial(h,r)}},2460:function(n,t,e){var i=e(7023),r=(e(3005),e(9185)),o=(e(5369),e(2672),e(1999).generate),u=e(8231),a=e(3889).DEFAULT_INTERVAL,c=(r.get("stores/rum"),{});function s(n){c[n]&&i.each(c[n].callbacks,(function(n){n.call(null)}))}function f(n,t){c[t]&&c[t].callbacks[n]&&(delete c[t].callbacks[n],i.some(c[t].callbacks)||(clearInterval(c[t].id),delete c[t]))}t.poll=function(n,t){i.isNumber(t)||(t=a),c[t]||(c[t]={callbacks:{},id:u.setInterval(i.partial(s,t),t)});var e=o();return c[t].callbacks[e]=n,i.partial(f,e,t)},t.cancelAll=function(){i.each(c,(function(n,t){clearInterval(n.id),delete c[t]}))}},9759:function(n,t,e){var i=e(2454).Promise,r=e(9165).t;t.b=function(n){return new i((function(t,e){r(n,t,{once:!0})}))}},978:function(n,t,e){var i=e(2454).Promise,r=e(2460).poll;t.A=function(n){return new i((function(t,e){if(n())t();else var i=r((function(){n()&&(i(),t())}))}))}},4696:function(n,t,e){var i=e(7023),r=e(3005),o=e(8202),u=e(6979),a=e(4976),c=e(5369),s=e(3941),f=e(8094),l=e(46),d=e(1758).U,h=e(9455),v=e(5812),p=(e(7136),e(1527)),g=e(3269),m=e(2672),y=e(4395),_=e(862),b=e(307),w=e(5871),E=(e(5518),e(1470)),I=e(2050),A=e(9185),S=A.get("stores/dimension_data"),T=A.get("stores/view"),k=A.get("stores/view_data"),R=A.get("stores/visitor_id"),x=A.get("stores/layer_data"),D=A.get("stores/directive"),N=!1,C=t.ApiListenerError=d("ApiListenerError");t.event=function(n){var t;switch(n.eventType){case"click":t=function(n){var t;return n.eventData&&(t=p.create(n.eventData.id,n.eventData.apiName,"click",n.eventData)),function(){var n=s.trackClickEvent(t);n?b.log("API / Tracking click event:",n):b.log("API / Not tracking click event:",n)}}(n);break;case"decision":t=function(n){var t=n.eventData,e=_.createLayerState(t.layerId,t.experimentId,t.variationId,t.isLayerHoldback),i=_.createSingle(t.layerId,t.experimentId,t.variationId);return function(){_.recordLayerDecision(e.layerId,e.decisionTicket,e.decision),b.log("API / Tracking decision event:",e),s.trackDecisionEvent(e.decision,e.decisionTicket,i)}}(n);break;case"pageview":t=function(n){var t=E.create(n.eventData.id,n.eventData.apiName),e=E.createState(t.id);return function(){var n=s.trackViewActivation(t,e);n?b.log("API / Tracking pageview event:",n):b.log("API / Not tracking pageview event:",n)}}(n);break;default:t=function(n){var t;return n.eventId&&(t=p.create(n.eventId,n.eventName,"custom")),E.updateAllViewTags(),function(){s.trackCustomEvent(n.eventName,n.tags,t)?b.log("API / Tracking custom event:",n.eventName,n.tags):b.log("API / Not tracking custom event:",n.eventName)}}(n)}R.getBucketingId()?t():m.dispatch(r.ADD_CLEANUP_FN,{lifecycle:c.Lifecycle.postActivate,cleanupFn:t})},t.clientMetadata=function(n){N},t.priorRedirectString=function(n){},t.microsnippetError=function(n){},t.rum=function(n){m.dispatch(r.SET_RUM_DATA,n.eventData)},t.initialViewStates=function(n){var t=i.map(n.states,(function(n,t){return{id:t,isActive:n}}));E.registerViews(t)},t.page=function(n){var t=k.getByApiName(n.pageName);if(!t)throw new Error('Unknown page "'+n.pageName+'"');var e=!n.hasOwnProperty("isActive")||n.isActive,i=function(){e?E.activateViaAPI(t,n.tags):(E.deactivate(t),b.log("API / Deactivated Page",E.description(t)))};R.getBucketingId()?i():m.dispatch(r.ADD_CLEANUP_FN,{lifecycle:c.Lifecycle.postViewsActivated,cleanupFn:i})},t.tags=function(n){E.setGlobalTags(n.tags)},t.user=function(n){b.log("API / Setting visitor custom attributes:",n.attributes),i.each(n.attributes,(function(n,t){var e,i,r=t,o=S.getById(t)||S.getByApiName(t);o&&(r=o.id,e=o.apiName,i=o.segmentId||o.id);var u={id:i,value:n};e&&(u.name=e),O(r,u,!0)}))};var O=function(n,t,e){var i=[{key:e?["custom",n]:[n],value:t,metadata:{lastModified:h.now()}}],o=function(){m.dispatch(r.SET_VISITOR_ATTRIBUTES,{attributes:i})};R.getBucketingId()?o():m.dispatch(r.ADD_CLEANUP_FN,{lifecycle:c.Lifecycle.postVisitorProfileLoad,cleanupFn:o})};t.optOut=function(n){var t=!n.hasOwnProperty("isOptOut")||n.isOptOut;v.setOptOut(t)},t.cookieExpiration=function(n){var t=n.cookieExpirationDays;t<90&&(b.error('Argument "cookieExpirationDays"=',t,"less than minimum days:",90,", setting to minimum."),t=90),b.log("API / Setting cookie age to",t,"days."),m.dispatch(r.SET_COOKIE_AGE,86400*t)},t.extendCookieLifetime=function(n){n=i.extend({isEnabled:!0},n),b.log("API / Setting cookie automatic lifetime extension to",n.isEnabled),m.dispatch(r.SET_COOKIE_AUTO_REFRESH,n.isEnabled)},t.cookieDomain=function(n){b.log("API / Setting cookie domain to",n.cookieDomain),m.dispatch(r.SET_COOKIE_DOMAIN,n.cookieDomain)},t.disable=function(n){if(n.scope){if("tracking"!==n.scope)throw new Error('Unknown "scope" for disable: '+n.scope);b.log("API / Disabling tracking"),m.dispatch(r.LOAD_DIRECTIVE,{trackingDisabled:!0})}else b.log("API / Disabling everything"),m.dispatch(r.LOAD_DIRECTIVE,{disabled:!0})},t.log=function(n){var t=n.level,e=n.match;i.isUndefined(t)&&(t="INFO"),i.isUndefined(e)&&(e=""),b.setLogMatcher(e),b.setLogLevel(t)},t.registerModule=function(n){var t="custom/"+n.moduleName;if(u[t]||o.get(t))throw new Error('Module name "'+t+'" is reserved. Will not be registered as plugin.');w.registerApiModule(t,n.module)},t.dataFromSource=function(n){var t=n.source;l.makeAsyncRequest(t),l.resolveRequest(t,n.data)},t.addListener=function(n){if(!i.isFunction(n.handler))throw new Error("A handler function must be supplied");(n=i.omit(n,"type")).publicOnly=!0,n.emitErrors=!0;var t=n.handler;n.handler=function(n){try{return t(n)}catch(e){throw new C(e)}},g.on(n)},t.removeListener=function(n){if(!n.token)throw new Error("Must supply a token to removeListener");g.off(n.token)},t.load=function(n){n.data=i.extend({},n.data),a.normalizeClientData(n.data),m.dispatch(r.DATA_LOADED,{data:n.data})},t.integrationSettings=function(n){if(!n.id)throw new Error("id is required");if(!n.settings)throw new Error("settings is required");m.dispatch(r.SET_INTEGRATION_SETTINGS,i.extend({},n.settings,{id:n.id}))},t.bucketVisitor=function(n){if(!n.variationId&&i.isUndefined(n.variationIndex)||n.variationId&&n.variationIndex)throw new Error("One of a variationId or a variationIndex is required.");if(!n.experimentId)throw new Error("An experimentId is required.");var t,e,r=n.campaignId;if(r){if(!(t=x.get(r)))throw new Error("Could not find layer "+r)}else if(!(r=(t=x.getLayerByExperimentId(n.experimentId)).id))throw new Error("Could not find layer for experiment "+n.experimentId);if(!(e=i.find(t.experiments,{id:n.experimentId})))throw new Error("Could not find experiment "+n.experimentId+" in layer "+r);var o=n.variationId;if(i.isUndefined(n.variationIndex)){if(!i.find(e.variations,{id:o}))throw new Error("Cound not find variation "+o+" in experiment "+n.experimentId)}else if(!(o=e.variations[n.variationIndex].id))throw new Error("Could not find variation at index "+n.variationIndex+" in experiment "+n.experimentId);I.updateVariationIdMap(r,n.experimentId,o),R.getBucketingId()&&I.persistVariationIdMap()},t.waitForOriginSync=function(n){if(!i.isArray(n.canonicalOrigins))throw new Error("canonicalOrigins must be an array. Got: "+y.stringify(n.canonicalOrigins));i.each(n.canonicalOrigins,(function(n){if(!i.isString(n))throw new Error("Each item in canonicalOrigins must be a string. Found type "+(void 0===n?"undefined":(t=n)&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t));var t})),m.dispatch(r.XDOMAIN_SET_CANONICAL_ORIGINS,{canonicalOrigins:n.canonicalOrigins})},t.disableCrossOrigin=function(){b.log("API / cross origin tracking is DISABLED"),m.dispatch(r.XDOMAIN_SET_DISABLED,{disabled:!0})},t.activate=function(){D.shouldActivate()?(i.forEach(T.getActiveViewStates(),(function(n){E.deactivate(k.get(n.id))})),m.dispatch(r.RESET_VIEW_STATES),f.emitActivateEvent()):b.debug("Not activating.")},t.sendEvents=function(){f.emitSendEvents()},t.holdEvents=function(){f.emitHoldEvents()}},449:function(){},2881:function(n,t,e){var i=e(7023),r=e(1758).U,o=t.ActivationCodeError=r("ActivationCodeError"),u=t.ProjectJSError=r("ProjectJSError"),a=e(1079),c=e(3005),s=e(3941),f=e(8094),l=e(1066),d=e(6306),h=e(4976),v=e(9455),p=e(9798),g=e(9185),m=e(5812),y=e(9230),_=e(5369),b=e(3269),w=e(9054),E=e(9717),I=e(2672),A=e(9337),S=e(862),T=e(1100).mM,k=e(307),R=e(2999),x=e(9326),D=e(5871),N=e(3916),C=e(2454).Promise,O=e(3961),P=e(5518),M=e(733),L=e(8624),F=e(1470),U=e(2050),V=e(8231),z=(g=e(9185)).get("stores/session"),j=g.get("stores/audience_data"),q=g.get("stores/action_data"),B=g.get("stores/cleanup"),G=g.get("stores/directive"),H=g.get("stores/global"),$=g.get("stores/group_data"),W=g.get("stores/layer_data"),Y=g.get("stores/layer"),K=g.get("stores/pending_events"),X=g.get("stores/plugins"),J=g.get("stores/rum"),Q=g.get("stores/visitor"),Z=g.get("stores/view_data"),nn=g.get("stores/view"),tn=g.get("stores/visitor_id"),en=g.get("stores/visitor_bucketing"),rn=g.get("stores/xdomain"),on=e(8202),un=e(7136),an=e(41),cn=t;function sn(){x.timeEnd("xdomainSetup");var n=null;i.isNumber(n)&&0===W.getCount()?(k.log("Activating after delay of",n,"ms because no Experiments are running"),I.dispatch(c.SET_RUM_DATA,{data:{activateDfd:!0}}),V.setTimeout(f.emitActivateEvent,n)):f.emitActivateEvent()}function fn(n){un.handleError(n.data.error,n.data.metadata)}function ln(n,t){I.dispatch(c.SET_RUM_DATA,{data:{extras:{xdAttempt:n,xdError:t?t.toString():void 0}}})}function dn(n,t,e){x.time("getDecisionTicket"),n=n||[];var r=X.getAllPlugins(_.PluginTypes.visitorProfileProviders),o=H.getGlobalHoldbackThreshold(),u=Q.getVisitorProfile();U.populateLazyVisitorData(r,u);var a=tn.getBucketingId();if(!a)throw new Error("bucketingId not set");var c,s=Q.getVisitorProfile();t&&(c=en.getVariationIdMap()[t.id]);var f={bucketingId:a,visitorProfile:s,audiences:n,globalHoldback:o,preferredVariationMap:c,layer:t};return t&&e&&p.isPageIdRelevant(t)?i.map(e,(function(n){return p.createTicket(i.extend({},f,{pageId:n}))})):[p.createTicket(f)]}function hn(n,e,r,o){try{var u=function(n){return{bucketingId:tn.getBucketingId(),preferredLayerId:en.getPreferredLayerMap()[n.id]}}(o),a=p.decideGroup(o,u);if(a.reason)return k.debug("Not activating Group",A.description(o),"; reason:",a.reason),J.getSampleRum()&&I.dispatch(c.RECORD_LAYER_FEATURE_USAGE,{feature:"mutex",entityId:o.id}),C.resolve();var s=W.get(a.layerId);if(!s)return k.debug("Visitor was bucketed into a Campaign ("+a.layerId+") which is not in this snippet"),C.resolve();var f=i.filter(s.pageIds,i.partial(i.includes,r));return i.isEmpty(f)?(k.debug("Not activating Group",A.description(o),"; reason: visitor was bucketed into a Campaign/Experiment not related to the currently-activating Page(s)"),C.resolve()):(J.getSampleRum()&&I.dispatch(c.RECORD_LAYER_FEATURE_USAGE,{feature:"mutex",entityId:o.id}),t.decideAndExecuteLayerASAP(n,e,f,s))}catch(l){return k.error("Error getting decision for Group",A.description(o),"; ",l),C.reject(l)}}function vn(n,t){var e={};return i.each(n,(function(n){i.isArray(n)?i.extend(e,vn(n,t)):i.isObject(n)&&t[n.type]&&(e[n.type]=!0)})),e}function pn(n){var t=[];return i.each(n,(function(n){t.push(n.name,n)})),t}function gn(n){var t=B.getCleanupFns(n);if(t.length>0){for(;t.length>0;)t.shift()();I.dispatch(c.CLEAR_CLEANUP_FN,{lifecycle:n})}}t.initialize=function(n){return this.initGlobalStore(n.clientData),this.initializePlugins(n.plugins)},t.initGlobalStore=function(n){h.normalizeClientData(n),b.on({filter:{type:"error"},handler:fn}),I.dispatch(c.DATA_LOADED,{data:n}),k.log("Initialized with DATA:",n)},t.initializePlugins=function(n){if(x.timeEnd("preInitialize"),x.time("ClientInitialize"),i.isArray(window.optimizely)&&(window.optimizely=i.filter(window.optimizely,(function(n){var t=!0;return!on.push(n,t)}))),m.setOptOut(G.shouldOptOut()),!G.isDisabled()&&!G.shouldOptOut()){an.queueBeacons(),y.isReady()?I.dispatch(c.SET_DOMCONTENTLOADED):y.addReadyHandler((function(){I.dispatch(c.SET_DOMCONTENTLOADED)})),x.time("projectJS");var e=H.getProjectJS();if(i.isFunction(e))try{E.apply(e)}catch(h){k.error("Error while executing projectJS: ",h),d.emitError(new u(h))}x.timeEnd("projectJS"),x.time("pluginsRegister"),i.each(n||[],(function(n){try{n(D)}catch(h){d.emitInternalError(h)}})),i.each(H.getPlugins()||[],(function(n){try{E.apply(n,[D])}catch(h){d.emitError(h)}})),x.timeEnd("pluginsRegister"),P.load();var r=b.on({filter:{type:"lifecycle",name:"activated"},handler:function(){Q.observe(U.persistVisitorProfile),Y.observe(U.persistLayerStates),z.observe(U.persistSessionState),K.observe(R.persistPendingEvents),en.observe(U.persistVisitorBucketingStore),b.off(r)}});b.on({filter:{type:"lifecycle",name:"viewsActivated"},handler:t.onViewsActivated}),b.on({filter:{type:"lifecycle",name:"pageDeactivated"},handler:t.onPageDeactivated}),t.initializeApi();var o=R.getPendingEvents();if(o&&(I.dispatch(c.LOAD_PENDING_EVENTS,{events:o}),R.retryPendingEvents(o)),b.on({filter:{type:"lifecycle",name:"activate"},handler:t.activate}),f.emitInitializedEvent(),!G.shouldActivate())return C.resolve();var a=[];if(rn.isDisabled())sn(),x.timeEnd("ClientInitialize");else{x.time("xdomainSetup");var s=t.initializeXDomainStorage();if(a.push(s),Boolean(rn.getCanonicalOrigins())){var l=M.makeTimeoutPromise(1e3);C.race([s,l])["catch"]((function(n){k.error("Failed to initialize xDomain storage: ",n)})).then(sn)["catch"](un.handleError)}else sn(),x.timeEnd("ClientInitialize")}return C.all(a)}k.log("Controller / Is disabled")},t.activate=function(){try{var n=[];k.log("Activated client"),gn(_.Lifecycle.preActivate);var t=v.now();I.dispatch(c.ACTIVATE,{activationId:String(t),activationTimestamp:t});var e=Z.getAll();F.registerViews(e),U.setId(U.getOrGenerateId()),n.push(s.trackPostRedirectDecisionEvent()),I.dispatch(c.MERGE_VARIATION_ID_MAP,{variationIdMap:U.getVariationIdMap()}),I.dispatch(c.MERGE_PREFERRED_LAYER_MAP,{preferredLayerMap:U.getPreferredLayerMap()}),gn(_.Lifecycle.postVisitorProfileLoad),n.push((h=X.getAllPlugins(_.PluginTypes.visitorProfileProviders),g=Q.getVisitorProfile(),U.populateEagerVisitorData(h,g)).then((function(){k.log("Populated visitor profile")})));var r=dn(),o=p.decideGlobal(r);k.log("Made global decision",r,"->",o),I.dispatch(c.RECORD_GLOBAL_DECISION,o);var u=s.trackClientActivation();u?k.log("Tracked activation event",u):k.log("Not tracking activation event");var a=cn.setUpViewActivation(e),l=[];return i.each(a,(function(n){l=l.concat(F.activateMultiple([n]))})),gn(_.Lifecycle.postViewsActivated),gn(_.Lifecycle.postActivate),f.emitActivatedEvent(),C.all(n).then((function(){b.emit({type:w.TYPES.LIFECYCLE,name:"activateDeferredDone"}),k.log("All immediate effects of activation resolved")}),d.emitError)}catch(m){return d.emitError(m),C.reject(m)}var h,g},cn.setUpViewActivation=function(n){var t=[];return i.each(n,(function(n){i.isBoolean(nn.getViewState(n.id).isActive)&&F.isActivationTypeImmediate(n.activationType)?k.debug("Skipping page: already evaluated, presumably at the edge",F.description(n)):F.shouldTriggerImmediately(n.activationType)?t.push(n):n.activationType===_.ViewActivationTypes.callback?(k.debug("Setting up conditional activation for Page",F.description(n)),cn.activateViewOnCallback(n)):n.activationType===_.ViewActivationTypes.polling?(k.debug("Setting up polling activation for Page",F.description(n)),N.pollFor(i.partial(E.apply,n.activationCode),null,i.partial(L.isTimedOut,v.now())).then((function(){F.activateMultiple([n])}))["catch"]((function(t){k.warn("Failed to activate view ",n,t)}))):n.activationType!==_.ViewActivationTypes.manual&&d.emitError(new Error("Unknown view activationType: "+n.activationType))})),t},cn.activateViewOnCallback=function(n){var t={pageId:n.id};Object.defineProperty(t,"isActive",{get:function(){return nn.isViewActive(n.id)}});try{E.apply(n.activationCode,[function(t){var e=i.extend({},t,{pageName:n.apiName,type:"page"});on.push(e)},t])}catch(r){var e=new o("("+r.toString()+") in activationCode for "+F.description(n));d.emitError(e,{originalError:r,userError:!0})}},t.onViewsActivated=function(n){var e,r=n.data.views,o=i.map(r,"id");try{if(!tn.getBucketingId())throw new Error("View activated with no visitorId set");var u=function(n){var e=W.getAllByPageIds(n),r=G.getForceVariationIds(),o=G.getForceAudienceIds(),u=!i.isEmpty(r);u&&k.log("Force variations are in use. Disabling mutual exclusivity.");var a=u?{individual:e}:i.reduce(e,(function(n,t){return t.groupId?n.groups[t.groupId]||(n.groups[t.groupId]=$.get(t.groupId)):n.individual.push(t),n}),{groups:{},individual:[]});k.log("Deciding Campaigns/Experiments for Page(s)",n);var c=i.map(a.groups,A.description).join(", ");k.log("Groups:",c);var s=i.map(a.individual,S.description).join(", ");k.log("Campaigns/Experiments not in Groups (by Campaign id):",s);var f=i.map(a.groups,i.partial(hn,r,o,n))||[],l=i.map(a.individual,(function(e){var u=i.filter(e.pageIds,i.partial(i.includes,n));return t.decideAndExecuteLayerASAP(r,o,u,e)})),d=f.concat(l);return C.all(d).then((function(t){var e=i.filter(t,(function(n){return!!n}));return k.log("All Campaigns/Experiments for Page(s) (by Campaign id)",n,"resolved:",i.map(e,S.description).join(", ")),e}))}(o)["catch"](d.emitError);return e=C.all(i.map(r,(function(n){var t=function(){x.time("sendViewActivate"),F.parseViewTags(n);var t=s.trackViewActivation(n);t?k.log("Tracked activation for Page",F.description(n),t):k.log("Not Tracking activation for Page",F.description(n))};return y.isReady()?C.resolve(t()):N.pollFor(y.isReady,1e3).then(t)}))),C.all([u,e])}catch(a){d.emitError(a)}},t.onPageDeactivated=function(n){var t=n.data.page,e=q.getAllActionIdsByPageId(t.id);i.each(e,(function(n){var e=q.getActionState(n);e&&(i.each(e,(function(n,e){if(n.cancel)try{n.cancel(),k.debug("Controller / Canceled change",e,"observation due to deactivation of page:",t)}catch(i){k.error("Controller / Error canceling change",e,"observation upon deactivation of page.",i)}if(t.undoOnDeactivation&&n.undo)try{n.undo(),k.debug("Controller / Undid change",e,"due to deactivation of page:",t)}catch(r){k.error("Controller / Error undoing change upon deactivation of page.",r)}})),I.dispatch(c.REMOVE_ACTION_STATE,{actionId:n}),k.debug("Controller / Undid changes and/or canceled change observation due to deactivation of page:",t,n))}))},t.initializeApi=function(){var n={push:on.push};n.get=on.get;var t=window.optimizely;i.isArray(t)&&i.each(t,(function(t){n.push(t)})),n.data={note:"Obsolete, use optimizely.get('data') instead"},n.state={},window.optimizely=n},t.persistItemsWithId=function(n){return i.each(n,(function(n,t){U.checkKeyForVisitorId(t)&&T.setItem(t,n)})),n},t.initializeXDomainStorage=function(){var n=e(8781),r=!!U.getCurrentId(),o=!!r&&U.hasSomeData();r?o?k.log("xd / Existing visitor; has data on this origin"):k.log("xd / Existing visitor; new to this origin"):k.log("xd / New visitor");var u=H.getAccountId(),a="https://a5935064.cdn.optimizely.com".replace("__SUBDOMAIN__","a"+u+"."),s="/client_storage/a"+u+".html";n.subscribe((function(n,t){U.checkKeyForVisitorId(n)&&T.setItem(n,t)}));var l=n.fetchAll().then((function(t){if(!tn.getVisitorIdLocator()){var e=rn.getCanonicalOrigins();if(e){var i=n.getXDomainUserId(t,e);i&&(k.log("Syncing cross-origin visitor randomId:",i),U.maybePersistVisitorId({randomId:i}))}}return U.deleteOldForeignData(),t})).then(t.persistItemsWithId).then((function(n){if(U.loadForeignData(),r&&!o){var t=!i.isEmpty(n);k.debug("xd / Loaded foreign data? ",t),ln(t)}k.log("Loaded visitor data from foreign origins"),f.emitOriginsSyncedEvent()}),(function(n){throw r&&!o&&(k.debug("xd / Failed to load foreign data:",n),ln(!1,n)),n}));return C.all([n.load(a,s)["catch"]((function(n){throw k.debug("xd / Failed to load iframe:",n),r&&!o&&ln(!1,n),n})),l["catch"]((function(n){k.debug("xd / Ignored error syncing foreign data (expected if waitForOriginSync used):",n.message),k.debug("xd / Enqueuing sync to happen after visitorId set."),I.dispatch(c.ADD_CLEANUP_FN,{lifecycle:_.Lifecycle.postVisitorProfileLoad,cleanupFn:f.emitOriginsSyncedEvent})}))])},t.decideAndExecuteLayerASAP=function(n,e,r,o){return new C((function(u,d){x.time("decideAndExecuteLayer");try{!function(n,t,e,r,o){if(t.length||e.length)return void o(dn([],void 0,r));var u=S.relatedAudienceIds(n),a=i.reduce(u,(function(n,t){var e=j.get(t);return!e||n.push(e),n}),[]),s=X.getAllPlugins(_.PluginTypes.audienceMatchers);if(J.getSampleRum()){var f={};if(i.each(a,(function(n){i.extend(f,vn(n.conditions,s))})),!i.isEmpty(f)){var d=i.keys(f);I.dispatch(c.RECORD_AUDIENCE_USAGE,{audienceTypes:d,layerId:n.id})}}!function(n,t,e,r){var o=i.reduce(n,(function(n,e){return i.extend(n,l.requiredAudienceFieldsForConditions(e.conditions,t))}),{}),u=i.reduce(o,(function(n,t){if(i.isUndefined(U.getAttribute(t))){var e=U.getPendingAttributeValue(t);i.isUndefined(e)||n.push(e)}return n}),[]);if(0===u.length)return r();var a=[].concat(n),c=O.firstToResolve(i.map(u,(function(n){return C.resolve(n).then((function(){var n=Q.getVisitorProfile();if(a=i.filter(a,(function(e){return i.isUndefined(l.isInAudience(n,e,t))})),!i.isEmpty(a))throw new Error("At least one audience is still pending")}))})));C.race([c,new C((function(n,t){V.setTimeout(t,e)}))]).then((function(){k.log("Activating Campaign after pending Audiences resolved",n),r()}),(function(){k.log("Activating Campaign after timeout on Audiences",n),r()}))}(a,s,S.getActivationTimeout(n),(function(){var t=dn(a,n,r);i.map(t,(function(t){!function(n,t,e){var r=i.map(n.audienceIds,i.bind(j.get,j)),o=i.filter(t,(function(t){return!i.includes(n.audienceIds,t.id)}));k.log("When deciding Campaign",S.description(e),"visitor is in audiences:",pn(r),"and not in audiences:",pn(o))}(t,a,n)})),o(t)}))}(o,n,e,r,(function(l){i.each(l,(function(u){var l=u.pageId?[u.pageId]:r;k.debug("Deciding layer: ",o,"with decisionTicket: ",u,"and actionViewIds: ",l),function(n,e,r,o,u){var l=S.description(n);k.log("Activating Campaign",l,"on Page(s)",o),r.length&&(k.log("Applying force audienceIds:",r,"to Campaign",l),(u=i.cloneDeep(u)).audienceIds=r);var d=t.decideLayer(n,u,e),h=!(!e.length&&!r.length),v=t.getActionsForDecision(n,d,h),g=function(n,t){return i.filter(n,(function(n){return i.isUndefined(n.pageId)||i.includes(t,n.pageId)}))}(v.actions,o);if(v.maybeExecute&&function(n,t,e,r){var o=S.description(t);k.log("Preparing actions",n,"for Campaign",o,"on Page(s)",r),i.forEach(n,a.prepareAction)}(g,n,0,o),i.forEach(o,(function(){s.trackDecisionEvent(d,u)})),f.emitLayerDecided({layer:n,decisionTicket:u,decision:d}),d.error)throw d.error;if(J.getSampleRum()){I.dispatch(c.RECORD_LAYER_POLICY_USAGE,{policy:n.policy,layerId:n.id});var m=function(n){var t={};return i.each(n,(function(n){i.each(n.changeSet,(function(n){t[n.type]||(t[n.type]=!0)}))})),t}(v.actions);I.dispatch(c.RECORD_CHANGE_TYPE_USAGE,{changeTypes:i.keys(m),layerId:n.id}),i.isEmpty(n.integrationSettings)||I.dispatch(c.RECORD_INTEGRATION_USAGE,{integrations:S.getIntegrationTypes(n),layerId:n.id})}if(!p.isInCohort(d))return void k.log("Not activating Campaign: "+S.description(n)+"; not in the cohort because:",d.reason);v.maybeExecute&&function(n,t,e,r){var o=S.description(t);k.log("Executing actions",n,"for Campaign",o,"on Page(s)",r),C.all(i.map(n,(function(n){return a.executePreparedAction(n).then(i.partial(f.emitActionAppliedEvent,n))}))).then((function(){k.log("All page actions for",e,"applied:",n),f.emitActionsForDecisionAppliedEvent(e,n)}))["catch"]((function(n){k.warn("Error evaluating page actions for decision",e,"because:",n)}))}(g,n,d,o)}(o,n,e,l,u)})),u(o)}))}catch(h){k.error("Error getting decision for Campaign: "+S.description(o),h),d(h)}x.timeEnd("decideAndExecuteLayer")}))},t.decideLayer=function(n,t,e){var i;x.time("sendDecision");var r=S.description(n);i=e.length?p.getDummyLayerDecision(n,e):p.decideLayer(n,t),k.log("Recording decision for Campaign",r,t,"->",i),S.recordLayerDecision(n.id,t,i),i.variationId&&i.experimentId&&U.updateVariationIdMap(n.id,i.experimentId,i.variationId),n.groupId&&U.updatePreferredLayerMap(n.groupId,n.id);return i},t.getActionsForDecision=function(n,t,e){var i=S.description(n),r="NOT applying changes for Campaign",o={actions:[],maybeExecute:!1};if(o.actions=[].concat(q.getLayerActions(t.layerId)||[],q.getExperimentActions(t.experimentId)||[],q.getExperimentVariationActions(t.experimentId,t.variationId)||[]),!e&&H.isGlobalHoldback())return k.log(r,i,"(visitor is in global holdback)"),o;if(t.isLayerHoldback)return k.log(r,i,"(visitor is in layer holdback)"),o;if(!t.experimentId||!t.variationId)return k.log(r,i,"(visitor is not eligible for any Experiments)"),o;return o.maybeExecute=!0,k.log("Got Actions for Campaign:",i,o.actions),o}},9701:function(n,t,e){var i=e(90).Promise,r=e(9455),o=e(9185).get("stores/plugins"),u=e(5369),a=e(307);t.create=function(n,t,e){var c={identifier:n.id,action:t,startTime:e||r.now()};try{var s=o.getPlugin(u.PluginTypes.changeAppliers,n.type);if(!s)throw new Error("Unrecognized change type "+n.type);return new s(n,c)}catch(f){return a.error("Change applier was never properly constructed:",f),{apply:function(){return i.reject(f)}}}}},1913:function(n){n.exports={SELECTOR_POLLING_MAX_TIME:2e3,CHANGE_DATA_KEY:"optimizelyChangeData",CHANGE_ID_ATTRIBUTE_PREFIX:"data-optly-"}},8111:function(n,t,e){var i=e(7023),r=e(1913).CHANGE_DATA_KEY;function o(n,t){return[n,t].join("_")}t.getData=function(n,t,e){var i=o(t,e);return n[r]&&n[r][i]?n[r][i]:null},t.hasData=function(n){return Boolean(n&&n[r]&&!i.isEmpty(n[r]))},t.removeData=function(n,t,e){n[r]&&delete n[r][o(t,e)]},t.setData=function(n,t,e,i){if("object"!=typeof i)throw new Error("setData expects an object");n[r]||(n[r]={}),n[r][o(t,e)]=i}},6901:function(n,t,e){var i=e(5465);n.exports={changeType:{CUSTOM_CODE:"custom_code",ATTRIBUTE:"attribute",APPEND:"append",REARRANGE:"rearrange",REDIRECT:"redirect",WIDGET:"widget"},DOMInsertionType:{AFTER:"after",APPEND:"append",BEFORE:"before",PREPEND:"prepend"},insertAdjacentHTMLType:{AFTER_BEGIN:"afterbegin",AFTER_END:"afterend",BEFORE_BEGIN:"beforebegin",BEFORE_END:"beforeend"},selectorChangeType:{CLASS:"class",HTML:"html",HREF:"href",SRC:"src",STYLE:"style",TEXT:"text",HIDE:"hide",REMOVE:"remove"},changeApplierState:i({APPLIED:null,APPLYING:null,UNAPPLIED:null,UNDOING:null}),changeState:i({BLOCKED:null,UNAPPLIED:null,APPLIED:null,APPLYING:null,UNDOING:null,TIMED_OUT:null,IGNORED:null,ERROR:null})}},1079:function(n,t,e){var i=e(7023),r=e(3005),o=e(6306),u=e(46),a=e(1758).U,c=e(9455),s=e(9185),f=e(2672),l=e(307),d=e(2454).Promise,h=e(2975),v=s.get("stores/global"),p=s.get("stores/action_data"),g=s.get("stores/change_data"),m=s.get("stores/session"),y=e(9701);e(8624).initialize();var _=a("ActionError");function b(n,t,e){if(p.getActionState(t.id)){var o=p.getChangeApplier(n.id,t.id);if(i.isUndefined(o)){var u={changeId:n.id,actionId:t.id,changeApplier:y.create(n,t,e)};f.dispatch(r.SET_CHANGE_APPLIER,u)}else l.warn("Action / Attempted to prepare a change which is already being applied: ",n)}else l.warn("Action / Attempted to prepare change for inactive action: ",t)}function w(n,t,r,a){if(!i.includes(a,t)){if(!n[String(t)]){var s=g.getChange(t);if(!s){var f="Change with id "+t+" is absent";return a.length&&(f+=" but listed as a dependency for "+a[a.length-1]),void l.warn(f)}n[String(t)]=new d((function(f){var v=i.map(s.dependencies||[],(function(e){return w(n,e,r,a.concat([t]))}));if(s.src){var m="change_"+s.src,y=u.makeAsyncRequest(m,(function(){return h.addScriptAsync("https://cdn.optimizely.com/public/5935064/data"+s.src,(function(){u.resolveRequest(m)}))})).then((function(){var n=g.getChange(s.id);n||o.emitError(new _("Failed to load async change from src: "+s.src)),b(n,r,c.now())}));v.push(y)}d.all(v).then((function(){var n=c.now(),i=p.getChangeApplier(t,r.id);return i?(l.debug("Action / Applying change:",s),i.apply().then((function(t){t?l.log(t):l.debug("Action / Applied change for the first time in "+(c.now()-n)+"ms:",s),e(9326).timeEnd("flash"),f()}))):(l.debug("Action / Not applying change ",t," - No changeApplier found."),void f())}))["catch"]((function(n){l.error("Action / Failed to apply change:",s,n),f()}))}))}return n[String(t)]}l.error("Change with id "+t+" has circular dependencies: "+a.concat(t))}t.prepareAction=function(n){l.debug("Action / Preparing:",n),f.dispatch(r.ACTION_EXECUTED,{actionId:n.id,sessionId:m.getSessionId(),layerId:n.layerId,pageId:n.pageId,timestamp:c.now(),activationId:v.getActivationId()});var t=c.now();i.forEach(n.changeSet,(function(e){var o=i.isObject(e)?e.id:e,u=g.getChange(o);u||(f.dispatch(r.ADD_CHANGE,e),u=g.getChange(e.id)),u.src||b(u,n,t)}))},t.executePreparedAction=function(n){l.debug("Action / Executing:",n);var t={},e=i.map(n.changeSet,(function(e){var r=i.isObject(e)?e.id:e;return w(t,r,n,[])}));return d.all(e).then((function(){l.debug("changes for action id="+n.id+" applied")}))}},8624:function(n,t,e){var i=e(1913),r=e(9185).get("stores/directive");function o(){("interactive"===document.readyState||"complete"===document.readyState)&&(t.domReadyTime=Date.now())}t.domReadyTime=null,t.initialize=function(){o(),document.addEventListener("readystatechange",o,!0)},t.isTimedOut=function(n){var e=Date.now();if(!t.domReadyTime||!n)return!1;var o=Math.max(n,t.domReadyTime);return r.isEditor()&&(o=t.domReadyTime),!(e-o<i.SELECTOR_POLLING_MAX_TIME)}},3941:function(n,t,e){var i=e(7023),r=e(3005),o=e(6306),u=e(1375),a=e(9455),c=e(6706),s=e(9185),f=e(9230),l=e(5369),d=e(5708),h=e(3269),v=e(9054),p=e(6836),g=e(2672),m=e(862),y=e(307),_=e(9326),b=e(2454).Promise,w=e(3828),E=e(5518),I=e(733),A=e(986),S=e(1999),T=s.get("stores/client_metadata"),k=s.get("stores/global"),R=s.get("stores/session"),x=s.get("stores/view"),D=s.get("stores/plugins"),N=s.get("stores/layer"),C=s.get("stores/layer_data"),O=s.get("stores/observed_redirect"),P=s.get("stores/pending_redirect"),M=s.get("stores/visitor"),L=s.get("stores/directive"),F=s.get("stores/event_data"),U=s.get("stores/visitor_id");function V(n,t){return i.extend({},n,{isLayerHoldback:t,isGlobalHoldback:!1,clientName:i.isNull(n.clientName)?c.NAME:n.clientName,integrationStringVersion:i.isNull(n.integrationStringVersion)?1:n.integrationStringVersion,anonymizeIP:i.isNull(k.getAnonymizeIP())?void 0:k.getAnonymizeIP(),activationId:k.getActivationId(),decisionTicketAudienceIds:[],sessionId:R.getSessionId(),activeViewStates:[],userFeatures:q(M.getVisitorProfile()),layerStates:N.getLayerStatesForAnalytics()})}function z(n){var t=w.getReferrer()||f.getReferrer();return{eventId:S.generate(),timestamp:a.now(),revision:k.getRevision(),clientName:T.getClientName(),clientVersion:T.getClientVersion(),projectId:k.getProjectId(),accountId:k.getAccountId(),activationId:k.getActivationId(),sessionId:R.getSessionId(),isGlobalHoldback:k.isGlobalHoldback(),namespace:k.getNamespace(),referrer:t,visitorId:U.getRandomId(),activeViewStates:n.activeViewStates,layerStates:n.layerStates,userFeatures:q(n.visitorProfile)}}function j(n){var t,e;return n.pageId?(t=n.pageId,(e=x.getViewState(t))&&e.isActive?e.metadata:{}):{}}function q(n){var t=D.getAllPlugins(l.PluginTypes.visitorProfileProviders),e=i.filter(t,{shouldTrack:!0}),r={id:null,type:null,name:"",value:null,shouldIndex:!0};return i.reduce(e,(function(t,e){try{var o=e.provides,u=n[o],a=[];if(!i.isUndefined(u)){i.isObject(u)?a=i.map(u,(function(n,t){var e=i.isObject(n)?n:{value:n};return i.extend({},{type:o,name:t},e)})):a.push({type:o,value:u});var c=i(a).map((function(n){return i.pick(i.extend({},r,n),i.keys(r))})).filter((function(n){return!!n.value})).value();t=t.concat(c)}}catch(s){y.warn("Error evaluating userFeature against visitorProfile:",s)}return t}),[])}function B(n,t,e){var r=function(n,t){var e=[];return i.each(D.getAllPlugins(l.PluginTypes.analyticsTrackers),(function(i,r){if(i[n]&&(!t||!i[t]))try{e.push({name:r,hookFn:s.evaluate(i[n])})}catch(o){y.error(o)}})),e}(n,e);y.debug("Found "+r.length+" analytics integrations defining a "+n+" hook"),y.debug("Calling each with data: ",t),i.each(r,(function(n){try{y.debug("Calling plugin: "+n.name),n.hookFn(t),y.debug("Called plugin: "+n.name)}catch(e){y.error(e)}}))}function G(n,t,e){var r=function(n,t){0;var e=[];return i.each(D.getAllPlugins(l.PluginTypes.analyticsTrackers),(function(r,o){i.includes(t,r[n])&&e.push({name:o,hookFn:r.trackLayerDecision})})),e}(n,t);y.debug("Found "+r.length+" analytics integrations  defining a trackLayerDecision "+n+" timing of "+t.join("|")),y.debug("Calling each with data: ",e),i.each(r,(function(n){try{y.debug("Calling plugin: "+n.name),n.hookFn(e),y.debug("Called plugin: "+n.name)}catch(t){y.error(t)}}))}t.trackClientActivation=function(){if(L.shouldSendTrackingData()){var n,t=(n=z({activeViewStates:[],visitorProfile:M.getVisitorProfile(),layerStates:N.getLayerStatesForAnalytics()}),i.extend(n,{eventTags:{}}));return _.timeEnd("sendActivate"),B("onClientActivation",t),t}},t.trackCustomEvent=function(n,t,e){t=t||{},e||(e=F.getByApiName(n));var r=function(n,t,e){var r=z({activeViewStates:x.getActiveViewStates(),visitorProfile:M.getVisitorProfile(),layerStates:N.getLayerStatesForAnalytics()}),o=e&&e.pageId?j(e):x.getActiveViewTags(),u=i.extend({},o,t),a=e&&e.category?e.category:d.OTHER;return i.extend(r,{eventEntityId:e&&e.id,eventApiName:n,eventCategory:a,eventTags:u})}(n,t,e),a={name:n,type:p.CUSTOM,category:r.eventCategory,tags:i.omit(r.eventTags,"revenue")};if(i.isUndefined(t.revenue)||(a.revenue=t.revenue),o.emitAnalyticsEvent({name:e?e.name||e.apiName:n,apiName:e?e.apiName:void 0,type:p.CUSTOM,tags:i.omit(r.eventTags,"revenue"),category:r.eventCategory,metrics:a.revenue?{revenue:a.revenue}:{}},!L.shouldSendTrackingData()),L.shouldSendTrackingData())return u.addEvent(a),B("onCustomEvent",r),r},t.trackDecisionEvent=function(n,t,e){_.time("trackDecisionEvent"),e||(e=C.get(n.layerId));var o=S.generate();g.dispatch(r.RECORD_LAYER_DECISION_EVENT_ID,{layerId:n.layerId,pageId:t.pageId,decisionId:o});var u=function(n,t,e,r){var o=null,u=null,c=null;if(t.experimentId){var s=i.find(r.experiments,{id:t.experimentId});if(s&&(o=s.name||null,c=s.integrationSettings,t.variationId)){var l=i.find(s.variations,{id:t.variationId});l&&(u=l.name||null)}}var d=w.getReferrer()||f.getReferrer();return{sessionId:R.getSessionId(),decisionTicketAudienceIds:e.audienceIds,visitorId:U.getRandomId(),decisionId:n,activationId:k.getActivationId(),namespace:k.getNamespace(),timestamp:a.now(),pageId:e.pageId||null,variationId:t.variationId,variationName:u,experimentId:t.experimentId,experimentName:o,layerId:t.layerId,layerName:r.name,layerPolicy:r.policy,accountId:k.getAccountId(),projectId:k.getProjectId(),revision:String(k.getRevision()),clientName:T.getClientName(),clientVersion:T.getClientVersion(),referrer:d,integrationStringVersion:r.integrationStringVersion||1,integrationSettings:i.extend({},r.integrationSettings,c)}}(o,n,t,e),c=P.isExpectingRedirect(),s=P.getLayerId(),l=m.description(e);if(c&&s===e.id&&(E.persist(u,"COOKIE"),y.log("Relaying decision for redirect Campaign",l)),L.shouldSendTrackingData()){var d=V(u,n.isLayerHoldback);if(c&&s===e.id){var h=A.TrackLayerDecisionTimingFlags.preRedirectPolicy;d.timing=h,G(h,[A.PreRedirectPolicies.PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT],d),y.log("Called trackLayerDecision for redirect Campaign",l,d)}else{h=A.TrackLayerDecisionTimingFlags.nonRedirectPolicy;d.timing=h,G(h,[A.NonRedirectPolicies.TRACK_IMMEDIATELY],d),y.log("Called trackLayerDecision for non-redirect Campaign",l,d)}_.timeEnd("trackDecisionEvent")}else y.log("Analytics / Not tracking decision for Campaign",m.description(e))},t.trackPostRedirectDecisionEvent=function(){if(!L.shouldSendTrackingData()||O.hasTracked())return b.resolve();var n=O.get();if(!n)return b.resolve();var t=V(n,!1),e=A.TrackLayerDecisionTimingFlags.postRedirectPolicy;t.timing=e,G(e,[A.PostRedirectPolicies.TRACK_IMMEDIATELY],t);var i=new b((function(n){var t=h.on({filter:{type:v.TYPES.LIFECYCLE,name:"originsSynced"},handler:function(){n(),h.off(t)}})})),o=I.makeTimeoutPromise(1e3);return b.race([i,o]).then((function(){y.log("Calling trackers after successful sync")}),(function(n){y.warn("Calling trackers after failed sync:",n)})).then((function(){(t=V(n,!1)).timing=A.TrackLayerDecisionTimingFlags.postRedirectPolicy,G(A.TrackLayerDecisionTimingFlags.postRedirectPolicy,[A.PostRedirectPolicies.TRACK_AFTER_SYNC],t),g.dispatch(r.REGISTER_TRACKED_REDIRECT_DATA)}))["catch"]((function(n){y.error("Error when calling trackers after sync:",n)}))},t.trackClickEvent=function(n){var t=function(n){var t=z({activeViewStates:x.getActiveViewStates(),visitorProfile:M.getVisitorProfile(),layerStates:N.getLayerStatesForAnalytics()}),e=n.config&&n.config.selector?n.config.selector:n.eventFilter.selector,r=n.apiName,o=n.category||d.OTHER,u=n.id,a=j(n);return i.extend(t,{eventApiName:r,eventCategory:o,eventEntityId:u,eventTags:a,pageId:n.pageId,selector:e})}(n),e={name:n.apiName,type:n.eventType,category:t.eventCategory,tags:t.eventTags};if(o.emitAnalyticsEvent({name:n.name||n.apiName,apiName:n?n.apiName:void 0,type:n.eventType,category:t.eventCategory,tags:t.eventTags,metrics:{}},!L.shouldSendTrackingData()),L.shouldSendTrackingData())return u.addEvent(e),B("onClickEvent",t),t},t.trackViewActivation=function(n,t){if(t||(t=x.getViewState(n.id)),t.isActive){var e=function(n,t){var e=z({activeViewStates:x.getActiveViewStates(),visitorProfile:M.getVisitorProfile(),layerStates:N.getLayerStatesForAnalytics()});return i.extend(e,{pageId:n.id,pageApiName:n.apiName,viewCategory:n.category,eventTags:t.metadata})}(n,t);if(o.emitAnalyticsEvent({name:n.name||e.pageApiName,apiName:e.pageApiName,type:p.PAGEVIEW,category:e.viewCategory,tags:e.eventTags,metrics:{}},!L.shouldSendTrackingData()),L.shouldSendTrackingData())return u.addEvent({name:e.pageApiName,type:p.PAGEVIEW,category:e.viewCategory,tags:e.eventTags}),g.dispatch(r.TRACK_VIEW_ACTIVATED_EVENT,{pageId:n.id,eventData:e}),_.timeEnd("sendViewActivate"),B("onPageActivated",e),e}else y.debug("Inactive view passed to `trackViewActivation`")}},5518:function(n,t,e){var i=e(7023),r=e(3005),o=e(8505),u=e(6306),a=e(9185),c=e(5369),s=e(2672),f=e(307),l=e(986),d=a.get("stores/plugins"),h=".",v=[{name:"sessionId",relayName:"s"},{name:"decisionTicketAudienceIds",relayName:"as",valueToValueString:function(n){return i.map(n,encodeURIComponent).join(",")},encodeValueString:i.identity,decodeValueString:i.identity,valueFromValueString:function(n){return i.map(n.split(","),o.safeDecodeURIComponent)}},{name:"decisionId",relayName:"d"},{name:"activationId",relayName:"aId"},{name:"pageId",relayName:"vId",isNullable:!0},{name:"variationId",relayName:"v",isNullable:!0},{name:"referrer",relayName:"r"},{name:"timestamp",relayName:"t",valueFromValueString:Number},{name:"visitorId",relayName:"i"},{name:"projectId",relayName:"p"},{name:"revision",relayName:"n"},{name:"clientName",relayName:"cN",isNullable:!0},{name:"clientVersion",relayName:"cV"},{name:"namespace",relayName:"ns"},{name:"accountId",relayName:"a"},{name:"layerId",relayName:"l"},{name:"layerName",relayName:"lN",isNullable:!0},{name:"layerPolicy",relayName:"lP"},{name:"experimentId",relayName:"x",isNullable:!0},{name:"experimentName",relayName:"xN",isNullable:!0},{name:"variationName",relayName:"vN",isNullable:!0},{name:"integrationStringVersion",relayName:"isv",valueFromValueString:Number,isNullable:!0},{name:"integrationSettings",relayName:"iS",isMulti:!0,valueToValueString:function(n,t){var e=null;if(n){var r=d.getPlugin(c.PluginTypes.analyticsTrackers,t);if(r&&i.isFunction(r.serializeSettings))try{e=r.serializeSettings(n)}catch(o){f.warn("Analytics / Failed to persist integrationSettings for plugin:",t,o)}}return e},valueFromValueString:function(n,t){var e=null,r=d.getPlugin(c.PluginTypes.analyticsTrackers,t);if(r&&i.isFunction(r.deserializeSettings))try{e=r.deserializeSettings(n)}catch(o){f.warn("Analytics / Failed to persist integrationSettings for plugin:",t,o)}return e},isNullable:!0}],p={},g={};i.forEach(v,(function(n){p[n.name]=n,g[n.relayName]=n})),t.persist=function(n,t){t===l.RedirectRelayMedia.COOKIE?function(n){try{var t=function(n){var t=[],e=i.reduce(n,(function(n,e,r){var o=p[r];return o?(o.isMulti?i.forEach(e,(function(t,e){t=o.valueToValueString?o.valueToValueString(t,e):String(t),i.isNull(t)||(t=(o.encodeValueString||encodeURIComponent)(t),n.push(encodeURIComponent(o.relayName+h+e)+"="+t))})):i.isNull(e)||(e=(o.valueToValueString||String)(e),e=(o.encodeValueString||encodeURIComponent)(e),n.push(o.relayName+"="+e)),n):(t.push(r),n)}),[]);if(t.length)throw new Error("Relay / Don't know how to relay some fields: "+t);return e.sort(),e.join("&")}(n)}catch(e){return f.error("Relay / Error computing redirect relay cookie: ",e),void u.emitError(e)}f.debug("Relay / Setting redirect relay cookie:",t);try{o.set(c.COOKIES.REDIRECT,t,{maxAge:5,encodeValue:!1})}catch(r){f.error("Relay / Failed to set redirect relay cookie",r),u.emitError(r)}}(n):f.error("Relay / Unsupported redirect relay medium: "+t)},t.load=function(n){if(n||(n=function(){var n=o.get(c.COOKIES.REDIRECT,!1);if(n)return f.log("Relay / Found redirect cookie:",n),n}()),n){var t=function(n){var t={},e=n.split("&");return i.forEach(e,(function(n){var e=n.split("=");if(2===e.length){var r=o.safeDecodeURIComponent(e[0]),a=g[r];if(a||(a=i.find(v,(function(n){return n.isMulti&&0===r.indexOf(n.relayName+h)})))){var c=e[1];try{if(a.isMulti){t[a.name]=t[a.name]||{};var s=r.substring(a.relayName.length+h.length);c=(a.decodeValueString||o.safeDecodeURIComponent)(c),c=(a.valueFromValueString||i.identity)(c,s),t[a.name][s]=c}else c=(a.decodeValueString||o.safeDecodeURIComponent)(c),c=(a.valueFromValueString||i.identity)(c),t[a.name]=c}catch(l){return f.warn("Relay / Skipping segment due to decode or parse error:",n,l),void u.emitError(l)}}else f.warn("Relay / Skipping segment with unknown field identifier:",n,r)}else f.warn("Relay / Skipping invalid segment:",n)})),t}(n);if(t){var e=[];if(i.forEach(v,(function(n){(i.isNull(t[n.name])||i.isUndefined(t[n.name]))&&(n.isNullable?t[n.name]=null:(delete t[n.name],e.push(n.name)))})),!e.length)return s.dispatch(r.LOAD_REDIRECT_DATA,t),s.dispatch(r.ADD_CLEANUP_FN,{lifecycle:c.Lifecycle.postVisitorProfileLoad,cleanupFn:function(){var n,e;e=(n=t).pageId||void 0,s.dispatch(r.RECORD_LAYER_DECISION,{layerId:n.layerId,decision:{layerId:n.layerId,experimentId:n.experimentId,variationId:n.variationId,isLayerHoldback:!1},decisionTicket:{audienceIds:n.decisionTicketAudienceIds,bucketingId:n.visitorId,globalHoldback:0,preferredVariationMap:void 0,pageId:e,activationId:n.activationId},sessionId:n.sessionId,activationId:n.activationId,timestamp:n.timestamp,revision:n.revision,namespace:n.namespace,pageId:e}),s.dispatch(r.RECORD_LAYER_DECISION_EVENT_ID,{layerId:n.layerId,pageId:e,decisionId:n.decisionId}),s.dispatch(r.ACTION_EXECUTED,{sessionId:n.sessionId,layerId:n.layerId,pageId:n.pageId,timestamp:n.timestamp,activationId:n.activationId})}}),t;f.error("Relay / Observed redirect data with missing fields:",e)}}}},6306:function(n,t,e){var i=e(3269);t.emitError=function(n,t,e){i.emit({type:"error",name:n.name||"Error",data:{error:n,metadata:t}},e||!1,!0)},t.emitInternalError=function(n,e){t.emitError(n,e,!0)},t.emitAnalyticsEvent=function(n,t){var e={type:"analytics",name:"trackEvent",data:n};i.emit(e,t)}},1066:function(n,t,e){var i=e(7023),r=e(3298),o=e(3052),u=e(307),a=e(2050);function c(n,t){var e="function"==typeof n?n(t):n;return"string"==typeof e&&(e=[e]),i.isArray(e)?e:(u.warn("Couldn't determine fieldsNeeded for matcher; assuming []"),[])}function s(n){return n.name?n.name+" ("+n.id+")":n.id}t.isInAudience=function(n,t,e){var a,f=function(n,t){return function(e){var r=e.type,a=t[r];if(!a)throw new Error("Audience / No matcher found for type="+r);if(a.fieldsNeeded)for(var s=c(a.fieldsNeeded,e),f=0;f<s.length;f++){var l=s[f],d=o.getFieldValue(n,l);if(i.isUndefined(d))return void u.debug("Audience / Required field",l,"for type",r,"has no value")}u.debug("Matching condition:",e,"to values:",n);var h=a.match(n,e);if(!i.isUndefined(h))return!!h}}(n,e);u.groupCollapsed("Checking audience",t.name,t.id,t),u.debug("Visitor Profile:",n);try{var l=r.evaluate(t.conditions,f)}catch(d){a=d,l=!1}return u.groupEnd(),a&&u.error("Audience / Error evaluating audience",s(t),":",a),u.log("Is "+(l?"in":"NOT in")+" audience:",s(t)),l},t.requiredAudienceFieldsForConditions=function f(n,t){var e={};return i.each(n,(function(n){if(i.isArray(n))i.extend(e,f(n,t));else if(i.isObject(n)){var r=t[n.type];if(r){var o=c(r.fieldsNeeded,n);i.each(o,(function(n){e[a.serializeFieldKey(n)]=n}))}}})),e}},5293:function(n,t){t.FIELDS={NAME:"n",TIME:"t",TYPE:"y",CATEGORY:"c",REVENUE:"r",SESSION_ID:"s",OPTIONS:"o",SESSION_INDEX:"si"},t.FIELDS_V0_2={name:t.FIELDS.NAME,time:t.FIELDS.TIME,type:t.FIELDS.TYPE,category:t.FIELDS.CATEGORY,tags:t.FIELDS.OPTIONS,session_index:t.FIELDS.SESSION_INDEX}},490:function(n,t,e){var i=e(7023),r=e(5293),o=e(3052).getFieldValue,u=e(2596);function a(n,t,e,o,u){this[r.FIELDS.NAME]=n,this[r.FIELDS.TYPE]=t,i.isString(e)&&e.trim().length>0&&(this[r.FIELDS.CATEGORY]=e),o&&i.keys(o).length>0&&(this[r.FIELDS.OPTIONS]=o),i.isUndefined(u)||(this[r.FIELDS.REVENUE]=u)}function c(n,t,e,o){this.eventBase=n,this[r.FIELDS.TIME]=t,i.isUndefined(e)||(this[r.FIELDS.SESSION_ID]=e),i.isUndefined(o)||(this[r.FIELDS.SESSION_INDEX]=o)}t.x=a,a.prototype.digest=function(){var n=function(n,t){return encodeURIComponent(n)+"="+encodeURIComponent(t)},t=[];if(t.push(n(r.FIELDS.NAME,this[r.FIELDS.NAME])),t.push(n(r.FIELDS.TYPE,this[r.FIELDS.TYPE])),this[r.FIELDS.CATEGORY]&&t.push(n(r.FIELDS.CATEGORY,this[r.FIELDS.CATEGORY])),this[r.FIELDS.REVENUE]&&t.push(n(r.FIELDS.REVENUE,this[r.FIELDS.REVENUE])),!this[r.FIELDS.OPTIONS])return t.join("&");var e=this[r.FIELDS.OPTIONS]||{},o=i.filter(i.keys(e),(function(n){return e.hasOwnProperty(n)}));o=o.sort();for(var u=0;u<o.length;u++)t.push(n(o[u],e[o[u]]));return t.join("&")},a.prototype.hash=function(){return this.hash_||(this.hash_=u.hashToHex(u.toByteString(this.digest()),u.Seed.BEHAVIOR_EVENT)),this.hash_},a.prototype.setHash=function(n){this.hash_=n},a.prototype.reHash=function(){this.hash_=null,this.hash()},a.prototype.equals=function(n){if(this.hash()!==n.hash()||this[r.FIELDS.NAME]!==n[r.FIELDS.NAME]||this[r.FIELDS.TYPE]!==n[r.FIELDS.TYPE]||this[r.FIELDS.CATEGORY]!==n[r.FIELDS.CATEGORY]||this[r.FIELDS.REVENUE]!==n[r.FIELDS.REVENUE])return!1;var t=this[r.FIELDS.OPTIONS]||{},e=n[r.FIELDS.OPTIONS]||{},o=i.filter(i.keys(t),(function(n){return t.hasOwnProperty(n)})),u=i.filter(i.keys(e),(function(n){return e.hasOwnProperty(n)}));if(o.length!==u.length)return!1;for(var a=0;a<o.length;a++){var c=o[a];if(!e.hasOwnProperty(c)||t[c]!==e[c])return!1}return!0},a.prototype.getValueOrDefault=function(n,t){var e=o(this,n);return i.isUndefined(e)?t:e},a.prototype.setFieldValue=function(n,t){n!==r.FIELDS.NAME&&n!==r.FIELDS.TYPE&&n!==r.FIELDS.CATEGORY&&n!==r.FIELDS.REVENUE&&n!==r.FIELDS.OPTIONS||(this[n]=t,this.reHash())},t.j=c,c.prototype.getValueOrDefault=function(n,t){if(0===n.length)return this;var e={};e[r.FIELDS.TIME]=this[r.FIELDS.TIME],e[r.FIELDS.SESSION_ID]=this[r.FIELDS.SESSION_ID],e[r.FIELDS.SESSION_INDEX]=this[r.FIELDS.SESSION_INDEX];var u=o(e,n);return i.isUndefined(u)?this.eventBase.getValueOrDefault(n,t):u},c.prototype.setFieldValue=function(n,t){n===r.FIELDS.TIME||n===r.FIELDS.SESSION_ID||n===r.FIELDS.SESSION_INDEX?this[n]=t:this.eventBase.setFieldValue(n,t)};var s={n:"name",y:"type",c:"category",r:"revenue",s:"session_id",o:"tags",si:"session_index"};c.prototype.readableEvent=function(){var n,t,e=function(n){return i.isString(n)?'"'+n+'"':n},o=this,u=[];i.each([r.FIELDS.NAME,r.FIELDS.TYPE,r.FIELDS.CATEGORY,r.FIELDS.REVENUE,r.FIELDS.SESSION_ID],(function(r){n=s[r],t=o.getValueOrDefault([r]),i.isUndefined(t)||u.push(n+": "+e(t))}));var a=[];if(n=s[r.FIELDS.OPTIONS],t=o.getValueOrDefault([r.FIELDS.OPTIONS]),i.isUndefined(t)||(i.each(t,(function(n,t){a.push(t+": "+String(e(n)))})),u.push(n+": {\n\t\t"+a.join(",\n\t\t")+"\n\t}")),t=o.getValueOrDefault([r.FIELDS.TIME]),i.isNumber(t)&&(t=e(new Date(t).toString())),!i.isUndefined(t)){u.push("timestamp: "+t)}return"{\n\t"+u.join(",\n\t")+"\n}"},c.prototype.toObject=function(n){var t,e,o={},u=this;i.each([r.FIELDS.NAME,r.FIELDS.TYPE,r.FIELDS.CATEGORY,r.FIELDS.REVENUE,r.FIELDS.OPTIONS,r.FIELDS.SESSION_INDEX],(function(n){t=s[n],e=u.getValueOrDefault([n],n===r.FIELDS.OPTIONS?{}:void 0),i.isUndefined(e)||(o[t]=e)}));var a=s[r.FIELDS.OPTIONS],c=s[r.FIELDS.REVENUE];if(n&&n.revenueAsTag&&o[c]&&(o[a]=o[a]||{},o[a][c]=o[c],delete o[c]),e=u.getValueOrDefault([r.FIELDS.TIME]),i.isNumber(e))if(n&&n.timeAsTimestamp){o.timestamp=new Date(e)}else{o.time=e}return o}},1375:function(n,t,e){var i=e(361);t.initializeStore=i.initialize,t.addEvent=i.addEvent,t.getEvents=i.getEvents,t.getEventCount=i.getEventCount},5554:function(n,t,e){var i=e(490).j,r=e(9455),o=e(5293),u=e(490).x;t.CURRENT_SESSION_INDEX=0;var a=18e5;function c(n,e){var i;i=t.isInSameSession(n,e)?n.getValueOrDefault([o.FIELDS.SESSION_ID]):e.getValueOrDefault([o.FIELDS.TIME]),e.setFieldValue(o.FIELDS.SESSION_ID,i)}function s(n,e,i){var r,u=n.getValueOrDefault([o.FIELDS.SESSION_INDEX]);r=t.isInSameSession(e,n)?u:i?u+1:u-1,e.setFieldValue(o.FIELDS.SESSION_INDEX,r)}t.isInSameSession=function(n,t){var e=n.getValueOrDefault([o.FIELDS.TIME],0),i=t.getValueOrDefault([o.FIELDS.TIME],0);return Math.abs(e-i)<a},t.updateSessionId=function(n,t){if(n){var e=n.getValueOrDefault([o.FIELDS.TIME]),r=n.getValueOrDefault([o.FIELDS.SESSION_ID]),a=t.getValueOrDefault([o.FIELDS.TIME]);e="number"!=typeof e?a-36e5:e,r="number"!=typeof r?e:r,c(n=new i(new u("",""),e,r),t)}else t.setFieldValue(o.FIELDS.SESSION_ID,t.getValueOrDefault([o.FIELDS.TIME]))},t.updateSessionIndex=function(n,t){if(n){var e=n.getValueOrDefault([o.FIELDS.TIME]),r=n.getValueOrDefault([o.FIELDS.SESSION_INDEX]),a=t.getValueOrDefault([o.FIELDS.TIME]),c=n.getValueOrDefault([o.FIELDS.SESSION_ID]);e="number"!=typeof e?a-36e5:e,r="number"!=typeof r?0:r,c="number"!=typeof c?e:c,s(n=new i(new u("",""),e,c,r),t,!1)}else t.setFieldValue(o.FIELDS.SESSION_INDEX,0)},t.sessionize=function(n){var e=n.length;if(0!==e){n[0].setFieldValue(o.FIELDS.SESSION_ID,n[0].getValueOrDefault([o.FIELDS.TIME]));for(var i=1;i<e;i++)c(n[i-1],n[i]);var u=t.CURRENT_SESSION_INDEX,f=n[e-1].getValueOrDefault([o.FIELDS.TIME]);r.now()-f>a&&(u+=1),n[e-1].setFieldValue(o.FIELDS.SESSION_INDEX,u);for(i=e-1;i>0;i--)s(n[i],n[i-1],!0)}},t.reindexIfNecessary=function(n,t,e){var i=function(n){for(var t=0;t<n.length;t++){var e=n[t].getValueOrDefault([o.FIELDS.SESSION_INDEX]);n[t].setFieldValue(o.FIELDS.SESSION_INDEX,e+1)}};-1===n.getValueOrDefault([o.FIELDS.SESSION_INDEX])&&(i(t),i(e))},t.sessionSortPredicate=function(n,t){return n[o.FIELDS.TIME]-t[o.FIELDS.TIME]},t.applyMigrations=function(n){return!1}},361:function(n,t,e){var i=e(7023),r=e(3005),o=e(9455),u=e(5708),a=e(2672),c=e(307),s=e(2050),f=t,l=e(490).j,d=e(5293),h=e(490).x,v=e(5554),p=e(9185),g=p.get("stores/visitor_events"),m=p.get("stores/visitor_events_manager"),y={EVENTBASE:"eb",HASH:"h",TIMEBASE:"tb",TIMESTAMPS:"ts",DELTA:"d",INDEX:"i"};function _(n){a.dispatch(r.SET_VISITOR_EVENTS,n)}function b(n){a.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"baseMap",value:n})}function w(n){a.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"eventQueue",value:n})}function E(n){a.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"lastEvent",value:n})}function I(){return g.getEvents()}function A(){return m.getBaseMap()}function S(){return m.getEventQueue()}function T(){return m.getLastEvent()}function k(){var n=I().concat(S()),t=!1;return n.length>1e3&&(n=n.slice(-1e3),t=!0),_(n),w([]),t}t.initialize=function(n,t){if(!m.getInitialized()){f.T(n,t);var e=I();e.length>0&&E(e[e.length-1]);var i=S();i.length>0&&E(i[i.length-1]),a.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"initialized",value:!0})}},t.addEvent=function(n){c.debug("Behavior store: adding event",n);var t=f.k(n);E(t),w(S().concat(t)),v.reindexIfNecessary(T(),I(),S()),f.R(S())},t.getEvents=function(){return S().length>0&&(k()&&v.sessionize(I()),f.D(I()),f.R(S())),I()},t.getEventCount=function(){return S().length+I().length},f.T=function(n,t){e(9326).time("populatePersistedEvents"),f.N(n,t)&&(f.D(I()),f.R(S())),v.sessionize(I()),e(9326).timeEnd("populatePersistedEvents")},f.N=function(n,t){if(0===n.length&&0===t.length)return _([]),w([]),!1;var e=!1,i=n[0]||t[0];return y.EVENTBASE in i?(_(f.C(n)),w(f.C(t))):(e=!0,_(f.O(n)),w(f.O(t))),S().length>0&&(k(),e=!0),_(f._updateBaseMapAndMaybeDedupe(I())),f._migrateEventBasesAndUpdateStore()&&(e=!0),e},f.O=function(n){for(var t=[],e=0;e<n.length;e++){var i=n[e],r=f.P(i);t[e]=new l(r,i[d.FIELDS.TIME])}return t},f._migrateEventBasesAndUpdateStore=function(){var n=!1,t=f.M();return v.applyMigrations(t)&&(n=!0,b({}),_(f._updateBaseMapAndMaybeDedupe(I())),w(f._updateBaseMapAndMaybeDedupe(S()))),n},f.L=function(){return o.now()},f.k=function(n){var t,e=n.name,i=n.type||"default",r=n.category||u.OTHER,o=n.tags||{};n.revenue&&(t=n.revenue);var a=new h(e,i,r,o,t);a=f.F(a);var c=f.L(),s=new l(a,c,-1);return v.updateSessionId(T(),s),v.updateSessionIndex(T(),s),s},f._updateBaseMapAndMaybeDedupe=function(n){for(var t=0;t<n.length;t++)n[t].eventBase=f.F(n[t].eventBase);return n},f.D=function(n){var t=f.V(n);s.persistBehaviorEvents(t)},f.R=function(n){var t=f.V(n);s.persistBehaviorEventQueue(t)},f.q=function(){var n;m.getCleared()||(_([]),w([]),f.D(I()),f.R(S()),b({}),E(null),n=!0,a.dispatch(r.UPDATE_BEHAVIOR_STORE,{key:"cleared",value:n}))},f.F=function(n){var t=n.hash(),e=A(),r=e[t];if(i.isUndefined(r))return e[t]=[n],b(e),n;for(var o=0;o<r.length;o++)if(n.equals(r[o]))return r[o];return r.push(n),b(e),n},f.M=function(){var n=[],t=A();for(var e in t)!t.hasOwnProperty(e)||(n=n.concat(t[e]));return n},f.V=function(n){for(var t=function(n){var t={};t[d.FIELDS.NAME]=n.getValueOrDefault([d.FIELDS.NAME]),t[d.FIELDS.TYPE]=n.getValueOrDefault([d.FIELDS.TYPE]);var e=n.getValueOrDefault([d.FIELDS.CATEGORY]);i.isUndefined(e)||(t[d.FIELDS.CATEGORY]=e);var r=n.getValueOrDefault([d.FIELDS.REVENUE]);i.isUndefined(r)||(t[d.FIELDS.REVENUE]=r);var o=n.getValueOrDefault([d.FIELDS.OPTIONS]);return i.isUndefined(o)||(t[d.FIELDS.OPTIONS]=o),t},e=y,r=[],o="_idx_",u=0;u<n.length;u++){var a,c,s=n[u],f=s.eventBase;if(f.hasOwnProperty(o)){a=r[f._idx_];var l=s[d.FIELDS.TIME]-(a[e.TIMEBASE]||0);(c={})[e.DELTA]=l,c[e.INDEX]=u,a[e.TIMESTAMPS].push(c)}else(a={})[e.EVENTBASE]=t(s),a[e.HASH]=f.hash(),a[e.TIMEBASE]=s[d.FIELDS.TIME],(c={})[e.DELTA]=0,c[e.INDEX]=u,a[e.TIMESTAMPS]=[c],r.push(a),f._idx_=r.length-1}for(u=0;u<n.length;u++)delete n[u].eventBase._idx_;return r},f.P=function(n,t){var e=new h(n[d.FIELDS.NAME],n[d.FIELDS.TYPE],n[d.FIELDS.CATEGORY],n[d.FIELDS.OPTIONS],n[d.FIELDS.REVENUE]);return i.isUndefined(t)||e.setHash(t),e},f.C=function(n){for(var t=y,e=[],i=0;i<n.length;i++)for(var r=n[i],o=f.P(r[t.EVENTBASE],r[t.HASH]),u=r[t.TIMEBASE],a=r[t.TIMESTAMPS],c=0;c<a.length;c++){var s=a[c],d=new l(o,u+s[t.DELTA]);e[s[t.INDEX]]=d}return e},t.deserialize=function(n){return f.C(n)},t.mergeAllEvents=function(n){var t=[].concat.apply([],n);return t.sort(v.sessionSortPredicate),v.sessionize(t),t}},3005:function(n,t,e){var i=e(5465);n.exports=i({LOG:null,SET_LOGLEVEL:null,INITIALIZE_STATE:null,SET_DOMCONTENTLOADED:null,ACTIVATE:null,UPDATE_BEHAVIOR_STORE:null,DATA_LOADED:null,SET_CLIENT_NAME:null,SET_CLIENT_VERSION:null,LOAD_PERSISTED_LAYER_STATES:null,RECORD_GLOBAL_DECISION:null,RECORD_LAYER_DECISION:null,ENSURE_ORIGINAL_PUSHSTATE:null,ENSURE_ORIGINAL_REPLACESTATE:null,SET_VISITOR_ATTRIBUTES:null,SET_VISITOR_ATTRIBUTE_PENDING:null,LOAD_EXISTING_VISITOR_PROFILE:null,SET_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENTS:null,SET_FOREIGN_VISITOR_EVENT_QUEUE:null,SET_VISITOR_ID:null,SET_VISITOR_ID_VIA_API:null,REFRESH_SESSION:null,LOAD_SESSION_STATE:null,UPDATE_VARIATION_ID_MAP:null,MERGE_VARIATION_ID_MAP:null,UPDATE_PREFERRED_LAYER_MAP:null,MERGE_PREFERRED_LAYER_MAP:null,RECORD_LAYER_DECISION_EVENT_ID:null,TRACK_VIEW_ACTIVATED_EVENT:null,REGISTER_ASYNC_DEFERRED:null,RESOLVE_DEFERRED:null,REJECT_DEFERRED:null,REGISTER_PLUGIN:null,ADD_CLEANUP_FN:null,CLEAR_CLEANUP_FN:null,ACTION_EXECUTED:null,REGISTER_ACTION:null,SET_VIEW_ACTIVE_STATE:null,UPDATE_PARSED_VIEW_METADATA:null,UPDATE_USER_SUPPLIED_METADATA:null,REGISTER_VIEWS:null,SET_GLOBAL_TAGS:null,SET_VIEW_BATCHING:null,RESET_VIEW_STATES:null,ATTACH_EVENT_STREAM_PUBLISHERS:null,DETACH_EVENT_STREAM_PUBLISHERS:null,LOAD_DIRECTIVE:null,SET_COOKIE_AGE:null,SET_COOKIE_DOMAIN:null,SET_COOKIE_AUTO_REFRESH:null,XDOMAIN_SET_DEFAULT_FRAME:null,XDOMAIN_ADD_FRAME:null,XDOMAIN_SET_MESSAGE:null,XDOMAIN_ADD_SUBSCRIBER:null,XDOMAIN_SET_CANONICAL_ORIGINS:null,XDOMAIN_SET_DISABLED:null,ADD_EMITTER_HANDLER:null,REMOVE_EMITTER_HANDLER:null,SET_INTEGRATION_SETTINGS:null,ADD_CHANGE:null,SET_CHANGE_APPLIER:null,REMOVE_ACTION_STATE:null,ANNOUNCE_PENDING_REDIRECT:null,LOAD_REDIRECT_DATA:null,REGISTER_TRACKED_REDIRECT_DATA:null,SET_PENDING_EVENT:null,REMOVE_PENDING_EVENT:null,LOAD_PENDING_EVENTS:null,SANDBOXED_FUNCTIONS_ADDED:null,SET_RUM_DATA:null,RECORD_API_USAGE:null,INITIALIZE_CHANGE_METRICS:null,RECORD_ACTIVATION_TYPE_USAGE:null,RECORD_AUDIENCE_USAGE:null,RECORD_CHANGE_MACROTASK_RATE:null,RECORD_CHANGE_OVERHEATED:null,RECORD_CHANGE_TYPE_USAGE:null,RECORD_DOM_OBSERVATION_OCCURENCE:null,RECORD_INTEGRATION_USAGE:null,RECORD_LAYER_FEATURE_USAGE:null,RECORD_LAYER_POLICY_USAGE:null,RECORD_RECOMMENDATIONS_USAGE:null,RECORD_VIEW_FEATURE_USAGE:null,RECORD_VIEWS_INITIALLY_ACTIVATED_COUNT:null,RECORD_VISITOR_ID_LOCATOR_USAGE:null,RECORD_VISITOR_ID_ERROR:null,RECORD_STICKY_BUCKETING_FEATURE:null,SET_PERFORMANCE_MARKS_DATA:null,FINALIZE_BATCH_SNAPSHOT:null,REGISTER_PREVIOUS_BATCH:null,REGISTER_TRACKER_VISITOR:null,REGISTER_TRACKER_EVENT:null,REGISTER_TRACKER_DECISION:null,RESET_TRACKER_EVENTS:null,RESET_TRACKER_PREVIOUS_BATCHES:null,RESET_TRACKER_STORE:null,SET_TRACKER_POLLING:null,SET_TRACKER_BATCHING:null,SET_TRACKER_SEND_EVENTS:null,SET_TRACKER_PERSISTABLE_STATE:null,SET_TRACKER_DIRTY:null,UPDATE_TRACKER_VISITOR_ATTRIBUTES:null,SET_UA_DATA:null})},5369:function(n,t,e){var i=e(7023),r=e(5465);t.COOKIES={OPT_OUT:"optimizelyOptOut",PREVIEW:"optimizelyPreview",REDIRECT:"optimizelyRedirectData",SESSION_STATE:"optimizelySessionState",TOKEN:"optimizelyToken",VISITOR_ID:"optimizelyEndUserId",VISITOR_UUID:"optimizelyPPID"},t.LayerActivationTypes={CONDITIONAL:"conditional",IMMEDIATE:"immediate",MANUAL:"manual",READY:"ready",TIMEOUT:"timeout"},t.LogLevel={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},t.Lifecycle=r({preActivate:null,postVisitorProfileLoad:null,postViewsActivated:null,postActivate:null}),t.ViewActivationTypes={immediate:"immediate",manual:"manual",callback:"callback",polling:"polling",URLChanged:"url_changed",DOMChanged:"dom_changed"},t.StorageKeys={PENDING_EVENTS:"pending_events",RELAYED_EVENTS:"relayed_events"},t.PluginTypes=r({visitorProfileProviders:null,viewProviders:null,audienceMatchers:null,viewMatchers:null,analyticsTrackers:null,viewTagLocators:null,userFeatureDefs:null,apiModules:null,changeAppliers:null,deciders:null,eventImplementations:null,viewTriggers:null}),t.ResourceTimingAttributes=r({connectStart:null,connectEnd:null,decodedBodySize:null,domainLookupStart:null,domainLookupEnd:null,duration:null,encodedBodySize:null,fetchStart:null,requestStart:null,responseStart:null,responseEnd:null,secureConnectionStart:null,startTime:null,transferSize:null,serverTiming:null}),t.RUMPerformanceTimingAttributes=r({blockTime:null}),t.AttributionTypes=r({FIRST_TOUCH:null,LAST_TOUCH:null}),t.SandboxedFunctions=r({XMLHttpRequest:null}),t.PerformanceData=r({performance_marks:null,resource_timing:null,performance_timing:null}),t.PerformanceCounters=r({mutation_observer_invocation:null,polling_invocation:null,match_selector_invocation:null}),t.VisitorStorageKeys={EVENTS:"events",EVENT_QUEUE:"event_queue",LAYER_MAP:"layer_map",LAYER_STATES:"layer_states",SESSION_STATE:"session_state",VISITOR_PROFILE:"visitor_profile",VARIATION_MAP:"variation_map",TRACKER_OPTIMIZELY:"tracker_optimizely"},t.AllStorageKeys=i.assign({},t.StorageKeys,t.VisitorStorageKeys),t.ListTargetingKeyTypes={COOKIE:"c",QUERY:"q",JS_VARIABLE:"j"},t.VisitorIdLocatorType={COOKIE:"cookie",JS_VARIABLE:"js",LOCALSTORAGE:"localStorage",QUERY:"query"}},5708:function(n){n.exports={OTHER:"other"}},9054:function(n,t){t.TYPES={ACTION:"action",ANALYTICS:"analytics",EDITOR:"editor",LIFECYCLE:"lifecycle"}},6836:function(n){n.exports={CLICK:"click",CUSTOM:"custom",ENGAGEMENT:"engagement",PAGEVIEW:"pageview"}},986:function(n,t,e){var i=e(5465);t.TrackLayerDecisionTimingFlags=i({preRedirectPolicy:null,postRedirectPolicy:null,nonRedirectPolicy:null}),t.PreRedirectPolicies=i({PERSIST_BEFORE_AND_TRACK_DURING_REDIRECT:null,PERSIST_BEFORE_REDIRECT:null}),t.PostRedirectPolicies=i({TRACK_IMMEDIATELY:null,TRACK_AFTER_SYNC:null}),t.NonRedirectPolicies=i({TRACK_IMMEDIATELY:null}),t.RedirectRelayMedia=i({COOKIE:null})},3581:function(n,t,e){var i=e(2596),r=t.TOTAL_POINTS=1e4;t.bucketingNumber=function(n,t,e){return i.hashToInt(n+t,e,r)},t.isHoldback=function(n,e){return t.bucketingNumber(n,e.id,i.Seed.IGNORING)<(e.holdback||0)},t.chooseWeightedCandidate=function(n,e,r){for(var o=t.bucketingNumber(n,e,i.Seed.BUCKETING),u=0;u<r.length;u++)if(r[u].endOfRange>o)return r[u].entityId;throw new Error("Unable to choose candidate")}},1932:function(n,t,e){var i=e(7023),r=e(3005),o=e(3581),u=e(3298),a=e(1628).E,c=e(2672),s=e(307);t.isValidExperiment=function(n,t){var e,r=i.partial(i.includes,n);return s.groupCollapsed("Decision / Evaluating audiences for experiment:",t,n),e=!t.audienceIds||u.evaluate(t.audienceIds,r),s.groupEnd(),s.debug("Decision / Experiment",t,"is valid?",e),e},t.selectVariation=function(n,t,e,u,f){if(!n.variations||0===n.variations.length)throw new a('No variations in selected experiment "'+n.id+'"');if(!n.weightDistributions&&n.variations.length>1)throw new a('On selected experiment "'+n.id+'", weightDistributions must be defined if # variations > 1');var l;if(n.bucketingStrategy&&"impression"===n.bucketingStrategy)if(1===n.variations.length)l=n.variations[0].id;else{var d=u;l=o.chooseWeightedCandidate(e+d,n.id,n.weightDistributions)}else if(l=1===n.variations.length?n.variations[0].id:o.chooseWeightedCandidate(e,n.id,n.weightDistributions),f&&f[n.id]){s.debug("Decision / Using preferredVariationMap to select variation for experiment:",n.id);var h=f[n.id];if(!i.find(n.variations,{id:h}))return c.dispatch(r.RECORD_STICKY_BUCKETING_FEATURE,{feature:"stoppedVariation",id:n.id}),s.debug("Decision / Preferred variation:",h,"not found on experiment:",n.id,". Visitor not bucketed."),null;h!==l&&(c.dispatch(r.RECORD_STICKY_BUCKETING_FEATURE,{feature:"preferredVariation",id:n.id}),l=h)}var v=i.find(n.variations,{id:l});if(v)return s.debug("Decision / Selected variation:",v),v;throw new a('Unable to find selected variation: "'+l+'".')},t.getExperimentById=function(n,t){var e=i.find(n.experiments,{id:t});if(e)return e;throw new a("Unable to find selected experiment.")},t.hasVariationActionsOnView=function(n,t){return s.debug("Decision / Checking variation:",n,"for actions on pageId:",t),!!i.find(n.actions,(function(n){return n.pageId===t&&!i.isEmpty(n.changes)}))}},1628:function(n,t){function e(n){this.message=n}e.prototype=new Error,t.E=e},9798:function(n,t,e){var i=e(7023),r=e(3005),o=e(6306),u=e(1066),a=e(3581),c=e(1932),s=e(1628).E,f=e(9185),l=e(5369),d=e(2672),h=e(9337),v=e(862),p=e(307),g=e(1994),m=f.get("stores/plugins"),y=f.get("stores/global"),_=f.get("stores/layer_data");function b(n){var t=m.getPlugin(l.PluginTypes.deciders,n);if(i.isEmpty(t))throw new Error("No deciders found for policy: "+n);return t}t.isPageIdRelevant=function(n){if(!n)return!1;var t=b(n.policy);return i.isFunction(t.includePageIdInDecisionTicket)?t.includePageIdInDecisionTicket(n):!0===t.includePageIdInDecisionTicket},t.createTicket=function(n){var t,r,o,a=i.pick(n,["bucketingId","globalHoldback","preferredVariationMap","pageId"]);return i.extend(a,{audienceIds:(t=n.visitorProfile,r=n.audiences,o=m.getAllPlugins(l.PluginTypes.audienceMatchers),i.reduce(r,(function(n,e){return u.isInAudience(t,e,o)&&n.push(e.id),n}),[])),activationId:y.getActivationId()}),e(9326).timeEnd("getDecisionTicket"),a},t.decideGlobal=function(n){return{isGlobalHoldback:a.isHoldback(n.bucketingId,{id:null,holdback:n.globalHoldback})}},t.decideGroup=function(n,t){p.debug("Decision / Deciding layer for group: ",h.description(n));var e,o,u=t.preferredLayerId,c=!!u;try{(e=a.chooseWeightedCandidate(t.bucketingId,n.id,n.weightDistributions))&&"None"!==e||(o='Group traffic allocation. Visitor maps to a "hole" in the bucket space left by an experiment or campaign that\'s since been removed from the group')}catch(l){o="Group traffic allocation. Visitor maps to a point in the bucket space which has never been covered by any experiment or campaign."}if(c&&(p.debug("Decision / Using preferredLayerMap to select layer for group:",h.description(n)),u!==e&&(d.dispatch(r.RECORD_STICKY_BUCKETING_FEATURE,{feature:"preferredLayer",id:n.id}),e=u)),o)return{layerId:null,reason:o};if(!i.find(n.weightDistributions,{entityId:e})){var f="Visitor was"+(c?" sticky-":" non-sticky ")+"bucketed into a campaign ("+e+") which is not in the group";if(!c)throw new s(f);return{layerId:null,reason:f}}return{layerId:e}},t.decideLayer=function(n,t){var e,r;p.debug("Deciding: ",n,t);var u,f,l=b(n.policy),d={layerId:n.id,experimentId:null,variationId:null,isLayerHoldback:a.isHoldback(t.bucketingId,n)};if(i.isEmpty(n.experiments))throw new s("No experiments in layer.");try{if(l.decideLayer){p.debug("Decision / Using decider's custom decideLayer.");var h=l.decideLayer(n,t);e=h.experiment,r=h.variation}else p.debug("Decision / Using default decideLayer behavior."),e=l.selectExperiment(n,t.audienceIds,t.bucketingId),r=c.selectVariation(e,t.audienceIds,t.bucketingId,t.activationId,t.preferredVariationMap)}catch(v){u=v,(null!=(f=s)&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](u):u instanceof f)?d.reason=v.message:d.error=v}return d.experimentId=e?e.id:null,d.variationId=r?r.id:null,d.error&&(d.error.name="DecisionEngineError",o.emitError(d.error)),d},t.getDummyLayerDecision=function(n,t){var e,i=function(n,t){for(var e=0;e<n.experiments.length;e++)for(var i=0;i<n.experiments[e].variations.length;i++)if(t.indexOf(n.experiments[e].variations[i].id)>-1)return{experimentId:n.experiments[e].id,variationId:n.experiments[e].variations[i].id};return null}(n,t);return i?(p.log("Decision / Applying force variation:",i.variationId,"to Campaign",v.description(n)),e={layerId:n.id,variationId:i.variationId,experimentId:i.experimentId,isLayerHoldback:!1,reason:"force"}):(p.log("No variation matches ids:",t,"in Campaign",v.description(n)),e={layerId:n.id,variationId:null,experimentId:null,isLayerHoldback:!1,reason:"force"}),e},t.isInCohort=function(n){if(!n.experimentId||!n.variationId)return!1;var t=_.get(n.layerId);return!(g.isSingleExperimentPolicy(t.policy)&&n.isLayerHoldback)}},9185:function(n,t,e){var i=e(7023),r=e(8611),o=e(2672),u=e(2009),a=r.create(),c={action_data:e(6559),async_request:e(7874),audience_data:e(5728),change_data:e(472),cleanup:e(743),client_metadata:e(6268),cookie_options:e(5060),event_data:e(9722),event_emitter:e(1888),dimension_data:e(8627),directive:e(8734),global:e(2164),history:e(2224),integration_settings:e(2977),layer:e(3189),layer_data:e(3618),log:e(6356),observed_redirect:e(2066),pending_events:e(3810),performance:e(2074),plugins:e(8962),provider_status:e(4749),pending_redirect:e(6479),rum:e(8034),sandbox:e(7654),session:e(7852),tracker_optimizely:e(6164),ua_data:e(559),view:e(2573),view_data:e(7789),visitor:e(3584),visitor_attribute_entity:e(509),visitor_events:e(1982),visitor_events_manager:e(342),visitor_id:e(7141),visitor_bucketing:e(3692),xdomain:e(39)};c.group_data=e(4069),o.registerStores(c),i.forOwn(c,(function(n,t){a.register("stores/"+t,o.getStore(t))})),a.register("core/plugins/matchers/key_value",u),n.exports=a},5812:function(n,t,e){var i=e(7023),r=e(3005),o=e(6306),u=e(8505),a=e(1758).U,c=e(5369),s=e(2672),f=e(307),l=t.JSONParseError=a("JSONParseError"),d=e(2749),h=e(4395),v=e(8231),p="optimizely_show_preview",g="optimizely_disable",m="optimizely_editor",y="optimizely_p13n",_="optimizely_x_audiences",b="optimizely_x",w="optimizely_show_preview",E="optimizely_opt_out",I="optimizely_token",A="optimizely_force_tracking";t.populateDirectiveData=function(){var n,t,e,a,S,T,k,R;!function(){var n="OFF",t=d.getQueryParamValue("optimizely_log");if(t){var e=t.split(":");""!==e[0]&&(n=String(e[0]).toUpperCase()),void 0!==e[1]&&f.setLogMatch(e[1])}f.setLogLevel(n)}(),function(){var n=v.getUserAgent()||"";if(!i.isString(n))return void f.warn("Directive / userAgent not a string");n=n.toLowerCase();var t=["googlebot","yahoo! slurp","bingbot","bingpreview","msnbot","keynote","ktxn","khte","gomezagent","alertsite","yottaamonitor","pingdom.com_bot","aihitbot","baiduspider","adsbot-google","mediapartners-google","applebot","catchpoint","phantomjs","moatbot","facebookexternalhit"],e=function(t){if(i.includes(n,t))return f.warn("Directive / Matches bot:",t),!0};i.some(t,e)&&(f.log("Directive / Disabling tracking"),s.dispatch(r.LOAD_DIRECTIVE,{trackingDisabled:!0}))}(),n=Boolean(i.result(window.optimizely,"initialized")),s.dispatch(r.LOAD_DIRECTIVE,{alreadyInitialized:n}),s.dispatch(r.LOAD_DIRECTIVE,{mutationObserverAPISupported:v.isMutationObserverAPISupported()}),function(){var n=u.get(c.COOKIES.OPT_OUT),t=d.getQueryParamValue(E),e="You have successfully opted out of Optimizely for this domain.",i="You are NOT opted out of Optimizely for this domain.";if("true"===t||"false"===t){var o="true"===t;s.dispatch(r.LOAD_DIRECTIVE,{shouldOptOut:o}),v.alert(o?e:i)}else n&&s.dispatch(r.LOAD_DIRECTIVE,{shouldOptOut:"true"===n})}(),function(){var n=!1,t=[p,g];t.push(m);for(var e=0;e<t.length;e++)if("true"===d.getQueryParamValue(t[e])){f.warn("Directive / Not activating because "+t[e]+" is set."),n=!0;break}s.dispatch(r.LOAD_DIRECTIVE,{disabled:n})}(),s.dispatch(r.LOAD_DIRECTIVE,{isEditor:!1}),s.dispatch(r.LOAD_DIRECTIVE,{isPreview:!1}),(t=d.getQueryParamValue(w))&&f.log("Directive / Is legacy preview mode"),s.dispatch(r.LOAD_DIRECTIVE,{isLegacyPreview:!!t}),s.dispatch(r.LOAD_DIRECTIVE,{isSlave:!1}),e=v.getGlobal("optlyDesktop"),(a=!(!e||i.isUndefined(e.p13nInner)))&&f.log("Directive / Is running in desktop app editor"),s.dispatch(r.LOAD_DIRECTIVE,{isRunningInDesktopApp:a}),(S="true"===d.getQueryParamValue(y))&&f.log("Directive / Is running in editor"),s.dispatch(r.LOAD_DIRECTIVE,{isRunningInV2Editor:S}),T=u.get(c.COOKIES.TOKEN)||null,k=d.getQueryParamValue(I)||T,s.dispatch(r.LOAD_DIRECTIVE,{projectToken:k}),function(){var n=u.get(c.COOKIES.PREVIEW),t=[],e=d.getQueryParamValue(_);if(e)t=u.safeDecodeURIComponent(e).split(",");else if(n)try{t=h.parse(n).forceAudienceIds}catch(v){var i=new l("Failed to parse previewCookie in registerForceAudienceIds: "+n),a={originalMessage:v.message,userError:!0};o.emitError(i,a)}t.length&&(f.log("Directive / Force Audience IDs:",t),s.dispatch(r.LOAD_DIRECTIVE,{forceAudienceIds:t}))}(),function(){var n=u.get(c.COOKIES.PREVIEW),t=[],e=d.getQueryParamValue(b);if(e)t=u.safeDecodeURIComponent(e).split(",");else if(n)try{t=h.parse(n).forceVariationIds}catch(v){var i=new l("Failed to parse previewCookie in registerForceVariationIds: "+n),a={originalMessage:v.message,userError:!0};o.emitError(i,a)}t.length&&(f.log("Directive / Force Variation IDs:",t),s.dispatch(r.LOAD_DIRECTIVE,{forceVariationIds:t}))}(),(R=d.getQueryParamValue(A))&&s.dispatch(r.LOAD_DIRECTIVE,{forceTracking:R})};t.setOptOut=function(n){n?(f.warn("Directive / Opting out"),u.set(c.COOKIES.OPT_OUT,"true",{maxAge:31536e4},!0)):u.remove(c.COOKIES.OPT_OUT),s.dispatch(r.LOAD_DIRECTIVE,{shouldOptOut:n})}},9455:function(n,t){t.now=function(){return+new Date}},6706:function(n,t){t.VERSION="0.179.0",t.NAME="js"},9230:function(n,t,e){var i=e(9185).get("stores/global");e(1271);t.getDocumentElement=function(){return document.documentElement},t.getCookieString=function(){return document.cookie||""},t.setCookie=function(n){document.cookie=n},t.querySelector=function(n){return document.querySelector(n)},t.querySelectorAll=function(n){return document.querySelectorAll(n)},t.parseUri=function(n){var e=t.createElement("a");return e.href=n,e},t.childrenOf=function(n){return Array.prototype.slice.call(n.querySelectorAll("*"))},t.createElement=function(n){return document.createElement(n)},t.isReady=function(){return i.domContentLoadedHasFired()||"interactive"===document.readyState||"complete"===document.readyState},t.isLoaded=function(){return"complete"===document.readyState},t.addReadyHandler=function(n){return document.addEventListener("DOMContentLoaded",n),function(){t.removeReadyHandler(n)}},t.removeReadyHandler=function(n){return function(){document.removeEventListener("DOMContentLoaded",n)}},t.getReferrer=function(){return document.referrer},t.getReadyState=function(){return document.readyState},t.write=function(n){if("loading"!==t.getReadyState())throw new Error("Aborting attempt to write to already-loaded document");document.write(n)},t.appendToHead=function(n){return t.appendTo(document.head,n)},t.appendTo=function(n,t){n.appendChild(t)},t.addEventListener=function(n,t,e){return document.addEventListener(n,t,e),function(){document.removeEventListener(n,t,e)}},t.getCurrentScript=function(){if(document.currentScript)return document.currentScript},t.parentElement=function(n){for(var t=n.parentNode;t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;return t}},1100:function(n,t,e){var i,r,o="optimizely_data",u=e(1758).U,a=e(5857),c=e(8231),s=u("StorageError");try{r=c.getGlobal("localStorage")}catch(f){throw new s("Unable to read localStorage: "+f.toString())}if(!r)throw new s("localStorage is undefined");i=a.create(r,o),t.mM=i},1082:function(n,t){t.create=function(n){return new MutationObserver(n)},t.observe=function(n,t,e){n.observe(t,e)}},857:function(n,t,e){var i=e(2454).Promise,r=e(8231);t.estimateStorage=function(){var n=r.getGlobal("navigator");try{return n.storage.estimate()}catch(t){return i.resolve({usage:null,quota:null})}}},9326:function(n,t,e){var i=e(3005),r=e(1758).U,o=e(9455),u=e(2672),a=e(8231),c=e(9185).get("stores/rum"),s="optimizely:",f=t.Error=r("PerformanceError");function l(){return a.getGlobal("performance")}t.time=function(n){if(c.getSampleRum()){var t=l();if(t&&t.mark){var e=s+n;t.clearMarks(e+"Begin"),t.mark(e+"Begin")}}},t.timeEnd=function(n){if(c.getSampleRum()){var t=l();if(t&&t.mark){var e=s+n,r=t.getEntriesByName(e+"Begin");if(0===r.length)throw new f("Called timeEnd without matching time: "+n);t.clearMarks(e+"End"),t.mark(e+"End");var o=n+"Time",a=t.getEntriesByName(e+"End")[0].startTime-r[0].startTime;u.dispatch(i.SET_PERFORMANCE_MARKS_DATA,{name:o,data:{startTime:Math.round(1e3*r[0].startTime)/1e3,duration:Math.round(1e3*a)/1e3}})}}},t.setMark=function(n,t,e){if(c.getSampleRum()){var r=l();if(r&&r.mark){var o=s+n;r.mark(o),u.dispatch(i.SET_PERFORMANCE_MARKS_DATA,{name:n,data:{startTime:Math.round(1e3*t)/1e3,duration:Math.round(1e3*e)/1e3}})}}},t.now=function(){var n=l();return n?n.now():o.now()}},8231:function(n,t,e){var i=e(7023),r=e(307);t.getUserAgent=function(){return window.navigator.userAgent},t.getLocationSearch=function(){return window.location.search},t.getNavigatorLanguage=function(){return window.navigator.language||window.navigator.userLanguage},t.getHref=function(){return window.location.href},t.getLocation=function(){return window.location},t.setLocation=function(n){window.location.replace(n)},t.setGlobal=function(n,t){window[n]=t},t.getGlobal=function(n){return window[n]},t.getGlobalByPath=function(n){for(var t=n.split("."),e=window;t.length;)try{e=e[t.shift()]}catch(i){throw r.error("Attempted to access nonexistent property. Path ",n),new Error("Attempted to access nonexistent property. Path "+n)}return e},t.addEventListener=function(){return window.addEventListener.apply(window,arguments)},t.removeEventListener=function(){return window.removeEventListener.apply(window,arguments)},t.isMutationObserverAPISupported=function(){return!i.isUndefined(window.MutationObserver)},t.alert=function(n){alert(n)},t.setTimeout=function(n,t){return setTimeout((function(){try{n()}catch(t){r.warn("Deferred function threw error:",t)}}),t)},t.setInterval=function(n,t){return setInterval((function(){try{n()}catch(t){r.warn("Polling function threw error:",t)}}),t)}},1527:function(n,t,e){var i=e(7023);t.create=function(n,t,e,r){return i.extend({category:"other"},r,{id:n,apiName:t,eventType:e})}},3269:function(n,t,e){var i=e(7023),r=e(1999),o=e(3005),u=e(6306),a=e(9185),c=e(2672),s=e(307),f=a.get("stores/event_emitter");t.on=function(n){return n.token||(n.token=r.generate()),c.dispatch(o.ADD_EMITTER_HANDLER,n),n.token},t.off=function(n){c.dispatch(o.REMOVE_EMITTER_HANDLER,{token:n})},t.emit=function(n,t,e){var r=f.getHandlers(n,t);i.each(r,(function(i){try{i.handler.call({$di:a},n)}catch(r){!e&&i.emitErrors?(s.error("Error in handler for event:",n,r),u.emitError(r,null,t)):s.warn("Suppressed error in handler for event:",n,r)}}))}},954:function(n,t,e){var i=e(3269);t.on=function(n){return n.publicOnly=!0,i.on(n)},t.off=i.off,t.emit=function(n){i.emit(n)}},9717:function(__unused_webpack_module,exports,__webpack_require__){var createError=__webpack_require__(3467),di=__webpack_require__(9185),Logger=__webpack_require__(307),CSP_MODE=!1,EXEC_WITH_JQUERY=!0,ExecError=exports.Error=createError("ExecError");exports.apply=function(n,t){t=t||[],EXEC_WITH_JQUERY&&(t=t.concat(di.get("env/jquery")));try{return n.apply(void 0,t)}catch(e){throw Logger.warn("Error applying function",n,"with args:",t,e),new ExecError(e)}},exports.eval=function(str){if(CSP_MODE)throw new ExecError("eval is not supported in CSP mode");try{return EXEC_WITH_JQUERY&&(str="var $ = optimizely.get('jquery');"+str),eval(str)}catch(e){throw Logger.warn("Error executing JS:",str,e),new ExecError(e)}}},2672:function(n,t,e){var i=e(5234);n.exports=i.create()},9337:function(n,t,e){var i=e(7023);t.description=function(n){var t=!!n.name?'"'+n.name+'" ':"",e=function(n){return i.map(n.weightDistributions,"entityId")}(n).join(", ");return t+"(id "+n.id+", campaigns: "+e+")"}},862:function(n,t,e){var i=e(7023),r=e(3005),o=e(9455),u=e(9185),a=e(2672),c=u.get("stores/global"),s=u.get("stores/session");t.recordLayerDecision=function(n,t,e){return a.dispatch(r.RECORD_LAYER_DECISION,{layerId:n,decision:e,decisionTicket:t,sessionId:s.getSessionId(),activationId:c.getActivationId(),timestamp:o.now(),revision:c.getRevision(),namespace:c.getNamespace(),pageId:t.pageId}),e},t.relatedAudienceIds=function(n){var t={},e=["and","or","not"];return i.each(n.experiments,(function(n){i.each(i.flattenDeep(n.audienceIds),(function(n){i.includes(e,n)||(t[n]=!0)}))})),i.keys(t)},t.getActivationTimeout=function(n){var t=n.activation;return t&&null!==t.timeout&&void 0!==t.timeout?t.timeout:2e3},t.description=function(n){return(n.name?'"'+n.name+'" ':"")+"("+n.id+")"},t.createSingle=function(n,t,e){return{id:n,policy:"single_experiment",holdback:0,experiments:[{id:t||"",variations:[{id:e||"",actions:[]}],audienceIds:[]}],integrationStringVersion:1}},t.createLayerState=function(n,t,e,i){return void 0===i&&(i=!1),{layerId:n,decision:{layerId:n,experimentId:t,variationId:e,isLayerHoldback:i||!1},decisionTicket:{audienceIds:[]}}},t.getIntegrationTypes=function(n){return i.keys(i.reduce(i.keys(n.integrationSettings),(function(n,t){return i.isNaN(Number(t))||(t="custom"),n[t]=1,n}),{}))}},8262:function(n,t,e){var i=e(7023);t.y=function(n,t){if(!t)return 0;for(var e=t.toString().split("."),r=n.toString().split("."),o=0;o<e.length;o++){if(i.isUndefined(r[o]))return-1;if(isNaN(Number(r[o]))){if(r[o]!==e[o])return-1}else{if(Number(r[o])<Number(e[o]))return-1;if(Number(r[o])>Number(e[o]))return 1}}return 0}},3298:function(n,t,e){var i=e(7023),r=e(4395),o=e(307),u="or",a="not";var c={};function s(n,t){var e;if(i.isArray(n)){var a,s;n[0]in c?(a=n[0],s=n.slice(1)):(a=u,s=n),o.groupCollapsed('Condition / Applying operator "'+a+'" with args',r.stringify(s));try{e=c[a](s,t),o.debug("Condition / Result:",e)}finally{o.groupEnd()}return e}return e=t(n),o.debug("Condition / Evaluated:",r.stringify(n),":",e),e}c["and"]=function(n,t){for(var e,r,o=0;o<n.length;o++){if(!1===(e=s(n[o],t)))return!1;i.isUndefined(e)&&(r=!0)}if(!r)return!0},c[u]=function(n,t){for(var e,r=!1,o=0;o<n.length;o++){if(!0===(e=s(n[o],t)))return!0;i.isUndefined(e)&&(r=!0)}if(!r)return!1},c[a]=function(n,t){if(1!==n.length)return!1;var e=s(n[0],t);return i.isUndefined(e)?void 0:!e},n.exports={evaluate:s}},9686:function(n,t,e){var i=e(7023),r=e(5120);function o(n){if((n=(n||"").toLowerCase())in c)return n;var t=i.keys(c);return i.find(t,(function(t){var e=c[t];return i.includes(e,n)}))||"unknown"}function u(n,t,e){return t||("unknown"===n?"unknown":e?"mobile":"desktop_laptop")}t.parseUA=function(n){var t=new r(n),e=t.getBrowser(),i=t.getOS(),c=t.getDevice(),f=(i.name||"unknown").toLowerCase(),l=(e.name||"unknown").toLowerCase(),d=a(c.type,l,f);return{browser:{id:o(e.name),version:e.version},platform:{name:f,version:i.version},device:{model:s[c.model]||"unknown",type:u(l,c.type,d),isMobile:d}}};var a=function(n,t,e){if(i.includes(["mobile","tablet"],n)||i.includes(["opera mini"],t))return!0;return!!i.includes(["android","blackberry","ios","windows phone"],e)},c={gc:["chrome","chromium","silk","yandex","maxthon","chrome webview"],edge:["edge"],ie:["internet explorer","iemobile"],ff:["firefox","iceweasel"],opera:["opera","opera mini","opera tablet"],safari:["safari","mobile safari","webkit"],ucbrowser:["uc browser"]},s={iPhone:"iphone",iPad:"ipad"}},8611:function(n,t,e){var i=e(7023);function r(){this.B={}}r.prototype.register=function(n,t){if(1!==arguments.length){if(this.B[n])throw new Error("Module already registered for: "+n);this.B[n]=t}else{var e=this;i.each(n,(function(n,t){e.register(t,n)}))}},r.prototype.get=function(n){return this.B[n]},r.prototype.getModuleKeys=function(){var n=this.B;return i.keys(n)},r.prototype.evaluate=function(n){var t=n.length,e=n.slice(0,t-1),r=n[t-1];if("function"!=typeof r)throw new Error("Evaluate must take a function as last element in array");var o=i.map(e,i.bind(this.get,this));return r.apply(null,o)},r.prototype.reset=function(){this.B={}},n.exports={create:function(){return new r}}},7243:function(n,t,e){var i=e(7023);function r(n,t,e){this.H=n,this.W=t,this.Y=0,this.K=!1,this.X={},i.extend(this,e),this.J={},this.initialize&&this.initialize()}r.prototype.Z=function(n,t){var e=this.X[n];e&&"function"==typeof e&&e.call(this,t,n)},r.prototype.nn=function(){return i.cloneDeep(this.J)},r.prototype.on=function(n,t){this.X[n]=i.bind(t,this)},r.prototype.observe=function(n){return this.W.tn(this.H,n)},r.prototype.emitChange=function(){this.K=!0,this.Y++},r.prototype.hasChanges=function(){return this.K},r.prototype.resetChange=function(){this.K=!1},r.prototype.getStateId=function(){return this.Y},r.prototype.en=function(){this.reset&&"function"==typeof this.reset&&this.reset(),this.initialize()},n.exports=r},5234:function(n,t,e){var i=e(7023),r=e(7243);function o(n){n=n||{},this.rn={},this.un={},this.an=0,this.cn=[],this.sn=[]}function u(n,t){return function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}o.prototype.registerStores=function(n){i.forOwn(n,i.bind((function(n,t){this.rn[t]=new r(t,this,n)}),this))},o.prototype.getStore=function(n){return this.rn[n]},o.prototype.dispatch=function(n,t){this.dispatchId++,i.each(this.cn,i.bind((function(e){e.call(this,n,t)}),this)),i.forOwn(this.rn,(function(e){e.Z(n,t)})),i.each(this.sn,i.bind((function(e){e.call(this,n,t)}),this)),i.forOwn(this.rn,i.bind((function(n,t){n.hasChanges()&&this.un[t]&&(n.resetChange(),i.each(this.un[t],(function(t){t(n)})))}),this))},o.prototype.reset=function(){this.un={},i.forOwn(this.rn,(function(n,t){n.en()}))},o.prototype.getState=function(){var n={};return i.forOwn(this.rn,(function(t,e){n[e]=t.nn()})),n},o.prototype.onPreAction=function(n){var t=this.cn;return t.push(n),u(t,n)},o.prototype.onPostAction=function(n){var t=this.sn;return t.push(n),u(t,n)},o.prototype.tn=function(n,t){return this.un[n]||(this.un[n]=[]),this.un[n].push(t),u(this.un[n],t)},n.exports={create:function(n){return new o(n)}}},4395:function(n,t,e){var i=e(7023);function r(n){var t,e,r=[Array.prototype],o=[];i.each(r,(function(n){i.isUndefined(n.toJSON)||(o.push(n.toJSON),delete n.toJSON)}));try{t=n()}catch(u){e=u}finally{i.each(o,(function(n,t){r[t].toJSON=n}))}if(e)throw e;return t}t.stringify=function(){return r(i.bind((function(){return JSON.stringify.apply(null,this)}),arguments))},t.parse=JSON.parse},9895:function(n,t,e){var i=e(7023);t.hasMatch=function(n,t,e){var r=!i.isUndefined(e)&&null!==e,o=!i.isUndefined(n)&&null!==n;switch(t||(o?"exact":"exists")){case"exists":return r;case"exact":return r&&String(e)===n;case"substring":return r&&String(e).indexOf(n)>-1;case"regex":try{return!(!o||!r)&&new RegExp(n).test(String(e))}catch(f){}return!1;case"range":var u=n.split(":"),a=parseFloat(u[0]),c=parseFloat(u[1]),s=parseFloat(e);return s>=a&&s<=c;default:return!1}}},2454:function(n,t,e){n.exports=e(90)},5857:function(n,t,e){var i=e(7023),r=e(307);function o(n,t){this.ln=n,this.dn=t}o.prototype.hn=function(n){return[this.dn,n].join("$$")},o.prototype.vn=function(n){return n.replace(this.dn+"$$","")},o.prototype.setItem=function(n,t){e(9326).time("localstorageSetItem");try{this.ln.setItem(this.hn(n),t)}catch(i){r.warn("Failed to save",n,"to localStorage:",i)}e(9326).timeEnd("localstorageSetItem")},o.prototype.removeItem=function(n){this.ln.removeItem(this.hn(n))},o.prototype.getItem=function(n){e(9326).time("localstorageGetItem");var t=null;try{t=this.ln.getItem(this.hn(n))}catch(i){}return e(9326).timeEnd("localstorageGetItem"),t},o.prototype.keys=function(){var n=i.keys(this.ln);return i.map(i.filter(n,i.bind((function(n){return i.includes(n,this.dn)}),this)),i.bind(this.vn,this))},o.prototype.allKeys=function(){return i.keys(this.ln)},o.prototype.allValues=function(){return i.values(this.ln)},n.exports={create:function(n,t){return new o(n,t)},mockStorage:{keys:function(){},getItem:function(n){},removeItem:function(n){},setItem:function(n,t){}}}},5978:function(n,t,e){var i=e(9230),r=e(3269),o=e(1082);t.createDOMChangedObserver=function(){var n=i.getDocumentElement(),t={type:"viewTrigger",name:"DOMChanged"},e=o.create((function(){r.emit(t,!0)}));o.observe(e,n,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}},2999:function(n,t,e){var i=e(7023),r=e(6306),o=e(5369),u=e(4395),a=e(1100).mM,c=e(307),s=e(7628),f=e(9185).get("stores/pending_events"),l=o.StorageKeys.PENDING_EVENTS;t.persistPendingEvents=function(){try{var n=f.getEventsString();a.setItem(l,n),e(8781).setItem(l,n)}catch(t){c.warn("PendingEvents / Unable to set localStorage key, error was: ",t),r.emitInternalError(t)}},t.getPendingEvents=function(){try{return u.parse(a.getItem(l))}catch(n){return null}},t.retryPendingEvents=function(n){i.forOwn(n,(function(n,t){s.retryableRequest(n.data,t,n.retryCount)})),i.isEmpty(n)||c.log("Retried pending events: ",n)}},5871:function(n,t,e){var i=e(7023),r=e(3005),o=e(9185),u=e(5369),a=e(3269),c=e(2672);t.registerApiModule=function(n,t){i.isArray(t)&&(t=o.evaluate(t)),c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.apiModules,name:n,plugin:t})},t.registerDependency=function(n,t){o.get(n)||o.register(n,t)},t.registerVisitorProfileProvider=function(n){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.visitorProfileProviders,name:n.provides,plugin:n})},t.registerViewProvider=function(n){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.viewProviders,name:n.provides,plugin:n})},t.registerAudienceMatcher=function(n,t){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.audienceMatchers,name:n,plugin:t})},t.registerViewMatcher=function(n,t){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.viewMatchers,name:n,plugin:t})},t.registerAnalyticsTracker=function(n,t){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.analyticsTrackers,name:n,plugin:t})},t.registerViewTagLocator=function(n,t){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.viewTagLocators,name:n,plugin:t})},t.registerAudiencePlugin=function(n){n.dependencies&&i.each(n.dependencies,(function(n,e){t.registerDependency(e,n)}));var e,r,u="vendor."+n.vendor;e=i.isString(n.provider)?o.get(n.provider)(n.vendor):i.isFunction(n.provider)?n.provider(n.vendor):i.cloneDeep(n.provider),t.registerVisitorProfileProvider(i.extend(e,{provides:u})),r=i.isString(n.matcher)?o.get(n.matcher):n.matcher;var a={fieldsNeeded:[u],match:function(n,t){return r(n[u],t)}};t.registerAudienceMatcher(u,a)},t.registerWidget=function(n){return i.isArray(n)&&(n=o.evaluate(n)),{showToken:a.on({filter:{type:"showWidget",name:n.widgetId},handler:n.showFn}),hideToken:a.on({filter:{type:"hideWidget",name:n.widgetId},handler:n.hideFn})}},t.registerChangeApplier=function(n,t){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.changeAppliers,name:n,plugin:t})},t.registerDecider=function(n,t){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.deciders,name:n,plugin:t})},t.registerEventImplementation=function(n,t){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.eventImplementations,name:n,plugin:t})},t.registerViewTrigger=function(n,t){c.dispatch(r.REGISTER_PLUGIN,{type:u.PluginTypes.viewTriggers,name:n,plugin:t})}},795:function(n,t,e){var i=e(7023),r=e(9185),o=":",u="holdback",a="treatment",c="",s=e(307),f=e(1994);function l(n){return n.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_")}t.formatNamesAndIdsForAnalytics=function(n,t,e,o){var u={layer:n.name||c,experiment:t.name||c,variation:e.name||c};o&&(u=i.mapValues(u,l));var a,s=!n.integrationStringVersion||1===n.integrationStringVersion;if(u.experiment===c&&s)if(a=t.audienceIds,!i.isEmpty(a)&&i.includes(["and","or","not"],a[0]))u.experiment="Exp";else{var f=r.get("stores/audience_data");u.experiment=function(n,t){return i.isEmpty(t)?"everyone_else":i.reduce(t,(function(t,e){var i=n.get(e);return i?t+l(i.name?i.name:i.id)+",":t}),"").slice(0,-1)}(f,t.audienceIds)}return{names:u,idStrings:{layer:"("+l(n.id)+")",experiment:"("+l(t.id)+")",variation:"("+l(e.id)+")"}}},t.combineAndTruncateIdAndName=function(n,t,e){var i=e-t.length;if(i<0&&(s.warn("maxLength must be at least long enough to fit the entity ID, which is length"+t.length+". Defaulting to only use entity ID as name."),n=c),n===c)return t;if(n.length>i){var r=Math.min(n.length,i);return(n=n.substring(0,r))+t}return n+" "+t},t.generateAnalyticsString=function(n,e,r,c,s,l){return n.integrationStringVersion&&2===n.integrationStringVersion?function(n,e,r,a,c,s){if(f.isSingleExperimentPolicy(n.policy)&&a)return;var l=!f.isSingleExperimentPolicy(n.policy)&&a,d=t.formatNamesAndIdsForAnalytics(n,e,r,s),h=[d.names.experiment,d.names.variation],v=[d.idStrings.experiment,d.idStrings.variation];f.isSingleExperimentPolicy(n.policy)||(h.unshift(d.names.layer),v.unshift(d.idStrings.layer));var p=i.reduce(v,(function(n,t){return n+t.length}),0),g=h.length-1+(l?1:0),m=p+g*o.length;if(l&&(m+=u.length),m>c)throw new Error("The analytics string size is too low to send the entity IDs.");for(var y=c-m,_=h.length,b=[],w=h.length-1;w>=0;w--){var E=h[w],I=Math.min(E.length,Math.floor(y/_));y-=I,_--,b.unshift(E.substring(0,I))}var A=i.map(b,(function(n,t){return n+v[t]}));return l&&A.push(u),A.join(o)}(n,e,r,c,s,l):function(n,e,r,c,s,l){var d=c?u:a,h=3*o.length,v=t.formatNamesAndIdsForAnalytics(n,e,r,l),p=v.names,g=v.idStrings,m=i.reduce(g,(function(n,t){return n+t.length}),0);if(m+h+d.length>s)throw new Error("The analytics string size is too low to send the campaign, experiment, and variation IDs.");var y=s-m-h-d.length,_={};_.variation=Math.min(p.variation.length,Math.floor(y/3)),y-=_.variation,_.experiment=Math.min(p.experiment.length,Math.floor(y/2)),y-=_.experiment,_.layer=y;var b={};i.each(p,(function(n,t){b[t]=n.substring(0,_[t])}));var w=[];return f.isSingleExperimentPolicy(n.policy)||w.push(b.layer+g.layer),(w=w.concat([b.experiment+g.experiment,b.variation+g.variation,d])).join(o)}(n,e,r,c,s,l)}},7312:function(n,t,e){var i=e(7023);n.exports=function(n,t){n=function(n){var t=n.split("?");if(t[1]){var e=t[1].split("#"),r=e[0],u=e[1],a=r.split("&"),c=[];return i.each(a,(function(n){0!==n.indexOf(o)&&c.push(n)})),t[1]="",c.length>0&&(t[1]="?"+c.join("&")),u&&(t[1]+="#"+u),t.join("")}return n}(n);var e=t.value;switch(t.match){case"exact":return(n=c(n))===c(e);case"regex":try{return Boolean(n.match(e))}catch(r){}return!1;case"simple":return(n=a(n))===(e=a(e));case"substring":return n=c(n,!0),e=c(e,!0),-1!==n.indexOf(e);default:return!1}};var r=["www."],o="optimizely_",u=["https?://.*?.?optimizelyedit.(com|test)/","https?://.*.?optimizelypreview.(com|test)/","https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"];function a(n){return c(function(n){var t=n.indexOf("?");return-1!==t&&(n=n.substring(0,t)),-1!==(t=n.indexOf("#"))&&(n=n.substring(0,t)),n}(n))}function c(n,t){n=(n=n.replace("/?","?")).toLowerCase().replace(/[/&?]+$/,"");var e=u.slice(0);t||(e=e.concat(r));for(var i=e.length,o=0;o<i;o++){var a=e[o],c=new RegExp("^"+a);n=n.replace(c,"")}return n}},2009:function(n,t,e){var i=e(7023),r=e(3052).getFieldValue,o=e(9895);n.exports=function(n,t){var e=r(n,t.name.split("."));return i.isArray(e)?i.some(e,i.partial(o.hasMatch,t.value,t.match)):o.hasMatch(t.value,t.match,e)}},9199:function(n,t,e){var i=e(46),r=e(2975),o="cdn3";t.getIP=function(){return i.makeAsyncRequest(o,u).then((function(n){return n.ip}))},t.getIPDerivedGeolocation=function(){return i.makeAsyncRequest(o,u).then((function(n){return n.location}))};function u(){r.addScriptAsync("//cdn3.optimizely.com/js/geo4.js")}},6559:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040),u=e(307);n.exports={initialize:function(){this.J={actions:{},actionState:{}},this.on(r.DATA_LOADED,this.pn),this.on(r.ACTION_EXECUTED,this.gn),this.on(r.SET_CHANGE_APPLIER,this.mn),this.on(r.REMOVE_ACTION_STATE,this.yn)},pn:function(n){var t=this;i.isEmpty(n.data.layers)||(i.each(n.data.layers,(function(n){var e;if(n.changes){var r="layerId:"+n.id;e={id:r,layerId:n.id,changeSet:n.changes,type:"layer"},o.deepFreeze(e),t.J.actions[r]=e}i.each(n.experiments,(function(r){if(r.changes){var u="experimentId:"+r.id;e={id:u,layerId:n.id,experimentId:r.id,changeSet:r.changes,type:"experiment"},o.deepFreeze(e),t.J.actions[u]=e}i.each(r.variations,(function(u){i.each(u.actions,(function(i){var a=i.pageId||i.viewId,c=r.id+":"+u.id+":"+a;e={id:c,layerId:n.id,experimentId:r.id,variationId:u.id,pageId:a,changeSet:i.changes,type:"variation"},o.deepFreeze(e),t.J.actions[c]=e}))}))}))})),this.emitChange())},gn:function(n){var t=n.actionId;i.isUndefined(t)||this.J.actionState[t]||(this.J.actionState[t]={})},mn:function(n){var t=n.actionId,e=n.changeId;this.J.actionState[t]?this.J.actionState[t][e]=n.changeApplier:u.warn("Action Data / Attempted to set changeApplier for inactive action: ",t)},yn:function(n){delete this.J.actionState[n.actionId]},get:function(n){return o.safeReference(this.J.actions[n])},getActionState:function(n){return o.safeReference(this.J.actionState[n])},getByChangeId:function(n){return i.find(this.J.actions,{changeSet:[{id:n}]})},getAllActionIdsByPageId:function(n){return i.map(i.filter(this.J.actions,{pageId:n}),"id")},getChangeApplier:function(n,t){var e=this.J.actionState[t];if(e)return e[n]},getExperimentVariationActions:function(n,t){return o.safeReference(i.filter(this.J.actions,{experimentId:n,variationId:t}))},getLayerActions:function(n){return o.safeReference(i.filter(this.J.actions,{id:"layerId:"+n}))},getExperimentActions:function(n){return o.safeReference(i.filter(this.J.actions,{id:"experimentId:"+n}))},getAll:function(){return o.safeReference(i.values(this.J.actions))}}},7874:function(n,t,e){var i=e(3005);n.exports={initialize:function(){this.J={},this.on(i.REGISTER_ASYNC_DEFERRED,this._n),this.on(i.RESOLVE_DEFERRED,this.bn),this.on(i.REJECT_DEFERRED,this.wn)},getRequest:function(n){return this.J[n]},getPromise:function(n){var t=this.getRequest(n);if(t)return t.promise},_n:function(n){this.J[n.source]={promise:n.promise,resolver:n.resolver,rejecter:n.rejecter}},bn:function(n){var t=this.getRequest(n.source);if(!t)throw new Error("No request registered for source: "+n.source);t.resolver(n.resolveWith)},wn:function(n){var t=this.getRequest(n.source);if(!t)throw new Error("No request registered for source: "+n.source);if(!t.rejecter)throw new Error("No rejecter registered for source: "+n.source);t.rejecter(n.rejectWith)}}},5728:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040);function u(n,t){return t||(t={}),n?(i.each(n,(function(n){if(!i.isString(n)){if(i.isObject(n)){var e=n.type,r=n.name||"_";t[e]||(t[e]={}),t[e][r]=!0}i.isArray(n)&&u(n,t)}})),t):t}n.exports={initialize:function(){this.J={audiences:{},featuresNeeded:{}},this.on(r.DATA_LOADED,this.pn)},pn:function(n){i.isEmpty(n.data.audiences)||(i.each(n.data.audiences,i.bind((function(n){o.deepFreeze(n),i.merge(this.J.featuresNeeded,u(n.conditions)),this.J.audiences[n.id]=n}),this)),this.emitChange())},getAll:function(){return o.safeReference(i.values(this.J.audiences))},getFeaturesNeeded:function(n){return o.safeReference(this.J.featuresNeeded[n]||{})},getAudiencesMap:function(){return o.safeReference(this.J.audiences)},get:function(n){return o.safeReference(this.J.audiences[n])},getAudienceName:function(n){return i.find(i.values(this.J.audiences),{id:n}).name||"Aud "+n}}},472:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040);n.exports={initialize:function(){this.J={},this.on(r.ADD_CHANGE,this.En),this.on(r.DATA_LOADED,this.pn)},getChange:function(n){return this.J[n]},pn:function(n){i.isEmpty(n.data.changes)||i.each(n.data.changes,i.bind(this.En,this))},En:function(n){o.deepFreeze(n),this.J[n.id]=n,this.emitChange()}}},743:function(n,t,e){var i=e(7023),r=e(3005),o=e(5369);n.exports={initialize:function(){this.J={},i.each(o.Lifecycle,i.bind((function(n){this.J[n]=[]}),this)),this.on(r.ADD_CLEANUP_FN,this.In),this.on(r.CLEAR_CLEANUP_FN,this.An)},getCleanupFns:function(n){return i.cloneDeep(this.J[n])},In:function(n){this.J[n.lifecycle].push(n.cleanupFn),this.emitChange()},An:function(n){var t=this.J[n.lifecycle];if(n.cleanupFn){var e=t.indexOf(n.cleanupFn);e>-1&&(t.splice(e,1),this.emitChange())}else this.J[n.lifecycle]=[],this.emitChange()}}},6268:function(n,t,e){var i=e(3005),r=e(6706);n.exports={initialize:function(){this.J={name:r.NAME,version:r.VERSION},this.on(i.SET_CLIENT_NAME,this.Sn),this.on(i.SET_CLIENT_VERSION,this.Tn)},getClientName:function(){return this.J.name},getClientVersion:function(){return this.J.version},Sn:function(n){n&&(this.J.name=n),this.emitChange()},Tn:function(n){n&&(this.J.version=n),this.emitChange()}}},5060:function(n,t,e){var i=e(3005);n.exports={initialize:function(){this.J={currentDomain:null,defaultAgeSeconds:15552e3,autoRefresh:true},this.on(i.SET_COOKIE_DOMAIN,this.kn),this.on(i.SET_COOKIE_AGE,this.Rn),this.on(i.SET_COOKIE_AUTO_REFRESH,this.xn)},getCurrentDomain:function(){return this.J.currentDomain},getDefaultAgeInSeconds:function(){return this.J.defaultAgeSeconds},getAutoRefresh:function(){return this.J.autoRefresh},kn:function(n){this.J.currentDomain=n,this.emitChange()},Rn:function(n){this.J.defaultAgeSeconds=n,this.emitChange()},xn:function(n){this.J.autoRefresh=n,this.emitChange()}}},8627:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040);n.exports={initialize:function(){this.J={},this.on(r.DATA_LOADED,this.pn)},pn:function(n){i.isEmpty(n.data.dimensions)||(i.each(n.data.dimensions,i.bind((function(n){o.deepFreeze(n),this.J[n.id]=n}),this)),this.emitChange())},getAll:function(){return o.safeReference(i.values(this.J))},getById:function(n){return o.safeReference(this.J[n])},getByApiName:function(n){return o.safeReference(i.find(i.values(this.J),{apiName:n}))}}},8734:function(n,t,e){var i=e(7023),r=e(3005);n.exports={initialize:function(){this.J={disabled:!1,forceAudienceIds:[],forceVariationIds:[],alreadyInitialized:!1,mutationObserverAPISupported:!1,isEditor:!1,isPreview:!1,isLegacyPreview:!1,isSlave:!1,previewLayerIds:[],projectToken:null,shouldOptOut:!1,trackingDisabled:!1,isRunningInV2Editor:!1,isRunningInDesktopApp:!1,forceTracking:!1},this.on(r.LOAD_DIRECTIVE,this.Dn)},getAll:function(){return i.cloneDeep(this.J)},conflictInObservingChanges:function(){return!this.J.mutationObserverAPISupported},isDisabled:function(){return this.J.disabled},isEditor:function(){return this.J.isEditor},clientHasAlreadyInitialized:function(){return this.J.alreadyInitialized},getForceAudienceIds:function(){return this.J.forceAudienceIds},getForceVariationIds:function(){return this.J.forceVariationIds},getPreviewLayerIds:function(){return this.J.previewLayerIds},getProjectToken:function(){return this.J.projectToken},getForceTracking:function(){return this.J.forceTracking},shouldActivate:function(){return!this.J.isEditor&&!this.isDisabled()},shouldBootstrapDataForPreview:function(){return this.J.isPreview},shouldBootstrapDataForEditor:function(){return this.J.isEditor},shouldInitialize:function(){return!(this.shouldLoadPreview()||this.isDisabled()||this.getProjectToken())},shouldLoadPreview:function(){return!(this.J.isPreview||this.J.isLegacyPreview||!this.getProjectToken()||this.J.isEditor)},shouldBailForDesktopApp:function(){return!this.J.isEditor&&this.J.isRunningInDesktopApp},shouldLoadInnie:function(){return!this.J.isSlave&&!this.J.isEditor&&this.J.isRunningInV2Editor},shouldObserveChangesIndefinitely:function(){return this.J.mutationObserverAPISupported},shouldObserveChangesUntilTimeout:function(){return!this.shouldObserveChangesIndefinitely()},shouldOptOut:function(){return this.J.shouldOptOut},shouldSendTrackingData:function(){return!this.J.trackingDisabled&&(!!this.J.forceTracking||!this.J.isPreview&&i.isEmpty(this.getForceVariationIds())&&i.isEmpty(this.getForceAudienceIds()))},isSlave:function(){return this.J.isSlave},isRunningInDesktopApp:function(){return this.J.isRunningInDesktopApp},isRunningInV2Editor:function(){return this.J.isRunningInV2Editor},Dn:function(n){i.extend(this.J,n),this.emitChange()}}},9722:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040);n.exports={initialize:function(){this.J={},this.on(r.DATA_LOADED,this.pn)},getAll:function(){return o.safeReference(i.values(this.J))},getEventsMap:function(){return o.safeReference(this.J)},get:function(n){return o.safeReference(this.J[n])},getByApiName:function(n){return o.safeReference(i.find(i.values(this.J),{apiName:n}))},getByPageId:function(n){return o.safeReference(i.filter(this.J,{pageId:n}))},pn:function(n){i.isEmpty(n.data.events)||(i.each(n.data.events,i.bind((function(n){n.pageId||(n.pageId=n.viewId),o.deepFreeze(n),this.J[n.id]=n}),this)),this.emitChange())}}},1888:function(n,t,e){var i=e(7023),r=e(3005);function o(n){var t=[];return n&&i.isObject(n)?(n.type&&t.push(n.type),t.push("|"),n.type&&n.name&&t.push(n.name),t.join("")):"|"}n.exports={initialize:function(){this.J={handlers:{}},this.on(r.ADD_EMITTER_HANDLER,this.Nn),this.on(r.REMOVE_EMITTER_HANDLER,this.Cn)},getHandlers:function(n,t){var e=[null,{type:n.type},{type:n.type,name:n.name}],r=[];return i.each(e,i.bind((function(n){var t=o(n),e=this.J.handlers[t];e&&(r=r.concat(e))}),this)),t&&(r=i.filter(r,(function(n){return!n.publicOnly}))),r},Nn:function(n){var t=o(n.filter);this.J.handlers[t]||(this.J.handlers[t]=[]),this.J.handlers[t].push({handler:n.handler,token:n.token,publicOnly:!!n.publicOnly,emitErrors:!!n.emitErrors}),this.emitChange()},Cn:function(n){var t=!1,e=n.token;i.forOwn(this.J.handlers,i.bind((function(n,r){var o=i.filter(n,(function(n){return n.token!==e}));o.length!==n.length&&(t=!0,this.J.handlers[r]=o)}),this)),t&&this.emitChange()}}},2164:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040);n.exports={initialize:function(){this.J={holdback:0,isGlobalHoldback:null,listTargetingKeys:[],revision:null,projectId:null,accountId:null,namespace:null,activationId:null,activationTimestamp:null,dcpServiceId:null,dcpKeyfieldLocators:[],recommenderServices:[],anonymizeIP:null,projectJS:null,snippetId:null,plugins:[],domContentLoaded:!1,experimental:{}},this.on(r.DATA_LOADED,this.On),this.on(r.ACTIVATE,this.Pn),this.on(r.RECORD_GLOBAL_DECISION,this.Mn),this.on(r.SET_DOMCONTENTLOADED,this.Ln)},getRevision:function(){return this.J.revision},getGlobalHoldbackThreshold:function(){return this.J.holdback},getProjectId:function(){return this.J.projectId},getSnippetId:function(){return this.J.snippetId},getAccountId:function(){return this.J.accountId},getNamespace:function(){return this.J.namespace},getActivationId:function(){return this.J.activationId},getActivationTimestamp:function(){return this.J.activationTimestamp},getAnonymizeIP:function(){return this.J.anonymizeIP},isGlobalHoldback:function(){return!!this.J.isGlobalHoldback},getListTargetingKeys:function(){return this.J.listTargetingKeys.slice()},getDCPServiceId:function(){return this.J.dcpServiceId},getDCPKeyfieldLocators:function(){return this.J.dcpKeyfieldLocators},getRecommenderServices:function(){return this.J.recommenderServices},getProjectJS:function(){return this.J.projectJS},getPlugins:function(){return this.J.plugins},getExperimental:function(){return o.safeReference(this.J.experimental)},domContentLoadedHasFired:function(){return this.J.domContentLoaded},Pn:function(n){this.J.activationId=n.activationId,this.J.activationTimestamp=n.activationTimestamp,this.J.isGlobalHoldback=null},Mn:function(n){var t=n.isGlobalHoldback;if(null!==this.J.isGlobalHoldback&&this.J.isGlobalHoldback!==t)throw new Error("Attempted to change already set global holdback!");this.J.isGlobalHoldback=t,this.emitChange()},On:function(n){var t=i.pick(n.data,["holdback","accountId","projectId","snippetId","namespace","revision","listTargetingKeys","dcpServiceId","dcpKeyfieldLocators","recommenderServices","anonymizeIP","plugins","projectJS","experimental"]);if(0!==i.keys(t).length){i.extend(this.J,{listTargetingKeys:[],dcpServiceId:null,dcpKeyfieldLocators:[]},t),this.emitChange()}},Ln:function(){this.J.domContentLoaded=!0,this.emitChange()}}},4069:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040);n.exports={initialize:function(){this.J={},this.on(r.DATA_LOADED,this.pn)},pn:function(n){i.isEmpty(n.data.groups)||(i.each(n.data.groups,i.bind((function(n){o.deepFreeze(n),this.J[n.id]=n}),this)),this.emitChange())},getAll:function(){return o.safeReference(i.values(this.J))},getGroupsMap:function(){return o.safeReference(this.J)},get:function(n){return o.safeReference(this.J[n])}}},2224:function(n,t,e){var i=e(7023),r=e(3005),o=e(8231);n.exports={initialize:function(){this.J={originalPushState:null,originalReplaceState:null},this.on(r.ENSURE_ORIGINAL_PUSHSTATE,this.Fn),this.on(r.ENSURE_ORIGINAL_REPLACESTATE,this.Un)},getOriginalPushState:function(){return this.J.originalPushState},getOriginalReplaceState:function(){return this.J.originalReplaceState},Fn:function(){this.J.originalPushState||(this.J.originalPushState=i.bind(o.getGlobal("history").pushState,o.getGlobal("history")))},Un:function(){this.J.originalReplaceState||(this.J.originalReplaceState=i.bind(o.getGlobal("history").replaceState,o.getGlobal("history")))}}},2977:function(n,t,e){var i=e(7023),r=e(3005);n.exports={initialize:function(){this.J={},this.on(r.DATA_LOADED,this.pn),this.on(r.SET_INTEGRATION_SETTINGS,this.Vn)},pn:function(n){i.isEmpty(n.data.integrationSettings)||(i.each(n.data.integrationSettings,i.bind((function(n){this.J[n.id]=n}),this)),this.emitChange())},Vn:function(n){var t=this.J[n.id];t?i.extend(t,n):this.J[n.id]=n},getAll:function(){return i.cloneDeep(i.values(this.J))},get:function(n){return i.cloneDeep(this.J[n])},getReference:function(n){return this.J[n]}}},3189:function(n,t,e){var i=e(7023),r=e(3005),o=e(307),u="*";n.exports={initialize:function(){this.J={},this.on(r.LOAD_PERSISTED_LAYER_STATES,this.zn),this.on(r.RECORD_LAYER_DECISION,this.jn),this.on(r.RECORD_LAYER_DECISION_EVENT_ID,this.qn)},getLayerState:function(n,t){if(this.J[n]){var e=this.J[n];if(i.keys(e).length>1&&!t)throw new Error("View Id must be specified when more than one layerState for layer.");return t?i.cloneDeep(i.find(e,{pageId:t})):i.cloneDeep(e["*"])}},getLayerStates:function(n){var t=[];for(var e in this.J)i.forEach(this.J[e],(function(e){(i.isUndefined(n)||e.namespace===n)&&t.push(i.cloneDeep(e))}));return t},getLayerStatesForAnalytics:function(){var n=[];for(var t in this.J)i.forEach(this.J[t],(function(t){n.push(i.pick(t,["layerId","decision","decisionEventId"]))}));return n},zn:function(n){n.merge||(this.J={}),i.each(n.layerStates,i.bind((function(n){var t=n.layerId;n.pageId||(n.pageId=n.viewId);var e=n.pageId||u,r=this.J[t];if(i.isUndefined(r))this.J[t]={},this.J[t][e]=n;else{var o=r[e];(!o||n.decisionTimestamp>(o.decisionTimestamp||0))&&(this.J[t][e]=n)}}),this)),this.emitChange()},jn:function(n){var t={layerId:n.layerId,revision:n.revision,namespace:n.namespace,pageId:n.pageId,decisionTicket:n.decisionTicket,decision:n.decision,decisionActivationId:n.activationId,decisionTimestamp:n.timestamp,decisionEventId:null},e=this.J[n.layerId]||{};n.pageId?(delete e["*"],e[n.pageId]=t):(e={})["*"]=t,this.J[n.layerId]=e,this.emitChange()},qn:function(n){var t=n.layerId,e=n.pageId||u;this.J[t]?this.J[t][e]?(this.J[t][e].decisionEventId=n.decisionId,this.emitChange()):o.warn("Not recording decision event: Layer state not found for view",e):o.warn("Not recording decision event: Campaign not registered",t)}}},3618:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040),u=e(1994);n.exports={initialize:function(){this.J={layers:{},experiments:{},variations:{}},this.on(r.DATA_LOADED,this.pn)},pn:function(n){if(!i.isEmpty(n.data.layers)){var t=this;i.each(n.data.layers,(function(n){i.each(n.experiments,(function(e){n.pageIds||(n.pageIds=n.viewIds),e.campaignName||u.isSingleExperimentPolicy(n.policy)?u.isSingleExperimentPolicy(n.policy)&&n.groupId&&(e.groupId=n.groupId):e.campaignName=n.name,i.each(e.variations,(function(n){i.each(n.actions,(function(n){n.pageId||(n.pageId=n.viewId)})),t.J.variations[n.id]=n})),t.J.experiments[e.id]=e})),o.deepFreeze(n),t.J.layers[n.id]=n})),this.emitChange()}},getAll:function(){return o.safeReference(i.values(this.J.layers))},getCampaignsMap:function(){return o.safeReference(this.J.layers)},getExperimentsMap:function(){return o.safeReference(this.J.experiments)},getVariationsMap:function(){return o.safeReference(this.J.variations)},getCount:function(){return i.keys(this.J.layers).length},getAllByPageIds:function(n){return o.safeReference(i.filter(this.J.layers,(function(t){return i.some(n,i.partial(i.includes,t.pageIds))})))},get:function(n){return o.safeReference(this.J.layers[n])},getLayerByExperimentId:function(n){var t=i.find(this.J.layers,(function(t){return i.find(t.experiments,{id:n})}));return o.safeReference(t)},getExperimentByVariationId:function(n){var t;return i.some(this.J.layers,(function(e){return i.some(e.experiments,(function(e){return i.find(e.variations,{id:n})&&(t=e),t})),t})),o.safeReference(t)}}},6356:function(n,t,e){var i=e(3005);n.exports={initialize:function(){this.J={logs:[]},this.on(i.LOG,this.Bn)},getLogs:function(){return this.J.logs},Bn:function(n){this.J.logs.push(n),this.emitChange()},nn:function(){return this.J.logs.slice()}}},2066:function(n,t,e){var i=e(3005),r=e(6040);n.exports={initialize:function(){this.J={data:null,hasTracked:null},this.on(i.LOAD_REDIRECT_DATA,this.Gn),this.on(i.REGISTER_TRACKED_REDIRECT_DATA,this.Hn)},get:function(){return r.safeReference(this.J.data)},hasTracked:function(){return this.J.hasTracked},Gn:function(n){r.deepFreeze(n),this.J.data=n,this.J.hasTracked=!1,this.emitChange()},Hn:function(){this.J.hasTracked=!0}}},3810:function(n,t,e){var i=e(7023),r=e(3005),o=e(4395);n.exports={initialize:function(){this.J={},this.on(r.SET_PENDING_EVENT,this.$n),this.on(r.REMOVE_PENDING_EVENT,this.Wn),this.on(r.LOAD_PENDING_EVENTS,this.Yn)},getEvents:function(){return this.J},getEventsString:function(){return o.stringify(this.J)},$n:function(n){i.keys(this.J).length>=1e3&&this.Kn();var t=n.id,e=n.retryCount;this.J[t]&&this.J[t].retryCount===e||(this.J[t]={id:t,timeStamp:n.timeStamp,data:n.data,retryCount:e},this.emitChange())},Wn:function(n){delete this.J[n.id],this.emitChange()},Yn:function(n){this.J=n.events,this.Kn(),this.emitChange()},Kn:function(){for(var n=i.sortBy(this.J,"timeStamp"),t=0;t<=n.length-1e3;t++)delete this.J[n[t].id];this.emitChange()}}},6479:function(n,t,e){var i=e(7023),r=e(3005);n.exports={initialize:function(){this.J={layerId:null},this.on(r.ANNOUNCE_PENDING_REDIRECT,this.Gn)},isExpectingRedirect:function(){return i.isString(this.J.layerId)},getLayerId:function(){return this.J.layerId},Gn:function(n){this.isExpectingRedirect()||(this.J.layerId=n.layerId,this.emitChange())}}},2074:function(n,t,e){var i=e(7023),r=e(3005),o=e(5369);n.exports={initialize:function(){this.J={},this.J[o.PerformanceData.performance_marks]={},this.on(r.SET_PERFORMANCE_MARKS_DATA,this.Xn)},Xn:function(n){i.isUndefined(this.J[o.PerformanceData.performance_marks][n.name])&&(this.J[o.PerformanceData.performance_marks][n.name]=[]),this.J[o.PerformanceData.performance_marks][n.name].push(n.data),this.emitChange()},getMarks:function(){return i.mapValues(this.J[o.PerformanceData.performance_marks],(function(n){return i.map(n,(function(n){return[n.startTime,n.duration]}))}))},getDurationsFor:function(n){return i.reduce(n,i.bind((function(n,t){var e=this.J[o.PerformanceData.performance_marks][t];return e&&(n[t]=Math.round(i.reduce(e,(function(n,t){return n+t.duration}),0))),n}),this),{})}}},8962:function(n,t,e){var i=e(7023),r=e(3005),o=e(5369),u=e(307);n.exports={initialize:function(){this.J=i.mapValues(o.PluginTypes,(function(){return{}})),this.on(r.REGISTER_PLUGIN,this.Jn)},Jn:function(n){var t=n.type,e=n.name,i=n.plugin;if(!t||!e)throw new Error("Missing information needed to register plugins: "+t+":"+e);if(!this.J[t])throw new Error("Invalid plugin type specified: "+t);this.J[t][e]=i,u.debug("Plugin Store: Registering Plugin :",n)},getAllPlugins:function(n){if(!n)return this.J;if(this.J[n])return this.J[n];throw new Error("Invalid plugin type: "+n)},getPlugin:function(n,t){if(!t||!n)throw new Error("Missing plugin parameters");return this.getAllPlugins(n)[t]||null}}},4749:function(n,t,e){var i=e(7023),r=e(3005),o=e(3052);n.exports={initialize:function(){this.J={},this.on(r.SET_VISITOR_ATTRIBUTE_PENDING,this.Qn)},getPendingAttributeValue:function(n){return n=i.isArray(n)?n.concat("pending"):[n,"pending"],o.getFieldValue(this.J,n)},Qn:function(n){o.setFieldValue(this.J,n.key,{pending:n.pending}),this.emitChange()}}},8034:function(n,t,e){var i=e(7023),r=e(3005);n.exports={initialize:function(){this.J={inRumSample:!1,id:null,src:null,RumHost:null,data:{extras:{}},apis:{},DOMObservation:{},featuresNeeded:{}},this.on(r.SET_RUM_DATA,this.Zn),this.on(r.RECORD_API_USAGE,this.nt),this.on(r.INITIALIZE_CHANGE_METRICS,this.tt),this.on(r.RECORD_ACTIVATION_TYPE_USAGE,this.et),this.on(r.RECORD_AUDIENCE_USAGE,this.it),this.on(r.RECORD_CHANGE_MACROTASK_RATE,this.rt),this.on(r.RECORD_CHANGE_OVERHEATED,this.ot),this.on(r.RECORD_CHANGE_TYPE_USAGE,this.ut),this.on(r.RECORD_DOM_OBSERVATION_OCCURENCE,this.ct),this.on(r.RECORD_INTEGRATION_USAGE,this.st),this.on(r.RECORD_LAYER_FEATURE_USAGE,this.ft),this.on(r.RECORD_LAYER_POLICY_USAGE,this.dt),this.on(r.RECORD_VIEW_FEATURE_USAGE,this.ht),this.on(r.RECORD_VIEWS_INITIALLY_ACTIVATED_COUNT,this.vt),this.on(r.RECORD_VISITOR_ID_LOCATOR_USAGE,this.yt),this.on(r.RECORD_VISITOR_ID_ERROR,this._t),this.on(r.RECORD_STICKY_BUCKETING_FEATURE,this.bt)},Zn:function(n){i.merge(this.J,n),this.emitChange()},nt:function(n){this.J.apis[n.methodName]||(this.J.apis[n.methodName]=0),this.J.apis[n.methodName]++,this.emitChange()},tt:function(){i.isUndefined(this.J.data.extras.changeMacrotaskRate)&&(this.J.data.extras.changeMacrotaskRate=0),i.isUndefined(this.J.data.extras.numOverheatedChanges)&&(this.J.data.extras.numOverheatedChanges=0)},rt:function(n){i.isUndefined(this.J.data.extras.changeMacrotaskRate)&&(this.J.data.extras.changeMacrotaskRate=0),n.changeMacrotaskRate>this.J.data.extras.changeMacrotaskRate&&(this.J.data.extras.changeMacrotaskRate=n.changeMacrotaskRate),this.emitChange()},ot:function(){i.isUndefined(this.J.data.extras.numOverheatedChanges)&&(this.J.data.extras.numOverheatedChanges=0),this.J.data.extras.numOverheatedChanges++,this.emitChange()},ct:function(n){this.J.DOMObservation[n.counterName]||(this.J.DOMObservation[n.counterName]=0),this.J.DOMObservation[n.counterName]++,this.emitChange()},wt:function(n,t,e){i.isUndefined(this.J.featuresNeeded[n])&&(this.J.featuresNeeded[n]={});var r=this.J.featuresNeeded[n];i.each(t,(function(n){r[n]||(r[n]={}),r[n][e]||(r[n][e]=!0)}))},st:function(n){this.wt("integrations",n.integrations,n.layerId)},ut:function(n){this.wt("changeTypes",n.changeTypes,n.layerId)},et:function(n){this.wt("activationTypes",[n.activationType],n.entityId),this.emitChange()},ht:function(n){this.wt("viewFeatures",n.featuresUsed,n.entityId),this.emitChange()},ft:function(n){this.wt("layerFeatures",[n.feature],n.entityId),this.emitChange()},dt:function(n){this.wt("policy",[n.policy],n.layerId),this.emitChange()},it:function(n){this.wt("audiences",n.audienceTypes,n.layerId),this.emitChange()},vt:function(n){this.J.data.extras.viewsInitiallyActivatedCount=n.viewsInitiallyActivatedCount,this.emitChange()},yt:function(n){this.wt("visitorIdLocatorType",[n.visitorIdLocatorType],n.entityId),this.emitChange()},_t:function(n){this.J.data.extras.errorCustomVisitorId=n.isError,this.emitChange()},bt:function(n){this.wt("stickyBucketing",[n.feature],n.id)},getSampleRum:function(){return this.J.inRumSample},getRumId:function(){return this.J.id},getRumHost:function(){return this.J.RumHost},getApiData:function(){return this.J.apis},getDOMObservationData:function(){return this.J.DOMObservation},getRumData:function(){return i.cloneDeep(this.J.data)},getScriptSrc:function(){return this.J.src},getFeaturesNeededData:function(){var n=this.J.featuresNeeded,t={};return i.forOwn(n,(function(n,e){var r=i.keys(n);i.isEmpty(r)||(t[e]={}),i.forEach(r,(function(r){t[e][r]=i.keys(n[r]).length}))})),t}}},7654:function(n,t,e){var i=e(3005);n.exports={initialize:function(){this.J={initialized:!1,natives:{}},this.on(i.SANDBOXED_FUNCTIONS_ADDED,this.Et)},Et:function(n){if(!n.sandboxedFunctions)throw new Error("No sandboxedFunctions found in payload");this.J.natives=n.sandboxedFunctions,this.J.initialized=!0,this.emitChange()},getAll:function(){return this.J.natives},get:function(n){if(!n)throw new Error("Missing name parameter");return this.J.natives[n]||null},isInitialized:function(){return this.J.initialized}}},7852:function(n,t,e){var i=e(7023),r=e(3005),o=e(9455),u=e(1999);n.exports={initialize:function(){this.J={lastSessionTimestamp:0,sessionId:null},this.on(r.REFRESH_SESSION,this.It),this.on(r.LOAD_SESSION_STATE,this.At)},getState:function(){return i.cloneDeep(this.J)},getSessionId:function(){return this.J.sessionId},At:function(n){this.J.sessionId=n.sessionId,this.J.lastSessionTimestamp=n.lastSessionTimestamp,this.emitChange()},It:function(){var n=o.now(),t=this.J.lastSessionTimestamp;(!this.J.sessionId||n-t>18e5)&&(this.J.sessionId=u.generate()),this.J.lastSessionTimestamp=n,this.emitChange()}}},6164:function(n,t,e){var i=e(7023),r=e(3005);n.exports={initialize:function(){this.St(),this.on(r.FINALIZE_BATCH_SNAPSHOT,this.Tt),this.on(r.REGISTER_PREVIOUS_BATCH,this.kt),this.on(r.REGISTER_TRACKER_VISITOR,this.Rt),this.on(r.REGISTER_TRACKER_EVENT,this.xt),this.on(r.REGISTER_TRACKER_DECISION,this.Dt),this.on(r.RESET_TRACKER_EVENTS,this.Nt),this.on(r.RESET_TRACKER_STORE,this.St),this.on(r.RESET_TRACKER_PREVIOUS_BATCHES,this.Ct),this.on(r.SET_TRACKER_POLLING,this.Ot),this.on(r.SET_TRACKER_BATCHING,this.Pt),this.on(r.SET_TRACKER_SEND_EVENTS,this.Mt),this.on(r.SET_TRACKER_PERSISTABLE_STATE,this.Lt),this.on(r.SET_TRACKER_DIRTY,this.Ft),this.on(r.UPDATE_TRACKER_VISITOR_ATTRIBUTES,this.Ut)},getPersistableState:function(){return this.J.isDirty?this.hasEventsToSend()||this.hasPreviousBatchesToSend()?{data:this.J.data,decisions:this.J.decisions,decisionEvents:this.J.decisionEvents,previousBatches:this.J.previousBatches}:{}:null},Lt:function(n){i.isEmpty(this.J.data)||i.isEmpty(n.data)||(this.Tt(),this.J.previousBatches.push(this.getEventBatch())),this.J.data=n.data||{},this.J.decisions=n.decisions||[],this.J.decisionEvents=n.decisionEvents||[],i.isEmpty(this.J.previousBatches)||i.isEmpty(n.previousBatches)?this.J.previousBatches=n.previousBatches||[]:this.J.previousBatches=this.J.previousBatches.concat(n.previousBatches),this.emitChange()},Ft:function(n){this.J.isDirty=n,this.emitChange()},xt:function(n){var t=this.Vt();(i.isEmpty(t.snapshots)||!i.isEmpty(this.J.decisionEvents))&&this.zt(),this.jt().events.push(n.event),this.J.decisions=n.decisions,this.Ft(!0)},Dt:function(n){this.J.decisionEvents.push(n.decisionEvent),this.J.decisions=n.decisions,this.Ft(!0)},Rt:function(n){i.isEmpty(this.J.data)?this.J.data=n.data:this.Tt(),this.J.data.visitors.push(n.visitor),this.J.decisions=n.decisions,this.J.decisionEvents=[],this.Ft(!0)},kt:function(n){this.J.previousBatches.push(n),this.Ft(!0)},St:function(){this.J={polling:!1,shouldBatch:!0,data:{},decisions:[],decisionEvents:[],canSend:!1,isDirty:!1,previousBatches:[]},this.emitChange()},Nt:function(){var n=this.Vt();this.J.data.visitors=[n],n.snapshots=[],this.Ft(!0)},Ct:function(){this.J.previousBatches=[],this.Ft(!0)},Ot:function(n){this.J.polling=n,this.emitChange()},Pt:function(n){this.J.shouldBatch=n,this.emitChange()},Mt:function(n){this.J.canSend=n,this.emitChange()},getEventBatch:function(){return i.cloneDeep(this.J.data)},getPreviousBatches:function(){return i.cloneDeep(this.J.previousBatches)},qt:function(){return this.J.decisionEvents.slice()},Bt:function(){this.J.decisionEvents=[]},Gt:function(){return this.J.decisions.slice()},isPolling:function(){return this.J.polling},shouldBatch:function(){return this.J.shouldBatch},jt:function(){return i.last(this.Vt().snapshots)},Vt:function(){return i.last(this.J.data.visitors)},zt:function(){var n=this.qt();this.Vt().snapshots.push({decisions:this.Gt(),events:n}),this.Bt(),this.Ft(!0)},Tt:function(){this.J.decisionEvents.length>0&&this.zt()},hasEventsToSend:function(){if(!i.isEmpty(this.J.decisionEvents))return!0;if(!i.isEmpty(this.J.data)&&i.some(this.J.data.visitors||[],(function(n){return n.snapshots.length>0})))return!0;return!1},hasPreviousBatchesToSend:function(){return!i.isEmpty(this.J.previousBatches)},canSend:function(){return this.J.canSend},Ut:function(n){var t=this.Vt();t&&(t.attributes=n.attributes)}}},559:function(n,t,e){var i=e(7023),r=e(3005);n.exports={initialize:function(){this.J={},this.on(r.SET_UA_DATA,this.pn)},pn:function(n){i.isEmpty(this.J)&&(this.J=n.data)},get:function(){return i.cloneDeep(this.J)}}},2573:function(n,t,e){var i=e(7023),r=e(3005),o=e(307),u={globalTags:{},viewStates:{},shouldBatch:!1};n.exports={initialize:function(){this.J=i.cloneDeep(u),this.on(r.REGISTER_VIEWS,this.Ht),this.on(r.SET_VIEW_ACTIVE_STATE,this.$t),this.on(r.UPDATE_PARSED_VIEW_METADATA,this.Wt),this.on(r.UPDATE_USER_SUPPLIED_METADATA,this.Yt),this.on(r.TRACK_VIEW_ACTIVATED_EVENT,this.Kt),this.on(r.SET_GLOBAL_TAGS,this.Xt),this.on(r.RESET_VIEW_STATES,this.Jt),this.on(r.SET_VIEW_BATCHING,this.Pt)},getAll:function(){var n={};for(var t in this.J.viewStates)n[t]=this.getViewState(t);return n},shouldBatch:function(){return this.J.shouldBatch},getViewState:function(n){var t=i.cloneDeep(this.J.viewStates[n]),e=this.J.globalTags;return t.metadata=i.extend({},t.parsedMetadata,e,t.userSuppliedMetadata),t},getActiveViewTags:function(){var n=this.getActiveViewStates(),t=i.map(n,(function(n){return n.metadata})),e=[{}].concat(t);return i.extend.apply(i,e)},getActivationEventId:function(n){return this.J.viewStates[n]?this.J.viewStates[n].activationEventId:null},getActiveViewStates:function(){return i.reduce(this.J.viewStates,i.bind((function(n,t,e){return this.isViewActive(e)&&n.push(this.getViewState(e)),n}),this),[])},isViewActive:function(n){var t=this.J.viewStates[n];return t||o.warn("No Page registered with id",n),!!t.isActive},getGlobalTags:function(){return i.cloneDeep(this.J.globalTags)},Jt:function(){this.J.viewStates={},this.emitChange()},Ht:function(n){i.each(n.views,i.bind((function(n){var t=n.id;this.J.viewStates[t]={id:t,isActive:i.isBoolean(n.isActive)?n.isActive:null,activatedTimestamp:null,activationEventId:null,parsedMetadata:{},userSuppliedMetadata:{}}}),this)),this.emitChange()},$t:function(n){var t=n.view.id;if(!this.J.viewStates[t])throw new Error("No view exists with id "+t);this.J.viewStates[t].isActive=n.isActive,n.isActive?this.J.viewStates[t].activatedTimestamp=n.timestamp:(this.J.viewStates[t].parsedMetadata={},this.J.viewStates[t].userSuppliedMetadata={}),this.emitChange()},Wt:function(n){var t=n.pageId;if(!this.J.viewStates[t])throw new Error("No view exists with id "+t);i.assign(this.J.viewStates[t].parsedMetadata,n.metadata),this.emitChange()},Yt:function(n){var t=n.pageId;if(!this.J.viewStates[t])throw new Error("No view exists with id "+t);i.assign(this.J.viewStates[t].userSuppliedMetadata,n.metadata),this.emitChange()},Kt:function(n){var t=n.pageId;this.J.viewStates[t]&&(this.J.viewStates[t].activationEventId=n.eventData.eventId,this.emitChange())},Xt:function(n){i.extend(this.J.globalTags,n),this.emitChange()},Pt:function(n){this.J.shouldBatch=n,this.emitChange()}}},7789:function(n,t,e){var i=e(7023),r=e(3005),o=e(6040);n.exports={initialize:function(){this.J={views:{},apiNamesToViews:{}},this.on(r.DATA_LOADED,this.pn)},getAll:function(){return o.safeReference(i.values(this.J.views))},getPagesMap:function(){return o.safeReference(this.J.views)},get:function(n){return o.safeReference(this.J.views[n])},getByApiName:function(n){return o.safeReference(this.J.apiNamesToViews[n])},apiNameToId:function(n){var t=this.J.apiNamesToViews[n];if(t)return t.id},idToApiName:function(n){var t=this.J.views[n];if(t)return t.apiName},getNumberOfPages:function(){return i.keys(this.J.views).length},getAllViewsForActivationType:function(n){return i.filter(this.J.views,{activationType:n})},pn:function(n){i.isEmpty(n.data.views)||(i.each(n.data.views,i.bind((function(n){o.deepFreeze(n),this.J.views[n.id]=n,this.J.apiNamesToViews[n.apiName]=n}),this)),this.emitChange())}}},3584:function(n,t,e){var i=e(7023),r=e(3005),o=e(3052);n.exports={initialize:function(){this.J={profile:{},metadata:{},visitorId:null},this.on(r.SET_VISITOR_ID_VIA_API,this.Qt),this.on(r.SET_VISITOR_ATTRIBUTES,this.Zt),this.on(r.LOAD_EXISTING_VISITOR_PROFILE,this.ne)},getVisitorProfile:function(){return this.J.profile},getVisitorProfileMetadata:function(){return this.J.metadata},getAttribute:function(n){var t=this.J.profile;return i.cloneDeep(o.getFieldValue(t,n))},getAttributeMetadata:function(n){return i.cloneDeep(this.J.metadata[n])},getVisitorIdFromAPI:function(){return this.J.visitorId},ne:function(n){this.J.profile=n.profile,this.J.metadata=n.metadata,this.emitChange()},Zt:function(n){i.each(n.attributes,i.bind((function(n){var t=n.key;o.setFieldValue(this.J.profile,t,n.value),n.metadata&&i.forOwn(n.metadata,i.bind((function(n,e){o.setFieldValue(this.J.metadata,t.concat(e),n)}),this))}),this)),this.emitChange()},Qt:function(n){this.J.visitorId=n,this.emitChange()}}},509:function(n,t,e){var i=e(7023),r=e(3005);n.exports={initialize:function(){this.J={},this.on(r.DATA_LOADED,this.te)},getCustomBehavioralAttributes:function(){return i.filter(this.J,(function(n){return!!n.rule_json}))},getVisitorAttribute:function(n){var t=i.values(this.J);if(n.datasourceId&&(t=i.filter(t,{dcp_datasource_id:String(n.datasourceId)})),n.attributeName&&n.attributeId)throw new Error("Must not specify both attribute name and attribute ID");if(n.attributeId){var e=this.J[n.attributeId];if(!e)throw new Error("Unrecognized attribute ID: "+n.attributeId);return e}if(n.attributeName){var r=i.filter(t,{name:n.attributeName});if(!r.length)throw new Error("Unrecognized attribute name: "+n.attributeName);if(r.length>1)throw new Error("Too many attributes with name: "+n.attributeName);return r[0]}throw new Error("Must specify attribute name or attribute ID")},te:function(n){i.isEmpty(n.data.visitorAttributes)||(i.each(n.data.visitorAttributes,i.bind((function(n){this.J[n.id]=n}),this)),this.emitChange())}}},3692:function(n,t,e){var i=e(7023),r=e(3005),o=e(4395);n.exports={initialize:function(){this.J={variationIdMap:{},preferredLayerMap:{}},this.on(r.UPDATE_VARIATION_ID_MAP,this.ee),this.on(r.MERGE_VARIATION_ID_MAP,this.re),this.on(r.UPDATE_PREFERRED_LAYER_MAP,this.oe),this.on(r.MERGE_PREFERRED_LAYER_MAP,this.ue)},getVariationIdMap:function(){return i.cloneDeep(this.J.variationIdMap)},getVariationIdMapString:function(){return o.stringify(this.J.variationIdMap)},ee:function(n){var t=this.J.variationIdMap[n.layerId]||{};t[n.experimentId]!==n.variationId&&(t[n.experimentId]=n.variationId,this.J.variationIdMap[n.layerId]=t,this.emitChange())},re:function(n){var t=this.getVariationIdMap(),e=n.variationIdMap;i.each(t||{},(function(n,t){e[t]?i.assign(e[t],n):e[t]=n})),this.J.variationIdMap=e,this.emitChange()},getPreferredLayerMap:function(){return i.cloneDeep(this.J.preferredLayerMap)},getPreferredLayerMapString:function(){return o.stringify(this.J.preferredLayerMap)},getPreferredLayerId:function(n){return this.J.preferredLayerMap[n]},oe:function(n){this.J.preferredLayerMap[n.groupId]!==n.layerId&&(this.J.preferredLayerMap[n.groupId]=n.layerId,this.emitChange())},ue:function(n){var t=this.getPreferredLayerMap(),e=n.preferredLayerMap;i.assign(e,t),this.J.preferredLayerMap=e,this.emitChange()}}},1982:function(n,t,e){e(7023);var i=e(3005);e(490).j;n.exports={initialize:function(){this.J={events:[],foreignEvents:{},foreignEventQueues:{}},this.on(i.SET_VISITOR_EVENTS,this.pn),this.on(i.SET_FOREIGN_VISITOR_EVENTS,this.ae),this.on(i.SET_FOREIGN_VISITOR_EVENT_QUEUE,this.ce)},getEvents:function(){return this.J.events},getForeignEvents:function(){return this.J.foreignEvents},getForeignEventQueues:function(){return this.J.foreignEventQueues},pn:function(n){this.J.events=n,this.emitChange()},ae:function(n){this.J.foreignEvents[n.key]=n.value},ce:function(n){this.J.foreignEventQueues[n.key]=n.value}}},342:function(n,t,e){var i=e(3005);n.exports={initialize:function(){this.J={baseMap:{},eventQueue:[],lastEvent:null,initialized:!1,cleared:!1},this.on(i.UPDATE_BEHAVIOR_STORE,this.se)},getBaseMap:function(){return this.J.baseMap},getEventQueue:function(){return this.J.eventQueue},getLastEvent:function(){return this.J.lastEvent},getCleared:function(){return this.J.cleared},getInitialized:function(){return this.J.initialized},se:function(n){this.J[n.key]=n.value}}},7141:function(n,t,e){var i=e(7023),r=e(3005);n.exports={initialize:function(){this.J={randomId:null,visitorIdLocator:null},this.on(r.SET_VISITOR_ID,this.pn),this.on(r.DATA_LOADED,this.fe)},getBucketingId:function(){return this.getRandomId()},getRandomId:function(){return this.J.randomId},getVisitorIdLocator:function(){return this.J.visitorIdLocator},pn:function(n){i.extend(this.J,n),this.emitChange()},fe:function(n){i.isEmpty(n.data.visitorIdLocator)||(this.J.visitorIdLocator=n.data.visitorIdLocator,this.emitChange())}}},39:function(n,t,e){var i=e(7023),r=e(307),o=e(3005);n.exports={initialize:function(){this.J={frames:[],defaultFrame:null,messages:[],subscribers:[],canonicalOrigins:null,disabled:!1},this.on(o.XDOMAIN_SET_DEFAULT_FRAME,this.le),this.on(o.XDOMAIN_ADD_FRAME,this.de),this.on(o.XDOMAIN_SET_MESSAGE,this.he),this.on(o.XDOMAIN_ADD_SUBSCRIBER,this.ve),this.on(o.XDOMAIN_SET_CANONICAL_ORIGINS,this.pe),this.on(o.XDOMAIN_SET_DISABLED,this.ge)},getMessages:function(){return i.cloneDeep(this.J.messages)},getOffset:function(){return 0===this.J.messages.length?0:this.J.messages[0].data.id},getNextMessageId:function(){return this.J.messages.length+this.getOffset()},getMessageById:function(n){return this.J.messages[n-this.getOffset()]},getSubscribers:function(){return this.J.subscribers},getFrames:function(){return this.J.frames},getNextFrameId:function(){return this.J.frames.length},getDefaultFrame:function(){return this.J.defaultFrame},getCanonicalOrigins:function(){return i.cloneDeep(this.J.canonicalOrigins)},isDisabled:function(){return this.J.disabled},le:function(n){this.J.defaultFrame=n},de:function(n){this.J.frames.push(n)},he:function(n){for(this.J.messages[n.messageId-this.getOffset()]=n.message;this.J.messages.length>1e3;){var t=this.J.messages.shift();r.debug("XDomainStorage: Cleared old message: "+t.data.id)}},ve:function(n){this.J.subscribers.push(n.subscriber)},pe:function(n){this.J.canonicalOrigins=n.canonicalOrigins},ge:function(n){this.J.disabled=n.disabled}}},855:function(n,t){t.locatorType={CSS_SELECTOR:"css_selector",JAVASCRIPT:"javascript",URL_REGEX:"url_regex"},t.valueType={STRING:"string",NUMBER:"number",CURRENCY:"currency"},t.nodeNames={INPUT:"INPUT",SELECT:"SELECT"}},4504:function(n,t,e){var i=e(1758).U;t.Error=i("TagError")},1898:function(n,t,e){var i=e(5369).PluginTypes,r=e(9185).get("stores/plugins");t.getTagValue=function(n){var e=r.getPlugin(i.viewTagLocators,n.locatorType);if(!e)throw new t.Error("No locator registered for tag locatorType: "+n.locatorType);return e(n)},t.enums=e(855),t.Error=e(4504).Error},46:function(n,t,e){var i=e(3005),r=e(2672),o=e(2454).Promise,u=e(9185).get("stores/async_request");t.makeAsyncRequest=function(n,t){var e,a,c=u.getPromise(n);if(c)return c;var s=new o((function(n,t){e=n,a=t}));return r.dispatch(i.REGISTER_ASYNC_DEFERRED,{source:n,promise:s,resolver:e,rejecter:a}),t&&t(),s},t.resolveRequest=function(n,t){r.dispatch(i.RESOLVE_DEFERRED,{source:n,resolveWith:t})},t.rejectRequest=function(n,t){r.dispatch(i.REJECT_DEFERRED,{source:n,rejectWith:t})}},2749:function(n,t,e){var i=e(9965),r=e(8231);t.getLanguage=function(){return r.getNavigatorLanguage()},t.getQueryParams=i.getQueryParams,t.getQueryParamValue=i.getQueryParamValue,t.getUrl=function(){return r.getHref()}},8505:function(n,t,e){var i=e(7023),r=e(1758).U,o=e(9455),u=e(9230),a=e(8231),c=e(3005),s=e(9185),f=e(2672),l=s.get("stores/cookie_options"),d=t.SetError=r("CookieSetError"),h=t.MismatchError=r("CookieMismatchError");t.getAll=function(n){var e,r,o,a,c;i.isUndefined(n)&&(n=!0),e=u.getCookieString().split(/\s*;\s*/);var s={};for(o=0;o<e.length;o++)if((a=(r=e[o]).indexOf("="))>0&&void 0===s[c=t.safeDecodeURIComponent(r.substring(0,a))]){var f=r.substring(a+1);n&&(f=t.safeDecodeURIComponent(f)),s[c]=f}return s},t.safeDecodeURIComponent=function(n){try{return decodeURIComponent(n)}catch(t){return n}},t.get=function(n,e){return t.getAll(e)[n]},t.set=function(n,e,r,s){r=i.extend({encodeValue:!0},r),!1!==s&&(s=!0);var g=[];if(i.isUndefined(r.domain)){var m=l.getCurrentDomain();m||(m=function(n,e){!1!==e&&(e=!0);for(var r,o,u=n.hostname.split("."),a=[],s=null,l=u.length-1;l>=0;l--)if(a.unshift(u[l]),r=a.join("."),!i.includes(v,r)){o={domain:e?"."+r:r};try{t.set(p,Math.random().toString(),o),t.remove(p,o),s=o.domain;break}catch(d){}}return f.dispatch(c.SET_COOKIE_DOMAIN,s),s}(a.getLocation(),!0)),r.domain=m}if(r.domain&&g.push("domain="+r.domain),i.isUndefined(r.path)&&(r.path="/"),r.path&&g.push("path="+r.path),i.isUndefined(r.expires)){var y=i.isUndefined(r.maxAge)?l.getDefaultAgeInSeconds():r.maxAge;r.expires=new Date(o.now()+1e3*y)}if(i.isUndefined(r.expires)||g.push("expires="+r.expires.toUTCString()),r.secure&&g.push("secure"),u.setCookie(n+"="+(r.encodeValue?encodeURIComponent(e):e)+";"+g.join(";")),s){var _=r.encodeValue,b=t.get(n,_);if(b!==e){if(!b)throw new d('Failed to set cookie "'+n+'"');throw new h('Expected "'+e+'" for "'+n+'", got "'+b+'"')}}},t.remove=function(n,e){for(var r=a.getLocation().hostname.split(".");r.length>0;)t.set(n,null,i.extend({},e,{domain:"."+r.join("."),expires:new Date(0)}),!1),r.shift()};var v=["optimizely.test"],p="optimizelyDomainTestCookie"},1758:function(n,t,e){var i=e(3467),r=i("InternalError");t.G=r,t.U=function(n){return i(n,r)}},7831:function(n,t,e){var i=e(7023),r=e(2454).Promise;n.exports=function(){var n,t,e=new r((function(e,i){n=e,t=i}));return e.resolve=function(){return n.apply(null,i.toArray(arguments)),e},e.reject=function(){return t.apply(null,i.toArray(arguments)),e},e}},6040:function(n,t,e){var i=e(7023);t.deepFreeze=function(n){},t.safeReference=function(n){return i.cloneDeep(n)}},3052:function(n,t,e){var i=e(7023);t.getFieldValue=function(n,t){i.isArray(t)||(t=[t]);for(var e=n,r=0;r<t.length;r++){var o=t[r];if(!i.isObject(e)||!e.hasOwnProperty(o))return;e=e[o]}return e},t.setFieldValue=function(n,t,e){if(!i.isArray(t)||i.isEmpty(t))throw new Error("Attempted to set an invalid key path: "+t);for(var r=n,o=0;o<t.length-1;o++){var u=t[o];i.isObject(r[u])||(r[u]={}),r=r[u]}r[t[t.length-1]]=e}},3553:function(n,t,e){var i=e(7023);t.create=function(n){if(i.isEmpty(n))return null;var t=document.createElement("a");return t.href=n,t}},307:function(n,t,e){var i=e(7023),r=e(3005),o=e(9455),u=e(5369),a=e(2672),c=e(4395);function s(){this.logLevel=null,this.logMatch=null,this.logs=[],this.timebase=o.now()}s.prototype.me=function(){return!i.isNull(this.logLevel)},s.prototype.setLogLevel=function(n){var t=this.ye(n);null===t?console.error("Unknown log level: "+n):this.logLevel!==t&&(this.log("Setting log level to "+t),this.logLevel=t,this.flush())},s.prototype.setLogMatcher=function(n){i.isString(n)?this.logMatcher=n:this.logMatcher="",this.logGroup=0},s.prototype.shouldLog=function(n){return this.me()&&this.logLevel>=n},s.prototype.matchesLogMessage=function(n,t){var e=this.logMatcher;if(!this.logMatcher)return!0;if(this.logGroup)return"GROUPSTART"===n?this.logGroup++:"GROUPEND"===n&&this.logGroup--,!0;var r=i.some(t,(function(n){if(!i.isString(n))try{n=c.stringify(n)}catch(t){}return i.isString(n)&&i.includes(n,e)}));return r&&"GROUPSTART"===n&&this.logGroup++,r},s.prototype.storeLog=function(n,t){var e={logLevel:n,logMessage:t};a.dispatch(r.LOG,e)},s.prototype.flush=function(){var n=e(9185).get("stores/log");this.logGroup=0;var t=n.getLogs();i.each(t,i.bind((function(n){this._e(n.logLevel,n.logMessage,!0)}),this))},s.prototype._e=function(n,t,e){var r,o=n;if(console)switch(n){case"GROUPSTART":r=console.groupCollapsed,o=u.LogLevel.DEBUG;break;case"GROUPEND":r=console.groupEnd,o=u.LogLevel.DEBUG;break;case u.LogLevel.ERROR:r=console.error;break;case u.LogLevel.WARN:r=console.warn;break;case u.LogLevel.DEBUG:r=console.debug;break;default:r=console.log}try{e||this.me()&&!this.shouldLog(o)||(i.isArray(t)&&i.isString(t[0])&&(t=this.be(t)),this.storeLog(n,t)),r&&this.shouldLog(o)&&this.matchesLogMessage(n,t)&&r.apply(console,t)}catch(a){console&&(console.error?console.error(a):console.log(a))}},s.prototype.debug=function(){this._e(u.LogLevel.DEBUG,[].slice.call(arguments))},s.prototype.log=function(){this._e(u.LogLevel.INFO,[].slice.call(arguments))},s.prototype.logAlways=function(){var n=this.be([].slice.call(arguments));console&&console.log&&console.log.apply&&console.log.apply(console,n),this.storeLog(u.LogLevel.INFO,n)},s.prototype.warn=function(){this._e(u.LogLevel.WARN,[].slice.call(arguments))},s.prototype.error=function(n){var t=[].slice.call(arguments);1===t.length&&n.stack?(this._e(u.LogLevel.ERROR,[this.we(),n]),this._e(u.LogLevel.INFO,[n.stack])):this._e(u.LogLevel.ERROR,t)},s.prototype.groupCollapsed=function(){this._e("GROUPSTART",[].slice.call(arguments))},s.prototype.groupEnd=function(){this._e("GROUPEND",[].slice.call(arguments))},s.prototype.be=function(n){var t=this.we().toString();return t.length<6&&(t=("     "+t).slice(-6)),[t+"| Optly / "+n[0]].concat(n.slice(1))},s.prototype.we=function(){return this.timebase?o.now()-this.timebase:0},s.prototype.ye=function(n){return n&&("TRUE"===(n=n.toUpperCase())&&(n="INFO"),"FALSE"===n&&(n="OFF"),"ALL"===n&&(n="DEBUG"),!i.isUndefined(u.LogLevel[n]))?u.LogLevel[n]:null},n.exports=new s},5131:function(n,t,e){n.exports=e(2550)},1994:function(n,t){t.isSingleExperimentPolicy=function(n){return"single_experiment"===n||"multivariate"===n}},3916:function(n,t,e){var i=e(7023),r=e(2454).Promise,o=e(8231);t.pollFor=function(n,t,e){var u,a;return i.isFunction(e)?a=e:(u=e||100,a=function(){return--u<-1}),t=t||50,new r((function(e,i){!function r(){var u;if(!a()){try{var c=n();if(c)return e(c)}catch(s){u=s}return o.setTimeout(r,t)}i(u||new Error("Poll timed out"))}()}))}},3961:function(n,t,e){var i=e(7023),r=e(2454).Promise;t.firstToResolve=function(n){return new r((function(t){i.each(n,(function(n){r.resolve(n).then(t,(function(){}))}))}))}},9965:function(n,t,e){var i=e(7023),r=e(8231);t.getQueryParams=function(){var n=r.getLocationSearch()||"";if(0===n.indexOf("?")&&(n=n.substring(1)),0===n.length)return[];for(var t=n.split("&"),e=[],i=0;i<t.length;i++){var o="",u="",a=t[i].split("=");a.length>0&&(o=a[0]),a.length>1&&(u=a[1]),e.push([o,u])}return e},t.getQueryParamValue=function(n){for(var e=t.getQueryParams(),i=0;i<e.length;i++)if(e[i][0]===n)return e[i][1]},t.queryStringFromMap=function(n){return i.map(n,(function(n,t){return t+"="+n})).join("&")}},448:function(n,t,e){var i=e(7023),r=e(307),o=e(8231);function u(n){this.windowLength=n,this.count=0,this.listeners={},this.isIncrementingTick=!1}u.prototype.countCurrentTick=function(){this.isIncrementingTick||(this.isIncrementingTick=!0,this.increment(),o.setTimeout(i.bind((function(){this.isIncrementingTick=!1}),this),0))},u.prototype.increment=function(){this.count+=1,i.forEach(this.listeners[String(this.count)],(function(n){n()})),o.setTimeout(i.bind(this.decrement,this),this.windowLength)},u.prototype.decrement=function(){this.count-=1,this.count<0&&(r.warn("Decremented down to negative count: ",this.count),this.count=0)},u.prototype.addListener=function(n,t){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(t)},n.exports=u},3828:function(n,t,e){var i=e(7023),r=e(9185).get("stores/observed_redirect");t.getReferrer=function(){var n=r.get();return n?n.referrer:null},t.getExperimentAndVariation=function(){var n=r.get();return n&&i.isString(n.variationId)?i.pick(n,["experimentId","variationId"]):null}},8720:function(n,t,e){var i=e(7023),r=e(3005),o=e(9455),u=e(9185),a=e(9230),c=e(5369),s=e(2672),f=e(307),l=u.get("stores/sandbox"),d=e(8231);t.shouldSandbox=function(){return!1},t.get=function(n){if(!n)throw new Error("Name is required");if(t.shouldSandbox()){l.isInitialized()||h();var e=l.get(n);if(e)return e}return d.getGlobal(n)};var h=function(){try{var n="optimizely_"+o.now(),t=a.createElement("iframe");t.name=n,t.style.display="none",a.appendToHead(t);var e=t.contentWindow,u=t.contentDocument;u.write("<script><\/script>"),u.close();var l=i.mapValues(c.SandboxedFunctions,(function(n){return e[n]}));s.dispatch(r.SANDBOXED_FUNCTIONS_ADDED,{sandboxedFunctions:l}),t.parentNode.removeChild(t)}catch(d){f.warn("Unable to create a sandbox: ",d)}}},2975:function(n,t,e){var i=e(9230),r=e(307),o=e(7628);t.addScriptAsync=function(n,t){var e=i.querySelector("head"),o=i.createElement("script");o.type="text/javascript",o.async=!0,o.src=n,t&&(o.onload=t),e.insertBefore(o,e.firstChild),r.debug("Asynchronously requesting "+n)},t.addScriptSync=function(n,e){try{var u="optimizely_synchronous_script_"+Math.floor(1e5*Math.random());if(-1!==n.indexOf('"'))return void r.error("Blocked attempt to load unsafe script: "+n);i.write('<script id="'+u+'" src="'+n+'"><\/script>');var a=i.querySelector("#"+u);if(!a)throw new Error("DocumentEnv.write failed to append script");a.onload=e,a.onerror=function(i){r.warn("Failed to load script ("+n+") synchronously:",i),t.addScriptAsync(n,e)}}catch(c){r.debug("DocumentEnv.write failed for "+n+": "+c.message);return o.request({url:n,async:!1,contentType:"text/plain",success:function(n){new Function(n.responseText)(),e&&e()}})["catch"]((function(i){r.error("Failed to load "+n+" via synchronous XHR: "+i.message),t.addScriptAsync(n,e)}))}}},733:function(n,t,e){var i=e(2454).Promise,r=e(8231);t.makeTimeoutPromise=function(n){return new i((function(t,e){r.setTimeout((function(){e(new Error("Timed out after "+n+" ms"))}),n)}))}},69:function(n,t,e){var i=e(7023),r=e(9686),o=e(8231),u=e(3005),a=e(9185),c=e(2672),s=a.get("stores/ua_data");t.get=function(){var n=s.get();return i.isEmpty(n)&&(n=r.parseUA(o.getUserAgent()),c.dispatch(u.SET_UA_DATA,{data:n})),n}},6645:function(n,t){t.guessDomain=function(n,t){if(!n)return"";try{return t?n.match(/:\/\/(.[^/]+)/)[1]:n.match(/:\/\/(?:www[0-9]?\.)?(.[^/:]+)/)[1]}catch(e){return""}}},8781:function(n,t,e){var i=e(7023),r=e(2454).Promise,o=e(3005),u=e(9185),a=e(2672),c=e(6306),s=e(1758).U,f=e(9455),l=e(9230),d=e(4395),h=e(3916),v=e(2050),p=e(8231),g=e(307),m=u.get("stores/xdomain"),y=t.Error=s("XDomainStorageError");function _(n){var t;if(i.find(m.getFrames(),{origin:n.origin})){try{t=d.parse(n.data)}catch(s){return void g.debug("XDomain","Ignoring malformed message event:",n)}if("ERROR"===t.type)a.dispatch(o.XDOMAIN_SET_DISABLED,{disabled:!0}),c.emitInternalError(new y("Xdomain Error: "+t.response));else if("SYNC"===t.type)e(9326).time("xdomainStorageSync"),i.each(m.getSubscribers(),(function(n){n(t.response.key,t.response.value)})),e(9326).timeEnd("xdomainStorageSync");else{var r=m.getMessageById(t.id);if(!r){if(g.warn("XDomain","No stored message found for ID",t.id),i.isNumber(t.id)){var u=m.getNextMessageId();t.id>=u?c.emitInternalError(new y("Message ID is greater than expected maximum ID ("+t.id+">"+u+")")):t.id<0?c.emitInternalError(new y("Message ID is < 0: "+t.id)):c.emitInternalError(new y("No stored message found for message ID: "+t.id))}else c.emitInternalError(new y("Message ID is not a number: "+t.id));return}if(!r.resolver)return void g.warn("XDomain","Message already resolved, ignoring:",t.id);r.resolver(t.response),a.dispatch(o.XDOMAIN_SET_MESSAGE,{messageId:t.id,message:{data:{id:t.id,type:r.data.type,key:r.data.key},startTime:r.startTime,endTime:f.now()}})}}else g.debug("XDomain","No frame found for origin: "+n.origin)}function b(n,t){return t||(t=m.getDefaultFrame()),new r((function(e){var r={data:i.extend({},n,{id:m.getNextMessageId()}),resolver:e};t?m.isDisabled()||w(r,t):a.dispatch(o.XDOMAIN_SET_MESSAGE,{messageId:r.data.id,message:r})}))}function w(n,t){var e=n.data;a.dispatch(o.XDOMAIN_SET_MESSAGE,{messageId:n.data.id,message:i.extend({},n,{startTime:f.now()})}),t.target.postMessage(d.stringify(e),t.origin)}t.setItem=function(n,t,e){return b({type:"PUT",key:n,value:t},e)},t.getItem=function(n,t){return b({type:"GET",key:n},t)},t.fetchAll=function(n){return b({type:"GETALL"},n)},t.deleteData=function(n,t){return b({type:"DELETE",visitorId:n},t)},t.subscribe=function(n){a.dispatch(o.XDOMAIN_ADD_SUBSCRIBER,{subscriber:n})},t.loadIframe=function(n,t){return new r((function(i){e(9326).time("xdomainIframeLoad");var r=l.createElement("iframe");r.src=n+t,r.hidden=!0,r.setAttribute("tabindex","-1"),r.setAttribute("title","Optimizely Internal Frame"),r.style.display="none",r.height=0,r.width=0,r.onload=function(){e(9326).timeEnd("xdomainIframeLoad");var u={id:m.getNextFrameId(),target:r.contentWindow,origin:n,path:t};a.dispatch(o.XDOMAIN_ADD_FRAME,u),i(u)},l.appendTo(l.querySelector("body"),r)}))},t.getXDomainUserId=function(n,t){var e,r={},o=i.keys(n);return i.each(t,(function(n){r[n]=[],i.each(o,(function(t){var o=v.getUserIdFromKey(t,n);!e&&o&&(e=o),o&&!i.includes(r[n],o)&&r[n].push(o)}))})),g.debug("XDomain: Found userIds:",r),e},t.load=function(n,e){p.addEventListener("message",_);return h.pollFor((function(){return!!l.querySelector("body")})).then((function(){return t.loadIframe(n,e)})).then((function(n){a.dispatch(o.XDOMAIN_SET_DEFAULT_FRAME,n),m.isDisabled()||i.each(m.getMessages(),(function(t){t.startTime||w(t,n)}))}))}},7628:function(n,t,e){var i=e(7023),r=e(3005),o=e(9455),u=e(2672),a=e(4395),c=e(307),s=e(2454).Promise,f=e(8720);t.isCORSSupported=function(){return"withCredentials"in new(f.get("XMLHttpRequest"))},t.request=function(n){return n=i.extend({method:"GET",async:!0,contentType:"text/plain;charset=UTF-8"},n),new s((function(e,r){if(!t.isCORSSupported())return r("CORS is not supported");var o=new(f.get("XMLHttpRequest"));o.onload=function(){n.success&&n.success(o),e(o)},o.onerror=function(){n.error&&n.error(o),r(o)},i.isObject(n.data)&&(n.data=a.stringify(n.data)),o.open(n.method,n.url,n.async),n.withCredentials&&(o.withCredentials=n.withCredentials),o.setRequestHeader("Content-Type",n.contentType),i.isObject(n.headers)&&i.forEach(n.headers,(function(n,t){o.setRequestHeader(t,n)})),o.send(n.data)}))},t.retryableRequest=function(n,e,a,f){if(!e)return s.reject(new Error("No id specified for request."));if(!t.isCORSSupported())return s.reject(new Error("CORS is not supported."));i.isUndefined(f)&&(f=3),i.isUndefined(a)&&(a=0);var l={id:e,timeStamp:o.now(),data:n,retryCount:a};return u.dispatch(r.SET_PENDING_EVENT,l),c.debug("Sending event ",e),t.request(n).then((function(n){return u.dispatch(r.REMOVE_PENDING_EVENT,{id:e}),n}),(function(n){throw l.retryCount>=f?(u.dispatch(r.REMOVE_PENDING_EVENT,{id:e}),c.warn("Event ",l," could not be sent after ",f," attempts.")):(l.retryCount++,u.dispatch(r.SET_PENDING_EVENT,l),c.debug("Event ",l," failed to send, with error ",n," It will be retried ",f-a," times.")),n}))},t.sendBeacon=t.request},1470:function(n,t,e){var i=e(7023),r=e(3005),o=e(8094),u=e(3298),a=e(9455),c=e(9185),s=e(5369),f=e(6836),l=e(2672),d=e(307),h=e(1898),v=c.get("stores/event_data"),p=c.get("stores/plugins"),g=c.get("stores/rum"),m=c.get("stores/view"),y=c.get("stores/view_data");function _(n,t){i.forEach(n,(function(n){if(n.eventType!==f.CUSTOM){var e=p.getPlugin(s.PluginTypes.eventImplementations,n.eventType);e?t?e.attach(n):e.detach(n):d.warn("No implementation found for event type:",n.eventType,"needed for event:",n)}}))}t.parseViewTags=function(n){var e=t.evaluateViewTags(n);t.setParsedViewTags(n.id,e)},t.updateAllViewTags=function(){var n=m.getActiveViewStates();i.each(n,(function(n){var e=y.get(n.id);t.parseViewTags(e)}))},t.evaluateViewTags=function(n){return n.tags?i.reduce(n.tags,(function(n,t){try{n[t.apiName]=h.getTagValue(t)}catch(r){e=r,(null!=(i=h.Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](e):e instanceof i)?d.warn("Page / Ignoring unparseable tag",t,r):d.error(r)}var e,i;return n}),{}):{}},t.createViewTicket=function(){var n={};return i.each(p.getAllPlugins(s.PluginTypes.viewProviders),(function(t){n[t.provides]=c.evaluate(t.getter)})),n},t.registerViews=function(n){l.dispatch(r.REGISTER_VIEWS,{views:n})},t.activateViaAPI=function(n,e){e&&t.setUserSuppliedViewTags(n.id,e),t.activateMultiple([n],e)},t.getViewsAndActivate=function(n){var e=y.getAllViewsForActivationType(n);t.activateMultiple(e)},t.activateMultiple=function(n,u){var a=[];return i.each(n,(function(n){var c=m.getViewState(n.id),f=t.createViewTicket();if(e(9326).time("setupViewActivation"),c.isActive)if(n.deactivationEnabled)try{t.hasValidStaticConditions(n,f)||t.deactivate(n)}catch(p){d.error("Page / Error evaluating whether to deactivate page ",t.description(n),p)}else d.log("Not activating Page, already active ",t.description(n));else{try{if(!t.hasValidStaticConditions(n,f))return i.isBoolean(c.isActive)||t.setViewActiveState(n,!1),void d.log("Page / Failed to match page conditions for "+t.description(n),n.staticConditions)}catch(p){return i.isBoolean(c.isActive)||t.setViewActiveState(n,!1),void d.error("Page / Error evaluating whether to activate page ",t.description(n),p)}if(a.push(n),t.setViewActiveState(n,!0),d.log("Activated Page",t.description(n)),o.emitViewActivated({view:n,metadata:u}),g.getSampleRum()){var h=n.activationType||s.ViewActivationTypes.immediate;l.dispatch(r.RECORD_ACTIVATION_TYPE_USAGE,{activationType:h,entityId:n.id})}_(v.getByPageId(n.id),!0),e(9326).timeEnd("setupViewActivation")}})),i.isEmpty(a)||o.emitViewsActivated({views:a}),a},t.deactivate=function(n){m.getViewState(n.id).isActive?(t.setViewActiveState(n,!1),d.log("Deactivated Page",t.description(n)),o.emitPageDeactivated({page:n}),_(v.getByPageId(n.id),!1)):d.log("Not deactivating Page, already inactive ",t.description(n))},t.setViewActiveState=function(n,t){l.dispatch(r.SET_VIEW_ACTIVE_STATE,{view:n,timestamp:a.now(),isActive:t})},t.setGlobalTags=function(n){l.dispatch(r.SET_GLOBAL_TAGS,n)},t.setParsedViewTags=function(n,t){l.dispatch(r.UPDATE_PARSED_VIEW_METADATA,{pageId:n,metadata:t})},t.setUserSuppliedViewTags=function(n,t){l.dispatch(r.UPDATE_USER_SUPPLIED_METADATA,{pageId:n,metadata:t})},t.hasValidStaticConditions=function(n,t){var e={};if(i.isEmpty(n.staticConditions))return!0;var o=p.getAllPlugins(s.PluginTypes.viewMatchers);d.groupCollapsed("Page / Evaluating staticConditions:",n.staticConditions),d.debug("Matching to current value:",t);var a=u.evaluate(n.staticConditions,(function(n){var i=n.type,r=o[i];if(!r)throw new Error("Page / No matcher found for type="+i);return r&&(e[n.type]||(e[n.type]=!0)),r.match(t,n)}));return d.groupEnd(),g.getSampleRum()&&a&&l.dispatch(r.RECORD_VIEW_FEATURE_USAGE,{featuresUsed:i.keys(e),entityId:n.id}),a},t.description=function(n){return'"'+n.name+'" ('+n.id+")"},t.isActivationTypeImmediate=function(n){return n===s.ViewActivationTypes.immediate||!n},t.shouldTriggerImmediately=function(n){return n===s.ViewActivationTypes.DOMChanged||n===s.ViewActivationTypes.URLChanged||n===s.ViewActivationTypes.immediate||!n},t.create=function(n,t){return{id:n,apiName:t,category:"other"}},t.createState=function(n){return{id:n,isActive:!0,metadata:{},parsedMetadata:{},userSuppliedMetadata:{}}}},2050:function(n,t,e){var i,r=e(7023),o=e(2672),u=e(3005),a=e(1375),c=e(361),s=e(8505),f=e(9455),l=e(9185),d=e(5369),h=e(4395),v=e(3052),p=e(1100).mM,g=e(307),m=e(2454).Promise,y=e(9965),_=e(5369).VisitorStorageKeys,b=e(8231);i=e(8781);var w=l.get("stores/cookie_options"),E=l.get("stores/global"),I=l.get("stores/layer"),A=l.get("stores/plugins"),S=l.get("stores/rum"),T=l.get("stores/session"),k=l.get("stores/visitor_id"),R=l.get("stores/visitor_bucketing"),x=l.get("stores/visitor"),D=l.get("stores/provider_status");function N(n,t){var e=function(n,e){var i;t.attributionType&&(i=f.now()),o.dispatch(u.SET_VISITOR_ATTRIBUTES,{attributes:[{key:n,value:e,metadata:{lastModified:i}}]})};if(t.getter){var i=t.provides;if(r.isArray(i)||(i=[i]),!(t.isSticky&&!r.isUndefined(v.getFieldValue(n,i)))){var a;try{var c=l.evaluate(t.getter);r.isFunction(c)&&(c=c((function(){return v.getFieldValue(n,i)}),(function(n){e(i,n)}))),r.isUndefined(c)||(t.isAsync?(a=c.then((function(n){e(i,n)}),(function(n){g.warn('Failed to evaluate provider for "'+t.provides+'"; error was:',n)})),o.dispatch(u.SET_VISITOR_ATTRIBUTE_PENDING,{key:i,pending:a})):e(i,c))}catch(s){g.warn('Failed to evaluate getter for provider for "'+t.provides+'"; error was: '+s.message)}return a}}}function C(n){e(9326).time("visitorData");var t=M(n),i=p.getItem(t);return e(9326).timeEnd("visitorData"),r.isString(i)&&(i=U(i)),i}function O(n){var t;if(n.layerId)t=n;else{var e=n;t={layerId:e.i,pageId:e.p,decisionTimestamp:e.t,decisionTicket:{audienceIds:e.a||[]},decision:{layerId:e.i,experimentId:e.x||null,variationId:e.v||null,isLayerHoldback:e.h||!1}}}return t}function P(n,t,e){try{var r=M(n);e||(t=h.stringify(t));try{p.setItem(r,t)}catch(o){throw g.warn("Visitor / Unable to set localStorage key, error was:",o),new Error("Unable to set localStorage")}i.setItem(r,t)}catch(o){g.warn("Unable to persist visitor data:",o.message)}}function M(n){var e=k.getBucketingId();if(!e)throw new Error("Visitor bucketingId not set");var i=t.getNamespace();if(!i)throw new Error("Namespace is not set");return[e,i,n].join("$$")}function L(n,e){if(!k.getBucketingId())throw new Error("Cannot update local store because bucketingId not set");if(F(n)){var i=t.getStorageKeyFromKey(n);if(r.includes(_,i)){var a=M(i);if(!(n.indexOf(a)<=0)&&(e=U(e)))if(i===_.EVENT_QUEUE)o.dispatch(u.SET_FOREIGN_VISITOR_EVENT_QUEUE,{key:n,value:c.deserialize(e)});else if(i===_.EVENTS)o.dispatch(u.SET_FOREIGN_VISITOR_EVENTS,{key:n,value:c.deserialize(e)});else if(i===_.LAYER_STATES)o.dispatch(u.LOAD_PERSISTED_LAYER_STATES,{layerStates:r.map(e,O),merge:!0});else if(i===_.VARIATION_MAP)o.dispatch(u.MERGE_VARIATION_ID_MAP,{variationIdMap:e});else if(i===_.VISITOR_PROFILE){var s=e;r.each(["custom"],(function(n){var t=A.getPlugin(d.PluginTypes.visitorProfileProviders,n);if(t){if(s.profile&&s.metadata){var e=function(n,t,e){var i=x.getAttribute(t),o=x.getAttributeMetadata(t),u=n.profile[t],a=n.metadata[t];if(r.isEmpty(i))return{data:u,metadata:a};var c={};return r.forOwn(u,(function(n,t){var i,u;o&&o[t]&&(i=o[t].lastModified),a&&a[t]&&(u=a[t].lastModified),(e===d.AttributionTypes.FIRST_TOUCH&&i>=u||e===d.AttributionTypes.LAST_TOUCH&&u>=i||r.isUndefined(i)&&u)&&(c.data=c.data||{},c.data[t]=n,u&&(c.metadata=c.metadata||{},c.metadata[t]=c.metadata[t]||{},c.metadata[t].lastModified=u))})),c}(s,n,t.attributionType);if(!r.isEmpty(e)){var i=[];r.forOwn(e.data,(function(t,r){var o=e.metadata[r],u={key:[n,r],value:t,metadata:o};i.push(u)})),o.dispatch(u.SET_VISITOR_ATTRIBUTES,{attributes:i})}}}else g.debug("Attribute type",n,"not used by any audiences")}))}}}}function F(n){return n.split("$$")[0].indexOf("://")>0}function U(n){try{return h.parse(n)}catch(t){return g.debug("Failed to parse: ",n,t),null}}t.getOrGenerateId=function(){return{randomId:t.getCurrentId()||"oeu"+f.now()+"r"+Math.random()}},t.getCurrentId=function(){var n=k.getVisitorIdLocator();return x.getVisitorIdFromAPI()||(n?function(n){var t,e=n.name;switch(n.type){case d.VisitorIdLocatorType.COOKIE:t=s.get(e);break;case d.VisitorIdLocatorType.JS_VARIABLE:t=b.getGlobalByPath(e);break;case d.VisitorIdLocatorType.LOCALSTORAGE:try{t=b.getGlobal("localStorage").getItem(e)}catch(a){throw new Error("Unable to read localStorage: "+a.toString())}break;case d.VisitorIdLocatorType.QUERY:t=y.getQueryParamValue(e)}try{if(!t)throw g.error("Visitor / Customer provided visitor id cannot be found. Type:",n.type," Name:",e),new Error("Failure to obtain visitor id from "+n.type);if(!r.isString(t)&&!r.isNumber(t))throw g.error("Visitor / Customer provided visitor id is not a string or number. Type:",n.type," Name:",e," Id Type:",(i=t)&&"undefined"!=typeof Symbol&&i.constructor===Symbol?"symbol":typeof i),new Error("Customer provided visitor id is not a string or number")}catch(c){throw S.getSampleRum()&&o.dispatch(u.RECORD_VISITOR_ID_ERROR,{isError:!0}),c}var i;S.getSampleRum()&&(o.dispatch(u.RECORD_VISITOR_ID_ERROR,{isError:!1}),o.dispatch(u.RECORD_VISITOR_ID_LOCATOR_USAGE,{visitorIdLocatorType:n.type,entityId:t}));return String(t)}(n):s.get(d.COOKIES.VISITOR_ID))},t.hasSomeData=function(){return p.keys().length>0},t.setId=function(n){var c,f,l=k.getBucketingId();o.dispatch(u.SET_VISITOR_ID,n),k.getBucketingId()!==l&&(!function(){e(9326).time("viewLoadData"),function(n,t){0;e(9326).time("loadBehaviorEvents"),a.initializeStore(n,t),e(9326).timeEnd("loadBehaviorEvents")}(C(_.EVENTS)||[],C(_.EVENT_QUEUE)||[]);var n=(i=_.LAYER_STATES,c=k.getBucketingId(),s=[],f=new RegExp(c+"\\$\\$([^$]+?)\\$\\$"+i),r.each(p.keys(),(function(n){var t=n.match(f);if(t){var e={namespace:t[1],userId:c,item:U(p.getItem(n))};s.push(e)}})),s);var i,c,s,f;r.forEach(n,(function(n){n.item=r.map(n.item,O)})),h=n,v=[],r.each(h,(function(n){r.each(n.item,(function(t){t.namespace=n.namespace,v.push(t)}))})),m=v,o.dispatch(u.LOAD_PERSISTED_LAYER_STATES,{layerStates:r.filter(m,(function(n){return!!n.decision}))}),g=C(_.SESSION_STATE)||{},g=r.extend({lastSessionTimestamp:0,sessionId:null},g),o.dispatch(u.LOAD_SESSION_STATE,g),function(n){var t,e,i=A.getAllPlugins(d.PluginTypes.visitorProfileProviders),a=r.filter(i,(function(n){return r.isFunction(n.restorer)}));n.profile&&n.metadata?(t=n.profile,e=n.metadata):(t=n,e={});t=r.reduce(t,(function(n,t,e){var i=t,o=r.find(a,{provides:e});return o&&(i=o.restorer(t)),n[e]=i,n}),{}),o.dispatch(u.LOAD_EXISTING_VISITOR_PROFILE,{profile:t,metadata:e})}(C(_.VISITOR_PROFILE)||{});var l=C(_.TRACKER_OPTIMIZELY);l&&(y=l,o.dispatch(u.SET_TRACKER_PERSISTABLE_STATE,y));var h,v;var g;var m;var y;t.loadForeignData(),t.removeLegacySessionStateCookies()}(),t.deleteOldLocalData(),i.deleteData(n));try{k.getVisitorIdLocator()||t.maybePersistVisitorId(n)}catch(h){if(g.error("Visitor / Unable to persist visitorId, disabling tracking"),o.dispatch(u.LOAD_DIRECTIVE,{trackingDisabled:!0}),c=h,null!=(f=s.MismatchError)&&"undefined"!=typeof Symbol&&f[Symbol.hasInstance]?f[Symbol.hasInstance](c):c instanceof f)throw g.error("Visitor / Cookie not set to correct value:",h),new Error("Cookie mismatch error while persisting visitorId");throw h}t.refreshSession()},t.getVariationIdMap=function(){return C(_.VARIATION_MAP)||{}},t.updateVariationIdMap=function(n,t,e){o.dispatch(u.UPDATE_VARIATION_ID_MAP,{layerId:n,experimentId:t,variationId:e})},t.persistVariationIdMap=function(){var n=R.getVariationIdMapString();P(_.VARIATION_MAP,n,!0)},t.getPreferredLayerMap=function(){return C(_.LAYER_MAP)||{}},t.updatePreferredLayerMap=function(n,t){o.dispatch(u.UPDATE_PREFERRED_LAYER_MAP,{groupId:n,layerId:t})},t.persistTrackerOptimizelyData=function(n){P(_.TRACKER_OPTIMIZELY,n)},t.refreshSession=function(){o.dispatch(u.REFRESH_SESSION)},t.populateEagerVisitorData=function(n,i){e(9326).time("populateEagerVisitorData");var o=r.filter(n,(function(n){return!n.isLazy})),u=t.populateVisitorData(o,i);return e(9326).time("populateEagerVisitorData"),u},t.populateLazyVisitorData=function(n,e){var i=r.filter(n,(function(n){return n.isLazy}));return t.populateVisitorData(i,e)},t.populateVisitorData=function(n,t){t=t||{};var i=r.partial(N,t),o=r(n).filter({isAsync:!0}).map(i).filter().value();return e(9326).time("visitorSyncProviders"),r.forEach(r.filter(n,(function(n){return!n.isAsync})),i),e(9326).timeEnd("visitorSyncProviders"),o.length>0?m.all(o):m.resolve()},t.persistBehaviorEvents=function(n){P(_.EVENTS,n)},t.persistBehaviorEventQueue=function(n){P(_.EVENT_QUEUE,n)},t.getPersistedBehaviorEventCount=function(){var n=C(_.EVENTS)||[],t=C(_.EVENT_QUEUE)||[];return c.deserialize(n).length+c.deserialize(t).length},t.persistLayerStates=function(){var n=I.getLayerStates(t.getNamespace());n=r.map(n,(function(n){return r.omit(n,"namespace")})),P(_.LAYER_STATES,n)},t.persistSessionState=function(){P(_.SESSION_STATE,T.getState())},t.persistVisitorProfile=function(){P(_.VISITOR_PROFILE,function(){var n=x.getVisitorProfile(),t=x.getVisitorProfileMetadata(),e=A.getAllPlugins(d.PluginTypes.visitorProfileProviders);if(e){var i=r.reduce(e,(function(n,t){return t.provides&&(n[t.provides]=t),n}),{});n=r.omitBy(n,(function(n,t){var e=i[t];return e&&e.isTransient}))}return{profile:n,metadata:t}}())},t.persistVisitorBucketingStore=function(){var n;t.persistVariationIdMap(),n=R.getPreferredLayerMapString(),P(_.LAYER_MAP,n,!0)},t.getUserIdFromKey=function(n,e){var i;return r.includes(n,e)&&r.includes(n,"_")&&r.includes(n,"$$")&&r.includes(n.slice(n.indexOf("$$")),t.getNamespace())&&(i=n.slice(n.indexOf("_")+1,n.indexOf("$$"))),i},t.maybePersistVisitorId=function(n){n.randomId&&(w.getAutoRefresh()||t.getCurrentId()!==n.randomId?(s.set(d.COOKIES.VISITOR_ID,n.randomId),g.log("Persisting visitorId:",n.randomId)):g.log("Not persisting visitorId: value is not changed and also auto-refresh is disabled"))},t.getAttribute=function(n){return x.getAttribute(n)},t.getPendingAttributeValue=function(n){return D.getPendingAttributeValue(n)},t.isForeignKey=F,t.checkKeyForVisitorId=function(n){var e=k.getBucketingId()||t.getCurrentId(),i=t.getIdFromKey(n);return!i||i===e},t.getIdFromKey=function(n){var e=n.split("$$")[0],i=t.getStorageKeyFromKey(n);if(r.includes(d.StorageKeys,i))return null;var o=e.indexOf("_");return-1===o?e:e.substring(o+1)},t.getStorageKeyFromKey=function(n){var t,e=n.split("$$").pop();if(e.indexOf("://")>-1){var i=e.indexOf("_");t=e.substring(i+1)}else t=e;return r.includes(r.values(d.AllStorageKeys),t)?t:null},t.deleteOldLocalData=function(){var n=p.keys();r.each(n,(function(n){t.isForeignKey(n)||t.checkKeyForVisitorId(n)||p.removeItem(n)}))},t.deleteOldForeignData=function(){var n=p.keys();r.each(n,(function(n){t.isForeignKey(n)&&p.removeItem(n)}))},t.loadForeignData=function(){r.each(p.keys(),(function(n){var t=p.getItem(n);t&&L(n,t)}))},t.getNamespace=function(){return E.getNamespace()},t.serializeFieldKey=function(n){return r.isArray(n)?n.join("$$"):n},t.removeLegacySessionStateCookies=function(){var n=s.getAll();r.forEach(r.keys(n),(function(n){0===n.indexOf(d.COOKIES.SESSION_STATE+"$$")&&s.remove(n)}))}},4976:function(n,t,e){var i=e(7023),r=e(5369);t.normalizeClientData=function(n){!n.listTargetingKeys&&n.listTargetingCookies&&(n.listTargetingKeys=i.map(n.listTargetingCookies,(function(n){return{type:r.ListTargetingKeyTypes.COOKIE,key:n}})),delete n.listTargetingCookies)}},4418:function(n,t,e){e(9185).register("env/jquery",e(575))},575:function(n,t,e){e(8231);n.exports=e(3307)},1271:function(n){n.exports={}},7136:function(n,t,e){function i(n,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}var r=e(7023),o=e(1758).G,u=e(9455),a=e(9185),c=e(9230),s=e(307),f=e(8231),l=e(7628),d=a.get("stores/client_metadata"),h=a.get("stores/global");function v(n){return n&&n.engine?n.engine:d.getClientName()}t.handleError=function(n,t){var e=function(){return l.request({url:"https://errors.client.optimizely.com/log",method:"POST",data:m,contentType:"application/json"}).then((function(n){s.log("Error Monitor / Logged error with response: ",n)}),(function(n){s.error("Failed to log error, response was: ",n)}))},a=n.name||"Error",p=n.message||"",g=n.stack||null;i(n,o)&&(i(p,Error)?(p=p.message,g=n.message.stack):g=null);var m={timestamp:u.now(),clientEngine:v(t),clientVersion:d.getClientVersion(),accountId:h.getAccountId(),projectId:h.getProjectId(),errorClass:a,message:p,stacktrace:g},y=r.map(h.getExperimental(),(function(n,t){return{key:"exp_"+t,value:String(n)}}));t&&r.forEach(t,(function(n,t){r.isObject(n)||y.push({key:t,value:String(n)})}),[]),r.isEmpty(y)||(m.metadata=y),s.error("Logging error",m),c.isLoaded()?e():f.addEventListener("load",e)}},7349:function(n,t,e){var i=e(7023),r=e(3005),o=e(6306),u=e(1913),a=e(1758).U,c=e(8111),s=e(7831),f=e(9185).get("stores/directive"),l=e(9230),d=e(6901),h=e(2672),v=e(307),p=e(448),g=e(8624),m=e(1343).create(),y=1e3,_=10,b=a("ChangeOverheatError");function w(n,t){if(this.change=n,this.identifier=t.identifier,this.startTime=t.startTime,f.shouldObserveChangesIndefinitely()){h.dispatch(r.INITIALIZE_CHANGE_METRICS),this.rateMeter=new p(y);var e=i.isNull(_)?Number.POSITIVE_INFINITY:_;this.rateMeter.addListener(e,i.bind((function(){v.warn("AppendChange",this,"has overheated and will no longer apply or reapply"),this.cancel(),h.dispatch(r.RECORD_CHANGE_OVERHEATED),o.emitError(new b("Change "+this.identifier+" has overheated"),{layerId:t.action&&t.action.layerId,experimentId:t.action&&t.action.experimentId,variationId:t.action&&t.action.variationId,changeId:n.id,changeType:n.type,movingWindowMilliseconds:y,maxMacroTasksInMovingWindow:e})}),this));for(var u=Math.min(e,50),a=0;a<=u;a++)this.rateMeter.addListener(a,i.partial((function(n){h.dispatch(r.RECORD_CHANGE_MACROTASK_RATE,{changeMacrotaskRate:n})}),a))}}w.prototype.numberOfRootNodes=function(n){var t=document.createElement("div");return t.innerHTML=n,t.childNodes.length},w.prototype.getSiblingElements=function(n,t,e){for(var i=n,r=[],o=0;o<t;o++)e?(r.push(i.nextSibling),i=i.nextSibling):(r.push(i.previousSibling),i=i.previousSibling);return r},w.prototype.apply=function(){this.applyDeferred=s();try{if(!this.numberOfRootNodes(this.change.value))throw new Error("No DOM elements to be created for this change: "+this.change.value);var n=i.partial(this.applyDeferred.reject,new Error("Unable to find selector.")),t={};f.shouldObserveChangesUntilTimeout()?t={timeout:i.partial(g.isTimedOut,this.startTime),onTimeout:n}:f.isEditor()&&m.waitUntil(i.partial(g.isTimedOut,this.startTime)).then(n,n),this.unobserveSelector=m.observeSelector(this.change.selector,i.bind(this.maybeApplyToElement,this),t);var e=l.querySelectorAll(this.change.selector);i.each(e,i.bind(this.maybeApplyToElement,this))}catch(r){this.applyDeferred.reject(r)}return this.applyDeferred},w.prototype.maybeApplyToElement=function(n){var t=u.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id;if(n.hasAttribute(t))return v.debug("Not applying AppendChange to element",n,"because it was inserted by this change"),void this.applyDeferred.resolve();this.rateMeter&&this.rateMeter.countCurrentTick(),i.bind(this.applyOrReapplyToElement,this,n,t)(),this.applyDeferred.resolve()},w.prototype.applyOrReapplyToElement=function(n,t){var e;switch(this.change.operator){case d.DOMInsertionType.AFTER:e=d.insertAdjacentHTMLType.AFTER_END;break;case d.DOMInsertionType.APPEND:e=d.insertAdjacentHTMLType.BEFORE_END;break;case d.DOMInsertionType.BEFORE:e=d.insertAdjacentHTMLType.BEFORE_BEGIN;break;case d.DOMInsertionType.PREPEND:e=d.insertAdjacentHTMLType.AFTER_BEGIN;break;default:e=d.insertAdjacentHTMLType.BEFORE_END}n.insertAdjacentHTML(e,this.change.value),n.setAttribute(t,""),c.setData(n,this.change.id,this.identifier,[]);var r,o,u=this.numberOfRootNodes(this.change.value)-1;e===d.insertAdjacentHTMLType.BEFORE_END?(r=n.lastChild,o=this.getSiblingElements(r,u,!1)):e===d.insertAdjacentHTMLType.AFTER_BEGIN?(r=n.firstChild,o=this.getSiblingElements(r,u,!0)):e===d.insertAdjacentHTMLType.BEFORE_BEGIN?(r=n.previousSibling,o=this.getSiblingElements(r,u,!1)):e===d.insertAdjacentHTMLType.AFTER_END&&(r=n.nextSibling,o=this.getSiblingElements(r,u,!0)),o.unshift(r),i.each(o,i.bind((function(n){var e=n.nodeType===Node.ELEMENT_NODE?n:l.parentElement(n);e.setAttribute(t,"");var r=c.getData(e,this.change.id,this.identifier)||[];r.push(n),c.setData(e,this.change.id,this.identifier,r),i.each(l.childrenOf(e),(function(n){n.setAttribute(t,"")}))}),this))},w.prototype.cancel=function(){this.unobserveSelector&&this.unobserveSelector()},w.prototype.undo=function(){var n=u.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id,t=l.querySelectorAll("["+n+"]");return i.each(t,i.bind((function(t){var e=c.getData(t,this.change.id,this.identifier)||[];i.each(e,(function(n){n.parentNode.removeChild(n)})),t.removeAttribute(n),c.removeData(t,this.change.id,this.identifier),i.each(l.childrenOf(t),(function(t){t.removeAttribute(n)}))}),this)),s().resolve(d.changeState.UNAPPLIED)},n.exports=function(n){n.registerChangeApplier(d.changeType.APPEND,w)}},9748:function(n,t,e){var i=e(7023),r=e(6901);t.transformVisibilityAttributesToCSS=function(n){if(!n.attributes)return n;if(n.attributes[r.selectorChangeType.HIDE]||n.attributes[r.selectorChangeType.REMOVE]){var t=i.extend({css:{}},i.cloneDeep(n));return n.attributes[r.selectorChangeType.HIDE]&&(t.css.visibility="hidden",delete t.attributes[r.selectorChangeType.HIDE]),n.attributes[r.selectorChangeType.REMOVE]&&(t.css.display="none",delete t.attributes[r.selectorChangeType.REMOVE]),t}return n},t.createStylesFromChange=function(n,t){if(i.isEmpty(t.css))return t.attributes.style;var e="",r=t.attributes.style||"";return i.each(t.css,(function(n,t){new RegExp(t+"\\s?:").test(r)||(e+=t+":"+n+";")})),i.isUndefined(t.attributes.style)?(n||"")+e:e+r}},8481:function(n,t,e){var i=e(7023),r=(e(2454).Promise,e(3005)),o=e(6306),u=e(1913),a=e(1758).U,c=e(8111),s=e(7831),f=e(9185).get("stores/directive"),l=e(9230),d=e(6901),h=e(2672),v=e(307),p=e(1082),g=e(448),m=e(8624),y=e(8231),_=e(9748),b=e(1343).create(),w={attributes:!0,childList:!0,subtree:!0,characterData:!0},E=1e3,I=10,A=a("ChangeOverheatError");function S(n,t){if(this.change=i.cloneDeep(n),this.change=_.transformVisibilityAttributesToCSS(this.change),this.identifier=t.identifier,this.startTime=t.startTime,this.disconnectObserverQueue=[],f.shouldObserveChangesIndefinitely()){h.dispatch(r.INITIALIZE_CHANGE_METRICS),this.rateMeter=new g(E);var e=i.isNull(I)?Number.POSITIVE_INFINITY:I;this.rateMeter.addListener(e,i.bind((function(){v.warn("AttributeChange",this,"has overheated and will no longer apply or reapply"),this.cancel(),h.dispatch(r.RECORD_CHANGE_OVERHEATED),o.emitError(new A("Change "+this.identifier+" has overheated"),{layerId:t.action&&t.action.layerId,experimentId:t.action&&t.action.experimentId,variationId:t.action&&t.action.variationId,changeId:n.id,changeType:n.type,movingWindowMilliseconds:E,maxMacroTasksInMovingWindow:e})}),this));for(var u=Math.min(e,50),a=0;a<=u;a++)this.rateMeter.addListener(a,i.partial((function(n){h.dispatch(r.RECORD_CHANGE_MACROTASK_RATE,{changeMacrotaskRate:n})}),a))}this.cancelled=!1}S.prototype.apply=function(){this.applyDeferred=s();try{if(i.isEmpty(this.change.attributes)&&i.isEmpty(this.change.css))return v.debug("Not applying empty AttributeChange"),this.applyDeferred.resolve(),this.applyDeferred;var n=i.partial(this.applyDeferred.reject,new Error("Unable to find selector.")),t={};f.shouldObserveChangesUntilTimeout()?t={timeout:i.partial(m.isTimedOut,this.startTime),onTimeout:n}:f.isEditor()&&b.waitUntil(i.partial(m.isTimedOut,this.startTime)).then(n,n),this.unobserveSelector=b.observeSelector(this.change.selector,i.bind(this.maybeApplyToElement,this),t);var e=l.querySelectorAll(this.change.selector);i.each(e,i.bind(this.maybeApplyToElement,this))}catch(r){this.applyDeferred.reject(r)}return this.applyDeferred},S.prototype.maybeApplyToElement=function(n){var t=u.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id;if(n.hasAttribute(t))return v.debug("AttributeChange not being applied. Element already changed, or is a child of an element that was changed by this AttributeChange. "+n),void this.applyDeferred.resolve();this.rateMeter&&this.rateMeter.countCurrentTick();var e=i.bind(this.applyOrReapplyToElement,this,n,t);e();var r=i.bind((function(){var t=i.bind((function(){this.cancelled||p.observe(o,n,w)}),this);return y.setTimeout(t)}),this),o=p.create(i.bind((function(){this.rateMeter&&this.rateMeter.countCurrentTick(),o.disconnect(),e(),r()}),this));r(),this.disconnectObserverQueue.push(i.bind(o.disconnect,o)),this.applyDeferred.resolve()},S.prototype.applyOrReapplyToElement=function(n,t){var e={};i.forOwn(this.change.attributes,(function(r,o){switch(o){case d.selectorChangeType.CLASS:i.isUndefined(n.className)||(e[d.selectorChangeType.CLASS]=n.className,n.className=r);break;case d.selectorChangeType.HREF:i.isUndefined(n.href)||(e[d.selectorChangeType.HREF]=n.href,n.href=r);break;case d.selectorChangeType.HTML:i.isUndefined(n.innerHTML)||(e[d.selectorChangeType.HTML]=n.innerHTML,n.innerHTML=r,i.each(l.childrenOf(n),(function(n){n.setAttribute(t,"")})));break;case d.selectorChangeType.SRC:i.isUndefined(n.src)||(e[d.selectorChangeType.SRC]=n.src,n.src=r);break;case d.selectorChangeType.STYLE:break;case d.selectorChangeType.TEXT:i.isUndefined(n.textContent)||(e[d.selectorChangeType.TEXT]=n.textContent,n.textContent=r);break;default:throw new Error("Unrecognized attribute: "+o)}}));var r=_.createStylesFromChange(n.style.cssText,this.change);i.isString(r)&&(e[d.selectorChangeType.STYLE]=n.style.cssText,n.style.cssText=r),n.setAttribute(t,""),c.setData(n,this.change.id,this.identifier,e)},S.prototype.cancel=function(){this.cancelled=!0,this.unobserveSelector&&this.unobserveSelector(),i.each(this.disconnectObserverQueue,(function(n){try{n()}catch(t){}}))},S.prototype.undo=function(){var n=l.querySelectorAll("["+u.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id+"]");return i.each(n,i.bind((function(n){var t=c.getData(n,this.change.id,this.identifier);t&&i.forOwn(t,(function(t,e){switch(e){case d.selectorChangeType.CLASS:n.className=t;break;case d.selectorChangeType.HREF:n.href=t;break;case d.selectorChangeType.HTML:n.innerHTML=t;break;case d.selectorChangeType.SRC:n.src=t;break;case d.selectorChangeType.STYLE:n.style.cssText=t;break;case d.selectorChangeType.TEXT:n.textContent=t;break;case d.selectorChangeType.HIDE:n.style.visibility=t;break;case d.selectorChangeType.REMOVE:n.style.display=t;break;default:throw new Error("Unrecognized attribute: "+e)}})),n.removeAttribute(u.CHANGE_ID_ATTRIBUTE_PREFIX+this.change.id),c.removeData(n,this.change.id,this.identifier)}),this)),s().resolve(d.changeState.UNAPPLIED)},n.exports=function(n){n.registerChangeApplier(d.changeType.ATTRIBUTE,S)}},5311:function(n,t,e){var i=e(7023),r=e(7831),o=e(6901),u=e(9717);function a(n,t){if(!i.isFunction(n.value))throw new Error("Custom code must be a function");this.change=n}a.prototype.apply=function(){var n=r();try{u.apply(this.change.value),n.resolve()}catch(t){n.reject(t)}return n},a.prototype.undo=function(){return r().resolve(o.changeState.IGNORED)},n.exports=function(n){n.registerChangeApplier(o.changeType.CUSTOM_CODE,a)}},4676:function(n,t,e){var i=e(7023),r=e(2454).Promise,o=e(3005),u=e(5369),a=e(8505),c=e(9230),s=e(6901),f=e(2672),l=e(3553),d=e(307),h=e(8231);function v(n,t){if(this.change=n,this.config=t,this.reasonShouldNotRedirect=this._checkForReasonNotToRedirect(),!this.reasonShouldNotRedirect){if(!i.isString(this.change.dest)&&!i.isFunction(this.change.dest))throw new Error("Redirect destination is not a string or function");if(i.isFunction(this.change.dest)&&(this.change.dest=this.change.dest(),!i.isString(this.change.dest)))throw new Error("Redirect destination function did not evaluate to a string");if(!this.config.action)throw new Error("Redirect changes require an action to be passed in the config.");f.dispatch(o.ANNOUNCE_PENDING_REDIRECT,{layerId:this.config.action.layerId})}}v.prototype.apply=function(){if(this.reasonShouldNotRedirect)return d.warn("Redirect change is not being applied because: "+this.reasonShouldNotRedirect),r.resolve(s.changeState.IGNORED);if(this.reasonInvalid)return d.error("Redirect change cannot be applied because:",this.reasonInvalid),r.reject(this.reasonInvalid);try{this.Ee(this.Ie())}catch(n){return r.reject(n)}return r.resolve(s.changeState.APPLIED)},v.prototype.Ie=function(){var n=l.create(this.change.dest);if(this.change.preserveParameters){var t=h.getLocation().search;t&&(n.search?n.search+="&"+t.substr(1):n.search=t)}return n.toString()},v.prototype.Ae=function(){var n=c.createElement("style");n.setAttribute("type","text/css"),n.innerHTML="body{display:none;visibility:hidden;}",c.appendToHead(n)},v.prototype.Ee=function(n){(!this.change.hasOwnProperty("hidePage")||this.change.hidePage)&&this.Ae(),h.setLocation(n)},v.prototype._checkForReasonNotToRedirect=function(){var n=a.get(u.COOKIES.REDIRECT);if(!this.change.allowAdditionalRedirect&&!i.isUndefined(n))return"Page was already redirected."},v.prototype.undo=function(){return r.resolve(s.changeState.IGNORED)},n.exports=function(n){n.registerChangeApplier(s.changeType.REDIRECT,v)}},4583:function(n,t,e){var i=e(7023),r=e(7831),o=e(6901),u=e(954);function a(n,t){this.change=i.extend({},n),this.identifier=t.identifier}a.prototype.apply=function(){return u.emit({type:"showWidget",name:this.change.widget_id,data:this.change}),r().resolve(o.changeState.APPLIED)},a.prototype.undo=function(){return u.emit({type:"hideWidget",name:this.change.widget_id,data:this.change}),r().resolve(o.changeState.UNAPPLIED)},n.exports=function(n){n.registerChangeApplier(o.changeType.WIDGET,a)}},2974:function(n,t,e){var i=e(7023),r=e(3581),o=e(1932),u=e(1628).E,a={decideLayer:function(n,t){if(!n.decisionMetadata||!n.decisionMetadata.experimentPriorities)throw new u("No decisionMetadata.experimentPriorities on layer.");for(var e=n.decisionMetadata.experimentPriorities.length,i=0;i<e;i++){var r=c(n,t.audienceIds,t.bucketingId,i);if(r){var a=o.selectVariation(r,t.audienceIds,t.bucketingId,t.activationId,t.preferredVariationMap);if(!n.decisionMetadata.offerConsistency||o.hasVariationActionsOnView(a,t.pageId))return{experiment:r,variation:a}}}throw new u("No eligible experiment and variation found.")},includePageIdInDecisionTicket:function(n){return!(!n.decisionMetadata||!n.decisionMetadata.offerConsistency)}};function c(n,t,e,a){var c,s=n.decisionMetadata.experimentPriorities[a],f=i.reduce(s,(function(e,i){var r=o.getExperimentById(n,i.entityId);return o.isValidExperiment(t,r)&&e.push(i.entityId),e}),[]);if(!i.isEmpty(f)){var l,d=i.filter(s,{endOfRange:null});if(d&&d.length===s.length)l=function(n){for(var t=[],e=Math.round(1e4/n.length),i=0;i<n.length;i++)t.push({entityId:n[i],endOfRange:e*(i+1)});return t[t.length-1].endOfRange=1e4,t}(f);else{if(0!==d.length)throw new u("You must specify weights for all or none of the experiments in each priority layer.");l=function(n,t){for(var e=[],r=[],o=0,u=0;u<t.length;u++){var a=0;n.indexOf(t[u].entityId)>=0&&(o+=a=0===u?t[0].endOfRange:t[u].endOfRange-t[u-1].endOfRange,r.push({entityId:t[u].entityId,points:a}))}if(i.isEmpty(e))for(var c=0,s=0;s<r.length;s++){var f=Math.round(1e4*r[s].points/o)+c;e.push({entityId:r[s].entityId,endOfRange:f}),c=f}return e[e.length-1].endOfRange=1e4,e}(f,s)}if(c=r.chooseWeightedCandidate(e,n.id,l)){var h=o.getExperimentById(n,c);if(h)return h}}}n.exports=function(n){n.registerDecider("equal_priority",a)}},5028:function(n,t,e){var i=e(1932),r=e(1628).E,o={selectExperiment:function(n,t,e){if(n.experiments.length<1)throw new r("Unable to find experiment to bucket user into");var o=n.experiments[0];if(!i.isValidExperiment(t,o))throw new r('Audience conditions failed for experiment: "'+o.id+'".');return o}};n.exports=function(n){n.registerDecider("single_experiment",o),n.registerDecider("multivariate",o)}},8991:function(n,t,e){var i=function(n){return n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},r=e(7023),o=e(6306),u=e(1758).U,a=e(9230),c=e(5131),s=t.Error=u("ClickDelegateError");function f(n){this.handler=n,this.events=[],this.unlistenFn=null,this.clickHandler=r.bind((function(n){r.forEach(this.events,r.bind((function(t){try{var e=t.config&&t.config.selector?t.config.selector:t.eventFilter.selector;(function(n,t,e){var u=n.target,a=0;for(;u;){var f;try{f=c(u,t)}catch(d){var l={typeofElementValue:void 0===u?"undefined":i(u),nodeName:r.result(u,["nodeName"],null),nodeType:r.result(u,["nodeType"],null),targetName:r.result(n,["target","nodeName"],null),targetType:r.result(n,["target","nodeType"],null),numParentsTraversed:a,selector:t,errorMessage:d.message,eventId:e.id};return o.emitError(new s("Unable to evaluate match for element"),l),!1}if(f)return!0;u=u.parentElement,a++}return!1})(n,e,t)&&this.handler(t)}catch(u){o.emitError(new s("Unable to handle click for selector"+e+":"+u.message))}}),this))}),this)}f.prototype.listen=function(){this.unlistenFn=a.addEventListener("click",this.clickHandler,!0)},f.prototype.unlisten=function(){this.unlistenFn&&(this.unlistenFn(),this.unlistenFn=null)},f.prototype.hasEvents=function(){return this.events.length>0},f.prototype.addEvent=function(n){this.events.push(n)},f.prototype.removeEvent=function(n){this.events=r.filter(this.events,(function(t){return t.apiName!==n.apiName}))},n.exports=f},6201:function(n,t,e){var i=e(3941),r=e(8991),o=e(307),u=e(1470);function a(n){return"apiName: "+n.apiName+", selector: "+n.eventFilter.selector}n.exports=function(n){var t=new r((function(n){u.updateAllViewTags(),i.trackClickEvent(n)?o.log("Tracking click event:",n):o.log("Not tracking click event:",n)}));n.registerEventImplementation("click",{attach:function(n){t.hasEvents()||t.listen(),t.addEvent(n),o.debug("Started listening for click event ("+a(n)+"):",n)},detach:function(n){t.removeEvent(n),t.hasEvents()||t.unlisten(),o.debug("Stopped listening for click event ("+a(n)+"):",n)}})}},9745:function(n,t,e){var i=e(7023),r=e(4702),o=e(1349),u=e(2071);function a(n,t){var e=o.buildFromSpecV0_1(t);if(1!==e.length)throw new Error("Invalid query descriptor; verify that no aggregators are specified");return u.execute(e[0],n)}function c(n,t){return i.map(n,(function(n){return i.isFunction(n.toObject)?n.toObject(t):n}))}function s(n,t){if(!n)return["Descriptor not defined"];var e=[];return n.count&&e.push('Unexpected "count" clause specified'),n.pick&&n.pick.modifier&&-1===t.indexOf(n.pick.modifier)&&e.push('Invalid "pick" modifier "'+n.pick.modifier+'"'),i.each(n.filters,(function(n){i.isUndefined(n.modifier)||e.push('Unexpected "filter" modifier "'+n.modifier+'"')})),e.length>0?e:void 0}function f(n,t){var e={revenueAsTag:!1,timeAsTimestamp:!0};if(i.isUndefined(t))return c(r.getEvents(n),e);if(i.isNumber(t)){if(t<=0)throw new Error("Count must be a positive integer, got "+t);return c(r.getEvents(n).slice(-t),e)}var u=s(t,i.values(o.RECENCY_FILTERS));if(u)throw new Error(u.join("\n"));return c(a(r.getEvents(n),t),e)}function l(n,t){if(!(t=i.cloneDeep(t)||{}).pick)throw new Error('No "pick" clause provided in query descriptor');if(!t.pick.name)throw new Error('No field name provided in "pick" clause');t.pick.modifier=t.pick.modifier||o.FREQUENCY_FILTERS.MOST_FREQUENT;var e=s(t,i.values(o.FREQUENCY_FILTERS));if(e)throw new Error(e.join("\n"));return a(r.getEvents(n),t)}function d(n,t){var e=o.buildFromSpecV0_2(t),a=r.getEvents(n),s=c(u.execute(e,a),{revenueAsTag:!0,timeAsTimestamp:!1});return(t.pick||t.reduce&&"count"===t.reduce.aggregator)&&(s=i.flatten(s)),t.reduce&&(s=s[0]),s}n.exports=["stores/visitor_events",function(n){return{getEvents:i.partial(f,n),getByFrequency:i.partial(l,n),query:i.partial(d,n)}}]},590:function(n,t,e){n.exports=function(n){n.registerApiModule("behavior",e(9745))}},8580:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(6612)),n.registerAudienceMatcher("behavior",e(2153))}},2153:function(n,t,e){var i=e(7023),r=e(4395),o=e(1349),u=e(2071);n.exports={fieldsNeeded:["events"],match:function(n,t){var e,a=r.parse(t.value);return e=i.isUndefined(a.version)?[a]:o.buildFromSpecV0_1(a),i.every(e,(function(t){return u.isSatisfied(t,n.events)}))}}},6612:function(n,t,e){var i=e(4702);n.exports={provides:"events",isTransient:!0,getter:[function(){return i.getEvents()}]}},4717:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(6639))}},6639:function(n,t,e){var i=e(7023),r=e(1352),o=e(4702),u=e(4395),a=e(1349);n.exports={provides:"customBehavior",shouldTrack:!0,isLazy:!1,getter:["stores/global","stores/visitor_attribute_entity",function(n,t){var e=n.getProjectId(),c=i.filter(i.map(t.getCustomBehavioralAttributes(e),(function(n){try{return{id:n.id,granularity:r.GRANULARITY.ALL,rule:a.buildFromSpecV0_2(u.parse(n.rule_json))}}catch(t){return}}))),s=o.getEvents();return r.evaluate(c,s)}]}},1516:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(7242)),n.registerAudienceMatcher("first_session",e(1002))}},1002:function(n){n.exports={fieldsNeeded:["first_session"],match:function(n){return!!n.first_session}}},7242:function(n,t,e){var i=e(5293),r=e(4702),o=e(3052).getFieldValue,u=e(5554).CURRENT_SESSION_INDEX;n.exports={provides:"first_session",shouldTrack:!0,getter:[function(){var n=r.getEvents();if(n&&n.length>0){var t=n[0];return o(t,[i.FIELDS.SESSION_INDEX])===u}return!0}]}},1352:function(n,t,e){var i=e(307),r={FIELDS:e(5293).FIELDS},o=e(1349),u=e(2071);t.GRANULARITY={ALL:"all",CURRENT_SESSION:"current_session",LAST_30_DAYS:"last_30_days",LAST_60_DAYS:"last_60_days"},t.evaluate=function(n,e){var a={};if(0===e.length){for(var c=0;c<n.length;c++)a[n[c].id]=n[c].defaultValue;return a}var s=function(n){if(0===n.length)return[];for(var t=n.length-1,e=r.FIELDS.SESSION_ID,i=n[t][e];t>0&&i===n[t-1][e];)t--;return n.slice(t)}(e),f=function(n,t){if(0===n.length||t<=0)return[];var e=+new Date-t*o.MILLIS_IN_A_DAY;e-=e%o.MILLIS_IN_A_DAY;for(var i=n.length;i>0&&e<=n[i-1][r.FIELDS.TIME];)i--;return n.slice(i)}(e,60);for(c=0;c<n.length;c++){var l=n[c],d=e;l.granularity===t.GRANULARITY.CURRENT_SESSION?d=s:l.granularity===t.GRANULARITY.LAST_60_DAYS&&(d=f);try{var h=d;l.rule&&(h=u.execute(l.rule,d)),a[l.id]=l.defaultValue,1===h.length?a[l.id]=h[0][0]||l.defaultValue:i.debug("Behavior / Rule for",l.id,"returned",h.length,"results, expected 1")}catch(v){i.error("Behavior / Rule for",l.id,"failed with",v.message||"")}}return a}},4702:function(n,t,e){var i=e(7023),r=e(361),o=e(9185).get("stores/visitor_events");t.getEvents=function(){var n=r.getEvents(),t=[].concat.apply([],i.values(o.getForeignEvents())),e=[].concat.apply([],i.values(o.getForeignEventQueues())),u=r.mergeAllEvents([n,t,e]);return u.slice(u.length-1e3)}},1349:function(n,t,e){var i=t,r=e(7023),o={FIELDS:e(5293).FIELDS,FIELDS_V0_2:e(5293).FIELDS_V0_2},u=e(4395),a=e(307),c=e(2071);i.MILLIS_IN_A_DAY=864e5,i.aggregateField=function(n,t){return r.isString(t)&&(t=[t]),t=t||c.DEFAULT_FIELD,[c.generateAlias(n,t)]},i.groupField=function(n){return r.isString(n)&&(n=[n]),[(n=n||c.DEFAULT_FIELD).join(".")]};var s={"<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","==":"eq"};function f(n){return n=(n||"").toString().trim(),s[n]||n}function l(n,t,e){var u={where:t};if(n.count&&(u.limit=n.count),n.modifier===i.FREQUENCY_FILTERS.MOST_FREQUENT){var a=i.getFieldKeyPathForSource(n.name,e),c=i.aggregate("count"),s=i.aggregateField("count"),f=i.groupField(a);return r.extend(u,{select:[{field:f}],groupBy:i.groupBy([a]),aggregate:[c],orderBy:[{field:s,direction:"DESC"}]})}return r.extend(u,{orderBy:[{field:[o.FIELDS.TIME],direction:"DESC"}]})}i.fieldComparison=function(n,t,e){return n=f(n),r.isString(t)&&(t=[t]),"exists"===n?{op:n,args:[{field:t}]}:{op:n,args:[{field:t},{value:e}]}},i.relativeTimeComparison=function(n,t){return{op:f(n),args:[{op:"-",args:[{eval:"now"},{field:[o.FIELDS.TIME]}]},{value:t*i.MILLIS_IN_A_DAY}]}},i.rangeTimeComparison=function(n){return r.isArray(n)?{op:"between",args:[{field:[o.FIELDS.TIME]},{value:[n[0]||+new Date(0),n[1]||+new Date]}]}:(a.error("Rule builder","rangeTimeComparison passed invalid range",n),null)},i.groupBy=function(n){for(var t=[],e=0;e<n.length;e++)t[e]={field:n[e]};return t},i.aggregate=function(n,t){return r.isString(t)&&(t=[t]),{op:n,args:[{field:t=t||c.DEFAULT_FIELD}]}},i.SOURCE_TYPES={BEHAVIOR:"events",CUSTOM_BEHAVIOR:"custom_behavior",DCP:"dcp"},i.FREQUENCY_FILTERS={MOST_FREQUENT:"most_frequent",LEAST_FREQUENT:"least_frequent"},i.RECENCY_FILTERS={MOST_RECENT:"most_recent",LEAST_RECENT:"least_recent"},i.getFieldKeyPathForSource=function(n,t){t=t||i.SOURCE_TYPES.BEHAVIOR;var e=[];return r.isString(n)?(e=[n],t!==i.SOURCE_TYPES.BEHAVIOR||r.includes(r.values(o.FIELDS),n)||(e=[o.FIELDS.OPTIONS,n])):e=n,e},i.buildFromSpecV0_1=function(n){if(!(n.action||n.filters&&0!==n.filters.length))throw new Error('Audience spec must have an "action" field or at least one "filter" '+u.stringify(n));var t=i.fieldComparison("gt",o.FIELDS.TIME,0),e=[],c=[];if(n.action&&(c.push(i.fieldComparison("eq",o.FIELDS.NAME,n.action.value)),n.action.type&&c.push(i.fieldComparison("eq",o.FIELDS.TYPE,n.action.type))),n.time)if("last_days"===n.time.type)c.push(i.relativeTimeComparison("lte",n.time.days));else if("range"===n.time.type){var s=i.rangeTimeComparison([n.time.start,n.time.stop]);s&&c.push(s)}else a.error("Rule builder",'Audience spec has bad "time" type',n.time.type);if(t={op:"and",args:c},n.count&&e.push({where:i.fieldComparison(n.count.comparator,"0",n.count.value),from:{select:[{field:i.aggregateField("count")}],where:t,aggregate:[i.aggregate("count")]}}),n.filters&&r.each(n.filters,(function(r){var u,a,s=i.getFieldKeyPathForSource(r.name,n.source);if(r.modifier===i.FREQUENCY_FILTERS.MOST_FREQUENT?(u=i.aggregate("count"),a=i.aggregateField("count")):r.modifier===i.RECENCY_FILTERS.MOST_RECENT&&(u=i.aggregate("max",o.FIELDS.TIME),a=i.aggregateField("max",o.FIELDS.TIME)),u){var f=s,l=i.groupField(f);e.push({where:i.fieldComparison(r.comparator,"0",r.value),from:{select:[{field:l}],where:t,groupBy:i.groupBy([f]),aggregate:[u],orderBy:[{field:a,direction:"DESC"}],limit:1}})}else c.push(i.fieldComparison(r.comparator,s,r.value))})),n.pick){if(e.length>0)throw new Error('A "pick" clause must not be specified with "count" or "most_recent", "most_frequent" modifiers'+u.stringify(n));return[l(n.pick,t,n.source)]}return e.length>0?e:[{where:t}]},i.buildFromSpecV0_2=function(n){!function(n){var t=[];if(r.isUndefined(n))throw new Error("rule is undefined");if(!r.isObject(n))throw new Error("rule is not an Object");"0.2"!==n.version&&t.push('version: not "0.2"'),n.filter&&(r.isArray(n.filter)?r.each(n.filter,(function(n,e){var r=i.validateFieldKeyPathV0_2(n.field,i.FieldPurpose.FILTER);r&&t.push("filter["+e+"]: "+r);var o=i.validateComparatorAndValue(n.comparator,n.value);o&&t.push("filter["+e+"]: "+o)})):t.push("filter: not an array"));var e=[],o=[];n.sort&&(n.reduce&&n.reduce.aggregator&&"nth"!==n.reduce.aggregator&&t.push("sort: superfluous because we can apply aggregator "+u.stringify(n.reduce.aggregator)+" to unsorted items"),r.isArray(n.sort)?r.each(n.sort,(function(n,a){var c=i.validateFieldKeyPathV0_2(n.field,i.FieldPurpose.SORT);c&&t.push("sort["+a+"]: "+c),n.field&&"frequency"===n.field[0]?e.push(n):o.push(n);var s=function(n){var t="direction "+(u.stringify(n)||String(n));if(!r.includes(["ascending","descending"],n))return t+' is not "ascending" or "descending"'}(n.direction);s&&t.push("sort["+a+"]: "+s)})):t.push("sort: not an array"),e.length&&o.length&&t.push('sort: sorting by non-["frequency"] field is pointless because we are going to sort the picked values by ["frequency"]'),e.length&&!n.pick&&t.push('sort: sorting by ["frequency"] is impossible because no values have been picked'));if(n.pick){n.reduce&&"count"===n.reduce.aggregator&&t.push('pick: superfluous because we can apply aggregator "count" to raw events');var a=i.validateFieldKeyPathV0_2(n.pick.field);a&&t.push("pick: "+a)}if(n.reduce){var c=n.reduce.aggregator,s="aggregator "+(u.stringify(c)||String(c)),f=n.reduce.n,l="index "+(u.stringify(f)||String(f));r.includes(["sum","avg","max","min","count","nth"],c)||t.push("reduce: "+s+" is unknown"),r.includes(["sum","avg","max","min"],c)&&(n.pick||t.push("reduce: "+s+" is impossible to use because no values have been picked")),"nth"===c?((!r.isNumber(f)||isNaN(f)||parseInt(f,10)!==f||f<0)&&t.push("reduce: "+l+" is not a non-negative integer (mandated by "+s+")"),n.sort||t.push('reduce: aggregator "nth" is meaningless without a specific sort order')):r.isUndefined(f)||t.push("reduce: "+l+" is defined (not mandated by "+s+")")}if(t.length)throw new Error(t.join("\n"))}(n);var t={where:{op:"and",args:r.map(n.filter||[],(function(n){return"age"===n.field[0]?i.relativeTimeComparison(n.comparator||"eq",n.value/i.MILLIS_IN_A_DAY):i.fieldComparison(n.comparator||"eq",i.convertFieldKeyPathFromSpecV0_2(n.field),n.value)}))}};if(n.reduce&&"count"===n.reduce.aggregator)return r.extend(t,{aggregate:[{op:"count",args:[{field:["*"]}]}],select:[{field:["_count_*"]}]});var e=[],o=[];if(n.sort&&(r.each(n.sort,(function(n){r.includes(["ascending","descending"],n.direction)&&(r.includes(["time","age"],n.field[0])&&o.push(n),"frequency"===n.field[0]&&e.push(n))})),o.length&&!e.length&&(t.orderBy=r.filter(r.map(o,(function(n){return"time"===n.field[0]?{field:i.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===n.direction?"ASC":"DESC"}:"age"===n.field[0]?{field:i.convertFieldKeyPathFromSpecV0_2(["time"]),direction:"ascending"===n.direction?"DESC":"ASC"}:void 0}))))),n.pick&&n.pick.field){var a=i.convertFieldKeyPathFromSpecV0_2(n.pick.field);if(n.reduce&&r.includes(["avg","max","min","sum"],n.reduce.aggregator))return r.extend(t,{aggregate:[{op:n.reduce.aggregator,args:[{field:a}]}],select:[{field:[c.generateAlias(n.reduce.aggregator,a)]}]});t=e.length?r.extend(t,{groupBy:[{field:a}],aggregate:[{op:"count",args:[{field:["*"]}]}],orderBy:[{field:["_count_*"],direction:"ascending"===e[0].direction?"ASC":"DESC"}],select:[{field:[a.join(".")]}]}):r.extend(t,{select:[{field:a}]})}if(n.reduce&&"nth"===n.reduce.aggregator){var s=n.reduce.n;if(r.isNumber(s)&&s>=0&&Number(s)===Math.floor(Number(s)))return r.extend(t,{offset:s,limit:1})}return t},i.convertFieldKeyPathFromSpecV0_2=function(n){return"tags"===n[0]&&"revenue"===n[1]?["r"]:[o.FIELDS_V0_2[n[0]]].concat(n.slice(1))},i.FieldPurpose={FILTER:"filter",SORT:"sort",PICK:"pick"},i.validateFieldKeyPathV0_2=function(n,t){var e="field "+(u.stringify(n)||String(n));if(!r.isArray(n)||!r.every(n,r.isString))return e+" is not an array of strings";if("tags"===n[0]&&n.length>2||"tags"!==n[0]&&n.length>1)return e+" includes too many strings";if("tags"===n[0]&&n.length<2)return e+" does not specify an exact tag";if(n.length<1)return e+" does not specify a top-level field";var a=r.keys(o.FIELDS_V0_2),c=["age","frequency"];return t===i.FieldPurpose.FILTER&&(a.push("age"),c=["frequency"]),t===i.FieldPurpose.SORT&&(a=["time","age","frequency"],c=["name","type","category","tags"]),r.includes(c,n[0])?e+" is not supported here":r.includes(a,n[0])?void 0:e+" is unknown"},i.validateComparatorAndValue=function(n,t){var e="comparator "+(u.stringify(n)||String(n)),i="value "+(u.stringify(t)||String(t));if(!r.isString(n)&&!r.isUndefined(n))return e+" is not a string";switch(n){case void 0:case"eq":case"is":case"contains":break;case"lt":case"gt":case"lte":case"gte":if(!r.isNumber(t))return i+" is not a number (mandated by "+e+")";break;case"in":if(!r.isArray(t))return i+" is not an array (mandated by "+e+")";break;case"between":if(!(r.isArray(t)&&2===t.length&&r.isNumber(t[0])&&r.isNumber(t[1])&&t[0]<=t[1]))return i+" is not a pair of increasing numbers (mandated by "+e+")";break;case"regex":if(!(r.isString(t)||r.isArray(t)&&2===t.length&&r.isString(t[0])&&r.isString(t[1])))return i+" is not a pattern string or a [pattern string, flags string] array (mandated by "+e+")";break;case"exists":if(!r.isUndefined(t))return i+" is not undefined (mandated by "+e+")";break;default:return e+" is unknown"}}},2071:function(n,t,e){var i=e(7023),r=e(5369),o=e(307),u=i.bind(o.log,o),a=e(9455),c=e(3052).getFieldValue,s=e(4395),f=function(n,t,e){if(n.getValueOrDefault)return n.getValueOrDefault(t,e);if(!i.isArray(t))return e;var r=c(n,t);return void 0===r&&(r=e),r},l=function(n){return"string"==typeof n?n.trim().toLowerCase():n};t.clause={WHERE:"where",GROUP_BY:"groupBy",AGGREGATE:"aggregate",HAVING:"having",ORDER_BY:"orderBy",SELECT:"select",OFFSET:"offset",LIMIT:"limit",FROM:"from"},t.DEFAULT_FIELD=["*"],t.booleanOperators={eq:function(n){var t=i.map(n,l);return t[0]==t[1]},is:function(n){return n[0]===n[1]},gt:function(n){return n[0]>n[1]},lt:function(n){return n[0]<n[1]},gte:function(n){return n[0]>=n[1]},lte:function(n){return n[0]<=n[1]},"in":function(n){var t=i.map(n[1]||[],l);return i.includes(t,l(n[0]))},between:function(n){return n[1][0]<=n[0]&&n[0]<=n[1][1]},contains:function(n){var t=i.map(n,(function(n){return"string"==typeof n?n.toLowerCase():n}));return-1!==(t[0]||"").indexOf(t[1])},regex:function(n){try{var t,e;return i.isString(n[1])?(t=n[1],e="i"):(t=n[1][0]||"",e=n[1][1]||""),new RegExp(t,e).test(n[0])}catch(r){return o.error("Rules",'In operator "regex", error: '+(r.message||"invalid RegExp /"+[t,e].join("/"))),!1}},exists:function(n){return void 0!==n[0]},and:function(n){return i.every(n,(function(n){return n}))},or:function(n){return i.some(n,(function(n){return n}))},not:function(n){return!n[0]}},t.arithmeticOperators={"+":function(n){return(n[0]||0)+(n[1]||0)},"-":function(n){return(n[0]||0)-(n[1]||0)},"/":function(n){return(n[0]||0)/(n[1]||1)},"%":function(n){return(n[0]||0)%(n[1]||1)}},t.aggregateOperators={sum:function(n,e){for(var i=n[0]||t.DEFAULT_FIELD,r=0,o=0;o<e.length;o++)r+=f(e[o],i,0);return r},avg:function(n,e){if(0===e.length)return 0;for(var i=n[0]||t.DEFAULT_FIELD,r=0,o=0;o<e.length;o++)r+=f(e[o],i,0);return r/e.length},max:function(n,e){for(var i=n[0]||t.DEFAULT_FIELD,r=Number.NEGATIVE_INFINITY,o=0;o<e.length;o++)r=Math.max(r,f(e[o],i,Number.NEGATIVE_INFINITY));return r},min:function(n,e){for(var i=n[0]||t.DEFAULT_FIELD,r=Number.POSITIVE_INFINITY,o=0;o<e.length;o++)r=Math.min(r,f(e[o],i,Number.POSITIVE_INFINITY));return r},count:function(n,t){return t.length}};var d={now:function(){return a.now()}},h=function(n,e){if(e.hasOwnProperty("value"))return e.value;if(e.hasOwnProperty("field"))return f(n,e.field);if(e.hasOwnProperty("eval"))return e.eval in d?d[e.eval]():void o.error("Rules","Unknown function: "+e.eval);if(e.op){var r,u=(r=e.op)in t.booleanOperators?t.booleanOperators[r]:r in t.arithmeticOperators?t.arithmeticOperators[r]:null;if(u){var a=i.partial(h,n),c=e.args||[];return u(i.map(c,(function(n){return a(n)})),n)}o.error("Rules","Unknown operator: "+e.op)}else o.error("Rules","No operator specified: "+s.stringify(e))};t.generateAlias=function(n,t){return"_"+n+"_"+t.join(".")};t.rewrite=function(n){var e=[],r={};function u(n,a){if(i.isArray(n)&&("and"!==n[0]&&"or"!==n[0]&&"not"!==n[0]&&o.error("Rules","Unexpected operation "+n[0]+". Continuing optimistically."),n={op:n[0],args:n.slice(1)}),n.hasOwnProperty("field")||n.hasOwnProperty("value")||n.hasOwnProperty("eval"))return n;if(a&&n.op in t.aggregateOperators){var c=(n.args&&n.args[0]||{}).field||t.DEFAULT_FIELD,s=t.generateAlias(n.op,c);return s in r||(e.push({op:n.op,args:n.args}),r[s]=!0),{field:[s]}}for(var f=[],l=n.args||[],d=0;d<l.length;d++)f[d]=u(l[d],a);return{op:n.op,args:f}}var a={};n.hasOwnProperty(t.clause.WHERE)&&(a[t.clause.WHERE]=u(n[t.clause.WHERE],!1)),n.hasOwnProperty(t.clause.HAVING)&&(a[t.clause.HAVING]=u(n[t.clause.HAVING],!0)),(n.hasOwnProperty(t.clause.AGGREGATE)||e.length>0)&&(a[t.clause.AGGREGATE]=(n[t.clause.AGGREGATE]||[]).concat(e));for(var c=[t.clause.GROUP_BY,t.clause.ORDER_BY,t.clause.SELECT,t.clause.OFFSET,t.clause.LIMIT],s=0;s<c.length;s++)n.hasOwnProperty(c[s])&&(a[c[s]]=n[c[s]]);return n.hasOwnProperty(t.clause.FROM)&&(a[t.clause.FROM]=t.rewrite(n[t.clause.FROM])),a};var v=function(n,e){e=e||0;var r=[];if(n.hasOwnProperty(t.clause.WHERE)?n[t.clause.WHERE].op?n[t.clause.WHERE].op in t.booleanOperators||r.push("Non-boolean WHERE clause operator"):r.push("Missing WHERE clause operator"):r.push("Missing WHERE clause"),!n.hasOwnProperty(t.clause.HAVING)||(n[t.clause.HAVING].op?n[t.clause.HAVING].op in t.booleanOperators||r.push("Non-boolean HAVING clause operator"):r.push("Missing HAVING clause operator")),n.hasOwnProperty(t.clause.GROUP_BY)&&!n.hasOwnProperty(t.clause.AGGREGATE)&&r.push("No AGGREGATE clause specified with GROUP_BY clause"),n.hasOwnProperty(t.clause.SELECT)){var o=n[t.clause.SELECT];if(i.isArray(o))for(var u=0;u<o.length;u++)o[u].op&&o[u].op in t.aggregateOperators&&r.push('In SELECT clause, aggregate operator "'+o[u].op+'" specified in selector at index '+u);else r.push("SELECT clause must be an array")}if(n.hasOwnProperty(t.clause.OFFSET)){var a=n[t.clause.OFFSET];(!i.isNumber(a)||Number(a)<0||Number(a)!==Math.floor(Number(a)))&&r.push("OFFSET must be a non-negative integer")}if(n.hasOwnProperty(t.clause.LIMIT)){var c=n[t.clause.LIMIT];(!i.isNumber(c)||Number(c)<0||Number(c)!==Math.floor(Number(c)))&&r.push("LIMIT must be a non-negative integer")}return e>0&&(r=i.map(r,(function(n){return"Sub-rule "+e+": "+n}))),n.hasOwnProperty(t.clause.FROM)&&(r=r.concat(v(n[t.clause.FROM],e+1))),r},p=function(n,r){e(9326).time("rulesExecuteRecursively");var a,c,l,d=r;if(n.hasOwnProperty(t.clause.FROM)&&(o.debug("Evaluating FROM clause:",n[t.clause.FROM]),d=p(n[t.clause.FROM],d),o.debug("Results after FROM:",d)),o.debug("Evaluating WHERE clause:",n[t.clause.WHERE]),d=i.filter(d,(function(e){return h(e,n[t.clause.WHERE])})),o.debug("Results after WHERE:",d),n.hasOwnProperty(t.clause.AGGREGATE)){o.debug("Evaluating AGGREGATE clause:",n[t.clause.AGGREGATE]);var v=function(n,t){var e={};if(void 0===n||!i.isArray(n)||0===n.length)return e["*"]={fieldValues:{},events:t},e;for(var r=i.map(n,(function(n){return n.field})),o=0;o<t.length;o++){for(var u=t[o],a=[],c={},l=0;l<r.length;l++){var d=r[l],h=f(u,d),v=d.join(".");c[v]=h,a.push(encodeURIComponent(v)+"="+encodeURIComponent(s.stringify(h)))}var p=a.join("&");e.hasOwnProperty(p)||(e[p]={fieldValues:c,events:[]}),e[p].events.push(u)}return e}(n[t.clause.GROUP_BY],d);d=function(n,t){var e=[];return i.each(n,(function(n,r){var o=i.extend({},n.fieldValues),u=t[r]||{};i.extend(o,u),e.push(o)})),e}(v,(a=n[t.clause.AGGREGATE],c=v,l={},i.each(c,(function(n,e){l[e]={};for(var i=0;i<a.length;i++){var r=a[i],u=r.op;if(u in t.aggregateOperators){var c=(r.args&&r.args[0]||{}).field||t.DEFAULT_FIELD,s=t.generateAlias(u,c),f=t.aggregateOperators[u]([c],n.events);l[e][s]=f}else o.error("Rules","Unknown aggregate operator "+u)}})),l)),o.debug("Results after AGGREGATE:",d)}n.hasOwnProperty(t.clause.HAVING)&&(o.debug("Evaluating HAVING clause:",n[t.clause.HAVING]),d=i.filter(d,(function(e){return h(e,n[t.clause.HAVING])})),o.debug("Results after HAVING:",d)),n.hasOwnProperty(t.clause.ORDER_BY)&&(o.debug("Evaluating ORDER_BY clause:",n[t.clause.ORDER_BY]),d=function(n,t){return i.isArray(n)?0===n.length?t:t.sort((function(t,e){for(var i=0;i<n.length;i++){var r=n[i],o="ASC"===(r.direction||"ASC")?1:-1,u=r.field,a=f(t,u,0),c=f(e,u,0);if(a<c)return-o;if(a>c)return o}return 0})):(u("Rules","groupBy rule must be an array"),t)}(n[t.clause.ORDER_BY],d),o.debug("Results after ORDER_BY:",d));var g,m=0;return n.hasOwnProperty(t.clause.OFFSET)&&(o.debug("Evaluating OFFSET clause:",n[t.clause.OFFSET]),m=Number(n[t.clause.OFFSET])),n.hasOwnProperty(t.clause.LIMIT)&&(o.debug("Evaluating LIMIT clause:",n[t.clause.LIMIT]),g=m+Number(n[t.clause.LIMIT])),(m>0||!i.isUndefined(g))&&(d=d.slice(m,g),o.debug("Results after OFFSET/LIMIT:",d)),n.hasOwnProperty(t.clause.SELECT)&&(o.debug("Evaluating SELECT clause:",n[t.clause.SELECT]),d=function(n,t){return i.map(t,(function(t){return i.map(n,(function(n){return h(t,n)}))}))}(n[t.clause.SELECT],d),o.debug("Results after SELECT:",d)),e(9326).timeEnd("rulesExecuteRecursively"),d};t.execute=function(n,e){n=t.rewrite(n),o.shouldLog(r.LogLevel.DEBUG)&&o.groupCollapsed("Evaluating Behavioral Rule"),o.debug("Rule:",n,s.stringify(n)),o.debug("Events:",e);var i=v(n);if(i.length>0)throw new Error("Rule "+s.stringify(n)+" has violations: "+i.join("\n"));var u=p(n,e);return o.debug("Rule result:",u),o.shouldLog(r.LogLevel.DEBUG)&&o.groupEnd(),u},t.isSatisfied=function(n,e){try{return t.execute(n,e).length>0}catch(i){return o.error("Rules","Error "+i.toString()+" while evaluating rule "+s.stringify(n)),!1}}},8046:function(n,t,e){n.exports=function(n){n.registerDependency("sources/browser_id",e(5534)),n.registerVisitorProfileProvider(e(4243)),n.registerVisitorProfileProvider(e(5626)),n.registerAudienceMatcher("browser_version",e(3550))}},3550:function(n,t,e){var i=e(8262).y;n.exports={fieldsNeeded:["browserVersion","browserId"],match:function(n,t){var e=t.value,r=n.browserId,o=n.browserVersion;if(0===e.indexOf(r)){var u=e.substr(r.length);return 0===i(o,u)}return!1}}},4243:function(n){n.exports={provides:"browserId",shouldTrack:!0,isSticky:!0,getter:["sources/browser_id",function(n){return n.getId()}]}},5626:function(n){n.exports={provides:"browserVersion",getter:["sources/browser_id",function(n){return n.getVersion()}]}},5534:function(n,t,e){var i=e(69);t.getId=function(){return i.get().browser.id},t.getVersion=function(){return i.get().browser.version}},5048:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(7129)),n.registerAudienceMatcher("campaign",e(3452))}},3452:function(n,t,e){var i=e(9895);n.exports={fieldsNeeded:["campaign"],match:function(n,t){return i.hasMatch(t.value,t.match,n.campaign)}}},7129:function(n,t,e){var i=e(2749);n.exports={provides:"campaign",shouldTrack:!0,isSticky:!0,getter:[function(){return i.getQueryParamValue("utm_campaign")}]}},5801:function(n,t,e){n.exports=function(n){n.registerAudienceMatcher("code",e(2032))}},2032:function(n,t,e){var i=e(7023),r=e(9717);t.fieldsNeeded=[],t.match=function(n,t){if(i.isUndefined(t.value))return!0;if("function"==typeof t.value)try{return Boolean(r.apply(t.value))}catch(e){return!1}else try{return Boolean(r.eval(t.value))}catch(o){return!1}return!1}},7785:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(5858)),n.registerAudienceMatcher("cookies",e(8955))}},8955:function(n,t,e){var i=e(9895);n.exports={fieldsNeeded:["cookies"],match:function(n,t){var e=t.name,r=t.value,o=t.match,u=n.cookies[e];return i.hasMatch(r,o,u)}}},5858:function(n,t,e){var i=e(7023),r=e(8505),o=e(9185).get("stores/audience_data");n.exports={provides:"cookies",isLazy:!0,getter:[function(){var n=r.getAll(),t=o.getFeaturesNeeded("cookies");return i.reduce(n,(function(n,e,r){return i.has(t,r)&&(n[r]=e),n}),{})}]}},4966:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(2175));var t=e(981);n.registerAudienceMatcher("custom_attribute",t),n.registerAudienceMatcher("custom_dimension",t)}},981:function(n,t,e){var i=e(7023),r=e(9895);t.match=function(n,t){var e;return n.custom&&(e=n.custom[t.name]),i.isObject(e)&&(e=e.value),r.hasMatch(t.value,t.match,e)}},2175:function(n,t,e){var i=e(7023),r=e(5369),o=e(307),u=e(9185).get("stores/dimension_data");n.exports={provides:"custom",attributionType:r.AttributionTypes.LAST_TOUCH,restorer:function(n){return i.reduce(n,(function(n,t,e){var r=e,a=u.getByApiName(e),c=u.getById(e);return i.isObject(t)?(!t.id&&a&&(c=a,r=a.id,i.extend(t,{id:c.segmentId||c.id})),!t.name&&c&&c.apiName&&(t.name=c.apiName),t.id||c||o.warn("Unable to determine ID for custom attribute:",e,"; segmentation is disabled."),n[r]=t,n):(o.error('Unable to restore custom attribute "'+e+'" because value is not an object'),n)}),{})},shouldTrack:!0}},1050:function(n,t,e){n.exports=function(n){n.registerDependency("sources/device",e(1443)),n.registerVisitorProfileProvider(e(3934)),n.registerAudienceMatcher("device",e(1293))}},1293:function(n){n.exports={fieldsNeeded:["device"],match:function(n,t){return n.device===t.value}}},3934:function(n){n.exports={provides:"device",shouldTrack:!0,isSticky:!0,getter:["sources/device",function(n){return n.getDevice()}]}},1443:function(n,t,e){var i=e(69);t.getDevice=function(){var n=i.get().device;return"unknown"!==n.model?n.model:"tablet"===n.type?"tablet":n.isMobile?"mobile":"desktop"}},9806:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(1290)),n.registerAudienceMatcher("device_type",e(1282))}},1282:function(n){n.exports={fieldsNeeded:["device_type"],match:function(n,t){return n.device_type===t.value}}},1290:function(n,t,e){var i=e(69);n.exports={provides:"device_type",shouldTrack:!0,isSticky:!0,getter:[function(){var n=i.get().device;switch(n.type){case"mobile":return"phone";case"tablet":case"desktop_laptop":return n.type;default:return"other"}}]}},8035:function(n,t,e){n.exports=function(n){n.registerDependency("sources/odds",e(3750)),n.registerVisitorProfileProvider(e(504)),n.registerAudienceMatcher("list",e(2126))}},2126:function(n,t,e){var i=e(9895);t.fieldsNeeded=["lists"],t.match=function(n,t){var e=(n.lists||{}).values;if(!e)return!1;var r=e[t.name];return!1===r&&(r=null),i.hasMatch(t.value,t.match,r)}},504:function(n,t,e){var i=e(7023),r=e(8505),o=e(5369),u=e(307),a=e(9965),c=e(8231);n.exports={provides:"lists",isAsync:!0,getter:["stores/global","sources/odds",function(n,t){return function(e,s){var f=n.getListTargetingKeys(),l=(e()||{}).metadata||{},d=i.reduce(f,(function(n,t){var e=function(n){var t,e=!1;switch(n.type){case o.ListTargetingKeyTypes.QUERY:t=a.getQueryParamValue(n.key),e=!0;break;case o.ListTargetingKeyTypes.COOKIE:t=r.get(n.key,!1),e=!0;break;case o.ListTargetingKeyTypes.JS_VARIABLE:t=c.getGlobal(n.key),i.isUndefined(t)||i.isNull(t)||i.isString(t)||i.isBoolean(t)||i.isNumber(t)||(u.warn("List locator value must be string, bool, or Number. Omitting value for",n.key),t=void 0);break;default:throw new Error("Unknown list targeting key type: "+n.type)}if(i.isUndefined(t)||i.isNull(t))return;if(t=String(t),e||(t=encodeURIComponent(t)),t.length>100)return void u.warn("Withholding overlong value for",n.name,"(type: "+n.type+")");return t}(t),f=[t.type,t.key].join("_");return l[f]!==e&&s(void 0),e&&(n[f]=e),n}),{});return t.fetchListMemberships(n.getProjectId(),d)}}]}},3750:function(n,t,e){var i=e(7023),r=e(46),o=e(1758).U,u=e(4395),a=e(2454).Promise,c=e(9965),s=e(7628),f=t.Error=o("ListTargetingError");function l(n){return s.request({url:n}).then((function(t){r.resolveRequest(n,u.parse(t.responseText))}))["catch"](i.partial(r.rejectRequest,n))}t.fetchListMemberships=function(n,e){var o=function(n,e){if(i.isNull(t.ODDS_URL))return null;var r={project:n};return i.each(e,(function(n,t){r[encodeURIComponent(t)]=n})),t.ODDS_URL+"?"+c.queryStringFromMap(r)}(n,e);return o?r.makeAsyncRequest(o,i.partial(l,o)).then((function(n){return{values:n.lists,metadata:e}}),(function(n){throw new f("Error getting data: "+(n.statusText||"Could not contact server"))})):a.reject(new f("Unknown list targeting endpoint"))},t.ODDS_URL="https://tapi.optimizely.com/api/js/odds/snippet/8413020910"},9776:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(7997)),n.registerAudienceMatcher("location",e(7964))}},7964:function(n,t){t.fieldsNeeded=["location"],t.match=function(n,t){if(!n.hasOwnProperty("location"))return!1;var e=n.location,i=t.value.split("|"),r=(i[0]||"").trim(),o=(i[1]||"").trim(),u=(i[2]||"").trim(),a=(i[3]||"").trim(),c=(i.length>4&&i[4]||"").trim();switch(i.length){case 1:if(e.country===r)return!0;break;case 2:if(e.region===o&&e.country===r)return!0;break;case 3:if(e.city===u&&(e.region===o||""===o)&&e.country===r)return!0;break;case 4:if(e.continent===a)return!0;break;case 5:if(e.dma===c)return!0}return!1}},7997:function(n,t,e){var i=e(9199);n.exports={provides:"location",isAsync:!0,getter:[function(){return i.getIPDerivedGeolocation()}]}},2721:function(n,t,e){function i(n,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](n):n instanceof t}var r=e(7023),o=e(4395),u=e(307),a=e(2454).Promise,c=e(7628),s=1,f=2,l="itemMetadata",d="recos";function h(n){return n===f}function v(n,t){if(!function(n){return n===s}(t))return d in n?o.parse(n.recos):(u.warn('recommender / Expected key "recos" not found'),[]);var e=new RegExp("^reco(\\d+)$"),i=r.reduce(n,(function(t,i,u){var a=u.match(e);if(a){var c=o.parse(n[u]);c&&r.isObject(c)&&(t[a[1]]=c)}return t}),[]);return r.filter(i,(function(n){return!r.isUndefined(n)}))}function p(n,t){return[n,encodeURIComponent(t)].join("/")}function g(n,t){var e=function(n,t,e){if(!r.isArray(n)||r.isEmpty(n))throw new Error("No "+e+"s available");var i;if(t){if(!(i=r.find(n,{id:t})))throw new Error("No "+e+" found with specified id "+t)}else{if(n.length>1)throw new Error("No "+e+" id specified when there are more than one available.");i=n[0]}return i},i=e(n.getRecommenderServices(),t&&t.recommenderServiceId,"recommender service");return i.idTagName||(i.idTagName="id"),{recommenderService:i,recommender:e(i.recommenders,t&&t.recommenderId,"recommender")}}function m(n){return o.parse(n).data}function y(n,t){return c.request({url:p(n,t)}).then((function(n){var t=m(n.response),e={};return l in t&&(e=o.parse(t.itemMetadata)),e}))}function _(n,t,e,o){var u=!(!o||!o.fetchWithMetadata),a=o&&o.overrideServingUrl||t.servingUrl;return c.request({url:p(a,e)}).then((function(t){var e,a=m(t.response);return e=v(a,n.serviceVersion),u&&h(n.serviceVersion)?b(n,r.map(e,n.idTagName),o).then((function(n){return n=r.map(n,(function(n){return i(n,Error)&&(n={}),delete n.__proto__,n})),r.merge(e,n)})):e}))}function b(n,t,e){var i=e&&e.overrideCatalogUrl||n.catalogUrl;return r.isString(t)?y(i,t):a.all(r.map(t,(function(n){return y(i,n)["catch"]((function(t){return u.warn("recommender / Failed to get recommendations for item:",n,t),t}))})))}function w(n,t,e){var i=g(n,e);return _(i.recommenderService,i.recommender,t,{overrideServingUrl:e&&e.overrideServingUrl,overrideCatalogUrl:e&&e.overrideCatalogUrl,fetchWithMetadata:!0})}function E(n,t,e){var i=g(n,e),r=i.recommenderService,o=i.recommender;if(!h(r.serviceVersion))throw new Error("Recommender service "+r.id+" serves self-contained recos. Use `fetchRecommendations` API call");return _(r,o,t,{overrideServingUrl:e&&e.overrideServingUrl,fetchWithMetadata:!1})}function I(n,t,e){var i=g(n,e).recommenderService;if(!h(i.serviceVersion))throw new Error("Recommender service "+i.id+" serves self-contained recos. Use `fetchRecommendations` API call");return r.isArray(t)&&t.length>20?a.reject("Cannot fetch more than 20 items"):b(i,t,e)}function A(n,t,e,i){return new S(n,t,e,i)}function S(n,t,e,i){this.recommenderSettings=t;var r=g(n,t);this.recommenderService=r.recommenderService,this.recommender=r.recommender,this.targetId=e,i&&(this.preFilter=i.preFilter,this.canonicalize=i.canonicalize,this.postFilter=i.postFilter),this._globalStore=n,this.reset()}function T(){var n={recosNoMeta:[],recosNoMetaOffset:0,recos:[],recosOffset:0};return u.debug("recommender / fetching recommended items for",this.targetId,"from recommender",this.recommender.id),h(this.recommenderService.serviceVersion)?E(this._globalStore,this.targetId,this.recommenderSettings).then(r.bind((function(t){return n.recosNoMeta=r.filter(t,this.preFilter),n}),this)):w(this._globalStore,this.targetId,this.recommenderSettings).then(r.bind((function(t){return n.recos=r(t).filter(this.preFilter).map(this.canonicalize).filter(this.postFilter).value(),n}),this))}function k(n){var t=n.numNeeded,e=n.buffer,o=e.recosNoMeta.length-e.recosNoMetaOffset;if(t<=0||o<=0)return a.resolve(n);var c=Math.max(t,5),s=r.slice(e.recosNoMeta,e.recosNoMetaOffset,e.recosNoMetaOffset+c),f=r.map(s,this.recommenderService.idTagName);e.recosNoMetaOffset+=f.length;var l=n.recosSoFar;return u.debug("recommender / fetching metadata for",f,"from recommender",this.recommender.id),I(this._globalStore,f,this.recommenderSettings).then(r.bind((function(o){o=r.map(o,(function(n){return i(n,Error)?{}:n})),e.recos=r(s).merge(o).map(this.canonicalize).filter(this.postFilter).value();var u=r.slice(e.recos,0,t);return e.recosOffset=u.length,n.recosSoFar=l.concat(u),n.numNeeded-=u.length,n.numNeeded>0?k.call(this,n):n}),this))}S.prototype.reset=function(){this._bufferPromise=null},S.prototype.next=function(n){var t=Math.floor(r.isNumber(n)?n:1);if(t<=0)throw new Error("Invalid argument "+n+". Must be positive integer");this._bufferPromise||(this._bufferPromise=T.call(this));var e=this._bufferPromise.then(r.bind((function(n){var e=[];return n.recos.length-n.recosOffset>0&&(e=n.recos.slice(n.recosOffset,n.recosOffset+t),n.recosOffset+=e.length,t-=e.length),t<=0?{result:e,buffer:n}:k.call(this,{buffer:n,recosSoFar:e,numNeeded:t}).then((function(n){return{result:n.recosSoFar,buffer:n.buffer}}))}),this));return this._bufferPromise=e.then((function(n){return n.buffer})),e.then((function(n){return n.result}))},n.exports=["stores/global",function(n){return{fetchRecommendations:r.partial(w,n),fetchRecommendedItems:r.partial(E,n),fetchItemMetadata:r.partial(I,n),getRecommendationsFetcher:r.partial(A,n)}}]},9408:function(n,t,e){n.exports=function(n){n.registerApiModule("recommender",e(2721))}},2420:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(6169)),n.registerAudienceMatcher("referrer",e(4856))}},4856:function(n,t,e){var i=e(7312);t.fieldsNeeded=["referrer"],t.match=function(n,t){return null!==n.referrer&&i(n.referrer,t)}},6169:function(n,t,e){var i=e(9230),r=e(3828);n.exports={provides:"referrer",shouldTrack:!0,isSticky:!0,getter:[function(){var n=r.getReferrer()||i.getReferrer();return""===n&&(n=null),n}]}},4091:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(8421)),n.registerAudienceMatcher("source_type",e(9059))}},9059:function(n,t,e){var i=e(9895);t.fieldsNeeded=["source_type"],t.match=function(n,t){return i.hasMatch(t.value,t.match,n.source_type)}},8421:function(n,t,e){var i=e(2749),r=e(9230),o=e(3828),u=e(6645),a=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","bing\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","yahoo\\.\\w{2,3}(\\.\\w{2,3})?/search","baidu\\.\\w{2,3}(\\.\\w{2,3})?/","https://(www)?\\.google\\..*?/?$","https://search\\.yahoo\\..*?/?$","https://(www)?\\.bing\\..*?/?$"];n.exports={provides:"source_type",shouldTrack:!0,isSticky:!1,getter:[function(){return function(n,t){var e,c=n(),s=function(){if(i.getQueryParamValue("utm_source")||i.getQueryParamValue("gclid")||i.getQueryParamValue("otm_source"))return"campaign";for(var n=o.getReferrer()||r.getReferrer(),t=0;t<a.length;t++){var e=a[t];if(n.match(e))return"search"}return n&&u.guessDomain(n)!==u.guessDomain(i.getUrl())?"referral":"direct"}();e=s,(!c||"direct"!==e)&&t(s)}}]}},561:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(7168)),n.registerVisitorProfileProvider(e(3378)),n.registerAudienceMatcher("time_and_day",e(8685))}},8685:function(n,t,e){var i=e(189);t.fieldsNeeded=["currentTimestamp"],t.match=function(n,t){return i.test(t.value,new Date(n.currentTimestamp))}},7168:function(n,t,e){var i=e(9455);n.exports={provides:"currentTimestamp",shouldTrack:!0,isLazy:!0,getter:[function(){return i.now()}]}},3378:function(n){n.exports={provides:"offset",shouldTrack:!0,isLazy:!0,getter:[function(){return(new Date).getTimezoneOffset()}]}},189:function(n,t,e){var i=e(7023);function r(n){var t=n.split(":");if(2!==t.length)throw new Error("optly.timeAndDayInterval.timeStringToMinutes: Invalid time string "+n);return 60*parseInt(t[0],10)+parseInt(t[1],10)}t.test=function(n,t){var e=function(n){var t=n.split("_");if(3!==t.length)throw new Error("Invalid time and day string "+n);var e=t[2].split(",");return{start_time:t[0],end_time:t[1],days:e}}(n),o=r(e.start_time),u=r(e.end_time),a=60*t.getHours()+t.getMinutes(),c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][t.getDay()];return a>=o&&a<=u&&i.includes(e.days,c)}},6297:function(n,t,e){n.exports=function(n){n.registerVisitorProfileProvider(e(7158))}},7158:function(n){n.exports={provides:"visitorId",getter:["stores/visitor_id",function(n){return n.getRandomId()}]}},6388:function(n,t,e){var i=e(4395),r=e(307),o=e(3916),u=e(986),a=e(8231),c="google_analytics_4",s="gtag";var f=function(n){return performanceEnv.time("gtagReady"),o.pollFor((function(){return function(n){return n.getGlobal(s)||null}(a)}),200,50).then((function(t){r.log("gtag is finally a function. Sending now."),performanceEnv.timeEnd("gtagReady"),t("event","optimizely-decision",n)}))},l={preRedirectPolicy:u.PreRedirectPolicies.PERSIST_BEFORE_REDIRECT,postRedirectPolicy:u.PostRedirectPolicies.TRACK_IMMEDIATELY,nonRedirectPolicy:u.NonRedirectPolicies.TRACK_IMMEDIATELY,trackLayerDecision:function(n){var t=n.integrationSettings;if(t&&t[c]&&n.experimentId&&n.variationId&&!n.isLayerHoldback){var e={Experiment:n.experimentId,Variation:n.variationId,Layer:n.layerId,LayerHoldback:n.isLayerHoldback};return f(e)["catch"]((function(n){r.warn("Tracker for",c,"failed:",n)}))}},serializeSettings:i.stringify,deserializeSettings:i.parse};n.exports=function(n){n.registerAnalyticsTracker("google_analytics_4",l)}},1010:function(n,t,e){var i=e(7023),r=e(6306),o=e(1999),u=e(3005),a=e(1758).U,c=e(4395),s=e(307),f=e(986),l=e(2050),d=e(8231),h=e(7628),v=e(9185),p=(e(9230),e(3269)),g=e(9054),m=e(2672),y=v.get("stores/global"),_=v.get("stores/tracker_optimizely"),b=t.Error=a("OptimizelyTrackerError"),w="client_activation",E="campaign_activated",I="view_activated",A={revenue:{validate:C,sanitize:Math.floor,excludeFeature:!0},quantity:{validate:C,sanitize:Math.floor,excludeFeature:!0},value:{validate:C,sanitize:i.identity}},S="AUTO",T=[function(){return function(n){P(function(n){return i.extend({entity_id:n.pageId,key:n.pageApiName,timestamp:n.timestamp,uuid:n.eventId,type:I},D(n.eventTags))}(n),n.userFeatures,W(n.layerStates))}}],k=[function(){return function(n){!function(n){var t=i.isNull(y.getAnonymizeIP())?void 0:y.getAnonymizeIP(),e={account_id:n.accountId,anonymize_ip:t,client_name:n.clientName,client_version:n.clientVersion,project_id:n.projectId,visitors:[]};e.revision=n.revision,e.enrich_decisions=!0;var r={session_id:L(n.sessionId),visitor_id:n.visitorId,attributes:[],snapshots:[]},o=W(n.layerStates);m.dispatch(u.REGISTER_TRACKER_VISITOR,{data:e,visitor:r,decisions:o}),$()}(n),P(function(n){return{entity_id:null,type:w,uuid:n.eventId,timestamp:n.timestamp}}(n),n.userFeatures,W(n.layerStates))}}],R=[function(){return function(n){var t;P((t=n,i.extend({entity_id:t.eventEntityId,key:t.eventApiName,timestamp:t.timestamp,uuid:t.eventId,type:t.eventCategory},D(t.eventTags))),n.userFeatures,W(n.layerStates))}}],x=[function(){return function(n){var t;P((t=n,i.extend({entity_id:t.eventEntityId,key:t.eventApiName,timestamp:t.timestamp,uuid:t.eventId,type:t.eventCategory},D(t.eventTags))),n.userFeatures,W(n.layerStates))}}];function D(n){var t=function(n,t,e){try{N(t),n[e]=t}catch(i){r.emitError(new b("Bad value for eventTags["+e+"]: "+i.message))}return n},e=i.keys(A),o=i.omit(n,e),u=i.pick(n,e),a=i.reduce(o,t,{}),c=i.reduce(u,(function(n,e,i){var o=A[i];o.excludeFeature||t(a,e,i);try{o.validate(e),n[i]=o.sanitize(e),a[i]=n[i]}catch(u){r.emitError(new b("Bad value for eventMetrics["+i+"]: "+u.message))}return n}),{});return c.tags=a,c}function N(n){if(null==n)throw new Error("Feature value is null");if("object"==typeof n){var t;try{t=c.stringify(n)}catch(e){}throw new Error('Feature value is complex: "'+t)}}function C(n){if(null==n)throw new Error("Metric value is null");if(!i.isNumber(n))throw new Error("Metric value is not numeric")}function O(n){return i.reduce(n,(function(n,t){try{N(t.value),n.push({entity_id:t.id||null,key:t.name,type:t.type,value:t.value})}catch(e){s.warn("Error evaluating user feature",t,e)}return n}),[])}function P(n,t,e){m.dispatch(u.REGISTER_TRACKER_EVENT,{event:n,decisions:e}),M(t),$()}function M(n){var t=O(n);m.dispatch(u.UPDATE_TRACKER_VISITOR_ATTRIBUTES,{attributes:t})}function L(n){return S}function F(){if(_.canSend()){var n=_.hasEventsToSend(),t=_.hasPreviousBatchesToSend();n||t?(e(9326).time("sendEventsTrackerOpti"),t&&(i.each(_.getPreviousBatches(),U),m.dispatch(u.RESET_TRACKER_PREVIOUS_BATCHES)),n&&(m.dispatch(u.FINALIZE_BATCH_SNAPSHOT),U(_.getEventBatch()),m.dispatch(u.RESET_TRACKER_EVENTS)),e(9326).timeEnd("sendEventsTrackerOpti")):s.debug("Not sending events because there are no events to send")}else s.debug("Not sending events (holding)")}function U(n){s.debug("Sending ticket:",n);var t=o.generate();h.retryableRequest({url:"https://logx.optimizely.com/v1/events",method:"POST",data:V(n)},t)}function V(n){return i.extend({},i.pick(n,["account_id","anonymize_ip","client_name","client_version","enrich_decisions","project_id","revision"]),{visitors:i.map(n.visitors,z)})}function z(n){return{visitor_id:n.visitor_id,session_id:S,attributes:i.map(n.attributes,j),snapshots:i.map(n.snapshots,q)}}function j(n){return H(n,{entity_id:"e",key:"k",type:"t",value:"v"})}function q(n){var t=n.events;return t=function(n){var t=i.reduce(n,(function(n,t){var e;if(n[e=t.type===I&&i.isEmpty(t.tags)&&i.isEmpty(i.pick(t,i.keys(A)))?t.type:t.uuid]){var r=n[e].timestamp;t.timestamp>r&&(r=t.timestamp),n[e]=i.extend({},n[e],{key:n[e].key+"-"+(t.key||""),entity_id:n[e].entity_id+"-"+t.entity_id,timestamp:r})}else n[e]=t;return n}),{});return i.values(t)}(t),{activationTimestamp:y.getActivationTimestamp(),decisions:i.map(n.decisions,B),events:i.map(t,G)}}function B(n){return H(n,{campaign_id:"c",experiment_id:"x",is_campaign_holdback:"h",variation_id:"v"})}function G(n){return n.key===E&&(n.type=E,delete n.key),H(n,{entity_id:"e",key:"k",quantity:"q",revenue:"$",tags:"a",timestamp:"t",uuid:"u",value:"v",type:"y"})}function H(n,t){return i.reduce(n,(function(n,e,i){return i in t&&(n[t[i]||i]=e),n}),{})}function $(){if(_.shouldBatch()){if(!_.isPolling()){d.setTimeout((function n(){F(),_.isPolling()&&d.setTimeout(n,1e3)}),1e3),m.dispatch(u.SET_TRACKER_POLLING,!0),d.setTimeout((function(){m.dispatch(u.SET_TRACKER_BATCHING,!1),m.dispatch(u.SET_TRACKER_POLLING,!1)}),1e4)}}else F()}function W(n){return i.map(n,(function(n){return{campaign_id:n.layerId,experiment_id:n.decision.experimentId,variation_id:n.decision.variationId,is_campaign_holdback:n.decision.isLayerHoldback}}))}function Y(){var n=_.getPersistableState();if(n)try{s.debug("Persisting pending batch:",n),l.persistTrackerOptimizelyData(n),m.dispatch(u.SET_TRACKER_DIRTY,!1)}catch(t){s.debug("Failed to persist pending batch:",t)}}var K={trackLayerDecision:function(n){n.timing===f.TrackLayerDecisionTimingFlags.postRedirectPolicy?function(n){var t=O(n.userFeatures),e={account_id:n.accountId,anonymize_ip:n.anonymizeIP,client_name:n.clientName,client_version:n.clientVersion,project_id:n.projectId,visitors:[{session_id:L(n.sessionId),visitor_id:n.visitorId,attributes:t,snapshots:[{decisions:[{campaign_id:n.layerId,experiment_id:n.experimentId,variation_id:n.variationId,is_campaign_holdback:n.isLayerHoldback}],events:[{uuid:n.decisionId,entity_id:n.layerId,timestamp:n.timestamp,type:E}]}]}]};m.dispatch(u.REGISTER_PREVIOUS_BATCH,e),$()}(n):function(n){e(9326).time("onLayerDecisionOptimizely");var t={entity_id:n.layerId,type:E,uuid:n.decisionId,timestamp:n.timestamp};m.dispatch(u.REGISTER_TRACKER_DECISION,{decisionEvent:t,decisions:W(n.layerStates)}),M(n.userFeatures),e(9326).timeEnd("onLayerDecisionOptimizely"),$()}(n)},postRedirectPolicy:f.PostRedirectPolicies.TRACK_AFTER_SYNC,nonRedirectPolicy:f.NonRedirectPolicies.TRACK_IMMEDIATELY,onPageActivated:T,onClientActivation:k,onClickEvent:x,onCustomEvent:R};n.exports=function(n){n.registerAnalyticsTracker("optimizely",K),p.on({filter:{type:g.TYPES.ANALYTICS,name:"sendEvents"},handler:function(){m.dispatch(u.SET_TRACKER_SEND_EVENTS,!0),_.isPolling()||F()}}),p.on({filter:{type:g.TYPES.ANALYTICS,name:"holdEvents"},handler:function(){m.dispatch(u.SET_TRACKER_SEND_EVENTS,!1)}}),m.dispatch(u.SET_TRACKER_SEND_EVENTS,!0);var t=p.on({filter:{type:"lifecycle",name:"activated"},handler:function(){_.observe(Y),p.off(t)}})}},1392:function(n,t,e){var i=e(9717),r={match:function(n,t){return i.apply(t.value)}};n.exports=function(n){n.registerViewMatcher("custom_code",r)}},2187:function(n,t,e){var i=e(9230),r={match:function(n,t){return!!i.querySelector(t.value)}};n.exports=function(n){n.registerViewMatcher("element_present",r)}},4601:function(n,t,e){n.exports=function(n){n.registerViewProvider(e(9599)),n.registerViewMatcher("url",e(7561))}},7561:function(n,t,e){var i=e(7312);n.exports={fieldsNeeded:["url"],match:function(n,t){return i(n.url,t)}}},9599:function(n,t,e){var i=e(2749);n.exports={provides:"url",getter:[function(){return i.getUrl()}]}},44:function(n,t,e){var i=e(9230),r=e(5369),o=e(3269),u=e(5978),a=e(1470),c={token:void 0,setUpObserver:function(){u.createDOMChangedObserver(),this.token=o.on({filter:{type:"viewTrigger",name:"DOMChanged"},handler:function(){a.getViewsAndActivate(r.ViewActivationTypes.DOMChanged)}})},turnOffObserver:function(){o.off(this.token)}};n.exports=function(n){i.isReady()?c.setUpObserver():i.addReadyHandler(c.setUpObserver),n.registerViewTrigger("DOMChanged",c)}},8934:function(n,t,e){var i=e(7023),r=e(3005),o=e(9185),u=e(5369),a=e(3269),c=e(2672),s=o.get("stores/history"),f=e(307),l=e(2454).Promise,d=e(1470),h=e(8231);function v(n){a.emit({type:"viewTrigger",name:"URLChanged",data:{source:n,newURL:h.getHref()}},!0)}n.exports=function(n){var t;t=function(){var n=s.getOriginalPushState().apply(this,arguments);return l.resolve().then((function(){v("pushState")}))["catch"]((function(n){f.error("Error while wrapPushState: ",n)})),n},c.dispatch(r.ENSURE_ORIGINAL_PUSHSTATE),h.getGlobal("history").pushState=t,function(){var n=function(){var n=s.getOriginalReplaceState().apply(this,arguments);return l.resolve().then((function(){v("replaceState")}))["catch"]((function(n){f.error("Error while wrapReplaceState: ",n)})),n};c.dispatch(r.ENSURE_ORIGINAL_REPLACESTATE),h.getGlobal("history").replaceState=n}(),h.addEventListener("popstate",p,!1),h.addEventListener("hashchange",g,!1),a.on({filter:{type:"viewTrigger",name:"URLChanged"},handler:function(){d.getViewsAndActivate(u.ViewActivationTypes.URLChanged)}}),n.registerViewTrigger("URLChanged")};var p=i.partial(v,"popstate"),g=i.partial(v,"hashchange")},6608:function(n,t,e){var i=e(7023),r=e(9185),o=e(3269),u=e(9054),a=e(8231),c=r.get("stores/directive"),s="optimizelyPreview",f=function(n){a.getGlobal(s).push(n)};t.initialize=function(n){c.isSlave()&&function(n){var t=!1;if(i.isArray(window.optimizely)&&i.each(window.optimizely,(function(e){i.isArray(e)&&"verifyPreviewProject"===e[0]&&String(e[1])===n&&(t=!0)})),!t)throw new Error("Preview projectId: "+n+" does not match expected")}(n),o.on({filter:{type:u.TYPES.ANALYTICS,name:"trackEvent"},handler:f}),o.on({filter:{type:u.TYPES.LIFECYCLE,name:"viewActivated"},handler:f}),o.on({filter:{type:u.TYPES.LIFECYCLE,name:"layerDecided"},handler:f}),o.on({filter:{type:"error"},publicOnly:!0,handler:f})},t.setupPreviewGlobal=function(){a.getGlobal(s)||a.setGlobal(s,[])},t.pushToPreviewGlobal=function(n){f(n)}},41:function(n,t,e){var i=e(7023),r=e(1999),o=e(46),u=e(1375),a=e(9455),c=e(9230),s=e(2672),f=e(1100).mM,l=e(307),d=e(857),h=e(2454).Promise,v=e(2050),p=e(8231),g=e(7628),m=e(3005),y=e(5369),_=e(9185),b=_.get("stores/async_request"),w=_.get("stores/client_metadata"),E=_.get("stores/global"),I=_.get("stores/rum"),A=_.get("stores/performance"),S=_.get("stores/xdomain"),T=_.get("stores/view_data"),k=e(8202),R="https://rum.optimizely.com/rum",x="1.0";function D(n){return i.isEmpty(n)?h.resolve():(t=function(){return g.request({url:R,method:"POST",data:n,withCredentials:!0}).then((function(n){return o.resolveRequest("RUM_FIRST_BEACON",n),n}))["catch"]((function(n){throw l.error("POST to client-rum failed:",n),o.rejectRequest("RUM_FIRST_BEACON",n),n}))},(e=b.getPromise("RUM_FIRST_BEACON"))?e.then(t):o.makeAsyncRequest("RUM_FIRST_BEACON",t));var t,e}function N(){try{return!c.querySelector("body")}catch(n){return null}}function C(){var n=p.getGlobal("performance"),t=n?n.timing:{},e=A.getMarks()||{},r=I.getApiData(),o=I.getDOMObservationData(),u=k.get("state").getActiveExperimentIds(),a=I.getFeaturesNeededData(),s=c.parseUri(I.getScriptSrc()),l=I.getRumData()||{},h=l.extras||{};i.assign(h,{apiCalls:r,DOMObservationData:o,paintTimings:P(),activeExperimentIds:u,numPages:T.getNumberOfPages(),snippet:{scheme:s.protocol.slice(0,-1),host:s.host,path:s.pathname},networkInfo:O(),experimental:E.getExperimental(),featuresNeeded:a,beacon:{cjsOnload:!0}});var g=p.getGlobal("Prototype");g&&!i.isUndefined(g.Version)&&(h.prototypeJS=g.Version);var m=!1;m=!0;var y=S.getFrames();y.length&&(h.xdFramesLoaded=y.length);var _={id:I.getRumId(),v:x,project:E.getSnippetId()||E.getProjectId(),navigationTimings:t,userTimings:e,xd:m,apis:i.keys(r),extras:h,sampleRate:l.sampleRate};(function(){var n=f.keys(),t=i.filter(i.map(n,(function(n){var t=v.getStorageKeyFromKey(n);return t?{key:n,isForeign:v.isForeignKey(n),category:t,size:n.length+f.getItem(n).length}:null}))),e=i.reduce(t,(function(n,t){var e=t.key,i=v.getIdFromKey(e);return i?((t.isForeign?n.foreign:n.local)[i]=!0,n):n}),{local:{},foreign:{}}),r=i.chain(t).filter({isForeign:!0}).reduce((function(n,t){return n[t.key.split("_")[0]]=!0,n}),{}).value(),o={local:0,foreign:0},u={local:{},foreign:{}};i.forEach(t,(function(n){var t=n.isForeign?"foreign":"local";o[t]+=n.size,u[t][n.category]||(u[t][n.category]=0),u[t][n.category]+=n.size}));var a={numKeys:f.allKeys().length,sizeKeys:f.allKeys().toString().length,sizeValues:f.allValues().toString().length,idCounts:{local:i.keys(e.local).length,foreign:i.keys(e.foreign).length},foreignOriginCount:i.keys(r).length,byteTotals:o,byteTotalsByCategory:u};return d.estimateStorage().then((function(n){return i.assign(a,{storageEstimate:n})}))})().then((function(n){D(i.assign(_,{lsMetrics:n}))}))}function O(){var n=p.getGlobal("navigator");if(n&&n.connection)return i.pick(n.connection,["downlink","rtt","effectiveType"])}function P(){var n=p.getGlobal("performance");if(n)try{var t=n.getEntriesByType("paint");if(i.isEmpty(t))return;return i.reduce(t,(function(n,t){return n[t.name]=Math.round(t.startTime),n}),{})}catch(e){return}}t.initialize=function(){var n,t=r.generate().replace(/-/g,"");n=Math.random()<.5;var e=function(){var n=c.getCurrentScript();if(n)return n.src}();s.dispatch(m.SET_RUM_DATA,{id:t,RumHost:R,inRumSample:n,src:e,data:{id:t,sync:N(),timebase:a.now(),sampleRate:.5,url:e,extras:{initialDOMState:c.getReadyState()}}})},t.queueBeacons=function(){return I.getSampleRum()?(function(){try{p.getGlobal("requestAnimationFrame")((function(){var n=I.getRumData().timebase;s.dispatch(m.SET_RUM_DATA,{data:{render:a.now()-(n||0)}})}))}catch(n){return}}(),c.isLoaded()?p.setTimeout(C,3e3):p.addEventListener("load",C),new h((function(n,t){p.setTimeout((function(){(function(){!function(){var n={id:I.getRumId(),v:x,account:E.getAccountId(),project:E.getSnippetId()||E.getProjectId(),snippet:E.getSnippetId(),revision:E.getRevision(),clientVersion:w.getClientVersion(),hasSlave:!1,wxhr:!0,extras:{}},t=v.getPersistedBehaviorEventCount(),e=u.getEventCount();n.numBehaviorEvents=e;var r=e-t;i.extend(n.extras,{behaviorEventCountDiff:r,behaviorEventCountDecreased:r<0}),i.assign(n,function(){var n=p.getGlobal("performance");if(!n)return;var t,e=I.getScriptSrc();try{if(e){l.debug("Using derived script src: ",e);var r=n.getEntriesByName(e);r.length>0&&(t=r[0])}if(!t){var o=/\/\/[^.]+\.optimizely\.(com|test)\/(js|api\/client)\/[\d]+\.js/gi;l.debug("Scanning resource timing entries with regex");var u=n.getEntriesByType("resource");t=i.find(u,(function(n){return o.test(n.name)}))}if(t)return i.mapValues(y.ResourceTimingAttributes,(function(n,e){var i=t[e];return"number"==typeof i?Math.round(1e3*(i||0))/1e3:"serverTiming"===e?i||[]:void 0}))}catch(a){return}}(),A.getDurationsFor(i.values(y.RUMPerformanceTimingAttributes))),s.dispatch(m.SET_RUM_DATA,{data:n})}();var n=I.getRumData(),t=A.getMarks()||{};return n.extras=n.extras||{},n.extras.beacon={cjsTimeout:!0},n.userTimings=t,D(n=i.pickBy(n,(function(n){return!i.isUndefined(n)})))})().then(n,t)}),3e3)}))["catch"]((function(n){l.warn("RUM / Error sending data:",n)}))):h.resolve()}},3307:function(n,t){var e,i,r;i="undefined"!=typeof window?window:this,r=function(i,r){var o=[],u=o.slice,a=o.concat,c=o.push,s=o.indexOf,f={},l=f.toString,d=f.hasOwnProperty,h={},v="1.11.3 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseJSON,-ajax/parseXML,-ajax/script,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-deprecated,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-offset,-dimensions",p=function(n,t){return new p.fn.init(n,t)},g=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,y=/-([\da-z])/gi,_=function(n,t){return t.toUpperCase()};function b(n){var t="length"in n&&n.length,e=p.type(n);return"function"!==e&&!p.isWindow(n)&&(!(1!==n.nodeType||!t)||"array"===e||0===t||"number"==typeof t&&t>0&&t-1 in n)}p.fn=p.prototype={jquery:v,constructor:p,selector:"",length:0,toArray:function(){return u.call(this)},get:function(n){return null!=n?n<0?this[n+this.length]:this[n]:u.call(this)},pushStack:function(n){var t=p.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return p.each(this,n,t)},map:function(n){return this.pushStack(p.map(this,(function(t,e){return n.call(t,e,t)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var t=this.length,e=+n+(n<0?t:0);return this.pushStack(e>=0&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:c,sort:o.sort,splice:o.splice},p.extend=p.fn.extend=function(){var n,t,e,i,r,o,u=arguments[0]||{},a=1,c=arguments.length,s=!1;for("boolean"==typeof u&&(s=u,u=arguments[a]||{},a++),"object"==typeof u||p.isFunction(u)||(u={}),a===c&&(u=this,a--);a<c;a++)if(null!=(r=arguments[a]))for(i in r)n=u[i],u!==(e=r[i])&&(s&&e&&(p.isPlainObject(e)||(t=p.isArray(e)))?(t?(t=!1,o=n&&p.isArray(n)?n:[]):o=n&&p.isPlainObject(n)?n:{},u[i]=p.extend(s,o,e)):e!==undefined&&(u[i]=e));return u},p.extend({expando:"jQuery"+(v+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n)},noop:function(){},isFunction:function(n){return"function"===p.type(n)},isArray:Array.isArray||function(n){return"array"===p.type(n)},isWindow:function(n){return null!=n&&n==n.window},isNumeric:function(n){return!p.isArray(n)&&n-parseFloat(n)+1>=0},isEmptyObject:function(n){var t;for(t in n)return!1;return!0},isPlainObject:function(n){var t;if(!n||"object"!==p.type(n)||n.nodeType||p.isWindow(n))return!1;try{if(n.constructor&&!d.call(n,"constructor")&&!d.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(h.ownLast)for(t in n)return d.call(n,t);for(t in n);return t===undefined||d.call(n,t)},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?f[l.call(n)]||"object":typeof n},globalEval:function(n){n&&p.trim(n)&&(i.execScript||function(n){i.eval.call(i,n)})(n)},camelCase:function(n){return n.replace(m,"ms-").replace(y,_)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,e){var i=0,r=n.length,o=b(n);if(e){if(o)for(;i<r&&!1!==t.apply(n[i],e);i++);else for(i in n)if(!1===t.apply(n[i],e))break}else if(o)for(;i<r&&!1!==t.call(n[i],i,n[i]);i++);else for(i in n)if(!1===t.call(n[i],i,n[i]))break;return n},trim:function(n){return null==n?"":(n+"").replace(g,"")},makeArray:function(n,t){var e=t||[];return null!=n&&(b(Object(n))?p.merge(e,"string"==typeof n?[n]:n):c.call(e,n)),e},inArray:function(n,t,e){var i;if(t){if(s)return s.call(t,n,e);for(i=t.length,e=e?e<0?Math.max(0,i+e):e:0;e<i;e++)if(e in t&&t[e]===n)return e}return-1},merge:function(n,t){for(var e=+t.length,i=0,r=n.length;i<e;)n[r++]=t[i++];if(e!=e)for(;t[i]!==undefined;)n[r++]=t[i++];return n.length=r,n},grep:function(n,t,e){for(var i=[],r=0,o=n.length,u=!e;r<o;r++)!t(n[r],r)!==u&&i.push(n[r]);return i},map:function(n,t,e){var i,r=0,o=n.length,u=[];if(b(n))for(;r<o;r++)null!=(i=t(n[r],r,e))&&u.push(i);else for(r in n)null!=(i=t(n[r],r,e))&&u.push(i);return a.apply([],u)},guid:1,proxy:function(n,t){var e,i,r;return"string"==typeof t&&(r=n[t],t=n,n=r),p.isFunction(n)?(e=u.call(arguments,2),i=function(){return n.apply(t||this,e.concat(u.call(arguments)))},i.guid=n.guid=n.guid||p.guid++,i):undefined},now:function(){return+new Date},support:h}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(n,t){f["[object "+t+"]"]=t.toLowerCase()}));var w=function(n){var t,e,i,r,o,u,a,c,s,f,l,d,h,v,p,g,m,y,_,b="sizzle"+1*new Date,w=n.document,E=0,I=0,A=an(),S=an(),T=an(),k=function(n,t){return n===t&&(l=!0),0},R=1<<31,x={}.hasOwnProperty,D=[],N=D.pop,C=D.push,O=D.push,P=D.slice,M=function(n,t){for(var e=0,i=n.length;e<i;e++)if(n[e]===t)return e;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",V=U.replace("w","w#"),z="\\[[\\x20\\t\\r\\n\\f]*("+U+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+V+"))|)"+F+"*\\]",j=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",q=new RegExp(F+"+","g"),B=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),G=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),H=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),$=new RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),W=new RegExp(j),Y=new RegExp("^"+V+"$"),K={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U.replace("w","w*")+")"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nn=/[+~]/,tn=/'|\\/g,en=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),rn=function(n,t,e){var i="0x"+t-65536;return i!=i||e?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},on=function(){d()};try{O.apply(D=P.call(w.childNodes),w.childNodes),D[w.childNodes.length].nodeType}catch(In){O={apply:D.length?function(n,t){C.apply(n,P.call(t))}:function(n,t){for(var e=n.length,i=0;n[e++]=t[i++];);n.length=e-1}}}function un(n,t,i,r){var o,a,s,f,l,v,m,y,E,I;if((t?t.ownerDocument||t:w)!==h&&d(t),i=i||[],f=(t=t||h).nodeType,"string"!=typeof n||!n||1!==f&&9!==f&&11!==f)return i;if(!r&&p){if(11!==f&&(o=Z.exec(n)))if(s=o[1]){if(9===f){if(!(a=t.getElementById(s))||!a.parentNode)return i;if(a.id===s)return i.push(a),i}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(s))&&_(t,a)&&a.id===s)return i.push(a),i}else{if(o[2])return O.apply(i,t.getElementsByTagName(n)),i;if((s=o[3])&&e.getElementsByClassName)return O.apply(i,t.getElementsByClassName(s)),i}if(e.qsa&&(!g||!g.test(n))){if(y=m=b,E=t,I=1!==f&&n,1===f&&"object"!==t.nodeName.toLowerCase()){for(v=u(n),(m=t.getAttribute("id"))?y=m.replace(tn,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",l=v.length;l--;)v[l]=y+mn(v[l]);E=nn.test(n)&&pn(t.parentNode)||t,I=v.join(",")}if(I)try{return O.apply(i,E.querySelectorAll(I)),i}catch(A){}finally{m||t.removeAttribute("id")}}}return c(n.replace(B,"$1"),t,i,r)}function an(){var n=[];return function t(e,r){return n.push(e+" ")>i.cacheLength&&delete t[n.shift()],t[e+" "]=r}}function cn(n){return n[b]=!0,n}function sn(n){var t=h.createElement("div");try{return!!n(t)}catch(In){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fn(n,t){for(var e=n.split("|"),r=n.length;r--;)i.attrHandle[e[r]]=t}function ln(n,t){var e=t&&n,i=e&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||R)-(~n.sourceIndex||R);if(i)return i;if(e)for(;e=e.nextSibling;)if(e===t)return-1;return n?1:-1}function dn(n){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===n}}function hn(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function vn(n){return cn((function(t){return t=+t,cn((function(e,i){for(var r,o=n([],e.length,t),u=o.length;u--;)e[r=o[u]]&&(e[r]=!(i[r]=e[r]))}))}))}function pn(n){return n&&"undefined"!=typeof n.getElementsByTagName&&n}for(t in e=un.support={},o=un.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return!!t&&"HTML"!==t.nodeName},d=un.setDocument=function(n){var t,r,u=n?n.ownerDocument||n:w;return u!==h&&9===u.nodeType&&u.documentElement?(h=u,v=u.documentElement,(r=u.defaultView)&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",on,!1):r.attachEvent&&r.attachEvent("onunload",on)),p=!o(u),e.attributes=sn((function(n){return n.className="i",!n.getAttribute("className")})),e.getElementsByTagName=sn((function(n){return n.appendChild(u.createComment("")),!n.getElementsByTagName("*").length})),e.getElementsByClassName=Q.test(u.getElementsByClassName),e.getById=sn((function(n){return v.appendChild(n).id=b,!u.getElementsByName||!u.getElementsByName(b).length})),e.getById?(i.find.ID=function(n,t){if("undefined"!=typeof t.getElementById&&p){var e=t.getElementById(n);return e&&e.parentNode?[e]:[]}},i.filter.ID=function(n){var t=n.replace(en,rn);return function(n){return n.getAttribute("id")===t}}):(delete i.find.ID,i.filter.ID=function(n){var t=n.replace(en,rn);return function(n){var e="undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id");return e&&e.value===t}}),i.find.TAG=e.getElementsByTagName?function(n,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(n):e.qsa?t.querySelectorAll(n):void 0}:function(n,t){var e,i=[],r=0,o=t.getElementsByTagName(n);if("*"===n){for(;e=o[r++];)1===e.nodeType&&i.push(e);return i}return o},i.find.CLASS=e.getElementsByClassName&&function(n,t){if(p)return t.getElementsByClassName(n)},m=[],g=[],(e.qsa=Q.test(u.querySelectorAll))&&(sn((function(n){v.appendChild(n).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\f]' msallowcapture=''><option selected=''></option></select>",n.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),n.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+L+")"),n.querySelectorAll("[id~="+b+"-]").length||g.push("~="),n.querySelectorAll(":checked").length||g.push(":checked"),n.querySelectorAll("a#"+b+"+*").length||g.push(".#.+[+~]")})),sn((function(n){var t=u.createElement("input");t.setAttribute("type","hidden"),n.appendChild(t).setAttribute("name","D"),n.querySelectorAll("[name=d]").length&&g.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),n.querySelectorAll(":enabled").length||g.push(":enabled",":disabled"),n.querySelectorAll("*,:x"),g.push(",.*:")}))),(e.matchesSelector=Q.test(y=v.matches||v.webkitMatchesSelector||v.mozMatchesSelector||v.oMatchesSelector||v.msMatchesSelector))&&sn((function(n){e.disconnectedMatch=y.call(n,"div"),y.call(n,"[s!='']:x"),m.push("!=",j)})),g=g.length&&new RegExp(g.join("|")),m=m.length&&new RegExp(m.join("|")),t=Q.test(v.compareDocumentPosition),_=t||Q.test(v.contains)?function(n,t){var e=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(e.contains?e.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)for(;t=t.parentNode;)if(t===n)return!0;return!1},k=t?function(n,t){if(n===t)return l=!0,0;var i=!n.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1)||!e.sortDetached&&t.compareDocumentPosition(n)===i?n===u||n.ownerDocument===w&&_(w,n)?-1:t===u||t.ownerDocument===w&&_(w,t)?1:f?M(f,n)-M(f,t):0:4&i?-1:1)}:function(n,t){if(n===t)return l=!0,0;var e,i=0,r=n.parentNode,o=t.parentNode,a=[n],c=[t];if(!r||!o)return n===u?-1:t===u?1:r?-1:o?1:f?M(f,n)-M(f,t):0;if(r===o)return ln(n,t);for(e=n;e=e.parentNode;)a.unshift(e);for(e=t;e=e.parentNode;)c.unshift(e);for(;a[i]===c[i];)i++;return i?ln(a[i],c[i]):a[i]===w?-1:c[i]===w?1:0},u):h},un.matches=function(n,t){return un(n,null,null,t)},un.matchesSelector=function(n,t){if((n.ownerDocument||n)!==h&&d(n),t=t.replace($,"='$1']"),e.matchesSelector&&p&&(!m||!m.test(t))&&(!g||!g.test(t)))try{var i=y.call(n,t);if(i||e.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(In){}return un(t,h,null,[n]).length>0},un.contains=function(n,t){return(n.ownerDocument||n)!==h&&d(n),_(n,t)},un.attr=function(n,t){(n.ownerDocument||n)!==h&&d(n);var r=i.attrHandle[t.toLowerCase()],o=r&&x.call(i.attrHandle,t.toLowerCase())?r(n,t,!p):undefined;return o!==undefined?o:e.attributes||!p?n.getAttribute(t):(o=n.getAttributeNode(t))&&o.specified?o.value:null},un.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n)},un.uniqueSort=function(n){var t,i=[],r=0,o=0;if(l=!e.detectDuplicates,f=!e.sortStable&&n.slice(0),n.sort(k),l){for(;t=n[o++];)t===n[o]&&(r=i.push(o));for(;r--;)n.splice(i[r],1)}return f=null,n},r=un.getText=function(n){var t,e="",i=0,o=n.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)e+=r(n)}else if(3===o||4===o)return n.nodeValue}else for(;t=n[i++];)e+=r(t);return e},i=un.selectors={cacheLength:50,createPseudo:cn,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(en,rn),n[3]=(n[3]||n[4]||n[5]||"").replace(en,rn),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||un.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&un.error(n[0]),n},PSEUDO:function(n){var t,e=!n[6]&&n[2];return K.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":e&&W.test(e)&&(t=u(e,!0))&&(t=e.indexOf(")",e.length-t)-e.length)&&(n[0]=n[0].slice(0,t),n[2]=e.slice(0,t)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(en,rn).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=A[n+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+n+"("+F+"|$)"))&&A(n,(function(n){return t.test("string"==typeof n.className&&n.className||"undefined"!=typeof n.getAttribute&&n.getAttribute("class")||"")}))},ATTR:function(n,t,e){return function(i){var r=un.attr(i,n);return null==r?"!="===t:!t||(r+="","="===t?r===e:"!="===t?r!==e:"^="===t?e&&0===r.indexOf(e):"*="===t?e&&r.indexOf(e)>-1:"$="===t?e&&r.slice(-e.length)===e:"~="===t?(" "+r.replace(q," ")+" ").indexOf(e)>-1:"|="===t&&(r===e||r.slice(0,e.length+1)===e+"-"))}},CHILD:function(n,t,e,i,r){var o="nth"!==n.slice(0,3),u="last"!==n.slice(-4),a="of-type"===t;return 1===i&&0===r?function(n){return!!n.parentNode}:function(t,e,c){var s,f,l,d,h,v,p=o!==u?"nextSibling":"previousSibling",g=t.parentNode,m=a&&t.nodeName.toLowerCase(),y=!c&&!a;if(g){if(o){for(;p;){for(l=t;l=l[p];)if(a?l.nodeName.toLowerCase()===m:1===l.nodeType)return!1;v=p="only"===n&&!v&&"nextSibling"}return!0}if(v=[u?g.firstChild:g.lastChild],u&&y){for(h=(s=(f=g[b]||(g[b]={}))[n]||[])[0]===E&&s[1],d=s[0]===E&&s[2],l=h&&g.childNodes[h];l=++h&&l&&l[p]||(d=h=0)||v.pop();)if(1===l.nodeType&&++d&&l===t){f[n]=[E,h,d];break}}else if(y&&(s=(t[b]||(t[b]={}))[n])&&s[0]===E)d=s[1];else for(;(l=++h&&l&&l[p]||(d=h=0)||v.pop())&&((a?l.nodeName.toLowerCase()!==m:1!==l.nodeType)||!++d||(y&&((l[b]||(l[b]={}))[n]=[E,d]),l!==t)););return(d-=r)===i||d%i==0&&d/i>=0}}},PSEUDO:function(n,t){var e,r=i.pseudos[n]||i.setFilters[n.toLowerCase()]||un.error("unsupported pseudo: "+n);return r[b]?r(t):r.length>1?(e=[n,n,"",t],i.setFilters.hasOwnProperty(n.toLowerCase())?cn((function(n,e){for(var i,o=r(n,t),u=o.length;u--;)n[i=M(n,o[u])]=!(e[i]=o[u])})):function(n){return r(n,0,e)}):r}},pseudos:{not:cn((function(n){var t=[],e=[],i=a(n.replace(B,"$1"));return i[b]?cn((function(n,t,e,r){for(var o,u=i(n,null,r,[]),a=n.length;a--;)(o=u[a])&&(n[a]=!(t[a]=o))})):function(n,r,o){return t[0]=n,i(t,null,o,e),t[0]=null,!e.pop()}})),has:cn((function(n){return function(t){return un(n,t).length>0}})),contains:cn((function(n){return n=n.replace(en,rn),function(t){return(t.textContent||t.innerText||r(t)).indexOf(n)>-1}})),lang:cn((function(n){return Y.test(n||"")||un.error("unsupported lang: "+n),n=n.replace(en,rn).toLowerCase(),function(t){var e;do{if(e=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(n){return n===v},focus:function(n){return n===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return!1===n.disabled},disabled:function(n){return!0===n.disabled},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,!0===n.selected},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!i.pseudos.empty(n)},header:function(n){return J.test(n.nodeName)},input:function(n){return X.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:vn((function(){return[0]})),last:vn((function(n,t){return[t-1]})),eq:vn((function(n,t,e){return[e<0?e+t:e]})),even:vn((function(n,t){for(var e=0;e<t;e+=2)n.push(e);return n})),odd:vn((function(n,t){for(var e=1;e<t;e+=2)n.push(e);return n})),lt:vn((function(n,t,e){for(var i=e<0?e+t:e;--i>=0;)n.push(i);return n})),gt:vn((function(n,t,e){for(var i=e<0?e+t:e;++i<t;)n.push(i);return n}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=dn(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=hn(t);function gn(){}function mn(n){for(var t=0,e=n.length,i="";t<e;t++)i+=n[t].value;return i}function yn(n,t,e){var i=t.dir,r=e&&"parentNode"===i,o=I++;return t.first?function(t,e,o){for(;t=t[i];)if(1===t.nodeType||r)return n(t,e,o)}:function(t,e,u){var a,c,s=[E,o];if(u){for(;t=t[i];)if((1===t.nodeType||r)&&n(t,e,u))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if((a=(c=t[b]||(t[b]={}))[i])&&a[0]===E&&a[1]===o)return s[2]=a[2];if(c[i]=s,s[2]=n(t,e,u))return!0}}}function _n(n){return n.length>1?function(t,e,i){for(var r=n.length;r--;)if(!n[r](t,e,i))return!1;return!0}:n[0]}function bn(n,t,e,i,r){for(var o,u=[],a=0,c=n.length,s=null!=t;a<c;a++)(o=n[a])&&(e&&!e(o,i,r)||(u.push(o),s&&t.push(a)));return u}function wn(n,t,e,i,r,o){return i&&!i[b]&&(i=wn(i)),r&&!r[b]&&(r=wn(r,o)),cn((function(o,u,a,c){var s,f,l,d=[],h=[],v=u.length,p=o||function(n,t,e){for(var i=0,r=t.length;i<r;i++)un(n,t[i],e);return e}(t||"*",a.nodeType?[a]:a,[]),g=!n||!o&&t?p:bn(p,d,n,a,c),m=e?r||(o?n:v||i)?[]:u:g;if(e&&e(g,m,a,c),i)for(s=bn(m,h),i(s,[],a,c),f=s.length;f--;)(l=s[f])&&(m[h[f]]=!(g[h[f]]=l));if(o){if(r||n){if(r){for(s=[],f=m.length;f--;)(l=m[f])&&s.push(g[f]=l);r(null,m=[],s,c)}for(f=m.length;f--;)(l=m[f])&&(s=r?M(o,l):d[f])>-1&&(o[s]=!(u[s]=l))}}else m=bn(m===u?m.splice(v,m.length):m),r?r(null,u,m,c):O.apply(u,m)}))}function En(n){for(var t,e,r,o=n.length,u=i.relative[n[0].type],a=u||i.relative[" "],c=u?1:0,f=yn((function(n){return n===t}),a,!0),l=yn((function(n){return M(t,n)>-1}),a,!0),d=[function(n,e,i){var r=!u&&(i||e!==s)||((t=e).nodeType?f(n,e,i):l(n,e,i));return t=null,r}];c<o;c++)if(e=i.relative[n[c].type])d=[yn(_n(d),e)];else{if((e=i.filter[n[c].type].apply(null,n[c].matches))[b]){for(r=++c;r<o&&!i.relative[n[r].type];r++);return wn(c>1&&_n(d),c>1&&mn(n.slice(0,c-1).concat({value:" "===n[c-2].type?"*":""})).replace(B,"$1"),e,c<r&&En(n.slice(c,r)),r<o&&En(n=n.slice(r)),r<o&&mn(n))}d.push(e)}return _n(d)}return gn.prototype=i.filters=i.pseudos,i.setFilters=new gn,u=un.tokenize=function(n,t){var e,r,o,u,a,c,s,f=S[n+" "];if(f)return t?0:f.slice(0);for(a=n,c=[],s=i.preFilter;a;){for(u in e&&!(r=G.exec(a))||(r&&(a=a.slice(r[0].length)||a),c.push(o=[])),e=!1,(r=H.exec(a))&&(e=r.shift(),o.push({value:e,type:r[0].replace(B," ")}),a=a.slice(e.length)),i.filter)!(r=K[u].exec(a))||s[u]&&!(r=s[u](r))||(e=r.shift(),o.push({value:e,type:u,matches:r}),a=a.slice(e.length));if(!e)break}return t?a.length:a?un.error(n):S(n,c).slice(0)},a=un.compile=function(n,t){var e,r=[],o=[],a=T[n+" "];if(!a){for(t||(t=u(n)),e=t.length;e--;)(a=En(t[e]))[b]?r.push(a):o.push(a);a=T(n,function(n,t){var e=t.length>0,r=n.length>0,o=function(o,u,a,c,f){var l,d,v,p=0,g="0",m=o&&[],y=[],_=s,b=o||r&&i.find.TAG("*",f),w=E+=null==_?1:Math.random()||.1,I=b.length;for(f&&(s=u!==h&&u);g!==I&&null!=(l=b[g]);g++){if(r&&l){for(d=0;v=n[d++];)if(v(l,u,a)){c.push(l);break}f&&(E=w)}e&&((l=!v&&l)&&p--,o&&m.push(l))}if(p+=g,e&&g!==p){for(d=0;v=t[d++];)v(m,y,u,a);if(o){if(p>0)for(;g--;)m[g]||y[g]||(y[g]=N.call(c));y=bn(y)}O.apply(c,y),f&&!o&&y.length>0&&p+t.length>1&&un.uniqueSort(c)}return f&&(E=w,s=_),m};return e?cn(o):o}(o,r)),a.selector=n}return a},c=un.select=function(n,t,r,o){var c,s,f,l,d,h="function"==typeof n&&n,v=!o&&u(n=h.selector||n);if(r=r||[],1===v.length){if((s=v[0]=v[0].slice(0)).length>2&&"ID"===(f=s[0]).type&&e.getById&&9===t.nodeType&&p&&i.relative[s[1].type]){if(!(t=(i.find.ID(f.matches[0].replace(en,rn),t)||[])[0]))return r;h&&(t=t.parentNode),n=n.slice(s.shift().value.length)}for(c=K.needsContext.test(n)?0:s.length;c--&&(f=s[c],!i.relative[l=f.type]);)if((d=i.find[l])&&(o=d(f.matches[0].replace(en,rn),nn.test(s[0].type)&&pn(t.parentNode)||t))){if(s.splice(c,1),!(n=o.length&&mn(s)))return O.apply(r,o),r;break}}return(h||a(n,v))(o,t,!p,r,nn.test(n)&&pn(t.parentNode)||t),r},e.sortStable=b.split("").sort(k).join("")===b,e.detectDuplicates=!!l,d(),e.sortDetached=sn((function(n){return 1&n.compareDocumentPosition(h.createElement("div"))})),sn((function(n){return n.innerHTML="<a href='#'></a>","#"===n.firstChild.getAttribute("href")}))||fn("type|href|height|width",(function(n,t,e){if(!e)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)})),e.attributes&&sn((function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")}))||fn("value",(function(n,t,e){if(!e&&"input"===n.nodeName.toLowerCase())return n.defaultValue})),sn((function(n){return null==n.getAttribute("disabled")}))||fn(L,(function(n,t,e){var i;if(!e)return!0===n[t]?t.toLowerCase():(i=n.getAttributeNode(t))&&i.specified?i.value:null})),un}(i);p.find=w,p.expr=w.selectors,p.expr[":"]=p.expr.pseudos,p.unique=w.uniqueSort,p.text=w.getText,p.isXMLDoc=w.isXML,p.contains=w.contains;var E=p.expr.match.needsContext,I=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,A=/^.[^:#\[\.,]*$/;function S(n,t,e){if(p.isFunction(t))return p.grep(n,(function(n,i){return!!t.call(n,i,n)!==e}));if(t.nodeType)return p.grep(n,(function(n){return n===t!==e}));if("string"==typeof t){if(A.test(t))return p.filter(t,n,e);t=p.filter(t,n)}return p.grep(n,(function(n){return p.inArray(n,t)>=0!==e}))}p.filter=function(n,t,e){var i=t[0];return e&&(n=":not("+n+")"),1===t.length&&1===i.nodeType?p.find.matchesSelector(i,n)?[i]:[]:p.find.matches(n,p.grep(t,(function(n){return 1===n.nodeType})))},p.fn.extend({find:function(n){var t,e=[],i=this,r=i.length;if("string"!=typeof n)return this.pushStack(p(n).filter((function(){for(t=0;t<r;t++)if(p.contains(i[t],this))return!0})));for(t=0;t<r;t++)p.find(n,i[t],e);return(e=this.pushStack(r>1?p.unique(e):e)).selector=this.selector?this.selector+" "+n:n,e},filter:function(n){return this.pushStack(S(this,n||[],!1))},not:function(n){return this.pushStack(S(this,n||[],!0))},is:function(n){return!!S(this,"string"==typeof n&&E.test(n)?p(n):n||[],!1).length}});var T,k=i.document,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(n,t){var e,i;if(!n)return this;if("string"==typeof n){if(!(e="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:R.exec(n))||!e[1]&&t)return!t||t.jquery?(t||T).find(n):this.constructor(t).find(n);if(e[1]){if(t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(e[1],t&&t.nodeType?t.ownerDocument||t:k,!0)),I.test(e[1])&&p.isPlainObject(t))for(e in t)p.isFunction(this[e])?this[e](t[e]):this.attr(e,t[e]);return this}if((i=k.getElementById(e[2]))&&i.parentNode){if(i.id!==e[2])return T.find(n);this.length=1,this[0]=i}return this.context=k,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):p.isFunction(n)?"undefined"!=typeof T.ready?T.ready(n):n(p):(n.selector!==undefined&&(this.selector=n.selector,this.context=n.context),p.makeArray(n,this))}).prototype=p.fn,T=p(k);var x=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function N(n,t){do{n=n[t]}while(n&&1!==n.nodeType);return n}p.extend({dir:function(n,t,e){for(var i=[],r=n[t];r&&9!==r.nodeType&&(e===undefined||1!==r.nodeType||!p(r).is(e));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(n,t){for(var e=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&e.push(n);return e}}),p.fn.extend({has:function(n){var t,e=p(n,this),i=e.length;return this.filter((function(){for(t=0;t<i;t++)if(p.contains(this,e[t]))return!0}))},closest:function(n,t){for(var e,i=0,r=this.length,o=[],u=E.test(n)||"string"!=typeof n?p(n,t||this.context):0;i<r;i++)for(e=this[i];e&&e!==t;e=e.parentNode)if(e.nodeType<11&&(u?u.index(e)>-1:1===e.nodeType&&p.find.matchesSelector(e,n))){o.push(e);break}return this.pushStack(o.length>1?p.unique(o):o)},index:function(n){return n?"string"==typeof n?p.inArray(this[0],p(n)):p.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(p.unique(p.merge(this.get(),p(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}}),p.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return p.dir(n,"parentNode")},parentsUntil:function(n,t,e){return p.dir(n,"parentNode",e)},next:function(n){return N(n,"nextSibling")},prev:function(n){return N(n,"previousSibling")},nextAll:function(n){return p.dir(n,"nextSibling")},prevAll:function(n){return p.dir(n,"previousSibling")},nextUntil:function(n,t,e){return p.dir(n,"nextSibling",e)},prevUntil:function(n,t,e){return p.dir(n,"previousSibling",e)},siblings:function(n){return p.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return p.sibling(n.firstChild)},contents:function(n){return p.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:p.merge([],n.childNodes)}},(function(n,t){p.fn[n]=function(e,i){var r=p.map(this,t,e);return"Until"!==n.slice(-5)&&(i=e),i&&"string"==typeof i&&(r=p.filter(i,r)),this.length>1&&(D[n]||(r=p.unique(r)),x.test(n)&&(r=r.reverse())),this.pushStack(r)}}));var C,O=/\S+/g,P={};function M(){k.addEventListener?(k.removeEventListener("DOMContentLoaded",L,!1),i.removeEventListener("load",L,!1)):(k.detachEvent("onreadystatechange",L),i.detachEvent("onload",L))}function L(){(k.addEventListener||"load"===event.type||"complete"===k.readyState)&&(M(),p.ready())}p.Callbacks=function(n){n="string"==typeof n?P[n]||function(n){var t=P[n]={};return p.each(n.match(O)||[],(function(n,e){t[e]=!0})),t}(n):p.extend({},n);var t,e,i,r,o,u,a=[],c=!n.once&&[],s=function(l){for(e=n.memory&&l,i=!0,o=u||0,u=0,r=a.length,t=!0;a&&o<r;o++)if(!1===a[o].apply(l[0],l[1])&&n.stopOnFalse){e=!1;break}t=!1,a&&(c?c.length&&s(c.shift()):e?a=[]:f.disable())},f={add:function(){if(a){var i=a.length;!function o(t){p.each(t,(function(t,e){var i=p.type(e);"function"===i?n.unique&&f.has(e)||a.push(e):e&&e.length&&"string"!==i&&o(e)}))}(arguments),t?r=a.length:e&&(u=i,s(e))}return this},remove:function(){return a&&p.each(arguments,(function(n,e){for(var i;(i=p.inArray(e,a,i))>-1;)a.splice(i,1),t&&(i<=r&&r--,i<=o&&o--)})),this},has:function(n){return n?p.inArray(n,a)>-1:!(!a||!a.length)},empty:function(){return a=[],r=0,this},disable:function(){return a=c=e=undefined,this},disabled:function(){return!a},lock:function(){return c=undefined,e||f.disable(),this},locked:function(){return!c},fireWith:function(n,e){return!a||i&&!c||(e=[n,(e=e||[]).slice?e.slice():e],t?c.push(e):s(e)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},p.extend({Deferred:function(n){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],e="pending",i={state:function(){return e},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var n=arguments;return p.Deferred((function(e){p.each(t,(function(t,o){var u=p.isFunction(n[t])&&n[t];r[o[1]]((function(){var n=u&&u.apply(this,arguments);n&&p.isFunction(n.promise)?n.promise().done(e.resolve).fail(e.reject).progress(e.notify):e[o[0]+"With"](this===i?e.promise():this,u?[n]:arguments)}))})),n=null})).promise()},promise:function(n){return null!=n?p.extend(n,i):i}},r={};return i.pipe=i.then,p.each(t,(function(n,o){var u=o[2],a=o[3];i[o[1]]=u.add,a&&u.add((function(){e=a}),t[1^n][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=u.fireWith})),i.promise(r),n&&n.call(r,r),r},when:function(n){var t,e,i,r=0,o=u.call(arguments),a=o.length,c=1!==a||n&&p.isFunction(n.promise)?a:0,s=1===c?n:p.Deferred(),f=function(n,e,i){return function(r){e[n]=this,i[n]=arguments.length>1?u.call(arguments):r,i===t?s.notifyWith(e,i):--c||s.resolveWith(e,i)}};if(a>1)for(t=new Array(a),e=new Array(a),i=new Array(a);r<a;r++)o[r]&&p.isFunction(o[r].promise)?o[r].promise().done(f(r,i,o)).fail(s.reject).progress(f(r,e,t)):--c;return c||s.resolveWith(i,o),s.promise()}}),p.fn.ready=function(n){return p.ready.promise().done(n),this},p.extend({isReady:!1,readyWait:1,holdReady:function(n){n?p.readyWait++:p.ready(!0)},ready:function(n){if(!(!0===n?--p.readyWait:p.isReady)){if(!k.body)return setTimeout(p.ready);p.isReady=!0,!0!==n&&--p.readyWait>0||(C.resolveWith(k,[p]),p.fn.triggerHandler&&(p(k).triggerHandler("ready"),p(k).off("ready")))}}}),p.ready.promise=function(n){if(!C)if(C=p.Deferred(),"complete"===k.readyState)setTimeout(p.ready);else if(k.addEventListener)k.addEventListener("DOMContentLoaded",L,!1),i.addEventListener("load",L,!1);else{k.attachEvent("onreadystatechange",L),i.attachEvent("onload",L);var t=!1;try{t=null==i.frameElement&&k.documentElement}catch(e){}t&&t.doScroll&&function n(){if(!p.isReady){try{t.doScroll("left")}catch(e){return setTimeout(n,50)}M(),p.ready()}}()}return C.promise(n)};var F,U=typeof undefined;for(F in p(h))break;h.ownLast="0"!==F,h.inlineBlockNeedsLayout=!1,p((function(){var n,t,e,i;(e=k.getElementsByTagName("body")[0])&&e.style&&(t=k.createElement("div"),(i=k.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",e.appendChild(i).appendChild(t),typeof t.style.zoom!==U&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",h.inlineBlockNeedsLayout=n=3===t.offsetWidth,n&&(e.style.zoom=1)),e.removeChild(i))})),function(){var n=k.createElement("div");if(null==h.deleteExpando){h.deleteExpando=!0;try{delete n.test}catch(t){h.deleteExpando=!1}}n=null}(),p.acceptData=function(n){var t=p.noData[(n.nodeName+" ").toLowerCase()],e=+n.nodeType||1;return(1===e||9===e)&&(!t||!0!==t&&n.getAttribute("classid")===t)};var V=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/([A-Z])/g;function j(n,t,e){if(e===undefined&&1===n.nodeType){var i="data-"+t.replace(z,"-$1").toLowerCase();if("string"==typeof(e=n.getAttribute(i))){try{e="true"===e||"false"!==e&&("null"===e?null:+e+""===e?+e:V.test(e)?p.parseJSON(e):e)}catch(r){}p.data(n,t,e)}else e=undefined}return e}function q(n){var t;for(t in n)if(("data"!==t||!p.isEmptyObject(n[t]))&&"toJSON"!==t)return!1;return!0}function B(n,t,e,i){if(p.acceptData(n)){var r,u,a=p.expando,c=n.nodeType,s=c?p.cache:n,f=c?n[a]:n[a]&&a;if(f&&s[f]&&(i||s[f].data)||e!==undefined||"string"!=typeof t)return f||(f=c?n[a]=o.pop()||p.guid++:a),s[f]||(s[f]=c?{}:{toJSON:p.noop}),"object"!=typeof t&&"function"!=typeof t||(i?s[f]=p.extend(s[f],t):s[f].data=p.extend(s[f].data,t)),u=s[f],i||(u.data||(u.data={}),u=u.data),e!==undefined&&(u[p.camelCase(t)]=e),"string"==typeof t?null==(r=u[t])&&(r=u[p.camelCase(t)]):r=u,r}}function G(n,t,e){if(p.acceptData(n)){var i,r,o=n.nodeType,u=o?p.cache:n,a=o?n[p.expando]:p.expando;if(u[a]){if(t&&(i=e?u[a]:u[a].data)){r=(t=p.isArray(t)?t.concat(p.map(t,p.camelCase)):t in i||(t=p.camelCase(t))in i?[t]:t.split(" ")).length;for(;r--;)delete i[t[r]];if(e?!q(i):!p.isEmptyObject(i))return}(e||(delete u[a].data,q(u[a])))&&(o?p.cleanData([n],!0):h.deleteExpando||u!=u.window?delete u[a]:u[a]=null)}}}p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(n){return!!(n=n.nodeType?p.cache[n[p.expando]]:n[p.expando])&&!q(n)},data:function(n,t,e){return B(n,t,e)},removeData:function(n,t){return G(n,t)},_data:function(n,t,e){return B(n,t,e,!0)},_removeData:function(n,t){return G(n,t,!0)}}),p.fn.extend({data:function(n,t){var e,i,r,o=this[0],u=o&&o.attributes;if(n===undefined){if(this.length&&(r=p.data(o),1===o.nodeType&&!p._data(o,"parsedAttrs"))){for(e=u.length;e--;)u[e]&&0===(i=u[e].name).indexOf("data-")&&j(o,i=p.camelCase(i.slice(5)),r[i]);p._data(o,"parsedAttrs",!0)}return r}return"object"==typeof n?this.each((function(){p.data(this,n)})):arguments.length>1?this.each((function(){p.data(this,n,t)})):o?j(o,n,p.data(o,n)):undefined},removeData:function(n){return this.each((function(){p.removeData(this,n)}))}}),p.extend({queue:function(n,t,e){var i;if(n)return t=(t||"fx")+"queue",i=p._data(n,t),e&&(!i||p.isArray(e)?i=p._data(n,t,p.makeArray(e)):i.push(e)),i||[]},dequeue:function(n,t){t=t||"fx";var e=p.queue(n,t),i=e.length,r=e.shift(),o=p._queueHooks(n,t);"inprogress"===r&&(r=e.shift(),i--),r&&("fx"===t&&e.unshift("inprogress"),delete o.stop,r.call(n,(function(){p.dequeue(n,t)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(n,t){var e=t+"queueHooks";return p._data(n,e)||p._data(n,e,{empty:p.Callbacks("once memory").add((function(){p._removeData(n,t+"queue"),p._removeData(n,e)}))})}}),p.fn.extend({queue:function(n,t){var e=2;return"string"!=typeof n&&(t=n,n="fx",e--),arguments.length<e?p.queue(this[0],n):t===undefined?this:this.each((function(){var e=p.queue(this,n,t);p._queueHooks(this,n),"fx"===n&&"inprogress"!==e[0]&&p.dequeue(this,n)}))},dequeue:function(n){return this.each((function(){p.dequeue(this,n)}))},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var e,i=1,r=p.Deferred(),o=this,u=this.length,a=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof n&&(t=n,n=undefined),n=n||"fx";u--;)(e=p._data(o[u],n+"queueHooks"))&&e.empty&&(i++,e.empty.add(a));return a(),r.promise(t)}});var H=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,$=["Top","Right","Bottom","Left"],W=function(n,t){return n=t||n,"none"===p.css(n,"display")||!p.contains(n.ownerDocument,n)},Y=p.access=function(n,t,e,i,r,o,u){var a=0,c=n.length,s=null==e;if("object"===p.type(e))for(a in r=!0,e)p.access(n,t,a,e[a],!0,o,u);else if(i!==undefined&&(r=!0,p.isFunction(i)||(u=!0),s&&(u?(t.call(n,i),t=null):(s=t,t=function(n,t,e){return s.call(p(n),e)})),t))for(;a<c;a++)t(n[a],e,u?i:i.call(n[a],a,t(n[a],e)));return r?n:s?t.call(n):c?t(n[0],e):o},K=/^(?:checkbox|radio)$/i;!function(){var n=k.createElement("input"),t=k.createElement("div"),e=k.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",h.leadingWhitespace=3===t.firstChild.nodeType,h.tbody=!t.getElementsByTagName("tbody").length,h.htmlSerialize=!!t.getElementsByTagName("link").length,h.html5Clone="<:nav></:nav>"!==k.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,e.appendChild(n),h.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",h.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,h.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",(function(){h.noCloneEvent=!1})),t.cloneNode(!0).click()),null==h.deleteExpando){h.deleteExpando=!0;try{delete t.test}catch(i){h.deleteExpando=!1}}}(),function(){var n,t,e=k.createElement("div");for(n in{submit:!0,change:!0,focusin:!0})t="on"+n,(h[n+"Bubbles"]=t in i)||(e.setAttribute(t,"t"),h[n+"Bubbles"]=!1===e.attributes[t].expando);e=null}();var X=/^(?:input|select|textarea)$/i,J=/^key/,Q=/^(?:mouse|pointer|contextmenu)|click/,Z=/^(?:focusinfocus|focusoutblur)$/,nn=/^([^.]*)(?:\.(.+)|)$/;function tn(){return!0}function en(){return!1}function rn(){try{return k.activeElement}catch(n){}}function on(n){var t=un.split("|"),e=n.createDocumentFragment();if(e.createElement)for(;t.length;)e.createElement(t.pop());return e}p.event={global:{},add:function(n,t,e,i,r){var o,u,a,c,s,f,l,d,h,v,g,m=p._data(n);if(m){for(e.handler&&(e=(c=e).handler,r=c.selector),e.guid||(e.guid=p.guid++),(u=m.events)||(u=m.events={}),(f=m.handle)||(f=m.handle=function(n){return typeof p===U||n&&p.event.triggered===n.type?undefined:p.event.dispatch.apply(f.elem,arguments)},f.elem=n),a=(t=(t||"").match(O)||[""]).length;a--;)h=g=(o=nn.exec(t[a])||[])[1],v=(o[2]||"").split(".").sort(),h&&(s=p.event.special[h]||{},h=(r?s.delegateType:s.bindType)||h,s=p.event.special[h]||{},l=p.extend({type:h,origType:g,data:i,handler:e,guid:e.guid,selector:r,needsContext:r&&p.expr.match.needsContext.test(r),namespace:v.join(".")},c),(d=u[h])||((d=u[h]=[]).delegateCount=0,s.setup&&!1!==s.setup.call(n,i,v,f)||(n.addEventListener?n.addEventListener(h,f,!1):n.attachEvent&&n.attachEvent("on"+h,f))),s.add&&(s.add.call(n,l),l.handler.guid||(l.handler.guid=e.guid)),r?d.splice(d.delegateCount++,0,l):d.push(l),p.event.global[h]=!0);n=null}},remove:function(n,t,e,i,r){var o,u,a,c,s,f,l,d,h,v,g,m=p.hasData(n)&&p._data(n);if(m&&(f=m.events)){for(s=(t=(t||"").match(O)||[""]).length;s--;)if(h=g=(a=nn.exec(t[s])||[])[1],v=(a[2]||"").split(".").sort(),h){for(l=p.event.special[h]||{},d=f[h=(i?l.delegateType:l.bindType)||h]||[],a=a[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=o=d.length;o--;)u=d[o],!r&&g!==u.origType||e&&e.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,l.remove&&l.remove.call(n,u));c&&!d.length&&(l.teardown&&!1!==l.teardown.call(n,v,m.handle)||p.removeEvent(n,h,m.handle),delete f[h])}else for(h in f)p.event.remove(n,h+t[s],e,i,!0);p.isEmptyObject(f)&&(delete m.handle,p._removeData(n,"events"))}},trigger:function(n,t,e,r){var o,u,a,c,s,f,l,h=[e||k],v=d.call(n,"type")?n.type:n,g=d.call(n,"namespace")?n.namespace.split("."):[];if(a=f=e=e||k,3!==e.nodeType&&8!==e.nodeType&&!Z.test(v+p.event.triggered)&&(v.indexOf(".")>=0&&(g=v.split("."),v=g.shift(),g.sort()),u=v.indexOf(":")<0&&"on"+v,(n=n[p.expando]?n:new p.Event(v,"object"==typeof n&&n)).isTrigger=r?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=undefined,n.target||(n.target=e),t=null==t?[n]:p.makeArray(t,[n]),s=p.event.special[v]||{},r||!s.trigger||!1!==s.trigger.apply(e,t))){if(!r&&!s.noBubble&&!p.isWindow(e)){for(c=s.delegateType||v,Z.test(c+v)||(a=a.parentNode);a;a=a.parentNode)h.push(a),f=a;f===(e.ownerDocument||k)&&h.push(f.defaultView||f.parentWindow||i)}for(l=0;(a=h[l++])&&!n.isPropagationStopped();)n.type=l>1?c:s.bindType||v,(o=(p._data(a,"events")||{})[n.type]&&p._data(a,"handle"))&&o.apply(a,t),(o=u&&a[u])&&o.apply&&p.acceptData(a)&&(n.result=o.apply(a,t),!1===n.result&&n.preventDefault());if(n.type=v,!r&&!n.isDefaultPrevented()&&(!s._default||!1===s._default.apply(h.pop(),t))&&p.acceptData(e)&&u&&e[v]&&!p.isWindow(e)){(f=e[u])&&(e[u]=null),p.event.triggered=v;try{e[v]()}catch(m){}p.event.triggered=undefined,f&&(e[u]=f)}return n.result}},dispatch:function(n){n=p.event.fix(n);var t,e,i,r,o,a=[],c=u.call(arguments),s=(p._data(this,"events")||{})[n.type]||[],f=p.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||!1!==f.preDispatch.call(this,n)){for(a=p.event.handlers.call(this,n,s),t=0;(r=a[t++])&&!n.isPropagationStopped();)for(n.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!n.isImmediatePropagationStopped();)n.namespace_re&&!n.namespace_re.test(i.namespace)||(n.handleObj=i,n.data=i.data,(e=((p.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,c))!==undefined&&!1===(n.result=e)&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,i,r,o,u=[],a=t.delegateCount,c=n.target;if(a&&c.nodeType&&(!n.button||"click"!==n.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(!0!==c.disabled||"click"!==n.type)){for(r=[],o=0;o<a;o++)r[e=(i=t[o]).selector+" "]===undefined&&(r[e]=i.needsContext?p(e,this).index(c)>=0:p.find(e,this,null,[c]).length),r[e]&&r.push(i);r.length&&u.push({elem:c,handlers:r})}return a<t.length&&u.push({elem:this,handlers:t.slice(a)}),u},fix:function(n){if(n[p.expando])return n;var t,e,i,r=n.type,o=n,u=this.fixHooks[r];for(u||(this.fixHooks[r]=u=Q.test(r)?this.mouseHooks:J.test(r)?this.keyHooks:{}),i=u.props?this.props.concat(u.props):this.props,n=new p.Event(o),t=i.length;t--;)n[e=i[t]]=o[e];return n.target||(n.target=o.srcElement||k),3===n.target.nodeType&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,u.filter?u.filter(n,o):n},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var e,i,r,o=t.button,u=t.fromElement;return null==n.pageX&&null!=t.clientX&&(r=(i=n.target.ownerDocument||k).documentElement,e=i.body,n.pageX=t.clientX+(r&&r.scrollLeft||e&&e.scrollLeft||0)-(r&&r.clientLeft||e&&e.clientLeft||0),n.pageY=t.clientY+(r&&r.scrollTop||e&&e.scrollTop||0)-(r&&r.clientTop||e&&e.clientTop||0)),!n.relatedTarget&&u&&(n.relatedTarget=u===n.target?t.toElement:u),n.which||o===undefined||(n.which=1&o?1:2&o?3:4&o?2:0),n}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==rn()&&this.focus)try{return this.focus(),!1}catch(n){}},delegateType:"focusin"},blur:{trigger:function(){if(this===rn()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(p.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(n){return p.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){n.result!==undefined&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,e,i){var r=p.extend(new p.Event,e,{type:n,isSimulated:!0,originalEvent:{}});i?p.event.trigger(r,null,t):p.event.dispatch.call(t,r),r.isDefaultPrevented()&&e.preventDefault()}},p.removeEvent=k.removeEventListener?function(n,t,e){n.removeEventListener&&n.removeEventListener(t,e,!1)}:function(n,t,e){var i="on"+t;n.detachEvent&&(typeof n[i]===U&&(n[i]=null),n.detachEvent(i,e))},p.Event=function(n,t){if(!(this instanceof p.Event))return new p.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.defaultPrevented===undefined&&!1===n.returnValue?tn:en):this.type=n,t&&p.extend(this,t),this.timeStamp=n&&n.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={isDefaultPrevented:en,isPropagationStopped:en,isImmediatePropagationStopped:en,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=tn,n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=tn,n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=tn,n&&n.stopImmediatePropagation&&n.stopImmediatePropagation(),this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(n,t){p.event.special[n]={delegateType:t,bindType:t,handle:function(n){var e,i=this,r=n.relatedTarget,o=n.handleObj;return r&&(r===i||p.contains(i,r))||(n.type=o.origType,e=o.handler.apply(this,arguments),n.type=t),e}}})),h.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",(function(n){var t=n.target,e=p.nodeName(t,"input")||p.nodeName(t,"button")?t.form:undefined;e&&!p._data(e,"submitBubbles")&&(p.event.add(e,"submit._submit",(function(n){n._submit_bubble=!0})),p._data(e,"submitBubbles",!0))}))},postDispatch:function(n){n._submit_bubble&&(delete n._submit_bubble,this.parentNode&&!n.isTrigger&&p.event.simulate("submit",this.parentNode,n,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),h.changeBubbles||(p.event.special.change={setup:function(){if(X.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(p.event.add(this,"propertychange._change",(function(n){"checked"===n.originalEvent.propertyName&&(this._just_changed=!0)})),p.event.add(this,"click._change",(function(n){this._just_changed&&!n.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,n,!0)}))),!1;p.event.add(this,"beforeactivate._change",(function(n){var t=n.target;X.test(t.nodeName)&&!p._data(t,"changeBubbles")&&(p.event.add(t,"change._change",(function(n){!this.parentNode||n.isSimulated||n.isTrigger||p.event.simulate("change",this.parentNode,n,!0)})),p._data(t,"changeBubbles",!0))}))},handle:function(n){var t=n.target;if(this!==t||n.isSimulated||n.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return n.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!X.test(this.nodeName)}}),h.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},(function(n,t){var e=function(n){p.event.simulate(t,n.target,p.event.fix(n),!0)};p.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=p._data(i,t);r||i.addEventListener(n,e,!0),p._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=p._data(i,t)-1;r?p._data(i,t,r):(i.removeEventListener(n,e,!0),p._removeData(i,t))}}})),p.fn.extend({on:function(n,t,e,i,r){var o,u;if("object"==typeof n){for(o in"string"!=typeof t&&(e=e||t,t=undefined),n)this.on(o,t,e,n[o],r);return this}if(null==e&&null==i?(i=t,e=t=undefined):null==i&&("string"==typeof t?(i=e,e=undefined):(i=e,e=t,t=undefined)),!1===i)i=en;else if(!i)return this;return 1===r&&(u=i,i=function(n){return p().off(n),u.apply(this,arguments)},i.guid=u.guid||(u.guid=p.guid++)),this.each((function(){p.event.add(this,n,i,e,t)}))},one:function(n,t,e,i){return this.on(n,t,e,i,1)},off:function(n,t,e){var i,r;if(n&&n.preventDefault&&n.handleObj)return i=n.handleObj,p(n.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof n){for(r in n)this.off(r,t,n[r]);return this}return!1!==t&&"function"!=typeof t||(e=t,t=undefined),!1===e&&(e=en),this.each((function(){p.event.remove(this,n,e,t)}))},trigger:function(n,t){return this.each((function(){p.event.trigger(n,t,this)}))},triggerHandler:function(n,t){var e=this[0];if(e)return p.event.trigger(n,t,e,!0)}});var un="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",an=/ jQuery\d+="(?:null|\d+)"/g,cn=new RegExp("<(?:"+un+")[\\s/>]","i"),sn=/^\s+/,fn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ln=/<([\w:]+)/,dn=/<tbody/i,hn=/<|&#?\w+;/,vn=/<(?:script|style|link)/i,pn=/checked\s*(?:[^=]|=\s*.checked.)/i,gn=/^$|\/(?:java|ecma)script/i,mn=/^true\/(.*)/,yn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,_n={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:h.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},bn=on(k).appendChild(k.createElement("div"));function wn(n,t){var e,i,r=0,o=typeof n.getElementsByTagName!==U?n.getElementsByTagName(t||"*"):typeof n.querySelectorAll!==U?n.querySelectorAll(t||"*"):undefined;if(!o)for(o=[],e=n.childNodes||n;null!=(i=e[r]);r++)!t||p.nodeName(i,t)?o.push(i):p.merge(o,wn(i,t));return t===undefined||t&&p.nodeName(n,t)?p.merge([n],o):o}function En(n){K.test(n.type)&&(n.defaultChecked=n.checked)}function In(n,t){return p.nodeName(n,"table")&&p.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function An(n){return n.type=(null!==p.find.attr(n,"type"))+"/"+n.type,n}function Sn(n){var t=mn.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function Tn(n,t){for(var e,i=0;null!=(e=n[i]);i++)p._data(e,"globalEval",!t||p._data(t[i],"globalEval"))}function kn(n,t){if(1===t.nodeType&&p.hasData(n)){var e,i,r,o=p._data(n),u=p._data(t,o),a=o.events;if(a)for(e in delete u.handle,u.events={},a)for(i=0,r=a[e].length;i<r;i++)p.event.add(t,e,a[e][i]);u.data&&(u.data=p.extend({},u.data))}}function Rn(n,t){var e,i,r;if(1===t.nodeType){if(e=t.nodeName.toLowerCase(),!h.noCloneEvent&&t[p.expando]){for(i in(r=p._data(t)).events)p.removeEvent(t,i,r.handle);t.removeAttribute(p.expando)}"script"===e&&t.text!==n.text?(An(t).text=n.text,Sn(t)):"object"===e?(t.parentNode&&(t.outerHTML=n.outerHTML),h.html5Clone&&n.innerHTML&&!p.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):"input"===e&&K.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):"option"===e?t.defaultSelected=t.selected=n.defaultSelected:"input"!==e&&"textarea"!==e||(t.defaultValue=n.defaultValue)}}_n.optgroup=_n.option,_n.tbody=_n.tfoot=_n.colgroup=_n.caption=_n.thead,_n.th=_n.td,p.extend({clone:function(n,t,e){var i,r,o,u,a,c=p.contains(n.ownerDocument,n);if(h.html5Clone||p.isXMLDoc(n)||!cn.test("<"+n.nodeName+">")?o=n.cloneNode(!0):(bn.innerHTML=n.outerHTML,bn.removeChild(o=bn.firstChild)),!(h.noCloneEvent&&h.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||p.isXMLDoc(n)))for(i=wn(o),a=wn(n),u=0;null!=(r=a[u]);++u)i[u]&&Rn(r,i[u]);if(t)if(e)for(a=a||wn(n),i=i||wn(o),u=0;null!=(r=a[u]);u++)kn(r,i[u]);else kn(n,o);return(i=wn(o,"script")).length>0&&Tn(i,!c&&wn(n,"script")),i=a=r=null,o},buildFragment:function(n,t,e,i){for(var r,o,u,a,c,s,f,l=n.length,d=on(t),v=[],g=0;g<l;g++)if((o=n[g])||0===o)if("object"===p.type(o))p.merge(v,o.nodeType?[o]:o);else if(hn.test(o)){for(a=a||d.appendChild(t.createElement("div")),c=(ln.exec(o)||["",""])[1].toLowerCase(),f=_n[c]||_n._default,a.innerHTML=f[1]+o.replace(fn,"<$1></$2>")+f[2],r=f[0];r--;)a=a.lastChild;if(!h.leadingWhitespace&&sn.test(o)&&v.push(t.createTextNode(sn.exec(o)[0])),!h.tbody)for(r=(o="table"!==c||dn.test(o)?"<table>"!==f[1]||dn.test(o)?0:a:a.firstChild)&&o.childNodes.length;r--;)p.nodeName(s=o.childNodes[r],"tbody")&&!s.childNodes.length&&o.removeChild(s);for(p.merge(v,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else v.push(t.createTextNode(o));for(a&&d.removeChild(a),h.appendChecked||p.grep(wn(v,"input"),En),g=0;o=v[g++];)if((!i||-1===p.inArray(o,i))&&(u=p.contains(o.ownerDocument,o),a=wn(d.appendChild(o),"script"),u&&Tn(a),e))for(r=0;o=a[r++];)gn.test(o.type||"")&&e.push(o);return a=null,d},cleanData:function(n,t){for(var e,i,r,u,a=0,c=p.expando,s=p.cache,f=h.deleteExpando,l=p.event.special;null!=(e=n[a]);a++)if((t||p.acceptData(e))&&(u=(r=e[c])&&s[r])){if(u.events)for(i in u.events)l[i]?p.event.remove(e,i):p.removeEvent(e,i,u.handle);s[r]&&(delete s[r],f?delete e[c]:typeof e.removeAttribute!==U?e.removeAttribute(c):e[c]=null,o.push(r))}}}),p.fn.extend({text:function(n){return Y(this,(function(n){return n===undefined?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||k).createTextNode(n))}),null,n,arguments.length)},append:function(){return this.domManip(arguments,(function(n){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||In(this,n).appendChild(n)}))},prepend:function(){return this.domManip(arguments,(function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=In(this,n);t.insertBefore(n,t.firstChild)}}))},before:function(){return this.domManip(arguments,(function(n){this.parentNode&&this.parentNode.insertBefore(n,this)}))},after:function(){return this.domManip(arguments,(function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)}))},remove:function(n,t){for(var e,i=n?p.filter(n,this):this,r=0;null!=(e=i[r]);r++)t||1!==e.nodeType||p.cleanData(wn(e)),e.parentNode&&(t&&p.contains(e.ownerDocument,e)&&Tn(wn(e,"script")),e.parentNode.removeChild(e));return this},empty:function(){for(var n,t=0;null!=(n=this[t]);t++){for(1===n.nodeType&&p.cleanData(wn(n,!1));n.firstChild;)n.removeChild(n.firstChild);n.options&&p.nodeName(n,"select")&&(n.options.length=0)}return this},clone:function(n,t){return n=null!=n&&n,t=null==t?n:t,this.map((function(){return p.clone(this,n,t)}))},html:function(n){return Y(this,(function(n){var t=this[0]||{},e=0,i=this.length;if(n===undefined)return 1===t.nodeType?t.innerHTML.replace(an,""):undefined;if("string"==typeof n&&!vn.test(n)&&(h.htmlSerialize||!cn.test(n))&&(h.leadingWhitespace||!sn.test(n))&&!_n[(ln.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(fn,"<$1></$2>");try{for(;e<i;e++)1===(t=this[e]||{}).nodeType&&(p.cleanData(wn(t,!1)),t.innerHTML=n);t=0}catch(r){}}t&&this.empty().append(n)}),null,n,arguments.length)},replaceWith:function(){var n=arguments[0];return this.domManip(arguments,(function(t){n=this.parentNode,p.cleanData(wn(this)),n&&n.replaceChild(t,this)})),n&&(n.length||n.nodeType)?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,t){n=a.apply([],n);var e,i,r,o,u,c,s=0,f=this.length,l=this,d=f-1,v=n[0],g=p.isFunction(v);if(g||f>1&&"string"==typeof v&&!h.checkClone&&pn.test(v))return this.each((function(e){var i=l.eq(e);g&&(n[0]=v.call(this,e,i.html())),i.domManip(n,t)}));if(f&&(e=(c=p.buildFragment(n,this[0].ownerDocument,!1,this)).firstChild,1===c.childNodes.length&&(c=e),e)){for(r=(o=p.map(wn(c,"script"),An)).length;s<f;s++)i=c,s!==d&&(i=p.clone(i,!0,!0),r&&p.merge(o,wn(i,"script"))),t.call(this[s],i,s);if(r)for(u=o[o.length-1].ownerDocument,p.map(o,Sn),s=0;s<r;s++)i=o[s],gn.test(i.type||"")&&!p._data(i,"globalEval")&&p.contains(u,i)&&(i.src?p._evalUrl&&p._evalUrl(i.src):p.globalEval((i.text||i.textContent||i.innerHTML||"").replace(yn,"")));c=e=null}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(n,t){p.fn[n]=function(n){for(var e,i=0,r=[],o=p(n),u=o.length-1;i<=u;i++)e=i===u?this:this.clone(!0),p(o[i])[t](e),c.apply(r,e.get());return this.pushStack(r)}}));var xn,Dn={};function Nn(n,t){var e,r=p(t.createElement(n)).appendTo(t.body),o=i.getDefaultComputedStyle&&(e=i.getDefaultComputedStyle(r[0]))?e.display:p.css(r[0],"display");return r.detach(),o}function Cn(n){var t=k,e=Dn[n];return e||("none"!==(e=Nn(n,t))&&e||((t=((xn=(xn||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||xn[0].contentDocument).document).write(),t.close(),e=Nn(n,t),xn.detach()),Dn[n]=e),e}var On,Pn,Mn=/^margin/,Ln=new RegExp("^("+H+")(?!px)[a-z%]+$","i"),Fn=/^(top|right|bottom|left)$/;i.getComputedStyle?(On=function(n){return n.ownerDocument.defaultView.opener?n.ownerDocument.defaultView.getComputedStyle(n,null):i.getComputedStyle(n,null)},Pn=function(n,t,e){var i,r,o,u,a=n.style;return u=(e=e||On(n))?e.getPropertyValue(t)||e[t]:undefined,e&&(""!==u||p.contains(n.ownerDocument,n)||(u=p.style(n,t)),Ln.test(u)&&Mn.test(t)&&(i=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=e.width,a.width=i,a.minWidth=r,a.maxWidth=o)),u===undefined?u:u+""}):k.documentElement.currentStyle&&(On=function(n){return n.currentStyle},Pn=function(n,t,e){var i,r,o,u,a=n.style;return null==(u=(e=e||On(n))?e[t]:undefined)&&a&&a[t]&&(u=a[t]),Ln.test(u)&&!Fn.test(t)&&(i=a.left,(o=(r=n.runtimeStyle)&&r.left)&&(r.left=n.currentStyle.left),a.left="fontSize"===t?"1em":u,u=a.pixelLeft+"px",a.left=i,o&&(r.left=o)),u===undefined?u:u+""||"auto"}),function(){var n,t,e,r,o,u,a;function c(){var n,t,e,c;(t=k.getElementsByTagName("body")[0])&&t.style&&(n=k.createElement("div"),(e=k.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(e).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=o=!1,a=!0,i.getComputedStyle&&(r="1%"!==(i.getComputedStyle(n,null)||{}).top,o="4px"===(i.getComputedStyle(n,null)||{width:"4px"}).width,(c=n.appendChild(k.createElement("div"))).style.cssText=n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",n.style.width="1px",a=!parseFloat((i.getComputedStyle(c,null)||{}).marginRight),n.removeChild(c)),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(c=n.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(u=0===c[0].offsetHeight)&&(c[0].style.display="",c[1].style.display="none",u=0===c[0].offsetHeight),t.removeChild(e))}(n=k.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(t=(e=n.getElementsByTagName("a")[0])&&e.style)&&(t.cssText="float:left;opacity:.5",h.opacity="0.5"===t.opacity,h.cssFloat=!!t.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===n.style.backgroundClip,h.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing,p.extend(h,{reliableHiddenOffsets:function(){return null==u&&c(),u},boxSizingReliable:function(){return null==o&&c(),o},pixelPosition:function(){return null==r&&c(),r},reliableMarginRight:function(){return null==a&&c(),a}}))}(),p.swap=function(n,t,e,i){var r,o,u={};for(o in t)u[o]=n.style[o],n.style[o]=t[o];for(o in r=e.apply(n,i||[]),t)n.style[o]=u[o];return r};var Un,Vn,zn,jn,qn,Bn,Gn,Hn=/alpha\([^)]*\)/i,$n=/opacity\s*=\s*([^)]*)/,Wn=/^(none|table(?!-c[ea]).+)/,Yn=new RegExp("^("+H+")(.*)$","i"),Kn=new RegExp("^([+-])=("+H+")","i"),Xn={position:"absolute",visibility:"hidden",display:"block"},Jn={letterSpacing:"0",fontWeight:"400"},Qn=["Webkit","O","Moz","ms"];function Zn(n,t){if(t in n)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=Qn.length;r--;)if((t=Qn[r]+e)in n)return t;return i}function nt(n,t){for(var e,i,r,o=[],u=0,a=n.length;u<a;u++)(i=n[u]).style&&(o[u]=p._data(i,"olddisplay"),e=i.style.display,t?(o[u]||"none"!==e||(i.style.display=""),""===i.style.display&&W(i)&&(o[u]=p._data(i,"olddisplay",Cn(i.nodeName)))):(r=W(i),(e&&"none"!==e||!r)&&p._data(i,"olddisplay",r?e:p.css(i,"display"))));for(u=0;u<a;u++)(i=n[u]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[u]||"":"none"));return n}function tt(n,t,e){var i=Yn.exec(t);return i?Math.max(0,i[1]-(e||0))+(i[2]||"px"):t}function et(n,t,e,i,r){for(var o=e===(i?"border":"content")?4:"width"===t?1:0,u=0;o<4;o+=2)"margin"===e&&(u+=p.css(n,e+$[o],!0,r)),i?("content"===e&&(u-=p.css(n,"padding"+$[o],!0,r)),"margin"!==e&&(u-=p.css(n,"border"+$[o]+"Width",!0,r))):(u+=p.css(n,"padding"+$[o],!0,r),"padding"!==e&&(u+=p.css(n,"border"+$[o]+"Width",!0,r)));return u}function it(n,t,e){var i=!0,r="width"===t?n.offsetWidth:n.offsetHeight,o=On(n),u=h.boxSizing&&"border-box"===p.css(n,"boxSizing",!1,o);if(r<=0||null==r){if(((r=Pn(n,t,o))<0||null==r)&&(r=n.style[t]),Ln.test(r))return r;i=u&&(h.boxSizingReliable()||r===n.style[t]),r=parseFloat(r)||0}return r+et(n,t,e||(u?"border":"content"),i,o)+"px"}p.extend({cssHooks:{opacity:{get:function(n,t){if(t){var e=Pn(n,"opacity");return""===e?"1":e}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:h.cssFloat?"cssFloat":"styleFloat"},style:function(n,t,e,i){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var r,o,u,a=p.camelCase(t),c=n.style;if(t=p.cssProps[a]||(p.cssProps[a]=Zn(c,a)),u=p.cssHooks[t]||p.cssHooks[a],e===undefined)return u&&"get"in u&&(r=u.get(n,!1,i))!==undefined?r:c[t];if("string"==(o=typeof e)&&(r=Kn.exec(e))&&(e=(r[1]+1)*r[2]+parseFloat(p.css(n,t)),o="number"),null!=e&&e==e&&("number"!==o||p.cssNumber[a]||(e+="px"),h.clearCloneStyle||""!==e||0!==t.indexOf("background")||(c[t]="inherit"),!u||!("set"in u)||(e=u.set(n,e,i))!==undefined))try{c[t]=e}catch(s){}}},css:function(n,t,e,i){var r,o,u,a=p.camelCase(t);return t=p.cssProps[a]||(p.cssProps[a]=Zn(n.style,a)),(u=p.cssHooks[t]||p.cssHooks[a])&&"get"in u&&(o=u.get(n,!0,e)),o===undefined&&(o=Pn(n,t,i)),"normal"===o&&t in Jn&&(o=Jn[t]),""===e||e?(r=parseFloat(o),!0===e||p.isNumeric(r)?r||0:o):o}}),p.each(["height","width"],(function(n,t){p.cssHooks[t]={get:function(n,e,i){if(e)return Wn.test(p.css(n,"display"))&&0===n.offsetWidth?p.swap(n,Xn,(function(){return it(n,t,i)})):it(n,t,i)},set:function(n,e,i){var r=i&&On(n);return tt(0,e,i?et(n,t,i,h.boxSizing&&"border-box"===p.css(n,"boxSizing",!1,r),r):0)}}})),h.opacity||(p.cssHooks.opacity={get:function(n,t){return $n.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var e=n.style,i=n.currentStyle,r=p.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||e.filter||"";e.zoom=1,(t>=1||""===t)&&""===p.trim(o.replace(Hn,""))&&e.removeAttribute&&(e.removeAttribute("filter"),""===t||i&&!i.filter)||(e.filter=Hn.test(o)?o.replace(Hn,r):o+" "+r)}}),p.cssHooks.marginRight=(Un=h.reliableMarginRight,Vn=function(n,t){if(t)return p.swap(n,{display:"inline-block"},Pn,[n,"marginRight"])},{get:function(){var n=Un();if(null!=n){if(!n)return(this.get=Vn).apply(this,arguments);delete this.get}}}),p.each({margin:"",padding:"",border:"Width"},(function(n,t){p.cssHooks[n+t]={expand:function(e){for(var i=0,r={},o="string"==typeof e?e.split(" "):[e];i<4;i++)r[n+$[i]+t]=o[i]||o[i-2]||o[0];return r}},Mn.test(n)||(p.cssHooks[n+t].set=tt)})),p.fn.extend({css:function(n,t){return Y(this,(function(n,t,e){var i,r,o={},u=0;if(p.isArray(t)){for(i=On(n),r=t.length;u<r;u++)o[t[u]]=p.css(n,t[u],!1,i);return o}return e!==undefined?p.style(n,t,e):p.css(n,t)}),n,t,arguments.length>1)},show:function(){return nt(this,!0)},hide:function(){return nt(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each((function(){W(this)?p(this).show():p(this).hide()}))}}),p.fn.delay=function(n,t){return n=p.fx&&p.fx.speeds[n]||n,t=t||"fx",this.queue(t,(function(t,e){var i=setTimeout(t,n);e.stop=function(){clearTimeout(i)}}))},(jn=k.createElement("div")).setAttribute("className","t"),jn.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Bn=jn.getElementsByTagName("a")[0],Gn=(qn=k.createElement("select")).appendChild(k.createElement("option")),zn=jn.getElementsByTagName("input")[0],Bn.style.cssText="top:1px",h.getSetAttribute="t"!==jn.className,h.style=/top/.test(Bn.getAttribute("style")),h.hrefNormalized="/a"===Bn.getAttribute("href"),h.checkOn=!!zn.value,h.optSelected=Gn.selected,h.enctype=!!k.createElement("form").enctype,qn.disabled=!0,h.optDisabled=!Gn.disabled,(zn=k.createElement("input")).setAttribute("value",""),h.input=""===zn.getAttribute("value"),zn.value="t",zn.setAttribute("type","radio"),h.radioValue="t"===zn.value;var rt=/\r/g;p.fn.extend({val:function(n){var t,e,i,r=this[0];return arguments.length?(i=p.isFunction(n),this.each((function(e){var r;1===this.nodeType&&(null==(r=i?n.call(this,e,p(this).val()):n)?r="":"number"==typeof r?r+="":p.isArray(r)&&(r=p.map(r,(function(n){return null==n?"":n+""}))),(t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&t.set(this,r,"value")!==undefined||(this.value=r))}))):r?(t=p.valHooks[r.type]||p.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&(e=t.get(r,"value"))!==undefined?e:"string"==typeof(e=r.value)?e.replace(rt,""):null==e?"":e:void 0}}),p.extend({valHooks:{option:{get:function(n){var t=p.find.attr(n,"value");return null!=t?t:p.trim(p.text(n))}},select:{get:function(n){for(var t,e,i=n.options,r=n.selectedIndex,o="select-one"===n.type||r<0,u=o?null:[],a=o?r+1:i.length,c=r<0?a:o?r:0;c<a;c++)if(((e=i[c]).selected||c===r)&&(h.optDisabled?!e.disabled:null===e.getAttribute("disabled"))&&(!e.parentNode.disabled||!p.nodeName(e.parentNode,"optgroup"))){if(t=p(e).val(),o)return t;u.push(t)}return u},set:function(n,t){for(var e,i,r=n.options,o=p.makeArray(t),u=r.length;u--;)if(i=r[u],p.inArray(p.valHooks.option.get(i),o)>=0)try{i.selected=e=!0}catch(a){i.scrollHeight}else i.selected=!1;return e||(n.selectedIndex=-1),r}}}}),p.each(["radio","checkbox"],(function(){p.valHooks[this]={set:function(n,t){if(p.isArray(t))return n.checked=p.inArray(p(n).val(),t)>=0}},h.checkOn||(p.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})}));var ot,ut,at=p.expr.attrHandle,ct=/^(?:checked|selected)$/i,st=h.getSetAttribute,ft=h.input;p.fn.extend({attr:function(n,t){return Y(this,p.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each((function(){p.removeAttr(this,n)}))}}),p.extend({attr:function(n,t,e){var i,r,o=n.nodeType;if(n&&3!==o&&8!==o&&2!==o)return typeof n.getAttribute===U?p.prop(n,t,e):(1===o&&p.isXMLDoc(n)||(t=t.toLowerCase(),i=p.attrHooks[t]||(p.expr.match.bool.test(t)?ut:ot)),e===undefined?i&&"get"in i&&null!==(r=i.get(n,t))?r:null==(r=p.find.attr(n,t))?undefined:r:null!==e?i&&"set"in i&&(r=i.set(n,e,t))!==undefined?r:(n.setAttribute(t,e+""),e):void p.removeAttr(n,t))},removeAttr:function(n,t){var e,i,r=0,o=t&&t.match(O);if(o&&1===n.nodeType)for(;e=o[r++];)i=p.propFix[e]||e,p.expr.match.bool.test(e)?ft&&st||!ct.test(e)?n[i]=!1:n[p.camelCase("default-"+e)]=n[i]=!1:p.attr(n,e,""),n.removeAttribute(st?e:i)},attrHooks:{type:{set:function(n,t){if(!h.radioValue&&"radio"===t&&p.nodeName(n,"input")){var e=n.value;return n.setAttribute("type",t),e&&(n.value=e),t}}}}}),ut={set:function(n,t,e){return!1===t?p.removeAttr(n,e):ft&&st||!ct.test(e)?n.setAttribute(!st&&p.propFix[e]||e,e):n[p.camelCase("default-"+e)]=n[e]=!0,e}},p.each(p.expr.match.bool.source.match(/\w+/g),(function(n,t){var e=at[t]||p.find.attr;at[t]=ft&&st||!ct.test(t)?function(n,t,i){var r,o;return i||(o=at[t],at[t]=r,r=null!=e(n,t,i)?t.toLowerCase():null,at[t]=o),r}:function(n,t,e){if(!e)return n[p.camelCase("default-"+t)]?t.toLowerCase():null}})),ft&&st||(p.attrHooks.value={set:function(n,t,e){if(!p.nodeName(n,"input"))return ot&&ot.set(n,t,e);n.defaultValue=t}}),st||(ot={set:function(n,t,e){var i=n.getAttributeNode(e);if(i||n.setAttributeNode(i=n.ownerDocument.createAttribute(e)),i.value=t+="","value"===e||t===n.getAttribute(e))return t}},at.id=at.name=at.coords=function(n,t,e){var i;if(!e)return(i=n.getAttributeNode(t))&&""!==i.value?i.value:null},p.valHooks.button={get:function(n,t){var e=n.getAttributeNode(t);if(e&&e.specified)return e.value},set:ot.set},p.attrHooks.contenteditable={set:function(n,t,e){ot.set(n,""!==t&&t,e)}},p.each(["width","height"],(function(n,t){p.attrHooks[t]={set:function(n,e){if(""===e)return n.setAttribute(t,"auto"),e}}}))),h.style||(p.attrHooks.style={get:function(n){return n.style.cssText||undefined},set:function(n,t){return n.style.cssText=t+""}});var lt=/^(?:input|select|textarea|button|object)$/i,dt=/^(?:a|area)$/i;p.fn.extend({prop:function(n,t){return Y(this,p.prop,n,t,arguments.length>1)},removeProp:function(n){return n=p.propFix[n]||n,this.each((function(){try{this[n]=undefined,delete this[n]}catch(t){}}))}}),p.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(n,t,e){var i,r,o=n.nodeType;if(n&&3!==o&&8!==o&&2!==o)return(1!==o||!p.isXMLDoc(n))&&(t=p.propFix[t]||t,r=p.propHooks[t]),e!==undefined?r&&"set"in r&&(i=r.set(n,e,t))!==undefined?i:n[t]=e:r&&"get"in r&&null!==(i=r.get(n,t))?i:n[t]},propHooks:{tabIndex:{get:function(n){var t=p.find.attr(n,"tabindex");return t?parseInt(t,10):lt.test(n.nodeName)||dt.test(n.nodeName)&&n.href?0:-1}}}}),h.hrefNormalized||p.each(["href","src"],(function(n,t){p.propHooks[t]={get:function(n){return n.getAttribute(t,4)}}})),h.optSelected||(p.propHooks.selected={get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){p.propFix[this.toLowerCase()]=this})),h.enctype||(p.propFix.enctype="encoding");var ht=/[\t\r\n\f]/g;p.fn.extend({addClass:function(n){var t,e,i,r,o,u,a=0,c=this.length,s="string"==typeof n&&n;if(p.isFunction(n))return this.each((function(t){p(this).addClass(n.call(this,t,this.className))}));if(s)for(t=(n||"").match(O)||[];a<c;a++)if(i=1===(e=this[a]).nodeType&&(e.className?(" "+e.className+" ").replace(ht," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");u=p.trim(i),e.className!==u&&(e.className=u)}return this},removeClass:function(n){var t,e,i,r,o,u,a=0,c=this.length,s=0===arguments.length||"string"==typeof n&&n;if(p.isFunction(n))return this.each((function(t){p(this).removeClass(n.call(this,t,this.className))}));if(s)for(t=(n||"").match(O)||[];a<c;a++)if(i=1===(e=this[a]).nodeType&&(e.className?(" "+e.className+" ").replace(ht," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");u=n?p.trim(i):"",e.className!==u&&(e.className=u)}return this},toggleClass:function(n,t){var e=typeof n;return"boolean"==typeof t&&"string"===e?t?this.addClass(n):this.removeClass(n):p.isFunction(n)?this.each((function(e){p(this).toggleClass(n.call(this,e,this.className,t),t)})):this.each((function(){if("string"===e)for(var t,i=0,r=p(this),o=n.match(O)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else e!==U&&"boolean"!==e||(this.className&&p._data(this,"__className__",this.className),this.className=this.className||!1===n?"":p._data(this,"__className__")||"")}))},hasClass:function(n){for(var t=" "+n+" ",e=0,i=this.length;e<i;e++)if(1===this[e].nodeType&&(" "+this[e].className+" ").replace(ht," ").indexOf(t)>=0)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(n,t){p.fn[t]=function(n,e){return arguments.length>0?this.on(t,null,n,e):this.trigger(t)}})),p.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)},bind:function(n,t,e){return this.on(n,null,t,e)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,e,i){return this.on(t,n,e,i)},undelegate:function(n,t,e){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",e)}}),p.fn.extend({wrapAll:function(n){if(p.isFunction(n))return this.each((function(t){p(this).wrapAll(n.call(this,t))}));if(this[0]){var t=p(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var n=this;n.firstChild&&1===n.firstChild.nodeType;)n=n.firstChild;return n})).append(this)}return this},wrapInner:function(n){return p.isFunction(n)?this.each((function(t){p(this).wrapInner(n.call(this,t))})):this.each((function(){var t=p(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)}))},wrap:function(n){var t=p.isFunction(n);return this.each((function(e){p(this).wrapAll(t?n.call(this,e):n)}))},unwrap:function(){return this.parent().each((function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)})).end()}}),p.expr.filters.hidden=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0||!h.reliableHiddenOffsets()&&"none"===(n.style&&n.style.display||p.css(n,"display"))},p.expr.filters.visible=function(n){return!p.expr.filters.hidden(n)};var vt=/%20/g,pt=/\[\]$/,gt=/\r?\n/g,mt=/^(?:submit|button|image|reset|file)$/i,yt=/^(?:input|select|textarea|keygen)/i;function _t(n,t,e,i){var r;if(p.isArray(t))p.each(t,(function(t,r){e||pt.test(n)?i(n,r):_t(n+"["+("object"==typeof r?t:"")+"]",r,e,i)}));else if(e||"object"!==p.type(t))i(n,t);else for(r in t)_t(n+"["+r+"]",t[r],e,i)}p.param=function(n,t){var e,i=[],r=function(n,t){t=p.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(t===undefined&&(t=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(n)||n.jquery&&!p.isPlainObject(n))p.each(n,(function(){r(this.name,this.value)}));else for(e in n)_t(e,n[e],t,r);return i.join("&").replace(vt,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var n=p.prop(this,"elements");return n?p.makeArray(n):this})).filter((function(){var n=this.type;return this.name&&!p(this).is(":disabled")&&yt.test(this.nodeName)&&!mt.test(n)&&(this.checked||!K.test(n))})).map((function(n,t){var e=p(this).val();return null==e?null:p.isArray(e)?p.map(e,(function(n){return{name:t.name,value:n.replace(gt,"\r\n")}})):{name:t.name,value:e.replace(gt,"\r\n")}})).get()}}),p.parseHTML=function(n,t,e){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(e=t,t=!1),t=t||k;var i=I.exec(n),r=!e&&[];return i?[t.createElement(i[1])]:(i=p.buildFragment([n],t,r),r&&r.length&&p(r).remove(),p.merge([],i.childNodes))},(e=function(){return p}.apply(t,[]))===undefined||(n.exports=e);var bt=i.jQuery,wt=i.$;return p.noConflict=function(n){return i.$===p&&(i.$=wt),n&&i.jQuery===p&&(i.jQuery=bt),p},typeof r===U&&(i.jQuery=i.$=p),p},"object"==typeof n.exports?n.exports=i.document?r(i,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}:r(i)},1821:function(){},5402:function(n,t){!function(n){"use strict";var t,e,i,r,o,u=-1,a=function(n){addEventListener("pageshow",(function(t){t.persisted&&(u=t.timeStamp,n(t))}),!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},s=function(){var n=c();return n&&n.activationStart||0},f=function(n,t){var e=c(),i="navigate";return u>=0?i="back-forward-cache":e&&(i=document.prerendering||s()>0?"prerender":document.wasDiscarded?"restore":e.type.replace(/_/g,"-")),{name:n,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},l=function(n,t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var i=new PerformanceObserver((function(n){Promise.resolve().then((function(){t(n.getEntries())}))}));return i.observe(Object.assign({type:n,buffered:!0},e||{})),i}}catch(n){}},d=function(n,t){var e=function i(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||(n(e),t&&(removeEventListener("visibilitychange",i,!0),removeEventListener("pagehide",i,!0)))};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},h=function(n,t,e,i){var r,o;return function(u){t.value>=0&&(u||i)&&((o=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=o,t.rating=function(n,t){return n>t[1]?"poor":n>t[0]?"needs-improvement":"good"}(t.value,e),n(t))}},v=function(n){requestAnimationFrame((function(){return requestAnimationFrame((function(){return n()}))}))},p=function(n){document.prerendering?addEventListener("prerenderingchange",(function(){return n()}),!0):n()},g=-1,m=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},y=function(n){"hidden"===document.visibilityState&&g>-1&&(g="visibilitychange"===n.type?n.timeStamp:0,b())},_=function(){addEventListener("visibilitychange",y,!0),addEventListener("prerenderingchange",y,!0)},b=function(){removeEventListener("visibilitychange",y,!0),removeEventListener("prerenderingchange",y,!0)},w=function(){return g<0&&(g=m(),_(),a((function(){setTimeout((function(){g=m(),_()}),0)}))),{get firstHiddenTime(){return g}}},E=function(n,t){t=t||{},p((function(){var e,i=[1800,3e3],r=w(),o=f("FCP"),u=l("paint",(function(n){n.forEach((function(n){"first-contentful-paint"===n.name&&(u.disconnect(),n.startTime<r.firstHiddenTime&&(o.value=Math.max(n.startTime-s(),0),o.entries.push(n),e(!0)))}))}));u&&(e=h(n,o,i,t.reportAllChanges),a((function(r){o=f("FCP"),e=h(n,o,i,t.reportAllChanges),v((function(){o.value=performance.now()-r.timeStamp,e(!0)}))})))}))},I=function(n,t){t=t||{},p((function(){var e,i=[.1,.25],r=f("CLS"),o=-1,u=0,c=[],s=function(t){o>-1&&n(t)},p=function(n){n.forEach((function(n){if(!n.hadRecentInput){var t=c[0],i=c[c.length-1];u&&n.startTime-i.startTime<1e3&&n.startTime-t.startTime<5e3?(u+=n.value,c.push(n)):(u=n.value,c=[n]),u>r.value&&(r.value=u,r.entries=c,e())}}))},g=l("layout-shift",p);g&&(e=h(s,r,i,t.reportAllChanges),E((function(n){o=n.value,r.value<0&&(r.value=0,e())})),d((function(){p(g.takeRecords()),e(!0)})),a((function(){u=0,o=-1,r=f("CLS",0),e=h(s,r,i,t.reportAllChanges),v((function(){return e()}))})))}))},A={passive:!0,capture:!0},S=new Date,T=function(n,r){t||(t=r,e=n,i=new Date,x(removeEventListener),k())},k=function(){if(e>=0&&e<i-S){var n={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+e};r.forEach((function(t){t(n)})),r=[]}},R=function(n){if(n.cancelable){var t=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?function(n,t){var e=function(){T(n,t),r()},i=function(){r()},r=function(){removeEventListener("pointerup",e,A),removeEventListener("pointercancel",i,A)};addEventListener("pointerup",e,A),addEventListener("pointercancel",i,A)}(t,n):T(t,n)}},x=function(n){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return n(t,R,A)}))},D=function(n,i){i=i||{},p((function(){var o,u=[100,300],c=w(),s=f("FID"),v=function(n){n.startTime<c.firstHiddenTime&&(s.value=n.processingStart-n.startTime,s.entries.push(n),o(!0))},p=function(n){n.forEach(v)},g=l("first-input",p);o=h(n,s,u,i.reportAllChanges),g&&d((function(){p(g.takeRecords()),g.disconnect()}),!0),g&&a((function(){var a;s=f("FID"),o=h(n,s,u,i.reportAllChanges),r=[],e=-1,t=null,x(addEventListener),a=v,r.push(a),k()}))}))},N=0,C=1/0,O=0,P=function(n){n.forEach((function(n){n.interactionId&&(C=Math.min(C,n.interactionId),O=Math.max(O,n.interactionId),N=O?(O-C)/7+1:0)}))},M=function(){return o?N:performance.interactionCount||0},L=function(){"interactionCount"in performance||o||(o=l("event",P,{type:"event",buffered:!0,durationThreshold:0}))},F=0,U=function(){return M()-F},V=[],z={},j=function(n){var t=V[V.length-1],e=z[n.interactionId];if(e||V.length<10||n.duration>t.latency){if(e)e.entries.push(n),e.latency=Math.max(e.latency,n.duration);else{var i={id:n.interactionId,latency:n.duration,entries:[n]};z[i.id]=i,V.push(i)}V.sort((function(n,t){return t.latency-n.latency})),V.splice(10).forEach((function(n){delete z[n.id]}))}},q=function(n,t){t=t||{},p((function(){var e=[200,500];L();var i,r=f("INP"),o=function(n){n.forEach((function(n){n.interactionId&&j(n),"first-input"===n.entryType&&!V.some((function(t){return t.entries.some((function(t){return n.duration===t.duration&&n.startTime===t.startTime}))}))&&j(n)}));var t,e=(t=Math.min(V.length-1,Math.floor(U()/50)),V[t]);e&&e.latency!==r.value&&(r.value=e.latency,r.entries=e.entries,i())},u=l("event",o,{durationThreshold:t.durationThreshold||40});i=h(n,r,e,t.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),d((function(){o(u.takeRecords()),r.value<0&&U()>0&&(r.value=0,r.entries=[]),i(!0)})),a((function(){V=[],F=M(),r=f("INP"),i=h(n,r,e,t.reportAllChanges)})))}))},B={},G=function(n,t){t=t||{},p((function(){var e,i=[2500,4e3],r=w(),o=f("LCP"),u=function(n){var t=n[n.length-1];if(t){var i=Math.max(t.startTime-s(),0);i<r.firstHiddenTime&&(o.value=i,o.entries=[t],e())}},c=l("largest-contentful-paint",u);if(c){e=h(n,o,i,t.reportAllChanges);var p=function(){B[o.id]||(u(c.takeRecords()),c.disconnect(),B[o.id]=!0,e(!0))};["keydown","click"].forEach((function(n){addEventListener(n,p,{once:!0,capture:!0})})),d(p,!0),a((function(r){o=f("LCP"),e=h(n,o,i,t.reportAllChanges),v((function(){o.value=performance.now()-r.timeStamp,B[o.id]=!0,e(!0)}))}))}}))},H=function W(n){document.prerendering?p((function(){return W(n)})):"complete"!==document.readyState?addEventListener("load",(function(){return W(n)}),!0):setTimeout(n,0)},$=function(n,t){t=t||{};var e=[800,1800],i=f("TTFB"),r=h(n,i,e,t.reportAllChanges);H((function(){var o=c();if(o){var u=o.responseStart;if(u<=0||u>performance.now())return;i.value=Math.max(u-s(),0),i.entries=[o],r(!0),a((function(){i=f("TTFB",0),(r=h(n,i,e,t.reportAllChanges))(!0)}))}}))};n.getCLS=I,n.getFCP=E,n.getFID=D,n.getINP=q,n.getLCP=G,n.getTTFB=$,n.onCLS=I,n.onFCP=E,n.onFID=D,n.onINP=q,n.onLCP=G,n.onTTFB=$,Object.defineProperty(n,"Se",{value:!0})}(t)}},__webpack_module_cache__={};function __webpack_require__(n){var t=__webpack_module_cache__[n];if(t!==undefined)return t.exports;var e=__webpack_module_cache__[n]={id:n,loaded:!1,exports:{}};return __webpack_modules__[n].call(e.exports,e,e.exports,__webpack_require__),e.loaded=!0,e.exports}__webpack_require__.amdO={},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),__webpack_require__.nmd=function(n){return n.paths=[],n.children||(n.children=[]),n};var __webpack_exports__={};!function(){try{!function(){var n=function(n){var t=[__webpack_require__(6297)];t.push(__webpack_require__(8580)),t.push(__webpack_require__(4717)),t.push(__webpack_require__(1516)),t.push(__webpack_require__(590)),t.push(__webpack_require__(8046)),t.push(__webpack_require__(5048)),t.push(__webpack_require__(5801)),t.push(__webpack_require__(7785)),t.push(__webpack_require__(4966)),t.push(__webpack_require__(1050)),t.push(__webpack_require__(9806)),t.push(__webpack_require__(8035)),t.push(__webpack_require__(9776)),t.push(__webpack_require__(2420)),t.push(__webpack_require__(4091)),t.push(__webpack_require__(561)),t.push(__webpack_require__(6388)),t.push(__webpack_require__(1010)),t.push(__webpack_require__(4601)),t.push(__webpack_require__(1392)),t.push(__webpack_require__(2187)),t.push(__webpack_require__(44)),t.push(__webpack_require__(8934)),t.push(__webpack_require__(6201)),t.push(__webpack_require__(9408)),t.push(__webpack_require__(7349)),t.push(__webpack_require__(8481)),t.push(__webpack_require__(5311)),t.push(__webpack_require__(4676)),t.push(__webpack_require__(4583)),t.push(__webpack_require__(2974)),t.push(__webpack_require__(5028)),d.initializePlugins(t)};window.performance&&window.performance.mark&&window.performance.mark("optimizely:blockBegin"),__webpack_require__(41).initialize();var t=__webpack_require__(9326),e=function(n){var e=n.name,i=(n.delta,n.value);n.id,"CLS"===e&&(i*=100),t.setMark(e,startTime=t.now(),duration=i)};t.time("gtagReady"),t.time("odpTime"),t.time("sendDCP"),t.time("sendActivate"),t.time("sendViewActivate"),t.time("sendDecision"),t.time("flash"),t.time("render"),t.time("preInitialize");var i=__webpack_require__(5402);i.onFCP(e),i.onFID(e),i.onTTFB(e),i.onLCP(e,{reportAllChanges:!0}),i.onCLS(e,{reportAllChanges:!0}),i.onINP(e,{reportAllChanges:!0});var r=__webpack_require__(307),o=__webpack_require__(9185);__webpack_require__(4418);var u=o.get("stores/directive");if(!__webpack_require__(7628).isCORSSupported())throw new Error("CORS is not supported on this browser, aborting.");var a,c=__webpack_require__(6906),s=__webpack_require__(5812),f=__webpack_require__(2975),l={"listTargetingKeys": [{"type": "c", "key": "_mkto_trk"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "_mkto_trk"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "_mkto_trk"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "_mkto_trk"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "_mkto_trk"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "_mkto_trk"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}, {"type": "c", "key": "optlyAccountID"}], "anonymizeIP": true, "tagGroups": [{"id": "3", "tags": []}], "dcpServiceId": "3383760141", "audiences": [{"conditions": ["and", ["or", ["or", {"value": "", "type": "cookies", "name": "optly_optimizely_test", "match": "exists"}]]], "id": "8405550223", "name": "[DO NOT ARCHIVE][CANON] Optimizely Test Cookie (optly_optimizely_test)"}, {"conditions": ["and", ["or", ["or", {"value": "true === true", "type": "code", "name": null, "match": null}]]], "id": "8448671725", "name": "Everyone"}, {"conditions": ["and", ["or", ["or", {"value": "var optimizelyUserEmail = window.optlyApp.getUtilities().userInfo.getUser().email;\nvar isBDDTest = /bdd\\+test\\S+@optimizely.com/.test(optimizelyUserEmail);\nisBDDTest !== true;", "type": "code", "name": null, "match": null}]]], "id": "9270393351", "name": "[DO NOT ARCHIVE] Not a BDD User"}, {"conditions": ["and", ["or", ["or", {"value": "3013110282", "type": "custom_attribute", "name": "9221721120", "match": null}]]], "id": "9668200026", "name": "[DO NOT ARCHIVE] Custom Attribute NYT Account ID"}, {"conditions": ["and", ["or", ["or", {"value": "8662642154", "type": "custom_attribute", "name": "9221721120", "match": null}]]], "id": "10172532809", "name": "[DO NOT ARCHIVE] Custom Attribute Engie Account ID"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "monthly_metal_accounts", "match": null}]]], "id": "10406924346", "name": "[DO NOT ARCHIVE] List: Monthly Metal Accounts"}, {"conditions": ["and", ["or", ["or", {"value": "145283386", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "76621335", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "8140550914", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "2972860641", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "8367280580", "type": "custom_attribute", "name": "9221721120", "match": null}]], ["or", ["not", ["or", {"value": "byron+test@optimizely.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "jonesbb@gmail.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "kelly.mcdevitt@bestbuy.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "enrico.washington.hc7l@statefarm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "mark.russell.st9d@statefarm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "suman.patnaik@ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "gargshar@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "anarora5@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "eva.kolinkova@sk.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "olga.guttenova@sk.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "arcsethi@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "akankaga@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "rahulchoudhary@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "kaniknag@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "jayeshku@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "abagarw6@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "mgulat10@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "saumesin@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "shelby.zellman@ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "ekavlako@us.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "kayle.milian@ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "alyssa.maneri@ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "bkaake@us.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "rkatz@us.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "npachaur@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "prabhatranjan@in.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "riche.zamor@ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "appy.ayyagari@ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}, {"value": "jenngonz@us.ibm.com", "type": "custom_attribute", "name": "9218501893", "match": null}]]], ["or", ["or", {"value": "!window.optlyApp.getUtilities().userInfo.evaluateUserInfo({\n    email: ['byron+test@optimizely.com','jonesbb@gmail.com','kelly.mcdevitt@bestbuy.com','enrico.washington.hc7l@statefarm.com','mark.russell.st9d@statefarm.com','suman.patnaik@ibm.com','gargshar@in.ibm.com'\u2018anarora5@in.ibm.com\u2019,\u2019eva.kolinkova@sk.ibm.com\u2019,'olga.guttenova@sk.ibm.com','arcsethi@in.ibm.com','akankaga@in.ibm.com','rahulchoudhary@in.ibm.com','kaniknag@in.ibm.com','jayeshku@in.ibm.com','abagarw6@in.ibm.com','mgulat10@in.ibm.com','saumesin@in.ibm.com'],\n}).allValuesMatch;", "type": "code", "name": null, "match": null}]]], "id": "10432572908", "name": "[DO NOT ARCHIVE][Byron] Show MGMT Link for Specific Users in a given Account"}, {"conditions": ["and", ["or", ["or", {"value": "window.optlyApp.getUtilities().userInfo.hasPermission('enable-teams-workflow');", "type": "code", "name": null, "match": null}]], ["or", ["or", {"value": "function getCookie(name) {\n    var v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\n    return v ? v[2] : null;\n};\ngetCookie('use_desktop_bundle') == 'true';", "type": "code", "name": null, "match": null}]], ["or", ["or", {"value": "145283386", "type": "custom_attribute", "name": "9221721120", "match": null}]]], "id": "10447522417", "name": "[DO NOT ARCHIVE][Byron] On Desktop App and has Program Management"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_spring", "match": null}]]], "id": "10449435361", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts Spring End"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_spring_ae", "match": null}]]], "id": "10452681941", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts Spring (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_spring_no_ae", "match": null}]]], "id": "10467240299", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts Spring (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "metal_account_exclusions", "match": null}]]], "id": "10477725966", "name": "[DO NOT ARCHIVE] List: Metal Account Exclusions"}, {"conditions": ["and", ["or", ["or", {"value": "window.optlyApp.getUtilities().userInfo.hasPermission('bandits-v2');", "type": "code", "name": null, "match": null}]]], "id": "10677965675", "name": "[DO NOT ARCHIVE][Whelan] Has Stats Accelerator Access"}, {"conditions": ["and", ["or", ["or", {"value": "ie", "type": "browser_version", "name": null, "match": null}]]], "id": "10795786687", "name": "[DO NOT ARCHIVE] Internet Explorer (Any Version)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_july_no_ae", "match": null}]]], "id": "10870060616", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts July (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_june", "match": null}]]], "id": "10870900394", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts June End"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_july", "match": null}]]], "id": "10875560328", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts July End"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_june_no_ae", "match": null}]]], "id": "10880310984", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts June (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_aug_no_ae", "match": null}]]], "id": "10882660436", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts August (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_june_ae", "match": null}]]], "id": "10894230713", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts June (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_july_ae", "match": null}]]], "id": "10898470429", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts July (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_aug_ae", "match": null}]]], "id": "10900530385", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts August (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_aug", "match": null}]]], "id": "10908170726", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts August End"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_dec", "match": null}]]], "id": "11081060782", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts December End"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_oct_ae", "match": null}]]], "id": "11087090469", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts October (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_nov_ae", "match": null}]]], "id": "11088860606", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts November (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_dec_no_ae", "match": null}]]], "id": "11091010617", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts December (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_sept", "match": null}]]], "id": "11091150545", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts September End"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_nov_no_ae", "match": null}]]], "id": "11094760724", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts November (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_jan_no_ae", "match": null}]]], "id": "11094890961", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts January (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_nov", "match": null}]]], "id": "11096780979", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts November End"}, {"conditions": ["and", ["or", ["or", {"value": "window.optlyApp.getUtilities().userInfo.getUser()['accountId'] === 199382811;", "type": "code", "name": null, "match": null}]]], "id": "11098391167", "name": "[DO NOT ARCHIVE] Custom JS: Account ID is Apple"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_jan_ae", "match": null}]]], "id": "11100670587", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts January (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_sept_no_ae", "match": null}]]], "id": "11100680545", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts September (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_oct", "match": null}]]], "id": "11102640599", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts October End"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_dec_ae", "match": null}]]], "id": "11104601094", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts December (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_sept_ae", "match": null}]]], "id": "11104621000", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts September (with AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "annual_metal_oct_no_ae", "match": null}]]], "id": "11110281001", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts October (no AE)"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "platinum_tiered_jan", "match": null}]]], "id": "11110440597", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts January End"}, {"conditions": ["and", ["or", ["or", {"value": "DE", "type": "location", "name": null, "match": null}, {"value": "AT", "type": "location", "name": null, "match": null}, {"value": "CH", "type": "location", "name": null, "match": null}]]], "id": "11191915512", "name": "DACH"}, {"conditions": ["and", ["or", ["or", {"value": "var userInfo = window.optlyApp.getUtilities().userInfo;\nvar email = userInfo && userInfo.getUser().email || '';\nemail.endsWith('@optimizely.com');", "type": "code", "name": null, "match": null}]]], "id": "11384846930", "name": "[DO NOT ARCHIVE][Zach] Has @optimizely.com email"}, {"conditions": ["and", ["or", ["not", ["or", {"value": "2504450025", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "310987714", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "5385581487", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "9823262", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "168844516", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "271914578", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "5450272024", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "8565842876", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "2291242524", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "10704880988", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "12833280274", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "14211340039", "type": "custom_attribute", "name": "9221721120", "match": null}]]]], "id": "11795413345", "name": "[Evan] Non-restricted Customers"}, {"conditions": ["and", ["or", ["or", {"value": "!window.optlyApp.getUtilities().userInfo.evaluateUserInfo({planId: ['bronze-monthly', 'bronze-oneyear', 'silver-monthly', 'silver-oneyear',  'gold-monthly', 'gold-oneyear', 'paygo', 'free_enterprise_trial', 'free_trial_optimizely_x', 'free_rollouts', 'free_employee', 'free_developer'] }).matchesFound > 0;", "type": "code", "name": null, "match": null}]]], "id": "12327471432", "name": "[DO NOT ARCHIVE] Custom JS: Has Enterprise Plan"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "list", "name": "classic_bb_exclusions", "match": null}]]], "id": "12389132055", "name": "[DO NOT ARCHIVE] List: Classic UI Deprecation Exclusions"}, {"conditions": ["and", ["or", ["or", {"value": "2972860641", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "2768500139", "type": "custom_attribute", "name": "9221721120", "match": null}]]], "id": "13222000364", "name": "[Bill C] - IBM Account Only"}, {"conditions": ["and", ["or", ["or", {"value": null, "type": "cookies", "name": "optiLastTeam", "match": "exists"}]]], "id": "13226920588", "name": "[Becca] Door to Narnia Audience (has optiLastTeam Cookie)"}, {"conditions": ["and", ["or", ["or", {"value": "14212090185", "type": "custom_attribute", "name": "9176074733", "match": null}, {"value": "11720450779", "type": "custom_attribute", "name": "9176074733", "match": null}, {"value": "14757960841", "type": "custom_attribute", "name": "9176074733", "match": null}]], ["or", ["or", {"value": "14212090185", "type": "custom_attribute", "name": "9221721120", "match": null}, {"value": "555650815", "type": "custom_attribute", "name": "9221721120", "match": null}]]], "id": "14360720012", "name": "[Whelan] Action Network AMP project"}, {"conditions": ["and", ["or", ["or", {"value": "optlyConfig && optlyConfig.account_info.permissions.accountPermissions.includes('full-stack') && !optlyConfig.account_info.permissions.accountPermissions.includes('full-stack-experiments')", "type": "code", "name": null, "match": null}], ["or", {"value": "optlyConfig && optlyConfig.account_info.plan_id === 'free_rollouts'", "type": "code", "name": null, "match": null}]]], "id": "14365410244", "name": "[Jon] Rollouts Plans"}, {"conditions": ["and", ["or", ["or", {"value": "", "type": "cookies", "name": "optimizely-design-preview", "match": "exists"}]]], "id": "15235570488", "name": "[Zach] Design Preview Cookie"}, {"conditions": ["and", ["or", ["not", ["or", {"value": "true", "type": "custom_attribute", "name": "9184675006", "match": null}]]]], "id": "15311090578", "name": "[Jon] Not Impersonating"}, {"conditions": ["and", ["or", ["or", {"value": "window.optlyConfig && optlyConfig.admin_account && (new Date() - new Date(optlyConfig.admin_account.created))/1000/60/60/24 > 30", "type": "code", "name": null, "match": null}]]], "id": "15342870521", "name": "[Jon] Accounts >30 Days Old"}, {"conditions": ["and", ["or", ["not", ["or", {"value": null, "type": "first_session", "name": null, "match": null}]]]], "id": "15505081042", "name": "[Asa] Returning Session"}, {"conditions": ["and", ["or", ["or", {"value": "15775461219", "type": "custom_attribute", "name": "9221721120", "match": null}], ["or", {"value": "15940390105", "type": "custom_attribute", "name": "9176074733", "match": null}]]], "id": "15709730710", "name": "[Zach] Edge Account"}, {"conditions": ["and", ["or", ["not", ["or", {"value": null, "type": "cookies", "name": "rollouts-first-rollout-complete", "match": "exists"}]]]], "id": "16714840290", "name": "[Zach] Customer has not seen rollouts invite collaborators dialog"}, {"conditions": ["and", ["or", ["or", {"value": "var sessionIndex = window.optimizely.get('behavior').query({\n    \"version\": \"0.2\",\n    \"filter\": [\n        {\"field\":[\"name\"],\n\t\t\"value\":\"8370151241_x_dashboard_user_info_ready\"\n}\n    ],\n    \"sort\": [\n      {\n        \"field\": [\"time\"],\n        \"direction\": \"ascending\"\n      }\n    ],\n    // Reduce a list of sorted events into a single event.\n    \"reduce\": {\n      \"aggregator\": \"nth\",\n      \"n\": 0\n    }\n  }).session_index;\nsessionIndex > 5", "type": "code", "name": null, "match": null}]]], "id": "16751340171", "name": "[David Orr] Users that visited X Dashboard in more than 5 sessions"}, {"conditions": ["and", ["or", ["or", {"value": "try {\n    var pageviews = window.optimizely.get('behavior').query({\n        \"version\": \"0.2\",\n        \"filter\": [\n            {\"field\":[\"name\"],\n            \"value\":\"8370151241_jamie_full_stack_projects\"\n        }   \n        ],\n        \"sort\": [\n        {\n            \"field\": [\"time\"],\n            \"direction\": \"ascending\"\n        }],\n    \"pick\": {\n        \"field\": [\"session_index\"]\n        }\n    });\n    var sessionSize = new Set(pageviews).size;\n    sessionSize >= 5;\n}\ncatch(e){console.log(e);}", "type": "code", "name": null, "match": null}]]], "id": "18400732217", "name": "[David Orr] Users that visited a Fullstack project in more than 5 sessions"}, {"conditions": ["and", ["or", ["or", {"value": "optlyApp.getUtilities().userInfo.evaluateUserInfo({ planId: ['free_rollouts'] }).matchesFound === 1", "type": "code", "name": null, "match": null}]]], "id": "18779050335", "name": "[ODS - Dan B] Include Free Rollouts"}, {"conditions": ["and", ["or", ["or", {"value": "window.optlyApp && [\"ali.zain@optimizely.com\",\"dmitrii.pantiukhin@optimizely.com\",\"muhammad.uddin@optimizely.com\",\"viktor.georgiev@optimizely.com\",\"michael.angelo@optimizely.com\",\"saba.talha@optimizely.com\",\"arthur.abon@optimizely.com\",\"bryce.dishongh@optimizely.com\"].indexOf(window.optlyApp.getUtilities().userInfo.getUser().email) !== -1;", "type": "code", "name": null, "match": null}]]], "id": "19583380104", "name": "[ODS] User is ODS Team Member"}, {"conditions": ["and", ["or", ["or", {"value": "NO", "type": "location", "name": null, "match": null}]]], "id": "20627600274", "name": "Norway"}, {"conditions": ["and", ["or", ["or", {"value": "SE", "type": "location", "name": null, "match": null}]]], "id": "20788940263", "name": "Sweden"}], "plugins": [function(PluginManager) {
  var Hogan=function(t){function r(e){if(n[e])return n[e].exports;var i=n[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var n={};return r.m=t,r.c=n,r.p="",r(0)}([function(t,r){function n(t){this.r=t,this.buf=""}function e(t,r){var n;if(r&&"object"==typeof r)if(void 0!==r[t])n=r[t];return n}function i(t){return String(null===t||void 0===t?"":t)}function o(t){return t=i(t),p.test(t)?t.replace(u,"&amp;").replace(f,"&lt;").replace(c,"&gt;").replace(l,"&#39;").replace(a,"&quot;"):t}t.exports=n,n.prototype={r:function(t,r,n){return""},v:o,t:i,render:function(t,r,n){return this.ri([t],r||{},n)},ri:function(t,r,n){return this.r(t,r,n)},rs:function(t,r,n){var e=t[t.length-1];if(!s(e))return void n(t,r,this);for(var i=0;i<e.length;i++)t.push(e[i]),n(t,r,this),t.pop()},s:function(t,r,n,e,i,o,u){var f;if(s(t)&&0===t.length)return!1;if(f=!!t,!e&&f&&r)r.push("object"==typeof t?t:r[r.length-1]);return f},d:function(t,r,n,i){var o,u=t.split("."),f=this.f(u[0],r,n,i),c=null;if("."===t&&s(r[r.length-2]))f=r[r.length-1];else for(var l=1;l<u.length;l++)if(o=e(u[l],f),void 0!==o)c=f,f=o;else f="";if(i&&!f)return!1;if(!i&&"function"==typeof f)r.push(c),f=this.mv(f,r,n),r.pop();return f},f:function(t,r,n,i){for(var o=!1,u=null,f=!1,c=r.length-1;c>=0;c--)if(u=r[c],o=e(t,u),void 0!==o){f=!0;break}if(!f)return i?!1:"";if(!i&&"function"==typeof o)o=this.mv(o,r,n);return o},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},mv:function(t,r,n){var e=r[r.length-1],o=t.call(e);if("function"==typeof o)return this.ct(i(o.call(e)),e,n);else return o}};var u=/&/g,f=/</g,c=/>/g,l=/'/g,a=/"/g,p=/[&<>"']/,s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}]);
  
PluginManager.registerWidget({
      widgetId: '8441744253',
      showFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        var _template = new Hogan(function(c,p,i) {var t=this;t.b(i=i||"");t.b("<div class=\"butterbar\" id=\"");t.b(t.v(t.d("widget.id",c,p,0)));t.b("\"style=\"display: flex; background-color: ");t.b(t.v(t.d("widget.bg",c,p,0)));t.b(";border-color: ");t.b(t.v(t.d("widget.borderColor",c,p,0)));t.b("; ");t.b(t.v(t.d("widget.more_styles",c,p,0)));t.b("\">");t.b("\n" + i);t.b("  <style>");t.b("\n" + i);t.b("  .root-wrap { height: calc(100% - 30px)}");t.b("\n" + i);t.b("  ");t.b("\n" + i);t.b("  .butterbar { box-sizing: border-box; font-size: 1em; font-weight: 400; height: 30px; padding-top: 4px; text-align: center; white-space: nowrap; background-color: #FCF8E3; border-bottom: 1px solid #FFD40C }");t.b("\n");t.b("\n" + i);t.b("  .butterbar span { margin: 0 auto;} ");t.b("\n");t.b("\n" + i);t.b("  .butterbar .closer { float: right; padding-right: 15px; padding-top: 2px}");t.b("\n" + i);t.b("    ");t.b("\n" + i);t.b("  </style>");t.b("\n" + i);t.b("  <span>");t.b(t.t(t.d("widget.text",c,p,0)));t.b(" <a href=\"");t.b(t.v(t.d("widget.link",c,p,0)));t.b("\" class=\"cta\" target=\"_blank\">");t.b(t.v(t.d("widget.cta",c,p,0)));t.b("</a></span>");t.b("\n" + i);t.b("  <a class=\"closer link--dark\">");t.b("\n" + i);t.b("  	<svg class=\"lego-icon\">");t.b("\n" + i);t.b("  		<use xlink:href=\"#close-16\"></use>");t.b("\n" + i);t.b("		</svg>");t.b("\n" + i);t.b("  </a>");t.b("\n" + i);t.b("</div>");t.b("\n");t.b("\n");return t.fl(); })
        widget.$id = "8441744253";
        widget.$instance = event.data.id;
        widget.$render = _template.render.bind(_template)
        widget.$fieldDefaults = [{"name":"text","default_value":"Do you want to learn more about Optimizely for Enterprise?"},{"name":"cta","default_value":"Schedule a demo!"},{"name":"link","default_value":"www.optimizely.com"},{"name":"color","default_value":"butter"},{"name":"id","default_value":"my_promo"},{"name":"dismissible","default_value":"no"},{"name":"test","default_value":" "},{"name":"more_styles","default_value":""}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        widget.$html = _template.render({ widget: widget, extension: widget })
        var extension = widget;
        
        //var $ = $ || window.$;
var $ = window.optimizely.get('jquery');
var utils = optimizely.get('utils');

// Render the widget
if (widget.color == 'aqua') {
  widget.bg = "#F2F7FC";
  widget.borderColor = "#9ACCE2";
}

if (widget.color == 'butter') {
  widget.bg = "#FCF8E3";
  widget.borderColor = "#FFD40C";
}

var cookieName = 'butterbar_' + widget.id + '_dismissed';
var hideBanner = (widget.dismissible === 'persist' && window.optlyFn.getCookie(cookieName));

if (!hideBanner && $(".butterbar").length === 0) {

  var sub = document.location.hostname.split('.')[0];
  var selector = (sub === 'www') ? '#inner-wrapper' : 'body.p13n';
  var html = widget.$render({
    widget: widget 
  });
  
  utils.waitForElement(selector).then(function() {
    $(selector).prepend(html);

    /*
    $('.butterbar .cta').on('mousedown', function() {
      eval(widget.on_click);
    });
    */
    if (widget.dismissible === 'no') {
    	$('.butterbar a.closer').remove();
  	}
      
  });
  
    // Handle close action
    $('html').delegate(".butterbar a.closer","click", function(){
      $(".butterbar").css({"display":"none", "visibility":""});
      $(".root-wrap").css({"height":"100%"});
      window.optlyFn.setCookie(cookieName, 'true', 90);
    });
  
}
      },
      hideFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        widget.$id = "8441744253";
        widget.$instance = event.data.id;
        widget.$fieldDefaults = [{"name":"text","default_value":"Do you want to learn more about Optimizely for Enterprise?"},{"name":"cta","default_value":"Schedule a demo!"},{"name":"link","default_value":"www.optimizely.com"},{"name":"color","default_value":"butter"},{"name":"id","default_value":"my_promo"},{"name":"dismissible","default_value":"no"},{"name":"test","default_value":" "},{"name":"more_styles","default_value":""}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        var extension = widget;
        
        var $ = $ || window.$;
$('.butterbar').remove();
      },
    });

PluginManager.registerWidget({
      widgetId: '9186595649',
      showFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        var _template = new Hogan(function(c,p,i) {var t=this;t.b(i=i||"");t.b("    <div id=\"optimizely-extension-");t.b(t.v(t.d("extension.$instance",c,p,0)));t.b("\" style=\"display:none;\">");t.b("\n" + i);t.b("        <div class=\"page-overlay page-overlay--faint\" style=\"z-index: 2999;\"> </div>");t.b("\n" + i);t.b("        <div class=\"dialog--wrapper dialog--shown optimizley-x-plug-wrapper\" style=\"z-index: 3000;\">");t.b("\n" + i);t.b("            <div class=\"dialog dialog--shadow\">");t.b("\n" + i);t.b("                <div class=\"lego-dialog__close\">");t.b("\n" + i);t.b("                    <svg class=\"lego-icon\">");t.b("\n" + i);t.b("                        <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#close-16\"></use>");t.b("\n" + i);t.b("                    </svg>");t.b("\n" + i);t.b("                </div>");t.b("\n" + i);t.b("                <div>");t.b("\n" + i);t.b("                    <div class=\"lego-dialog optimizley-x-plug-dialog\">");t.b("\n" + i);t.b("                        <div class=\"optimizley-x-plug-dialog-top\">");t.b("\n" + i);t.b("                            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 12.6 15.5\" xml:space=\"preserve\">");t.b("\n" + i);t.b("                                <g>");t.b("\n" + i);t.b("                                    <polygon points=\"5.8,1.9 5.8,15.5 6.8,15.5 6.8,1.9 8,3 8.7,2.3 6.3,0 4,2.3 4.7,3\"></polygon>");t.b("\n" + i);t.b("                                    <polygon points=\"8.7,10 9.8,8.9 9.8,12.5 10.8,12.5 10.8,8.9 11.9,10 12.6,9.3 10.3,7.1 8,9.3\"></polygon>");t.b("\n" + i);t.b("                                    <polygon points=\"0.7,7.1 1.8,6 1.8,12.5 2.8,12.5 2.8,6 3.9,7.1 4.6,6.4 2.3,4.1 0,6.4\"></polygon>");t.b("\n" + i);t.b("                                </g>");t.b("\n" + i);t.b("                            </svg>");t.b("\n" + i);t.b("                            <p class=\"lead\">");t.b(t.t(t.d("extension.header_lead",c,p,0)));t.b("</p>");t.b("\n" + i);t.b("                        </div>");t.b("\n" + i);t.b("                        <div class=\"optimizley-x-plug-dialog-content\">");t.b("\n" + i);t.b("                            <div class=\"lego-dialog__header\">");t.b("\n" + i);t.b("                                <div class=\"lego-dialog__title\">");t.b(t.t(t.d("extension.title",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("                                <p>");t.b(t.t(t.d("extension.subtitle",c,p,0)));t.b("</p>");t.b("\n" + i);t.b("                            </div>");t.b("\n" + i);t.b("                            <div class=\"lego-dialog__body\">");t.b("\n" + i);t.b("        											<div class=\"optimizley-x-plug-feature-section\">");t.b("\n" + i);t.b("                              	");t.b(t.t(t.d("extension.body",c,p,0)));t.b("\n" + i);t.b("                              </div>");t.b("\n" + i);t.b("                                ");t.b("\n" + i);t.b("                                <hr class=\"optimizley-x-plug-divider\">");t.b("\n" + i);t.b("                                <div class=\"lego-grid optimizley-x-plug-footer\">");t.b("\n" + i);t.b("                                    <div class=\"optimizley-x-plug-footer-cta\">");t.b("\n" + i);t.b("                                        <p class=\"lead\">");t.b(t.t(t.d("extension.footer_lead",c,p,0)));t.b("</p><p>");t.b("\n" + i);t.b("                                        <button class=\"oui-button oui-button--highlight optimizley-x-plug-cta-button\">");t.b(t.v(t.d("extension.cta",c,p,0)));t.b("</button></p></div>");t.b("\n" + i);t.b("                                </div>");t.b("\n" + i);t.b("                            </div>");t.b("\n" + i);t.b("                        </div>");t.b("\n" + i);t.b("                        <div class=\"optimizley-x-plug-dialog-thanks\" style=\"display: none;\" >");t.b("\n" + i);t.b("                            <div class=\"lego-dialog__header\">");t.b("\n" + i);t.b("                                <div class=\"lego-dialog__title\">");t.b(t.t(t.d("extension.thank_you_title",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("                                <p>");t.b(t.t(t.d("extension.thank_you_body",c,p,0)));t.b("<p>                      ");t.b("\n" + i);t.b("                            </div>");t.b("\n" + i);t.b("                            <div class=\"lego-dialog__body\"> ");t.b("\n" + i);t.b("                                <div class=\"lego-grid optimizley-x-plug-footer\">");t.b("\n" + i);t.b("                                    <div class=\"optimizley-x-plug-footer-cta\">");t.b("\n" + i);t.b("                                        <button class=\"oui-button oui-button--highlight optimizley-x-plug-done-button\">");t.b(t.v(t.d("extension.done_button_label",c,p,0)));t.b("</button></p></div>");t.b("\n" + i);t.b("                                </div>");t.b("\n" + i);t.b("                            </div>");t.b("\n" + i);t.b("                        </div>");t.b("\n" + i);t.b("                    </div>");t.b("\n" + i);t.b("                </div>");t.b("\n" + i);t.b("            </div>");t.b("\n" + i);t.b("        </div>");t.b("\n" + i);t.b("    </div>");t.b("\n");t.b("\n");return t.fl(); })
        widget.$id = "9186595649";
        widget.$instance = event.data.id;
        widget.$render = _template.render.bind(_template)
        widget.$fieldDefaults = [{"name":"body","default_value":"Body"},{"name":"header_lead","default_value":"Headline Lead in"},{"name":"header_content","default_value":"Header Content"},{"name":"title","default_value":"Awesome new feature"},{"name":"footer_lead","default_value":"Ready to Supercharge your experimentation program?"},{"name":"opener","default_value":""},{"name":"cta","default_value":"Contact Us"},{"name":"thank_you_title","default_value":"Thank You"},{"name":"thank_you_body","default_value":"Thank you body"},{"name":"done_button_label","default_value":"Done"},{"name":"subtitle","default_value":"Subtitle"},{"name":"marketoId","default_value":"0"}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        widget.$html = _template.render({ widget: widget, extension: widget })
        var extension = widget;
        widget._styleTag = document.createElement('style');
widget._styleTag.id = 'widget-css-9186595649';
widget._styleTag.innerHTML = '.optimizley-x-plug-wrapper .lego-dialog__close{	fill:white;}.optimizley-x-plug-dialog {  border: 1px solid #59BA4C;}.optimizley-x-plug-dialog-top {	background-color: #59BA4C;  color: white;  padding: 10px 20px;}.optimizley-x-plug-dialog-top p{margin: 0px;  padding: 0px;  font-size: 12px;}.optimizley-x-plug-dialog-top p.lead{    font-weight: bold;    font-size: 14px;}.optimizley-x-plug-dialog .lego-dialog__title{    margin-bottom: 10px;    }.optimizley-x-plug-dialog-badge {    font-size: 11px;    font-weight: bold;	background-color: #59BA4C;    color: white;    display: inline-block;    padding: 3px 8px;    border-radius: 100px;    margin-left: 10px;    position: relative;    top: -3px;}.optimizley-x-plug-dialog-top svg {  fill: white;  width: 16px;  float: left;  margin-right: 10px;  position: relative;  top: 2px;}.optimizley-x-plug-footer {    text-align: center;}.optimizley-x-plug-footer-cta {  padding-left: 20px;  width: 100%;}.optimizley-x-plug-footer-cta p.lead{  font-weight: bold;  font-size: 14px;}.optimizley-x-plug-footer-cta p{  font-size: 12px;}.optimizley-x-plug-cta-button {    font-size: 16px;    margin-top: 5px;    width: 200px;}.optimizley-x-plug-divider {  border: none;  border-top: 1px solid #DDD;  margin-top: 20px;  margin-bottom: 20px; }.optimizley-x-plug-wrapper .lego-dialog__close svg {	fill: #FFF;}.optimizley-x-plug-feature-section {    text-align: center;}.optimizley-x-plug-feature-section .small {    font-size: 12px;}.optimizley-x-plug-dialog-feature-image {    width: 100%;    height: 165px;    background-size: contain;    background-repeat: no-repeat;    background-position: center center;    margin-bottom: 10px;}.optimizley-x-plug-dialog-feature-image.teams-image {    background-image: url("https://s3-us-west-1.amazonaws.com/zach-designs/experiments/teams-prod.jpg");}.optimizley-x-plug-dialog-feature-image.reporting-image {    background-image: url("https://s3-us-west-1.amazonaws.com/zach-designs/experiments/reporting-prod.jpg");}';
document.getElementsByTagName('head')[0].appendChild(widget._styleTag);
        var utils = optimizely.get('utils');
var accountId = optlyConfig.account_info.account_id;

utils.waitForElement('body')
    .then(function(elem) {
        // Prepend the extension html to the body
        elem.insertAdjacentHTML('afterbegin', extension.$html);
	
  			// Handle Closing
  			$(elem).find('.optimizley-x-plug-wrapper .lego-dialog__close').on('click',hidePlugDialog);
  			$(elem).find('.optimizley-x-plug-wrapper .optimizley-x-plug-done-button').on('click',hidePlugDialog);
  			
  			// Handle Opening
  			$(document).on('click',extension.opener,function(event){
					showPlugDialog();
        });

    		// Handle Opening
  			$(document).on('click','.optimizley-x-plug-cta-button',function(event){
          var marketoId = extension.marketoId;
          var payload = {
  					formid: marketoId,
  					formVid: marketoId,
  					munchkinId: '361-GER-922',
  					_mkt_trk: getCookie('_mkto_trk'),
  					_mktoReferrer: window.location.href,
  					Email: optlyConfig.account_info.email,
        	}
          
          var xhr = new XMLHttpRequest();
          xhr.open('POST', 'https://app-sjn.marketo.com/index.php/leadCapture/save2');
          xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
          xhr.onload = function() {
          };
          xhr.send(JSON_to_URLEncoded(payload));
					
          $('.optimizley-x-plug-dialog-content').hide();
          $('.optimizley-x-plug-dialog-thanks').show();

        });
  			console.log('Ext. Acitvated');
});

function hidePlugDialog(){
    var extensionHtml = document.getElementById('optimizely-extension-' + extension.$instance);
    if (extensionHtml) $(extensionHtml).hide();	
}

function showPlugDialog(){
    var extensionHtml = document.getElementById('optimizely-extension-' + extension.$instance);
    if (extensionHtml) $(extensionHtml).show();	
}

function getCookie(a) {
    var b = document.cookie.match('(^|;)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b ? b.pop() : '';
}

function JSON_to_URLEncoded(element,key,list){
  var list = list || [];
  if(typeof(element)=='object'){
    for (var idx in element)
      JSON_to_URLEncoded(element[idx],key?key+'['+idx+']':idx,list);
  } else {
    list.push(key+'='+encodeURIComponent(element));
  }
  return list.join('&');
}

      },
      hideFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        widget.$id = "9186595649";
        widget.$instance = event.data.id;
        widget.$fieldDefaults = [{"name":"body","default_value":"Body"},{"name":"header_lead","default_value":"Headline Lead in"},{"name":"header_content","default_value":"Header Content"},{"name":"title","default_value":"Awesome new feature"},{"name":"footer_lead","default_value":"Ready to Supercharge your experimentation program?"},{"name":"opener","default_value":""},{"name":"cta","default_value":"Contact Us"},{"name":"thank_you_title","default_value":"Thank You"},{"name":"thank_you_body","default_value":"Thank you body"},{"name":"done_button_label","default_value":"Done"},{"name":"subtitle","default_value":"Subtitle"},{"name":"marketoId","default_value":"0"}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        var extension = widget;
        widget._styleTag = document.getElementById('widget-css-9186595649');
if (widget._styleTag) widget._styleTag.parentNode.removeChild(widget._styleTag);
        var extensionHtml = document.getElementById('optimizely-extension-' + extension.$instance);
if (extensionHtml) extensionHtml.remove();
      },
    });

PluginManager.registerWidget({
      widgetId: '10162050749',
      showFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        var _template = new Hogan(function(c,p,i) {var t=this;t.b(i=i||"");return t.fl(); })
        widget.$id = "10162050749";
        widget.$instance = event.data.id;
        widget.$render = _template.render.bind(_template)
        widget.$fieldDefaults = [{"name":"filter_word","default_value":"Optimizely"}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        widget.$html = _template.render({ widget: widget, extension: widget })
        var extension = widget;
        
        function cleanOptions(options){
  var changeSelected = 0;
  for (i = 0; i < options.length; i++) {
    if (options[i].innerText && options[i].innerText.indexOf(widget.filter_word) === -1) {
      options[i].style.display = "none";
      if( options[i].selected === true ){
        options[i].selected = "false";
        changeSelected = 1;
      }
    }
    else{
      if(changeSelected == 1){
        options[i].selected = "true";
        changeSelected = -1;
      }
    }
  }
}

var utils = optimizely.get('utils');
utils.observeSelector('.lego-select', function(element) {
  var conditions = document.querySelectorAll('.condition__title span');
  for (j = 0; j < conditions.length; j++) {
    if (conditions[j].innerText.indexOf('BlueKai') > -1) {
      var options = document.querySelectorAll('.condition__title')[j].parentNode.querySelectorAll('.condition-value-row [data-content-block="value"] .lego-select option');
      cleanOptions(options);
    }
  }
});
      },
      hideFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        widget.$id = "10162050749";
        widget.$instance = event.data.id;
        widget.$fieldDefaults = [{"name":"filter_word","default_value":"Optimizely"}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        var extension = widget;
        
        var extensionHtml = document.getElementById('optimizely-extension-' + extension.$instance);
if (extensionHtml) extensionHtml.remove();

      },
    });

PluginManager.registerWidget({
      widgetId: '10338103195',
      showFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        var _template = new Hogan(function(c,p,i) {var t=this;t.b(i=i||"");t.b("<span id=\"optimizely-extension-");t.b(t.v(t.d("extension.$instance",c,p,0)));t.b("\" style=\"font-size: 12px; padding: 10px;\">");t.b("\n" + i);t.b("  ");t.b(t.v(t.d("extension.text",c,p,0)));t.b("&nbsp;<a href=\"");t.b(t.v(t.d("extension.link",c,p,0)));t.b("\" target=\"_blank\">");t.b(t.v(t.d("extension.link_text",c,p,0)));t.b("</a>");t.b("\n" + i);t.b("</span>");t.b("\n");t.b("\n");return t.fl(); })
        widget.$id = "10338103195";
        widget.$instance = event.data.id;
        widget.$render = _template.render.bind(_template)
        widget.$fieldDefaults = [{"name":"text","default_value":""},{"name":"link_text","default_value":""},{"name":"link","default_value":""}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        widget.$html = _template.render({ widget: widget, extension: widget })
        var extension = widget;
        
        var utils = optimizely.get('utils');
var $ = window.optimizely.get('jquery');
 
utils.waitForElement('.butterbar').then(function(el) {
  var bb = $(el);
  // check for existing butter bar
  var conflict = bb.hasClass('warning') ? true : false;
  if (!conflict) {
    bb.css('display', 'block');
    bb.append(extension.$html);
  }
});

utils.waitForElement('.butterbar.warning').then(function(el) {
    var extensionHtml = document.getElementById('optimizely-extension-' + extension.$instance);
    if (extensionHtml) extensionHtml.remove();
});

      },
      hideFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        widget.$id = "10338103195";
        widget.$instance = event.data.id;
        widget.$fieldDefaults = [{"name":"text","default_value":""},{"name":"link_text","default_value":""},{"name":"link","default_value":""}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        var extension = widget;
        
        var extensionHtml = document.getElementById('optimizely-extension-' + extension.$instance);
if (extensionHtml) extensionHtml.remove();

      },
    });
PluginManager.registerAnalyticsTracker('10698082558', {
      preRedirectPolicy: 'PERSIST_BEFORE_REDIRECT',
      postRedirectPolicy: 'TRACK_IMMEDIATELY',
      nonRedirectPolicy: 'TRACK_IMMEDIATELY',
      trackLayerDecision: function(decisionData) {
        var extension = decisionData.integrationSettings && decisionData.integrationSettings['10698082558'];
        if (!extension) {
          return;
        }
        var campaign = {
          id: decisionData.layerId,
          name: decisionData.layerName,
          policy: decisionData.layerPolicy,
          integrationStringVersion: decisionData.integrationStringVersion,
        };
        var campaignId = campaign.id;
        var experimentId = decisionData.experimentId;
        var variationId = decisionData.variationId;
        var isHoldback = decisionData.isLayerHoldback;
        extension.$fieldDefaults = [];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(extension);
        var getCurExpId = function() {
	var urlArr = window.location.pathname.split('/');
  return urlArr[urlArr.length -1];

};

jQuery('[data-test-section="campaign-overview-sidebar-publish"]').on('mousedown', function() {
	var exps = optly.flux.evaluate([]).toJS().entityCache.layer_experiments;
	var statsAccelEnabled = false;
	var policy = "manual";
	Object.keys(exps).forEach(function(key) {
		if (exps[getCurExpId()].allocation_policy !== "manual") {
			statsAccelEnabled = true;
			policy = exps[getCurExpId()].allocation_policy;
      console.log("[WHELAN] this exp is stats accel");
		}
	});
  if (statsAccelEnabled) {
    console.log("[WHELAN] var statsAccelEnabled = ", statsAccelEnabled); 
  	window['optimizely'] = window['optimizely'] || [];
		window['optimizely'].push({
  		type: "event",
  		eventName: "started_w_stats_accel",
  		tags: {
  			algo: policy
  		}
  	});
  }
});
      },
      serializeSettings: JSON.stringify,
      deserializeSettings: JSON.parse,
    });
    

PluginManager.registerWidget({
      widgetId: '15300080288',
      showFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        var _template = new Hogan(function(c,p,i) {var t=this;t.b(i=i||"");t.b("<div id=\"nps-modal\" class=\"optly-modal\">");t.b("\n" + i);t.b(" <div class=\"optly-modal-content\">");t.b("\n" + i);t.b("   <div id=\"nps-modal-close\" class=\"lego-dialog__close optly-modal-close\" data-test-section=\"standard-dialog-close\">");t.b("\n" + i);t.b("     <svg class=\"lego-icon\">");t.b("\n" + i);t.b("       <use xlink:href=\"#close-16\"></use>");t.b("\n" + i);t.b("     </svg>");t.b("\n" + i);t.b("  </div>");t.b("\n" + i);t.b(" 	<div class=\"grid\">");t.b("\n" + i);t.b(" 		<div class=\"grid__cell optly-modal-left\">");t.b("\n" + i);t.b(" 			<h2 class=\"push-double text--center\">");t.b(t.v(t.d("widget.nps_question",c,p,0)));t.b("</h2>");t.b("\n" + i);t.b("      <div class=\"flex\" style=\"height: 150px\">");t.b("\n" + i);t.b("      <div class=\"screen screen-1 slide-in\">");t.b("\n" + i);t.b("       <div class=\"flex push-double flex-justified--center\" id=\"nps-modal-numbers\">");t.b("\n" + i);t.b("         	<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--right\" type=\"button\" value=\"0\">0</button>");t.b("\n" + i);t.b("          <button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"1\">1</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"2\">2</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"3\">3</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"4\">4</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"5\">5</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"6\">6</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"7\">7</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"8\">8</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--sides\" type=\"button\" value=\"9\">9</button>");t.b("\n" + i);t.b("					<button class=\"oui-button oui-button--highlight oui-button--default nps-score push--left nps-score-10\" type=\"button\" value=\"10\">10</button>");t.b("\n" + i);t.b("        </div>");t.b("\n" + i);t.b("        <div class=\"powered-by\">");t.b(t.t(t.d("widget.poweredBy",c,p,0)));t.b("</div>");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);t.b("        <div class=\"screen screen-2 slide-out\">");t.b("\n" + i);t.b("          <div class=\"push-double--sides push-double--bottom\">");t.b("\n" + i);t.b("            <div class=\"inner-screen-2\">");t.b("\n" + i);t.b("            	<label class=\"oui-label\">");t.b(t.t(t.d("widget.comment_prompt",c,p,0)));t.b("</label>");t.b("\n" + i);t.b("              <textarea class=\"optly-nps-feedback oui-textarea\" data-oui-component=\"true\" placeholder=\"\"></textarea>");t.b("\n" + i);t.b("              <div class=\"toolbar\">");t.b("\n" + i);t.b("                <div class='text--right'>");t.b("\n" + i);t.b("                  <button class='oui-button oui-button--highlight submit-btn push--top' id=\"nps-modal-submit\">");t.b(t.v(t.d("widget.cta",c,p,0)));t.b("</button>");t.b("\n" + i);t.b("                </div>");t.b("\n" + i);t.b("              </div>");t.b("\n" + i);t.b("            </div>");t.b("\n" + i);t.b("          </div>");t.b("\n" + i);t.b("        </div>");t.b("\n" + i);t.b("        </div>");t.b("\n" + i);t.b("      </div>");t.b("\n" + i);t.b(" 		</div>");t.b("\n" + i);t.b(" 	</div>");t.b("\n" + i);t.b(" </div>");t.b("\n" + i);t.b("</div>");return t.fl(); })
        widget.$id = "15300080288";
        widget.$instance = event.data.id;
        widget.$render = _template.render.bind(_template)
        widget.$fieldDefaults = [{"name":"nps_question","default_value":"How likely are you to recommend our service to a friend or colleague?"},{"name":"comment_prompt","default_value":"Please tell us a bit more about why you chose this rating <span class=\"lego-label__optional\">(Optional)</span>"},{"name":"cta","default_value":"Submit"},{"name":"survey_id","default_value":"[ ask zach@optimizely.com for an ID ]"},{"name":"showAfterCloseDays","default_value":14},{"name":"showAfterAnswerDays","default_value":180},{"name":"poweredBy","default_value":"Survey powered by an Optimizely Extension. Build your own <a href=\"https://developers.optimizely.com/x/extensions/\" target=\"_blank\" id=\"nps-modal-extension\">extension</a> in Optimizely Web."}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        widget.$html = _template.render({ widget: widget, extension: widget })
        var extension = widget;
        widget._styleTag = document.createElement('style');
widget._styleTag.id = 'widget-css-15300080288';
widget._styleTag.innerHTML = '.optly-modal {  background-color: white;  display: none;  left: 0;  position: fixed;  bottom: 0;  width: 100%;  z-index: 5000;  box-shadow: 0px -3px 3px 0px rgba(0, 0, 0, 0.16);  transform: translateY(0%);  -webkit-transform: translateY(0%);}@keyframes slide-down {    0% { transform: translateY(0%); }    100% { transform: translateY(100%); }}@-webkit-keyframes slide-down {    0% { -webkit-transform: translateY(0%); }    100% { -webkit-transform: translateY(100%); }}.slide-down {    animation: slide-down 0.5s forwards;    -webkit-animation: slide-down 0.5s forwards;}.optly-modal-content {  background-color: #fefefe;  margin: auto;  width: 100%;  position: relative;}.nps-score {  font-size: 24px;  width: 47px;  height: 47px;  border-radius: 50%;  border-color: transparent;  padding: 0;}#nps-modal-numbers{	}  .screen-1 {  display:block;  width: 100%;  transform: translateX(0%);  -webkit-transform: translateX(0%);}.screen-2 {  position: absolute;  transform: translateX(100%);  -webkit-transform: translateX(100%);  width: 100%;  opacity: 0;}.inner-screen-2 {	width: 80%;  margin-left: auto;  margin-right: auto}.slide-in {    animation: slide-in 0.5s forwards;    -webkit-animation: slide-in 0.5s forwards;}.slide-out {    animation: slide-out 0.5s forwards;    -webkit-animation: slide-out 0.5s forwards;}    @keyframes slide-in {    100% { transform: translateX(0%); }}@-webkit-keyframes slide-in {    100% { -webkit-transform: translateX(0%); }}    @keyframes slide-out {    0% { transform: translateX(0%); }    100% { transform: translateX(-100%); }}@-webkit-keyframes slide-out {    0% { -webkit-transform: translateX(0%); }    100% { -webkit-transform: translateX(-100%); }}.grid {  display: -webkit-flex;  display: -ms-flexbox;  display: flex;  -webkit-flex-wrap: wrap;  -ms-flex-wrap: wrap;  flex-wrap: wrap;  margin-left: -20px; }    .grid__cell {    -webkit-flex: 1;    -ms-flex: 1;    flex: 1;    padding-left: 20px; }    .grid--gutter--narrow {    margin-left: -10px; }        .grid--gutter--narrow > .grid__cell {      padding-left: 10px; }    .grid--gutter--wide {    margin-left: -40px; }        .grid--gutter--wide > .grid__cell {      padding-left: 40px; }    .grid--flush {    margin-left: 0; }        .grid--flush > .grid__cell {      padding-left: 0; }    .grid--natural > .grid__cell {    -webkit-flex: none;    -ms-flex: none;    flex: none; }    .grid--center {    -webkit-align-items: center;    -ms-flex-align: center;    -ms-grid-row-align: center;    align-items: center; }    .grid--bottom {    -webkit-align-items: flex-end;    -ms-flex-align: end;    -ms-grid-row-align: flex-end;    align-items: flex-end; }    .grid__cell[class*="width-"] {    -webkit-flex: none;    -ms-flex: none;    flex: none; }.optly-modal-left h2 {	padding-top: 10px;}.optly-nps-feedback {height: 52px;}.powered-by {  position: absolute;	opacity: 1;  font-size: 11px;  left: 20px;  bottom: 25px;  text-align:center;  width: 100%;}';
document.getElementsByTagName('head')[0].appendChild(widget._styleTag);
        function addDays(date, days) {
  var result = new Date(date);
  result.setDate(result.getDate() + days);
  return result;
}

var utils = window.optimizely.get("utils");
var lsCloseId = 'optly-nps-closed-' + widget.$instance;
       
var scoreSelection = {
	score: null,
  comment: '',
};

var selectNPSScore = function(value) {
	scoreSelection.score = value;
  document.querySelector('.screen-1').classList.remove('slide-in')
  document.querySelector('.screen-1').classList.add('slide-out');
  document.querySelector('.screen-2').classList.remove('slide-out')
  document.querySelector('.screen-2').classList.add('slide-in');
  document.querySelector('.screen-2').style.opacity = 100;
  document.querySelector('.chosen-score').innerText = value;
}

var writeComment = function(comment) {
	scoreSelection.comment = comment;
}

var submitScore = function() {
  var emailAddr = window.optlyApp && window.optlyApp.getUtilities().userInfo.getUser().email;
  var accountId = window.optlyApp && window.optlyApp.getUtilities().userInfo.getUser().accountId;
	// send scoreSelection to api
  var url = 'https://nps.optimizely.com/api/v1/surveys/'+widget.survey_id+'/track'
  url += '?score=' + scoreSelection.score;
  url += '&email=' + emailAddr;
  url += '&comment=' + encodeURI(scoreSelection.comment);
  url += '&accountId=' + accountId
  url += '&metadata=' + encodeURI('{ "projectType": "'+ window.optlyApp.getUtilities().userInfo.getUser().projectPlatform +'","npsQuestion": "'+ widget.nps_question +'"}')

  var Http = new XMLHttpRequest();
	Http.open("GET", url);
	Http.send();

  hidePopup()

  window["optimizely"].push({
    type: "event",
    eventName: "nps-modal-submit",
    tags: {
      comment: scoreSelection.comment,
      value: parseFloat(scoreSelection.score),
      surveyId: widget.survey_id
    }
  });
  
  var d = new Date();
  showDate = addDays(d, widget.showAfterAnswerDays);
  window.localStorage.setItem(lsCloseId, showDate);
}

var hidePopup = function() {  
  document.querySelector('.optly-modal').classList.add('slide-down');
};

var showPopup = function() {
  if(window.localStorage.getItem(lsCloseId)!=undefined){
    var showDate = new Date(window.localStorage.getItem(lsCloseId));
    var today = new Date();

    if (today>showDate){
      document.querySelector('.optly-modal').style.display = "block";
    } else {
      return
    }
  } else {
		document.querySelector('.optly-modal').style.display = "block";
  }
};

utils.waitForElement('body').then(function(element) {
  var html = widget.$html;
  element.insertAdjacentHTML('beforeend', html);

  var npsScore = document.querySelectorAll('.nps-score');
  for (var i = 0; i < npsScore.length; i++) {
    npsScore[i].addEventListener('click', function(event) {
      selectNPSScore(Number(event.target.innerText));
    });
  }
  
  document.querySelector('.submit-btn').addEventListener('click', function(event) {
    submitScore();
  });
  
  document.querySelector('.optly-modal-close').addEventListener('click', function(event) {
    hidePopup();
    var d = new Date();
    showDate = addDays(d, widget.showAfterCloseDays);
    window.localStorage.setItem(lsCloseId, showDate);
  });
  
  document.querySelector('.optly-nps-feedback').addEventListener('input', function(event) {
    writeComment(event.target.value);
  });

	var pop = setTimeout(function(){
    showPopup();
  }, widget.timer*1000);
});
      },
      hideFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        widget.$id = "15300080288";
        widget.$instance = event.data.id;
        widget.$fieldDefaults = [{"name":"nps_question","default_value":"How likely are you to recommend our service to a friend or colleague?"},{"name":"comment_prompt","default_value":"Please tell us a bit more about why you chose this rating <span class=\"lego-label__optional\">(Optional)</span>"},{"name":"cta","default_value":"Submit"},{"name":"survey_id","default_value":"[ ask zach@optimizely.com for an ID ]"},{"name":"showAfterCloseDays","default_value":14},{"name":"showAfterAnswerDays","default_value":180},{"name":"poweredBy","default_value":"Survey powered by an Optimizely Extension. Build your own <a href=\"https://developers.optimizely.com/x/extensions/\" target=\"_blank\" id=\"nps-modal-extension\">extension</a> in Optimizely Web."}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        var extension = widget;
        widget._styleTag = document.getElementById('widget-css-15300080288');
if (widget._styleTag) widget._styleTag.parentNode.removeChild(widget._styleTag);
        var extensionHTML = document.querySelector('.optly-modal');
if(extensionHTML) extensionHTML.remove();
      },
    });

PluginManager.registerWidget({
      widgetId: '22900210350',
      showFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        var _template = new Hogan(function(c,p,i) {var t=this;t.b(i=i||"");return t.fl(); })
        widget.$id = "22900210350";
        widget.$instance = event.data.id;
        widget.$render = _template.render.bind(_template)
        widget.$fieldDefaults = [{"name":"image","default_value":"//cdn.optimizely.com/img/5935064/2ec2758bf5ab4287a2653cb1222079c4.svg"},{"name":"url","default_value":""},{"name":"alt","default_value":""},{"name":"slot","default_value":"top"}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        widget.$html = _template.render({ widget: widget, extension: widget })
        var extension = widget;
        
        var utils = window.optimizely.get('utils');
utils.waitForElement("#" + extension.slot).then(function (el) {
  const banner = document.createElement('a');
  banner.setAttribute('href', extension.url);
  banner.setAttribute('target', '_blank');
  banner.setAttribute('id', extension.slot);
  banner.innerHTML = '<img src="' + extension.image + '" alt="' + extension.alt + '"/>';
  el.parentNode.replaceChild(banner, el);
});



      },
      hideFn: function(event) {
        var $ = window.optimizely.get('jquery');
        var widget = event.data.config;
        widget.$id = "22900210350";
        widget.$instance = event.data.id;
        widget.$fieldDefaults = [{"name":"image","default_value":"//cdn.optimizely.com/img/5935064/2ec2758bf5ab4287a2653cb1222079c4.svg"},{"name":"url","default_value":""},{"name":"alt","default_value":""},{"name":"slot","default_value":"top"}];
        (function(widg) {
  var i = 0;
  var field;
  for (; i < widg.$fieldDefaults.length; ++i) {
    field = widg.$fieldDefaults[i];
    if (!widg.hasOwnProperty(field.name)) {
      widg[field.name] = field.default_value;
    }
  }
  })(widget);
        var extension = widget;
        
        
      },
    });
}
], "accountId": "5935064", "layers": [{"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["11970583767"], "experiments": [{"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE][CANON] Optimizely Test Cookie (optly_optimizely_test)", "name": "[Brie] Other (Free trial pages) - Testing the Length of Free Trial (30 vs. 14 days) - Measurement experiment", "bucketingStrategy": null, "variations": [{"id": "12036222366", "actions": [{"viewId": "11970583767", "changes": [{"dependencies": [], "type": "custom_code", "id": "949D82B0-1C17-4951-8F69-D58D10244889", "value": function($){window['optimizely'] = window['optimizely'] || [];
$(function() {
  // The goal of this is to track the first time an experiment is started.

  // Fullstack first experiment.
  $("body").on("click", "[data-test-section='environment-status-button']", function() {
    var resultsButton = $(this).closest('[data-test-section="oasis-experiment-table-row"]').find('[data-test-section="oasis-experiment-results-button"]').find('button')[0];

    $(document).on("mouseenter", '[data-test-section="dialog-frame"]', function() {
      $(document).on('click', '[data-test-section="confirm-submit-button"]', function() {
        if (!!resultsButton.disabled) {
          window.optimizely.push({
            type: "event",
            eventName: "first time starting experiment"
          });
        }
      });
    });
  });

  // Web first experiment.
  var confirmExperimentStart = function() {
    var experimentStatus = $('[data-test-section="campaign-overview-sidebar-campaign-status"]');
    var experimentNotStarted = experimentStatus.text() == "Not Started";

    $('[data-test-section="confirm-dialog"]').on('click', '[data-test-section="confirm-submit-button"]', function() {
      if (experimentNotStarted) {
        window.optimizely.push({
          type: "event",
          eventName: "first time starting experiment"
        });
      }
    });
  };

  $('body').on('click', '[data-track-id="2.0-Campaign-Sidebar-Publish.StartExperiment"]', confirmExperimentStart);
});
}}]}], "name": "Original"}], "audienceIds": ["and", "8405550223"], "changes": null, "id": "11942854083", "integrationSettings": null}], "id": "11944692928", "weightDistributions": null, "name": "[Brie] Other (Free trial pages) - Testing the Length of Free Trial (30 vs. 14 days) - Measurement experiment", "groupId": null, "commitId": "11989572778", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["23118291229"], "experiments": [{"weightDistributions": [{"entityId": "23187810010", "endOfRange": 5000}, {"entityId": "23161510578", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[23|02|09] [Patrick] Read More Blog CTA World", "bucketingStrategy": null, "variations": [{"id": "23187810010", "actions": [], "name": "Original"}, {"id": "23161510578", "actions": [{"viewId": "23118291229", "changes": [{"selector": ".blogListing .secondary", "dependencies": [], "attributes": {"html": "Read more blogs"}, "type": "attribute", "id": "8B2F0D7E-2AC7-4074-AD0F-3FB21E164AD9", "css": {}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "23070481761", "integrationSettings": null}], "id": "23132111101", "weightDistributions": null, "name": "[23|02|09] [Patrick] Read More Blog CTA World", "groupId": null, "commitId": "23155530639", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10609215822"], "experiments": [{"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] Not a BDD User,[Jon] Not Impersonating,[Evan] Non-restricted Customers,[Jon] Rollouts Plans,[Asa] Returning Session,[Jon] Accounts >30 Days Old,[David Orr] Users that visited a Fullstack project in more than 5 sessions", "name": "[Zach/Asa] NPS on Rollouts", "bucketingStrategy": null, "variations": [{"id": "15504630143", "actions": [{"viewId": "10609215822", "changes": [{"src": "/actions/b4f26d93d82ce0b8f951bacc7295275f873edf6186c7dea13dc05797723717ef.js", "dependencies": [], "id": "43A8E534-B3A1-45A6-81C9-7FADA5108383"}, {"selector": "#nps-modal-close", "dependencies": ["43A8E534-B3A1-45A6-81C9-7FADA5108383"], "attributes": {}, "type": "attribute", "id": "E782830C-5EFA-4848-BDD0-3F398C02CCC2", "css": {}}, {"selector": "#nps-modal-numbers", "dependencies": ["E782830C-5EFA-4848-BDD0-3F398C02CCC2"], "attributes": {}, "type": "attribute", "id": "45D9BD45-E14F-4A2C-AE0F-6C13CB6D1872", "css": {}}, {"selector": "#nps-modal-submit", "dependencies": ["45D9BD45-E14F-4A2C-AE0F-6C13CB6D1872"], "attributes": {}, "type": "attribute", "id": "B0AC7492-D10E-4AB2-9BE3-87FA90037604", "css": {}}, {"selector": "#nps-modal-extension", "dependencies": ["B0AC7492-D10E-4AB2-9BE3-87FA90037604"], "attributes": {}, "type": "attribute", "id": "9384CE7A-0F90-414A-9517-C1953931261F", "css": {}}]}], "name": "Colleague"}], "audienceIds": ["and", "9270393351", "15311090578", "11795413345", "14365410244", "15505081042", "15342870521", "18400732217"], "changes": null, "id": "15482880448", "integrationSettings": null}], "id": "15490390531", "weightDistributions": null, "name": "[Zach/Asa] NPS on Rollouts", "groupId": null, "commitId": "18439563908", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {"10698082558": {}}, "integrationStringVersion": 2, "viewIds": ["16838290953"], "experiments": [{"weightDistributions": [{"entityId": "16840891517", "endOfRange": 3333}, {"entityId": "16859531418", "endOfRange": 6666}, {"entityId": "16836552223", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[Caitlin] Expose Allocation Policy Choice in MVT Traffic Allocation Page", "bucketingStrategy": null, "variations": [{"id": "16840891517", "actions": [{"viewId": "16838290953", "changes": []}], "name": "Original"}, {"id": "16859531418", "actions": [{"viewId": "16838290953", "changes": [{"value": "Switch to Partial Factorial above in order to use a dynamic allocation method like Stats Accelerator.", "selector": "h5.push--bottom", "dependencies": [], "operator": "before", "type": "append", "id": "A64B29A2-D2C7-4547-B79B-75382B375158"}, {"selector": "button.oui-button--outline", "dependencies": [], "attributes": {}, "type": "attribute", "id": "ED78ECBB-72F0-4BAA-A4D3-1288E69463A0", "css": {}}]}], "name": "Text on Page"}, {"id": "16836552223", "actions": [{"viewId": "16838290953", "changes": [{"selector": "#root > div.wrap.position--relative > div > div.root-panel > div > div > div > div > div.two-col__content.overflow-x--auto > div > div > div:nth-child(4) > div > div > div > div > ul > li:nth-child(2) > ul > li > div > div > div > div", "dependencies": [], "attributes": {"html": "Select Partial Factorial to access dynamic traffic allocation modes."}, "type": "attribute", "id": "A79E5758-3284-46E3-9D83-DBFA75D3FDC0", "css": {}}]}], "name": "Text in Drop-Down"}], "audienceIds": null, "changes": null, "id": "16872931388", "integrationSettings": null}], "id": "16853970977", "weightDistributions": null, "name": "[Caitlin] Expose Allocation Policy Choice in MVT Traffic Allocation Page", "groupId": null, "commitId": "16867474855", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "D2ED8FA7-CD20-488E-8F43-D9A6782F8ACF", "value": function($){var utils = window.optimizely.get('utils');


utils.waitForElement('#root > div.wrap.position--relative > div > div.root-panel > div > div > div > div > div.two-col__content.overflow-x--auto > div > div > div.lego-form__footer.lego-button-row.lego-button-row--right.push-quad--bottom > button.oui-button.oui-button--highlight.oui-button--default').then(function (el) {



    el.addEventListener('click', function () {

        var settings = document.querySelectorAll('#root > div.wrap.position--relative > div > div.root-panel > div > div > div > div > div.two-col__content.overflow-x--auto > div > div > div.push-double--bottom > div > div:nth-child(1) > div > div > button > div > div.flex--1.truncate');

        if (settings.length > 0 && (settings[0].innerText == "Multi-armed Bandit" || settings[0].innerText == "Accelerate Learnings")) {

            window['optimizely'] = window['optimizely'] || [];
window['optimizely'].push({
  type: "event",
  eventName: "MAB_start",
  tags: {
    revenue: 0, // Optional in cents as integer (500 == $5.00)
    value: 0.00 // Optional as float
  }
});

        }

    });
});
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["14711880608"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[Kelly] Cross Product Metrics", "bucketingStrategy": null, "variations": [{"id": "14739180631", "actions": [{"viewId": "14711880608", "changes": []}], "name": "Original"}], "audienceIds": null, "changes": null, "id": "14721740787", "integrationSettings": null}], "id": "14733320905", "weightDistributions": null, "name": "[Kelly] Cross Product Metrics", "groupId": null, "commitId": "14704270012", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["8519660958"], "experiments": [{"weightDistributions": [{"entityId": "13223760200", "endOfRange": 5000}, {"entityId": "13213940321", "endOfRange": 10000}], "audienceName": "[Becca] Door to Narnia Audience (has optiLastTeam Cookie)", "name": "[Becca] Skip Narnia Door when navigating to MGMT", "bucketingStrategy": null, "variations": [{"id": "13223760200", "actions": [{"viewId": "8519660958", "changes": []}], "name": "Original"}, {"id": "13213940321", "actions": [{"viewId": "8519660958", "changes": [{"dependencies": [], "type": "custom_code", "id": "6DEF7D70-488B-4E65-8185-F59CC8CC76BC", "value": function($){var getCookie = function(name) {
   var match = document.cookie.match(name+'=([^;]*)');
   return match ? match[1] : undefined;
 };

var lastMGMTTeam = getCookie('optiLastTeam');
var lastMGMTAcct = getCookie('optiLastAccount');

var utils = optimizely.get('utils');

utils.waitForElement('.root-nav__link--secondary').then(function(footerElement) {

  if (document.querySelectorAll('[data-test-section="program-management-nav-link"]').length) {
    var mgmtTeamPlace = (document.querySelectorAll('[data-test-section="program-management-nav-link"]')[0].getAttribute("href").split("/").length - 1);
    var mgmtTeamID = document.querySelectorAll('[data-test-section="program-management-nav-link"]')[0].getAttribute("href").split("/")[mgmtTeamPlace];
    // check that customer hasn't switched accounts
    if (mgmtTeamID == lastMGMTAcct) {
    	document.querySelectorAll('[data-test-section="program-management-nav-link"]')[0].setAttribute("href", "https://teams.optimizely.com/accounts/" + mgmtTeamID + "/teams/" + lastMGMTTeam + "/ideas");
    } else {
      	window['optimizely'] = window['optimizely'] || [];
				window['optimizely'].push({
  				type: "event",
  				eventName: "mgmt_account_switch",
				});
    }
  }
  
  
});
}}]}], "name": "Variation #1"}], "audienceIds": ["and", "13226920588"], "changes": null, "id": "13227020352", "integrationSettings": null}], "id": "13227100362", "weightDistributions": null, "name": "[Becca] Skip Narnia Door when navigating to MGMT", "groupId": null, "commitId": "13272750465", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 5000, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10665880103"], "experiments": [{"weightDistributions": [{"entityId": "15270200548", "endOfRange": 10000}], "audienceName": "[DO NOT ARCHIVE] Custom JS: Has Enterprise Plan,[DO NOT ARCHIVE] Not a BDD User,[Jon] Not Impersonating,[Evan] Non-restricted Customers,[Asa] Returning Session,[Jon] Accounts >30 Days Old,[David Orr] Users that visited X Dashboard in more than 5 sessions", "name": "[Zach/Kate/Jon] NPS on Experiment Dashboard", "bucketingStrategy": null, "variations": [{"id": "15270200548", "actions": [{"viewId": "10665880103", "changes": [{"name": "NPS Score", "config": {"poweredBy": "Powered by an Optimizely Extension. Build your own <a href=\"https://developers.optimizely.com/x/extensions/\" target=\"_blank\" id=\"nps-modal-extension\">extension</a> in Optimizely Web. Feedback subject to our <a href=\"https://www.optimizely.com/privacy/\" target=\"_blank\">Privacy Policy</a>.", "nps_question": "How likely are you to recommend Optimizely to a colleague?", "comment_prompt": "Please tell us a bit more about why you chose this rating (optional)", "showAfterAnswerDays": 180, "cta": "Submit", "showAfterCloseDays": 63, "survey_id": "uPxgjUKNC8"}, "id": "C98512CD-2B5D-4EF3-B7BF-BF60A21D6613", "dependencies": [], "type": "widget", "widget_id": "15300080288"}, {"selector": "#nps-modal-close", "dependencies": ["C98512CD-2B5D-4EF3-B7BF-BF60A21D6613"], "attributes": {}, "type": "attribute", "id": "27EBDF02-F346-42CB-874C-2C25E95643A4", "css": {}}, {"selector": "#nps-modal-numbers", "dependencies": ["27EBDF02-F346-42CB-874C-2C25E95643A4"], "attributes": {}, "type": "attribute", "id": "C4AAE25D-17B0-4A62-885B-BD8E2F3A1671", "css": {}}, {"selector": "#nps-modal-submit", "dependencies": ["C4AAE25D-17B0-4A62-885B-BD8E2F3A1671"], "attributes": {}, "type": "attribute", "id": "43CBDF45-A23C-458B-BE7A-7DB7536DCB3E", "css": {}}, {"selector": "#nps-modal-extension", "dependencies": ["43CBDF45-A23C-458B-BE7A-7DB7536DCB3E"], "attributes": {}, "type": "attribute", "id": "E25529DC-FB27-4739-A8AD-CED077F31D32", "css": {}}]}], "name": "Colleague"}, {"id": "15317520534", "actions": [{"viewId": "10665880103", "changes": [{"name": "NPS Score", "config": {"poweredBy": "Powered by an Optimizely Extension. Build your own <a href=\"https://developers.optimizely.com/x/extensions/\" target=\"_blank\" id=\"nps-modal-extension\">extension</a> in Optimizely Web. Feedback subject to our <a href=\"https://www.optimizely.com/privacy/\" target=\"_blank\">Privacy Policy</a>.", "nps_question": "Would you recommend Optimizely to a friend?", "comment_prompt": "Tell us a bit more about why you chose this rating. (optional)", "showAfterAnswerDays": 180, "cta": "Submit", "showAfterCloseDays": 30, "survey_id": "uPxgjUKNC8"}, "id": "8F61FE3A-48C4-4593-B2E3-33CBC604F8FD", "dependencies": [], "type": "widget", "widget_id": "15300080288"}]}], "name": "Friend"}, {"id": "15606190736", "actions": [{"viewId": "10665880103", "changes": [{"name": "NPS Score", "config": {"poweredBy": "Powered by an Optimizely Extension. Build your own <a href=\"https://developers.optimizely.com/x/extensions/\" target=\"_blank\" id=\"nps-modal-extension\">extension</a> in Optimizely Web. Feedback subject to our <a href=\"https://www.optimizely.com/privacy/\" target=\"_blank\">Privacy Policy</a>.", "nps_question": "Your opinion matters! How would you rate your overall experience with Optimizely?  We will respond to all comments within 2-business days.", "comment_prompt": "Can you provide a little more detail around your score? (Optional)", "showAfterAnswerDays": 180, "cta": "Submit", "showAfterCloseDays": 30, "survey_id": "uPxgjUKNC8"}, "id": "EFE3A82C-F4C1-4610-9CF4-D6ECD6689B04", "dependencies": [], "type": "widget", "widget_id": "15300080288"}]}], "name": "Follow Up"}, {"id": "15745860977", "actions": [{"viewId": "10665880103", "changes": [{"name": "NPS Score", "config": {"poweredBy": "Survey powered by an Optimizely Extension. Build your own <a href=\"https://developers.optimizely.com/x/extensions/\" target=\"_blank\" id=\"nps-modal-extension\">extension</a> in Optimizely Web.", "nps_question": "How would you rate your experience with Optimizely? A response is guaranteed.", "comment_prompt": "Please tell us a bit more about why you chose this rating (optional)", "showAfterAnswerDays": 180, "cta": "Submit", "showAfterCloseDays": 30, "survey_id": "uPxgjUKNC8"}, "id": "345B4843-A0D6-42F0-A5E1-EE4B7F927711", "dependencies": [], "type": "widget", "widget_id": "15300080288"}]}], "name": "Guaranteed Response"}], "audienceIds": ["and", "12327471432", "9270393351", "15311090578", "11795413345", "15505081042", "15342870521", "16751340171"], "changes": null, "id": "15282140321", "integrationSettings": null}], "id": "15276490379", "weightDistributions": null, "name": "[Zach/Kate/Jon] NPS on Experiment Dashboard", "groupId": null, "commitId": "18175030383", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["12035721691", "8766730119"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone", "name": "Everyone", "bucketingStrategy": null, "variations": [{"id": "8574083053", "actions": [{"viewId": "8766730119", "changes": [{"dependencies": [], "type": "custom_code", "id": "C89AA958-FEE9-4DFD-B9A7-C2634E33483D", "value": function($){// TODO(tyler@optimizely.com) Update this if we go back to release tags
// Retrieve the utils library
var utils = window.optimizely.get('utils');

// Wait for the footer element to appear in the DOM, then change the color
utils.waitForElement('.butterbar').then(function(butterBar) {
  // Set the atos-devel custom deployment very visibly 
  if (optlyConfig.env.VERSION_NUMBER == "atos-devel") {
    butterBar.querySelector('span').style.fontWeight = 'bold';
    butterBar.querySelector('span').style.fontSize = 'large';
    butterBar.querySelector('span').innerText = 'This is the Python 3 custom deployment.';
  } else {
    var versionMatch = optlyConfig.env.VERSION_NUMBER.match(/pipeline-([0-9a-f]+)/);
    var versionParsed = versionMatch[1] && versionMatch[1];
    butterBar.querySelector('a').innerText = 'Release Version' + versionParsed;
    butterBar.querySelector('a').href = butterBar.querySelector('a').href.replace('__VERSION__', versionParsed);
  }
});
}}, {"name": "New Optimizely Butter Bar", "config": {"dismissible": "page", "color": "butter", "text": "You are on a pre-production version of Optimizely.  This should ONLY be used for test purposes.", "link": "https://github.com/optimizely/optimizely/commit/__VERSION__", "cta": "Check latest releases", "more_styles": "", "test": " ", "id": "staged_release"}, "id": "92875538-94C7-4039-86A8-89BCA8F45DCC", "dependencies": [], "type": "widget", "widget_id": "8441744253"}]}], "name": "Variation #1"}], "audienceIds": ["8448671725"], "changes": null, "id": "8579532098", "integrationSettings": null}], "id": "8589210126", "weightDistributions": null, "name": "[Brian Lucas] [Indefinite Hotfix] Staged Release Butterbar (Internal only!)", "groupId": null, "commitId": "23363800769", "decisionMetadata": {"experimentPriorities": [[{"entityId": "8579532098", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": [{"value": "<style>#release_info { \n  rgba(255, 49, 0, 0.35);\n  border-color: #f4b852;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "EB58B9F4-4A02-4F92-8827-3FD6990D2A99"}]}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["15221300279"], "experiments": [{"weightDistributions": [{"entityId": "15197380910", "endOfRange": 10000}], "audienceName": "[DO NOT ARCHIVE] Not a BDD User", "name": "[Yeesheen] Try-Rollouts Click Tracking", "bucketingStrategy": null, "variations": [{"id": "15193760278", "actions": [], "name": "Original"}, {"id": "15197380910", "actions": [], "name": "Variation #1"}], "audienceIds": ["and", "9270393351"], "changes": null, "id": "15207220475", "integrationSettings": null}], "id": "15193530639", "weightDistributions": null, "name": "[Yeesheen] Try-Rollouts Click Tracking", "groupId": null, "commitId": "15274010663", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["8519660958"], "experiments": [{"weightDistributions": null, "audienceName": "[Zach] Design Preview Cookie", "name": "[Ron] Rebrand Switcher", "bucketingStrategy": null, "variations": [{"id": "14191390031", "actions": [{"viewId": "8519660958", "changes": [{"dependencies": [], "type": "custom_code", "id": "BAE7B765-DFE9-4730-8BC8-48D6417412DC", "value": function($){var utils = window["optimizely"].get('utils');
var defaultRebrandURL = 'https://s3-us-west-2.amazonaws.com/drau.optimizely.com/optly_full_v3.css';

// Claire says, default to rebrand on and stealth mode on :)
// But only for first runs
if(localStorage.getItem('optly_rebrand_first_run')!='complete'){
    localStorage.setItem('optly_rebrand',true);
    localStorage.setItem('optly_rebrand_stealth',true);
    localStorage.setItem('optly_rebrand_first_run','complete');
}

jQuery(document).on('change','#rebrand-switch', function(event) {
    if(event.target.checked){
        applyNewCSSWithURL(localStorage.getItem('optly_rebrand_url')|| defaultRebrandURL);
        localStorage.setItem('optly_rebrand', 'true'); 
    } else {
        applyDefaultCSS();
        localStorage.setItem('optly_rebrand', 'false'); 
    }
});

jQuery(document).on('change','#stealth-switch', function(event) {
    if(event.target.checked){
        jQuery('.hang-tab').addClass('stealth');
        localStorage.setItem('optly_rebrand_stealth', 'true'); 
    } else {
        jQuery('.hang-tab').removeClass('stealth');
        localStorage.setItem('optly_rebrand_stealth', 'false'); 
    }
});


jQuery(document).on('change','#baseFontPicker', function(event) {
  console.log($(this).val());
	$('html,body').css({
  	'font-family' : $(this).val()
  });
});


utils.waitForElement('#rebrand-switch').then(function(rebrandSwitch) {
    if(localStorage.getItem('optly_rebrand')){
        rebrandSwitch.checked = eval(localStorage.getItem('optly_rebrand'));
    }
});

utils.waitForElement('#stealth-switch').then(function(stealthSwitch) {
    if(localStorage.getItem('optly_rebrand_stealth')){
        var isStealth = eval(localStorage.getItem('optly_rebrand'));
        stealthSwitch.checked = isStealth;
    
        if(isStealth){
            jQuery('.hang-tab').addClass('stealth');
        }
    }
});


utils.waitForElement('#rebrand-url').then(function(rebrandUrlInput) {
    jQuery(rebrandUrlInput).val(localStorage.getItem('optly_rebrand_url')|| defaultRebrandURL);
    jQuery(rebrandUrlInput).on('change keydown keyup', function(event) {
        url = jQuery(event.target).val();
        applyNewCSSWithURL(url);	
        localStorage.setItem('optly_rebrand_url',url);        
    });
});

function applyDefaultCSS(url){
    // Remove any old stuff
    jQuery('link[title="rebrand"]').remove();

    // Enable default
    document.styleSheets[0].disabled = false;
}

function applyNewCSSWithURL(url){
    // Remove any old stuff
    jQuery('link[title="rebrand"]').remove();

    // Create new link element
  	var CSSElement = document.createElement('link');                
    CSSElement.setAttribute('title', 'rebrand');
    CSSElement.setAttribute('rel', 'stylesheet');
    CSSElement.setAttribute('type', 'text/css');
    CSSElement.setAttribute('href', url);
    document.getElementsByTagName('head')[0].appendChild(CSSElement);
  
    // Disable default CSS
    document.styleSheets[0].disabled = true;
}

// Kick things off
if(eval(localStorage.getItem('optly_rebrand'))){
    applyNewCSSWithURL(localStorage.getItem('optly_rebrand_url')|| defaultRebrandURL);
};
}}, {"value": "<style>.root-wrap {\n    height: 100% !important;\n}\n\n.optly-rebrand-wrapper {\n    position: fixed;\n    z-index: 9999;\n    background-color: white;\n    right: 120px;\n    background-color: #F7F7F7;\n    border: 1px solid #f0f0f0;\n    border-top: 0px;\n    transition: all .3s ease-in-out;\n    transform: translate(0px,-100%);\n}\n.optly-rebrand-wrapper:hover {\n    transform: translate(0px,0px);\n    box-shadow: 0 3px 6px rgba(0,0,0,0.06), 0 3px 6px rgba(0,0,0,0.13);\n}\n.optly-rebrand-wrapper:hover .hang-tab {\n    box-shadow: 0 3px 6px rgba(0,0,0,0.06), 0 3px 6px rgba(0,0,0,0.13);\n    opacity: 1;\n}\n\n\n.hang-tab {\n    transition: all .3s ease-in-out;\n    font-size:11px;\n    font-weight: bold;\n    color: #999;\n    background-color: #F7F7F7;\n    height: 24px;\n    padding: 0px 10px;\n    position: absolute;\n    right: 20px;\n    border-bottom-left-radius: 3px;\n    border-bottom-right-radius: 3px;\n    line-height: 2.2em;\n    margin-top: 1px;\n    border: 1px solid #f0f0f0;\n    border-top: none;\n}\n\n.hang-tab.stealth {\n    opacity: 0;\n}\n\n.butterbar {\n  display: none !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "B1925534-A53B-4FED-8E6C-FAE494224366"}, {"value": "<div class=\"optly-rebrand-wrapper\">\n    <div class=\"content push-double\">\n        <p>Design Previewer</p>\n        <p class=\"muted micro\">You are seeing this design preview because you are on the Optimizely Design Team.<br/><b>Customers do not see this.</b></p>\n        <p class=\"muted micro\">Note: While this is active, you will NOT see butter bars.</b></p>\n\n        <div class=\"lego-grid\">\n          <div class=\"lego-grid__cell width--1-2\">\n        <label class=\"lego-label push--top\">Design Preview</label>\n        <p class=\"muted micro\">Shows the new design.</p>\n        <div class=\"position--relative push--top\" data-oui-component=\"true\"> \n            <input type=\"checkbox\" id=\"rebrand-switch\" class=\"oui-switch\" value=\"on\"><label for=\"rebrand-switch\" data-on-label=\"On\" data-off-label=\"Off\"></label>\n        </div>\n          </div>\n          <div class=\"lego-grid__cell\">\n        <label class=\"lego-label push--top\">Stealth Mode</label>\n        <p class=\"muted micro\">Makes this menu invisible.</p>\n        <div class=\"position--relative push--top\" data-oui-component=\"true\"> \n            <input type=\"checkbox\" id=\"stealth-switch\" class=\"oui-switch\" value=\"on\"><label for=\"stealth-switch\" data-on-label=\"On\" data-off-label=\"Off\"></label>\n        </div>\n\n          </div>\n        </div>\n        <label class=\"lego-label push-double--top\">CSS URL</label>\n        <input  type=\"text\" id=\"rebrand-url\" class=\"oui-text-input width--1\" value=\"https://optimizely.github.io/rebrand2018/dist/css/optly_rebrand.css\" placeholder=\"URL\">\n        </p>\n    </div>\n    <div class=\"hang-tab\">Design Previewer</div>\n</div>", "selector": ".root-nav", "dependencies": [], "operator": "before", "type": "append", "id": "D205CCD7-C25A-43AA-A1C6-5181CD5C3527"}]}], "name": "Original"}], "audienceIds": ["and", "15235570488"], "changes": null, "id": "14193160078", "integrationSettings": null}], "id": "14195210136", "weightDistributions": null, "name": "[Ron] Rebrand Switcher", "groupId": null, "commitId": "15239330634", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": null, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["19036780362"], "experiments": [{"weightDistributions": null, "audienceName": "[ODS] User is ODS Team Member", "name": "[ODS - Dan B] [Indefinite Hotfix] ODS-001 | Enforce Safe Experiment Publishing For ODS", "bucketingStrategy": null, "variations": [{"id": "19046840443", "actions": [{"viewId": "19036780362", "changes": [{"dependencies": [], "type": "custom_code", "id": "F396105E-AF65-48EB-9C14-E1A0EE82BF49", "value": function($){var utils = window.optimizely.get("utils");
var btnPublish = document.querySelector('[data-test-section="campaign-overview-sidebar-publish"]');

btnPublish.classList.add("optVisited");

btnPublish.addEventListener("click", function (e) {
    if (btnPublish.getAttribute("disabled") !== null) return;

    e.stopPropagation();

    doTheClick(btnPublish, true);
});

utils.observeSelector('[data-test-section="campaign-overview-sidebar-play"]:not(.optVisited)', function (btnPlay) {
    btnPlay.classList.add("optVisited");

    if (btnPlay)
        btnPlay.addEventListener("click", function (e) {
            if (btnPlay.getAttribute("disabled") !== null) return;

            e.stopPropagation();

            doTheClick(btnPlay, false);
        });
});

function doTheClick(btn, doRename) {
    var xpId = getExperimentId();
    if (!xpId)
        return showDialog(
          "Experiment ID not found. Please ask the OM if you need to publish this test."
        );

    var originalCopy = btn.innerText;
    var originalInnerHtml = "";
 
    if (doRename) 
        btn.innerText = "Checking audiences...";
    else 
        //in the play button case we have a svg element inside the button and the click event is still triggered even if the button is disabled
        //if we remove the inner children then the click will not fire
        if (btn.children.length) {
            originalInnerHtml = btn.innerHTML;
            btn.innerHTML = "";
        }
    btn.classList.add('optClicked');
    btn.setAttribute("disabled", "");

    checkAudiences(xpId)
      .then(function (hasCookieAudience) {
          if (!hasCookieAudience)
              showDialog('In order to publish this experiment, the Optimizely QA cookie must be added as an Audience and the Audience match must be set to "all". Please go to the Audiences pane to update the Audience settings.');
          else {
              //click the button
              var reactprop = Object.keys(btn).find(function (key) {
                  return key.indexOf("__reactEventHandlers") === 0;
              });

              btn[reactprop].onClick();
          }

          if (doRename)
              btn.innerText = originalCopy;
          else
              if (originalInnerHtml != "")
                  btn.innerHTML = originalInnerHtml;

          btn.classList.remove('optClicked');
          btn.removeAttribute("disabled");
      })
      .catch(function (e) {
          console.warn({ "ods error": e });
          showDialog(
            "Something went wrong while fetching the audiences. Please report this error to the ODS team without closing this window, so we can try to fix it."
          );

          if (doRename)
              btn.innerText = originalCopy;
          else
              if (originalInnerHtml != "")
                  btn.innerHTML = originalInnerHtml;

          btn.classList.remove('optClicked');
          btn.removeAttribute("disabled");
      });
}

function checkAudiences(id) {
    return fetch("https://app.optimizely.com/api/v1/layer_experiments/" + id, {
        credentials: "include",
    })
      .then(function (res) {
          return res.json();
      })
      .then(function (res) {
          var cookie_audiences = [
              '[QA] Optimizely QA Cookie',
              'Optimizely QA Cookie',
              'Cookie - Test Cookie Set',
              '(Optimizely Test Cookie or Test Parameter)', //the engine wraps this in () if there is 'OR' in the name ONLY when there are more than 1 audiences
              'Optimizely Test Cookie',
              'Has Test Cookie'
          ];

          var audienceName = res.audience_name.toLowerCase().trim().replace(/ +(?= )/g, '');  //replace all multiple white spaces with a single one

          return (res.audience_match_type === null || res.audience_match_type === "all_audiences")
              && cookie_audiences.find(function (b) {
                  var a = b.toLocaleLowerCase();
                  return (audienceName === a.replace('(', '').replace(')', '') ||
              audienceName.startsWith(a + ' and') ||
              audienceName.endsWith('and ' + a) ||
              audienceName.indexOf('and ' + a + ' and') != -1);
              });
          
          //return (res.audience_match_type === null || res.audience_match_type === "all_audiences")
          //    && (new RegExp('(^|and\\s*)' + cookie_audiences.join('|') + '\\s*(and|$)').test(res.audience_name));
      });
}

function getExperimentId() {
    var match = location.href.match(/(experiments|multivariate)\/(\d+)/);
    return (match && match[match.length-1]) || null;
}

function showDialog(text) {
    !!window.optlyApp && window.optlyApp.getUtilities().ui.showDialog({
        template: '<div style="width: 600px; padding: 20px"><h2>Experiment Not Published</h2><p>' + text + '</p></div>',
        ready: function () {
          
        },
    });
}
}}, {"value": "<style>[data-test-section=\"campaign-overview-sidebar-publish\"].optVisited:after {\n        content: \"\ud83c\udf6a\";\n        margin-left: 5px;\n    }\n    [data-test-section=\"campaign-overview-sidebar-publish\"].optVisited.optClicked:after,\n    [data-test-section=\"campaign-overview-sidebar-play\"].optVisited.optClicked:after {\n        content: \"\";\n        vertical-align: sub;\n        background-size: 16px 16px;\n        width: 16px;\n        height: 16px;\n        display: inline-block;\n        background-image: url(//cdn.optimizely.com/img/5935064/1beff9c3024c4ec8a723b1ee42d1f707.gif);\n    }\n\n    [data-test-section=\"campaign-overview-sidebar-publish\"].optVisited {\n        position: relative;\n    }\n\n        [data-test-section=\"campaign-overview-sidebar-publish\"].optVisited:before {\n            content: \"ODS Team - QA Cookie Audience Check\";\n            position: absolute;\n            top: -15px;\n            left: 50%;\n            transform: translateX(-50%);\n            padding: 5px 10px;\n            border-radius: 5px;\n            font-size: 11px;\n            font-weight: 500;\n            background: #262626;\n            color: #fff;\n            line-height: normal;\n            white-space: nowrap;\n            transition: 0.3s all ease;\n            opacity: 0;\n            pointer-events: none;\n        }\n\n        [data-test-section=\"campaign-overview-sidebar-publish\"].optVisited:hover:before {\n            opacity: 1;\n            top: -32px;\n        }</style>", "selector": "head", "dependencies": [], "type": "append", "id": "4279E94F-5CEA-471E-9A45-E7A1EC766F2E"}, {"value": "<img src='//cdn.optimizely.com/img/5935064/1beff9c3024c4ec8a723b1ee42d1f707.gif' />", "selector": "'body'", "dependencies": [], "operator": "before", "type": "append", "id": "27BE3FF8-7BE8-4627-A8F0-FEDFA368DD6F"}]}], "name": "Variation #1 (Safe Publishing Check)"}], "audienceIds": ["and", "19583380104"], "changes": null, "id": "19050880222", "integrationSettings": null}], "id": "19036670419", "weightDistributions": null, "name": "[ODS - Dan B] [Indefinite Hotfix] ODS-001 | Enforce Safe Experiment Publishing For ODS", "groupId": null, "commitId": "19589211852", "decisionMetadata": {"experimentPriorities": [[{"entityId": "19050880222", "endOfRange": null}]], "offerConsistency": null}, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10023894788", "8519660958", "9985865588"], "experiments": [{"weightDistributions": [{"entityId": "10451850126", "endOfRange": 10000}], "audienceName": "[DO NOT ARCHIVE][Byron] Show MGMT Link for Specific Users in a given Account", "name": "[Byron][Hotfix] Phased Rollout of Program Management for Strategic Accounts", "bucketingStrategy": null, "variations": [{"id": "10451070040", "actions": [{"viewId": "8519660958", "changes": []}, {"viewId": "10023894788", "changes": []}, {"viewId": "9985865588", "changes": []}], "name": "Original"}, {"id": "10451850126", "actions": [{"viewId": "8519660958", "changes": [{"dependencies": [], "type": "custom_code", "id": "D39214D5-AC8F-4DE2-8251-20853116C3D5", "value": function($){var mySelector = "a[data-track-id='2.0-SidebarMenu.ProgramManagement']";
var waitForEl = function(selector, callback) {
  if (jQuery(selector).length) {
    callback();
  } else {
    setTimeout(function() {
      waitForEl(selector, callback);
    }, 100);
  }
};

waitForEl(mySelector, function() {
	$("a[data-track-id='2.0-SidebarMenu.ProgramManagement']").hide();
});
}}]}, {"viewId": "10023894788", "changes": []}, {"viewId": "9985865588", "changes": []}], "name": "Hide MGMT Global Nav Link"}], "audienceIds": ["and", "10432572908"], "changes": null, "id": "10435163295", "integrationSettings": null}], "id": "10420816921", "weightDistributions": null, "name": "[Byron][Hotfix] Phased Rollout of Program Management for Strategic Accounts", "groupId": null, "commitId": "10560030833", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["20081145161"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "Everyone", "bucketingStrategy": null, "variations": [{"id": "20042769036", "actions": [{"viewId": "20081145161", "changes": [{"selector": "[data-test-section=\"developer-docs\"] a.link--reverse", "dependencies": [], "attributes": {"href": "https://docs.developers.optimizely.com/full-stack/v4.0/docs"}, "type": "attribute", "id": "2D7C8A93-842B-4298-870C-24C510176AD3", "css": {}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "20068481698", "integrationSettings": null}], "id": "20077812533", "weightDistributions": null, "name": "[Danny] Flags-first project rollout modifications", "groupId": null, "commitId": "20195841532", "decisionMetadata": {"experimentPriorities": [[{"entityId": "20068481698", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["22900330491"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "Everyone", "bucketingStrategy": null, "variations": [{"id": "22927700121", "actions": [{"viewId": "22900330491", "changes": [{"name": "Login cards - Opti ID", "config": {"url": "https://www.optimizely.com/", "slot": "bottom-left", "image": "//cdn.optimizely.com/img/5935064/57a9370cc154422882a6651dee583f59.svg", "alt": "Welcome to Optimizely"}, "widget_id": "22900210350", "dependencies": [], "type": "widget", "id": "b14a461d06bc457d88677c31d9212f6a"}, {"selector": "#bottom-left", "dependencies": [], "attributes": {}, "type": "attribute", "id": "563e6c91df054fc6a5861c8d97e04022", "css": {}}]}], "name": "Banner"}], "audienceIds": null, "changes": null, "id": "22909580923", "integrationSettings": null}], "id": "22901520532", "weightDistributions": null, "name": "[23|01|13] [Michiel] Opti ID Login Promo - Bottom left \u2199\ufe0f[Promo]", "groupId": null, "commitId": "23079962242", "decisionMetadata": {"experimentPriorities": [[{"entityId": "22909580923", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["9668421158"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[Bryce][Hotfix] PayGo Deprecation Butter Bar in X", "bucketingStrategy": null, "variations": [{"id": "9667172678", "actions": [{"viewId": "9668421158", "changes": [{"name": "New Optimizely Butter Bar", "config": {"dismissible": "no", "color": "butter", "text": "This PayGo account is being deprecated on March 31, 2018. If you would like to continue running experiments, please review our annual plans at", "link": "https://www.optimizely.com/plans", "cta": "optimizely.com/plans.", "test": " ", "id": "my_promo"}, "id": "3DF362C2-2D6D-4512-BEA1-C905ABF88886", "dependencies": [], "type": "widget", "widget_id": "8441744253"}, {"selector": ".cta", "dependencies": [], "attributes": {}, "type": "attribute", "id": "FCB2089E-75E1-4F81-9E83-2DE5C7BC67B1", "css": {}}]}], "name": "Show Butter Bar"}], "audienceIds": null, "changes": null, "id": "9704291252", "integrationSettings": null}], "id": "9663852311", "weightDistributions": null, "name": "[Bryce][Hotfix] PayGo Deprecation Butter Bar in X", "groupId": null, "commitId": "10164853740", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["9667330007"], "experiments": [{"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] Custom Attribute Engie Account ID", "name": "[DO NOT ARCHIVE] Custom Attribute Engie Account ID", "bucketingStrategy": "impression", "variations": [{"id": "10160306543", "actions": [{"viewId": "9667330007", "changes": [{"name": "BlueKai Audience Filtering V2", "config": {"filter_word": "PersoOnSite"}, "id": "72C5C87C-4628-4D94-B749-FB596268B5DE", "dependencies": [], "type": "widget", "widget_id": "10162050749"}]}], "name": "Variation #1"}], "audienceIds": ["or", "10172532809"], "changes": null, "id": "10161888521", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] Custom Attribute NYT Account ID", "name": "[DO NOT ARCHIVE] Custom Attribute NYT Account ID", "bucketingStrategy": null, "variations": [{"id": "9667340018", "actions": [{"viewId": "9667330007", "changes": [{"name": "BlueKai Audience Filtering V2", "config": {"filter_word": "Optimizely"}, "id": "993EA0C1-19BA-431E-820E-6E34E562F142", "dependencies": [], "type": "widget", "widget_id": "10162050749"}]}], "name": "Variation #1"}], "audienceIds": ["or", "9668200026"], "changes": null, "id": "9661590013", "integrationSettings": null}], "id": "9662970009", "weightDistributions": null, "name": "[Danny] [Indefinite Hotfix] BlueKai Audience Filtering", "groupId": null, "commitId": "10169173676", "decisionMetadata": {"experimentPriorities": [[{"entityId": "9661590013", "endOfRange": null}], [{"entityId": "10161888521", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10755871418"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[Whelan][Hotfix] Warn about Pages with no Conditions", "bucketingStrategy": null, "variations": [{"id": "10763163046", "actions": [{"viewId": "10755871418", "changes": [{"selector": "[data-test-section=\"condition-builder-empty-state\"] p", "dependencies": [], "attributes": {"html": "When the trigger fires, this page will activate <span class=\"weight--bold\">unconditionally on every page where the snippet is installed.</span>"}, "type": "attribute", "id": "E8F91214-5E93-4651-B23F-9AC1F12047E4", "css": {}}, {"selector": "[data-test-section=\"condition-builder-empty-state\"] > h3", "dependencies": [], "attributes": {"html": "Warning: There are no conditions."}, "type": "attribute", "id": "EF68F05C-4A2C-43E8-9F12-8AF415A2C5C3", "css": {"color": "#E8464E", "font-weight": "400"}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "10774231030", "integrationSettings": null}], "id": "10768840368", "weightDistributions": null, "name": "[Whelan][Hotfix] Warn about Pages with no Conditions", "groupId": null, "commitId": "10764551238", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10431330599"], "experiments": [{"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Monthly Metal Accounts", "name": "[DO NOT ARCHIVE] List: Monthly Metal Accounts", "bucketingStrategy": null, "variations": [{"id": "10394355219", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type is being sunset on April 30, 2018. If you would like to continue running experiments, please review our annual plans at ", "link_text": "optimizely.com/plans", "link": "https:://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "3DC07DC8-9C62-48C9-ABE7-9AA4C2EC2505"}, {"selector": ".transition-cta > a", "dependencies": [], "attributes": {}, "type": "attribute", "id": "874E9198-E878-42CE-934B-98E13A16A17C", "css": {}}]}], "name": "Variation #1"}], "audienceIds": ["and", "10406924346"], "changes": null, "id": "10418791368", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts Spring (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts Spring (no AE)", "bucketingStrategy": null, "variations": [{"id": "10467160571", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "01FEA27F-4F27-41FF-8CA6-CB2A33B9A724"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10467240299"], "changes": null, "id": "10442843605", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts Spring End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts Spring End", "bucketingStrategy": null, "variations": [{"id": "10472300050", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "31C060C0-2AD9-4D84-8D29-2C5F22ECED80"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10449435361"], "changes": null, "id": "10443092922", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Metal Account Exclusions,[DO NOT ARCHIVE] Custom JS: Account ID is Apple,[DO NOT ARCHIVE] List: Classic UI Deprecation Exclusions,[DO NOT ARCHIVE][Zach] Has @optimizely.com email", "name": "[DO NOT ARCHIVE] List: Metal Account Exclusions or [DO NOT ARCHIVE] Custom JS: Account ID is Apple or [DO NOT ARCHIVE] List: Classic UI Deprecation Exclusions or [DO NOT ARCHIVE][Zach] Has @optimizely.com email", "bucketingStrategy": null, "variations": [{"id": "10496500579", "actions": [], "name": "Variation #1"}], "audienceIds": ["or", "10477725966", "11098391167", "12389132055", "11384846930"], "changes": null, "id": "10446327377", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts Spring (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts Spring (with AE)", "bucketingStrategy": null, "variations": [{"id": "10457970846", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "D44AED67-4804-4ED0-915D-56A31CB334B8"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10452681941"], "changes": null, "id": "10450632184", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts July End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts July End", "bucketingStrategy": null, "variations": [{"id": "10892210280", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "id": "5A5AE060-872A-4CDE-9814-D672547CCCA0", "dependencies": [], "type": "widget", "widget_id": "10338103195"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10875560328"], "changes": null, "id": "10869071618", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts August (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts August (with AE)", "bucketingStrategy": null, "variations": [{"id": "10874610689", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "1E9A30D3-588B-49C5-B764-C07C22A2628A"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10900530385"], "changes": null, "id": "10869120621", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts August (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts August (no AE)", "bucketingStrategy": null, "variations": [{"id": "10892220308", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "F2832731-CF1C-426B-BE84-D315CBE891E3"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10882660436"], "changes": null, "id": "10874021004", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts June (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts June (no AE)", "bucketingStrategy": null, "variations": [{"id": "10882780195", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "6A4B5662-AE1E-4DF6-91C0-AEA663736DEC"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10880310984"], "changes": null, "id": "10874450280", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts August End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts August End", "bucketingStrategy": null, "variations": [{"id": "10872790437", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "id": "4B3EC91C-88CA-49E3-9CAC-83E4E942558B", "dependencies": [], "type": "widget", "widget_id": "10338103195"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10908170726"], "changes": null, "id": "10876730364", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts June End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts June End", "bucketingStrategy": null, "variations": [{"id": "10870110643", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "id": "85A19517-A11A-4459-B182-380519D5E286", "dependencies": [], "type": "widget", "widget_id": "10338103195"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10870900394"], "changes": null, "id": "10890290596", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts July (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts July (no AE)", "bucketingStrategy": null, "variations": [{"id": "10888270514", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "7DA9416F-86FB-4541-BF33-B329CA53AF7E"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10870060616"], "changes": null, "id": "10898600312", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts July (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts July (with AE)", "bucketingStrategy": null, "variations": [{"id": "10874770476", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "id": "1D9E7E27-3613-40BC-B857-6F61A2D140F6", "dependencies": [], "type": "widget", "widget_id": "10338103195"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10898470429"], "changes": null, "id": "10904240198", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts June (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts June (with AE)", "bucketingStrategy": null, "variations": [{"id": "10896660113", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "496F3E25-989B-496B-8F86-53A09728ED7D"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10894230713"], "changes": null, "id": "10906230437", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts December (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts December (no AE)", "bucketingStrategy": null, "variations": [{"id": "11077480335", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "7772569D-45DF-49E6-BBDC-B8A0CD76C30D"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11091010617"], "changes": null, "id": "11075950063", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts December End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts December End", "bucketingStrategy": null, "variations": [{"id": "11089030606", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "60695EBF-5BB7-4896-892E-97EE273D3FBF"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11081060782"], "changes": null, "id": "11076040419", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts September (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts September (no AE)", "bucketingStrategy": null, "variations": [{"id": "11089030632", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "4C76DFD6-B1BB-4CAC-A043-3CB48765751E"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11100680545"], "changes": null, "id": "11076040443", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts October (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts October (with AE)", "bucketingStrategy": null, "variations": [{"id": "11096820931", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "4A3FF25A-BDBF-4B0E-8F57-B8EF6AAD5BC7"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11087090469"], "changes": null, "id": "11077320750", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts September (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts September (with AE)", "bucketingStrategy": null, "variations": [{"id": "11087170384", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "FEE4F032-DD3B-4EC9-997C-283CB22F1206"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11104621000"], "changes": null, "id": "11077450582", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts November (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts November (no AE)", "bucketingStrategy": null, "variations": [{"id": "11087040972", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "0D3CE4AD-8B47-416A-A998-B49CB4A891A8"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11094760724"], "changes": null, "id": "11081160344", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts November End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts November End", "bucketingStrategy": null, "variations": [{"id": "11102650195", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "1E8E291D-EFF0-410D-AB1A-480C40EB3623"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11096780979"], "changes": null, "id": "11086920399", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts January End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts January End", "bucketingStrategy": null, "variations": [{"id": "11082921061", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "id": "E9258237-08A6-4676-B59A-9F0098477012", "dependencies": [], "type": "widget", "widget_id": "10338103195"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11110440597"], "changes": null, "id": "11089070549", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts October End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts October End", "bucketingStrategy": null, "variations": [{"id": "11092880827", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "1EEDAA0E-109C-425B-A655-56AC32216835"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11102640599"], "changes": null, "id": "11091001190", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts January (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts January (with AE)", "bucketingStrategy": null, "variations": [{"id": "11077461202", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "EF3103DA-5CC8-4349-B680-26D2C0D5DBA8"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11100670587"], "changes": null, "id": "11091070723", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts December (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts December (with AE)", "bucketingStrategy": null, "variations": [{"id": "11102640637", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "698D02E9-9BB5-4A19-9924-BC8251233D50"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11104601094"], "changes": null, "id": "11100701096", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts September End", "name": "[DO NOT ARCHIVE] List: Platinum and Tiered Enterprise Accounts September End", "bucketingStrategy": null, "variations": [{"id": "11106540999", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "BB347F22-5D22-4946-B3EA-7BE1176BE1B4"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11091150545"], "changes": null, "id": "11104910956", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts November (with AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts November (with AE)", "bucketingStrategy": null, "variations": [{"id": "11106460333", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please reach out to sales@optimizely.com.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "11A06FBC-2CEE-4FDC-B22B-BCEAF08396E3"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11088860606"], "changes": null, "id": "11108481186", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts October (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts October (no AE)", "bucketingStrategy": null, "variations": [{"id": "11091140612", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "633288C3-C109-4929-8067-3DFA01CBE28A"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11110281001"], "changes": null, "id": "11114130349", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] List: Annual Metal Accounts January (no AE)", "name": "[DO NOT ARCHIVE] List: Annual Metal Accounts January (no AE)", "bucketingStrategy": null, "variations": [{"id": "11096901290", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "Your plan type has been sunset, which will impact your account at the end of your current contract term. If you would like to continue running experiments, please review our plans at", "link_text": "optimizely.com/plans", "link": "https://www.optimizely.com/plans"}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "B322283B-6F1E-480E-9282-71672DC27D90"}]}], "name": "Variation #1"}], "audienceIds": ["and", "11094890961"], "changes": null, "id": "11114170055", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] Internet Explorer (Any Version)", "name": "[DO NOT ARCHIVE] Internet Explorer (Any Version)", "bucketingStrategy": null, "variations": [{"id": "11191910353", "actions": [{"viewId": "10431330599", "changes": [{"name": "[Becca] Classic Butter Bar", "config": {"text": "We notice that you're using Internet Explorer. The Optimizely app won't be compatible with IE on September 1, 2018.", "link_text": "", "link": ""}, "widget_id": "10338103195", "dependencies": [], "type": "widget", "id": "2FDDDB7B-F914-460E-9DB5-DD3D02FCEDBB"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10795786687"], "changes": null, "id": "11214281037", "integrationSettings": null}], "id": "10415603614", "weightDistributions": null, "name": "[Bryce] Account Deprecation Butter Bars in Classic", "groupId": null, "commitId": "13307880309", "decisionMetadata": {"experimentPriorities": [[{"entityId": "11214281037", "endOfRange": null}], [{"entityId": "10446327377", "endOfRange": null}], [{"entityId": "10418791368", "endOfRange": null}], [{"entityId": "10442843605", "endOfRange": null}], [{"entityId": "10450632184", "endOfRange": null}], [{"entityId": "10443092922", "endOfRange": null}], [{"entityId": "10874450280", "endOfRange": null}], [{"entityId": "10906230437", "endOfRange": null}], [{"entityId": "10890290596", "endOfRange": null}], [{"entityId": "10869071618", "endOfRange": null}], [{"entityId": "10904240198", "endOfRange": null}], [{"entityId": "10898600312", "endOfRange": null}], [{"entityId": "10876730364", "endOfRange": null}], [{"entityId": "10869120621", "endOfRange": null}], [{"entityId": "10874021004", "endOfRange": null}], [{"entityId": "11104910956", "endOfRange": null}], [{"entityId": "11091001190", "endOfRange": null}], [{"entityId": "11086920399", "endOfRange": null}], [{"entityId": "11076040419", "endOfRange": null}], [{"entityId": "11089070549", "endOfRange": null}], [{"entityId": "11076040443", "endOfRange": null}], [{"entityId": "11114130349", "endOfRange": null}], [{"entityId": "11081160344", "endOfRange": null}], [{"entityId": "11075950063", "endOfRange": null}], [{"entityId": "11114170055", "endOfRange": null}], [{"entityId": "11077450582", "endOfRange": null}], [{"entityId": "11077320750", "endOfRange": null}], [{"entityId": "11108481186", "endOfRange": null}], [{"entityId": "11100701096", "endOfRange": null}], [{"entityId": "11091070723", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10312230186", "14352480433", "14362290741"], "experiments": [{"weightDistributions": null, "audienceName": "[Whelan] Action Network AMP project", "name": "[Whelan] [DO NOT ARCHIVE] Action Network AMP Demo", "bucketingStrategy": null, "variations": [{"id": "14360550161", "actions": [{"viewId": "10312230186", "changes": [{"selector": "[data-test-section=\"dropdown-block-link-immediate\"]", "dependencies": [], "attributes": {"html": "Immediately<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>\n<div class=\"micro muted\">Check conditions as soon as the page is loaded.</div>"}, "type": "attribute", "id": "738FEF80-827C-46DA-B723-5B79D3067C8C", "css": {}}, {"selector": "[data-test-section=\"condition-card-url-match\"] [data-test-section='condition-card-header-title']", "dependencies": [], "attributes": {"html": "URL Match<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block'>"}, "type": "attribute", "id": "44DB0D8C-1BED-46B2-B8EA-609AA960E665", "css": {}}, {"selector": "[data-test-section=\"url\"]", "dependencies": [], "attributes": {"html": "<span data-test-section=\"block-link-text-undefined\">URL Match</span><img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>\n<div class=\"lego-dropdown--descriptive__content flex\">\n  <div data-test-section=\"block-link-description-undefined\">Match the visitors URL.</div>\n</div>"}, "type": "attribute", "id": "D065BFF0-09B6-455C-8593-44635863746C", "css": {}}]}, {"viewId": "14352480433", "changes": [{"selector": ".lego-dropdown-group.is-active [data-test-section=\"layers-create-new-experiment\"]  .lego-dropdown--descriptive__header", "dependencies": [], "attributes": {"html": "A/B Test<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 13px; display:inline-block; padding-top: 1px'>"}, "type": "attribute", "id": "9B56958D-D2CF-4451-9E67-B75F2A70A3A1", "css": {}}]}, {"viewId": "14362290741", "changes": [{"selector": "[data-test-section=\"change-editor-typography-link\"]", "dependencies": [], "attributes": {"html": "<span class=\"lego-disclose__symbol\"></span> Typography<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>"}, "type": "attribute", "id": "B8B983CE-FE1B-409B-B610-0A11864745B6", "css": {}}, {"selector": "[data-test-section=\"change-editor-layout-link\"]", "dependencies": [], "attributes": {"html": "<span class=\"lego-disclose__symbol\"></span> Layout<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>"}, "type": "attribute", "id": "CA71102B-0A8A-4109-867B-680B6E6FED05", "css": {}}, {"selector": "[data-test-section=\"change-editor-background-link\"]", "dependencies": [], "attributes": {"html": "<span class=\"lego-disclose__symbol\"></span> Background<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>"}, "type": "attribute", "id": "7168BBE5-D79A-4035-9C1C-9056A35B49A1", "css": {}}, {"selector": "[data-test-section=\"change-editor-border-link\"]", "dependencies": [], "attributes": {"html": "<span class=\"lego-disclose__symbol\"></span> Border<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>"}, "type": "attribute", "id": "016F2E4A-BD65-4A43-B3E9-10FB47D8029A", "css": {}}, {"selector": "[data-test-section=\"change-editor-dimensions-link\"]", "dependencies": [], "attributes": {"html": "<span class=\"lego-disclose__symbol\"></span> Dimensions<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>"}, "type": "attribute", "id": "C89822E1-7B9D-41D8-AC84-D99E992DC983", "css": {}}, {"selector": "[data-test-section=\"change-editor-element-code-link\"]", "dependencies": [], "attributes": {"html": "<span class=\"lego-disclose__symbol\"></span> Styles<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>"}, "type": "attribute", "id": "48497221-722C-4061-8454-1B46D092FCC8", "css": {}}, {"selector": "[data-test-section=\"change-editor-track-clicks-link\"]", "dependencies": [], "attributes": {"html": "<span class=\"lego-disclose__symbol\"></span> Track Clicks<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>"}, "type": "attribute", "id": "16FF0CF7-3650-40C0-8F63-8EF914EC9EBC", "css": {}}, {"selector": "[data-test-section=\"element-selector-section\"] .lego-label", "dependencies": [], "attributes": {"html": "Selector<img src='https://cdn-images-1.medium.com/max/1200/0*PBJsXuaR-GlZkTSX.png' style='height: 14px; display:inline-block; padding-top: 2px'>"}, "type": "attribute", "id": "14C6085E-F08F-4043-85C0-13C6C3F040F3", "css": {}}]}], "name": "Variation #1"}], "audienceIds": ["and", "14360720012"], "changes": null, "id": "14372150372", "integrationSettings": null}], "id": "14360660128", "weightDistributions": null, "name": "[Whelan] [DO NOT ARCHIVE] Action Network AMP Demo", "groupId": null, "commitId": "14356750029", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10665880103"], "experiments": [{"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] Custom JS: Account ID is Apple,[DO NOT ARCHIVE] List: Classic UI Deprecation Exclusions,[DO NOT ARCHIVE][Zach] Has @optimizely.com email", "name": "Exclusions", "bucketingStrategy": null, "variations": [{"id": "11072021761", "actions": [], "name": "Variation #1"}], "audienceIds": ["or", "11098391167", "12389132055", "11384846930"], "changes": null, "id": "11037564594", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] Internet Explorer (Any Version)", "name": "[DO NOT ARCHIVE] Internet Explorer (Any Version)", "bucketingStrategy": null, "variations": [{"id": "11183890523", "actions": [{"viewId": "10665880103", "changes": [{"name": "New Optimizely Butter Bar", "config": {"dismissible": "no", "color": "butter", "text": "We notice that you're using Internet Explorer. The Optimizely app won't be compatible with IE on September 1, 2018.", "link": "", "cta": "", "more_styles": "", "test": " ", "id": "ie_butterbar"}, "id": "07A5683E-E9E9-4AA7-BBA9-842D0D8D570C", "dependencies": [], "type": "widget", "widget_id": "8441744253"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10795786687"], "changes": null, "id": "11181890911", "integrationSettings": null}], "id": "11044013409", "weightDistributions": null, "name": "All Butter Bars in X", "groupId": null, "commitId": "13319420247", "decisionMetadata": {"experimentPriorities": [[{"entityId": "11181890911", "endOfRange": null}], [{"entityId": "11037564594", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10842901991"], "experiments": [{"weightDistributions": [{"entityId": "10851725131", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[Lucas][Hotfix] Use Optimizely to redirect to the correct UI when a customer is on the old Rollouts UI", "bucketingStrategy": null, "variations": [{"id": "10849342392", "actions": [{"viewId": "10842901991", "changes": []}], "name": "Original"}, {"id": "10851725131", "actions": [{"viewId": "10842901991", "changes": [{"dest": "https://app.optimizely.com/v2/projects/10516631504/rollouts", "allowAdditionalRedirect": false, "dependencies": [], "preserveParameters": true, "type": "redirect", "id": "BFED8FE4-7D57-4217-AEDE-B74DDDCFB88F"}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "10847313467", "integrationSettings": null}], "id": "10847444130", "weightDistributions": null, "name": "[Lucas][Hotfix] Use Optimizely to redirect to the correct UI when a customer is on the old Rollouts UI", "groupId": null, "commitId": "10850803369", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 1, "viewIds": ["11950472651", "8519711501"], "experiments": [{"weightDistributions": [{"entityId": "17416761497", "endOfRange": 5000}, {"entityId": "17472990269", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[Giannis] Data Lab Dataset Verification - Iteration 2", "bucketingStrategy": null, "variations": [{"id": "17416761497", "actions": [{"viewId": "11950472651", "changes": []}], "name": "Original"}, {"id": "17472990269", "actions": [{"viewId": "11950472651", "changes": []}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "17455110576", "integrationSettings": null}], "id": "17422720959", "weightDistributions": null, "name": "[Giannis] Data Lab Dataset Verification - Iteration 2", "groupId": null, "commitId": "17448410215", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"dependencies": [], "type": "custom_code", "id": "2c6ba9100a564559835000f1efc09e8b", "value": function($){window['optimizely'] = window['optimizely'] || [];
window['optimizely'].push({
  type: "event",
  eventName: "test_value_metric",
  tags: {
    revenue: Math.random() * 1000, 
    value: Math.random() 
  }
});
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["11724201503"], "experiments": [{"weightDistributions": [{"entityId": "14361240411", "endOfRange": 2000}, {"entityId": "14375100409", "endOfRange": 10000}], "audienceName": "[Jon] Rollouts Plans,[Zach] Customer has not seen rollouts invite collaborators dialog", "name": "[Rollouts] Suggest inviting collaborators after sign-up", "bucketingStrategy": null, "variations": [{"id": "14361240411", "actions": [{"viewId": "11724201503", "changes": []}], "name": "No Popup"}, {"id": "14375100409", "actions": [{"viewId": "11724201503", "changes": [{"dependencies": [], "type": "custom_code", "id": "39B6E97C-FCC2-4169-A12A-506ADFB51362", "value": function($){var utils = window["optimizely"].get('utils');

var strVar="";
strVar += "<div class=\"is-active widget-modal-container\">";
strVar += "    <div class=\"page-overlay page-overlay--faint\" style=\"z-index: 2999;\"><\/div>";
strVar += "    <div class=\"dialog--wrapper dialog--shown widget-modal\" data-test-section=\"dialog-frame\" style=\"z-index: 3000;\">";
strVar += "        <div class=\"dialog dialog--shadow\">";
strVar += "            <div class=\"lego-dialog__close\" data-test-section=\"standard-dialog-close\">";
strVar += "                <svg class=\"lego-icon\">";
strVar += "                    <use xlink:href=\"#close-16\"><\/use>";
strVar += "                <\/svg>";
strVar += "            <\/div>";
strVar += "            <div>";
strVar += "                <div class=\"lego-dialog--narrow\" data-test-section=\"confirm-dialog\">";
strVar += "                    <div class=\"lego-dialog__header\">";
strVar += "                        <div class=\"lego-dialog__title\" data-test-section=\"confirm-dialog-title\">";
strVar += "                            You've created your first rollout.<div>Now share with your team.<\/div>";
strVar += "                        <\/div>";
strVar += "                    <\/div>";
strVar += "                    <div class=\"lego-dialog__body\" data-test-section=\"confirm-dialog-body\">";
strVar += "                        <p class=\"flex-justified--center flex--1 push-double--right flush--bottom optly-modal_image\">";
strVar += "                            <img class=\"width--1-1\" src=\"\">";
strVar += "                        <\/p>";
strVar += "                        <p class=\"flush--bottom flex flex--1\">You can add your team as collaborators to Rollouts, and they'll be able to make their own features and roll them out, as well as manage the ones you've already created.<\/p>";
strVar += "                    <\/div>";
strVar += "                    <div class=\"lego-dialog__footer lego-button-row--right\">";
strVar += "                        <button type=\"button\" class=\"lego-button lego-button--plain widget-cancel\" data-test-section=\"confirm-cancel-button\">No Thanks<\/button>";
strVar += "                        <a href=\"#\" class=\"oui-button add-collabs oui-button--highlight\">Add Collaborators<\/a>";
strVar += "                    <\/div>";
strVar += "                <\/div>";
strVar += "            <\/div>";
strVar += "        <\/div>";
strVar += "    <\/div>";
strVar += "<\/div>";

function setCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + (value || "")  + expires + "; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {   
    document.cookie = name+'=; Max-Age=-99999999;';  
}

$(document).on('click','.widget-modal .add-collabs',function(e){
	e.preventDefault();
  	
  $('.widget-modal').hide();
  setCookie("rollouts-first-rollout-complete","true",365);
  window.location.href = 'https://app.optimizely.com/v2/projects/'+ window.location.href.split('/')[5] +'/settings/collaborators';
});

$(document).on('click','.widget-modal .lego-button--plain',function(e){  	
  $('.widget-modal').hide();
  setCookie("rollouts-first-rollout-complete","true",365);
});


$(document).on('click','.lego-dialog__close, .widget-cancel',function(){
  $('.widget-modal-container').remove();
});

utils.waitForElement('#dialog-manager').then(function(dialogManager) {
  $('#dialog-manager').on('click', '[data-test-section="feature-dialog-save"]', function(){
    if(getCookie("rollouts-first-rollout-complete")!="true"){
      setTimeout(function(){
            $('body').append(strVar);
      },3000);
    }
  });
});
}}]}], "name": "Popup"}], "audienceIds": ["and", "14365410244", "16714840290"], "changes": null, "id": "14343640263", "integrationSettings": null}], "id": "14369370154", "weightDistributions": null, "name": "[Rollouts] Suggest inviting collaborators after sign-up", "groupId": null, "commitId": "16722340548", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["19574624591"], "experiments": [{"weightDistributions": [{"entityId": "14922930453", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[Yeesheen] Hotfix the \"Learn more\" link in Rollouts collaborator dialog", "bucketingStrategy": null, "variations": [{"id": "14872800946", "actions": [], "name": "Original"}, {"id": "14922930453", "actions": [{"viewId": "19574624591", "changes": [{"selector": "[href=\"https://help.optimizely.com/hc/en-us/articles/200040775?utm_source=product&utm_medium=invite_collaborators_modal&utm_content=collaborators_help&utm_campaign=edu\"]", "dependencies": [], "attributes": {"href": "https://docs.developers.optimizely.com/full-stack/docs/invite-collaborators", "html": "Learn more about roles and permissions"}, "type": "attribute", "id": "F5E1D100-A20E-43C8-93E9-E49E51DCD264", "css": {}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "14913071302", "integrationSettings": null}], "id": "14886850887", "weightDistributions": null, "name": "[Yeesheen] Hotfix the \"Learn more\" link in Rollouts collaborator dialog", "groupId": null, "commitId": "19634182866", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["9479362274"], "experiments": [{"weightDistributions": [{"entityId": "9417246481", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[Shane][Hotfix] Editor Load Fail Messages", "bucketingStrategy": null, "variations": [{"id": "9502140295", "actions": [{"viewId": "9479362274", "changes": [{"dependencies": [], "type": "custom_code", "id": "15B93E8F-4059-4BDB-B868-A73EFAE424F4", "value": function($){// Show guide by ID: original
console.log('[Optly Experiment] Acivating pendo campaign G5zlEQlf0ZPU16RtAFOrZKd5WJs (Original)');
pendo.showGuideById('9OZmpeg-LdN7SqQzlfOMYVpDYWQ');
}}]}], "name": "Original Pendo Guide"}, {"id": "9417246481", "actions": [{"viewId": "9479362274", "changes": [{"dependencies": [], "type": "custom_code", "id": "F1165311-253B-463B-957A-03E140AAE3EF", "value": function($){// Show guide by ID: all options
console.log('[Optly Experiment] Acivating pendo campaign pKhW_fhD63DurBZvCEBL5HX3wqI (All Options)');
pendo.showGuideById('pKhW_fhD63DurBZvCEBL5HX3wqI');
}}, {"selector": "div:nth-of-type(1) > .lego-media__body > p", "dependencies": [], "attributes": {"html": "The Pop-out editor helps you work around header issues if your page isn't loading. Click the icon to open the editor in a new window."}, "type": "attribute", "id": "0A3F22F9-3044-485E-B042-D579A014925A", "css": {}}]}], "name": "All Options"}, {"id": "9413524206", "actions": [{"viewId": "9479362274", "changes": [{"dependencies": [], "type": "custom_code", "id": "42DF8062-3E73-430A-B683-E6035FC45EE8", "value": function($){// Show guide by ID: pop-out editor
console.log('[Optly Experiment] Acivating pendo campaign 4s-oRwKS3fX4TP4HnKnpIqSYHXM (Pop-out Editor)');
pendo.showGuideById('4s-oRwKS3fX4TP4HnKnpIqSYHXM');
}}]}], "name": "Pop-out Editor"}, {"id": "9450494599", "actions": [{"viewId": "9479362274", "changes": [{"dependencies": [], "type": "custom_code", "id": "F3EDBDAF-7E26-45DA-B9D4-3FE75B9AD9B2", "value": function($){// Show guide by ID: desktop app
console.log('[Optly Experiment] Acivating pendo campaign fKnp88SVPu7JZ2x9C5DkZatE2i8 (Desktop App)');
pendo.showGuideById('fKnp88SVPu7JZ2x9C5DkZatE2i8');
}}]}], "name": "Desktop App"}], "audienceIds": null, "changes": null, "id": "9411755471", "integrationSettings": null}], "id": "9494360173", "weightDistributions": null, "name": "[Shane][Hotfix] Editor Load Fail Messages", "groupId": null, "commitId": "11212269028", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10665880103"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone", "name": "Everyone", "bucketingStrategy": null, "variations": [{"id": "8443261958", "actions": [{"viewId": "10665880103", "changes": [{"dependencies": [], "type": "custom_code", "id": "854C1BAB-81E6-4AB9-9BE7-4D38901DE485", "value": function($){var userInfo = window.optlyApp.getUtilities().userInfo.getUser();
window.optlyFn.setCookie("optlyAccountID", userInfo.accountId, 1000, '.optimizely.com');
}}]}], "name": "Variation #1"}], "audienceIds": ["8448671725"], "changes": null, "id": "8447222876", "integrationSettings": null}], "id": "8445021487", "weightDistributions": null, "name": "[Takeshi][Hotfix] Set Optimizely Account ID Cookie APP", "groupId": null, "commitId": "11927581312", "decisionMetadata": {"experimentPriorities": [[{"entityId": "8447222876", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10729041176"], "experiments": [{"weightDistributions": [{"entityId": "10729081875", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[Jamie][Hotfix] Add mobile disclaimer to New Projects dialog", "bucketingStrategy": null, "variations": [{"id": "10734471188", "actions": [], "name": "Original"}, {"id": "10729081875", "actions": [{"viewId": "10729041176", "changes": [{"selector": "div:nth-of-type(1) > div:nth-of-type(4) > div:nth-of-type(1)", "dependencies": [], "attributes": {"html": "Mobile (Legacy - 1.x SDK versions only)"}, "type": "attribute", "id": "48795EB5-1926-400E-9EFB-2928355C3D33", "css": {}}, {"selector": "div:nth-of-type(1) > div:nth-of-type(5) > div:nth-of-type(1)", "dependencies": [], "attributes": {"html": "Over-the-Top (Legacy - 1.x SDK versions only)"}, "type": "attribute", "id": "B88335FF-67BD-480C-8E50-21364FD82198", "css": {}}, {"selector": "div:nth-of-type(4) > p.muted", "dependencies": [], "attributes": {"html": "Run experiments in your native iOS or Android mobile app. <b>Note:</b> If you're using SDK version 2.0+, please use a Full Stack project."}, "type": "attribute", "id": "D4ABFEE9-7E1C-4E58-82D0-79FC1BEA243D", "css": {}}, {"selector": "div:nth-of-type(5) > p.muted", "dependencies": [], "attributes": {"html": "Run experiments in a native Apple TV or Android TV app. <b>Note:</b> If you're using SDK version 2.0+, please use a Full Stack project."}, "type": "attribute", "id": "8F6B9FD9-D906-4C0D-A8A2-6143E5BBC8A8", "css": {}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "10731060906", "integrationSettings": null}], "id": "10733771608", "weightDistributions": null, "name": "[Jamie][Hotfix] Add mobile disclaimer to New Projects dialog", "groupId": null, "commitId": "10801439860", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["8519660958"], "experiments": [{"weightDistributions": [{"entityId": "10458810393", "endOfRange": 10000}], "audienceName": "[DO NOT ARCHIVE][Byron] On Desktop App and has Program Management", "name": "[Byron][Hotfix] Program Management Info Link for Desktop App", "bucketingStrategy": null, "variations": [{"id": "10458810393", "actions": [{"viewId": "8519660958", "changes": [{"dependencies": [], "type": "custom_code", "id": "01F84CDD-B036-4A80-8F9A-773754F4BB93", "value": function($){console.log("MGMT Dialog Experiment On.");
}}, {"name": "Plug Dialog", "config": {"body": "Body", "thank_you_title": "Thank You", "subtitle": "Subtitle", "title": "Awesome new feature", "header_content": "Header Content", "opener": "", "cta": "Contact Us", "marketoId": "0", "done_button_label": "Done", "footer_lead": "Ready to Supercharge your experimentation program?", "header_lead": "Headline Lead in", "thank_you_body": "Thank you body"}, "id": "1CE0F9EB-547A-42B9-B6AA-34ABB03EE517", "dependencies": [], "type": "widget", "widget_id": "9186595649"}, {"value": "<li> <a class=\"root-nav__link root-nav__link--secondary truncate\" data-test-section=\"program-management-nav-link\" data-dir=\"left-center\" data-track-id=\"2.0-SidebarMenu.ProgramManagement\"> <svg class=\"root-nav__icon root-nav__icon--small\" baseProfile=\"tiny\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"> <circle fill=\"none\" stroke=\"#fff\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" cx=\"2.5\" cy=\"3.5\" r=\"2\"></circle> <circle fill=\"none\" stroke=\"#fff\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" cx=\"21.5\" cy=\"3.5\" r=\"2\"></circle> <circle fill=\"none\" stroke=\"#fff\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" cx=\"11.5\" cy=\"21.5\" r=\"2\"></circle> <g fill=\"none\" stroke=\"#fff\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\"> <path d=\"M15.5 3.5h-8M13.2 5.7l2.3-2.2v-.1l-2.3-2.2\"></path> </g> <g fill=\"none\" stroke=\"#fff\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\"> <path d=\"M15.8 15.6l3.8-7.2M14.9 12.5l.9 3.1 3.1-.9\"></path> </g> <g fill=\"none\" stroke=\"#fff\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\"> <path d=\"M4.9 9.2l4 7M8 10l-3.1-.8-.9 3.1\"></path> </g> </svg> <div class=\"root-nav__link__text\"> Program Management <span class=\"oui-badge oui-badge--live\">NEW</span> </div> </a><!--vue-if--> </li>", "selector": "body:not(.root-nav--close) li:nth-of-type(2) > .root-nav__link.truncate", "dependencies": [], "operator": "before", "type": "append", "id": "2EF7EC5D-B2AE-4520-9A61-3226E9F44813"}, {"selector": "body:not(.root-nav--close) li:nth-of-type(2) > .root-nav__link.truncate", "dependencies": [], "attributes": {}, "type": "attribute", "id": "5EB96377-8A2D-4FED-8ED4-A9AF8202391D", "css": {}}]}], "name": "Show MGMT Global Nav in Desktop"}, {"id": "10406088104", "actions": [{"viewId": "8519660958", "changes": [{"dependencies": [], "type": "custom_code", "id": "43443B88-36F4-4831-8E7B-E00CDD75B6FB", "value": function($){console.log("Desktop MGMT Exp is ON.");
}}]}], "name": "Audience Testing - No-Op"}], "audienceIds": ["and", "10447522417"], "changes": null, "id": "10452671430", "integrationSettings": null}], "id": "10456563569", "weightDistributions": null, "name": "[Byron][Hotfix] Program Management Info Link for Desktop App", "groupId": null, "commitId": "10434704307", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["22882510647"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "Everyone", "bucketingStrategy": null, "variations": [{"id": "22905940730", "actions": [{"viewId": "22882510647", "changes": [{"name": "Login cards - Opti ID", "config": {"url": "https://www.optimizely.com/", "slot": "top", "image": "//cdn.optimizely.com/img/5935064/a4762c57713143adb557007b3389df34.svg", "alt": "Welcome to Optimizely"}, "id": "22F055DE-D7A6-482E-9224-DE0CBB0E889B", "dependencies": [], "type": "widget", "widget_id": "22900210350"}, {"selector": "#top", "dependencies": [], "attributes": {}, "type": "attribute", "id": "DD8B3DCE-3693-4848-94A9-940615955B57", "css": {}}]}], "name": "Banner"}], "audienceIds": null, "changes": null, "id": "22917280768", "integrationSettings": null}], "id": "22900000778", "weightDistributions": null, "name": "[23|01|13] [Michiel] Opti ID Login Promo - Top \u2191 [Promo]", "groupId": null, "commitId": "23144570636", "decisionMetadata": {"experimentPriorities": [[{"entityId": "22917280768", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["8519660958"], "experiments": [{"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] Custom JS: Account ID is Apple,[DO NOT ARCHIVE] List: Classic UI Deprecation Exclusions,[DO NOT ARCHIVE][Zach] Has @optimizely.com email", "name": "[DO NOT ARCHIVE] Custom JS: Account ID is Apple or [DO NOT ARCHIVE] List: Classic UI Deprecation Exclusions or [DO NOT ARCHIVE][Zach] Has @optimizely.com email", "bucketingStrategy": null, "variations": [{"id": "12787670509", "actions": [], "name": "Variation #1"}], "audienceIds": ["or", "11098391167", "12389132055", "11384846930"], "changes": null, "id": "12818920018", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE] Custom JS: Has Enterprise Plan", "name": "All Enterprise Customers", "bucketingStrategy": null, "variations": [{"id": "12801350266", "actions": [{"viewId": "8519660958", "changes": [{"selector": "li:nth-of-type(4) > a.truncate", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "1E9CBE57-99CE-43A5-8E67-DC6B60CB7854", "css": {}}]}], "name": "Variation #1"}], "audienceIds": ["and", "12327471432"], "changes": null, "id": "12818960010", "integrationSettings": null}], "id": "12795810163", "weightDistributions": null, "name": "[HOTFIX][Becca] Remove Classic UI Access", "groupId": null, "commitId": "13020640355", "decisionMetadata": {"experimentPriorities": [[{"entityId": "12818920018", "endOfRange": null}, {"entityId": "12818960010", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["8519660958"], "experiments": [{"weightDistributions": null, "audienceName": "[Zach] Edge Account", "name": "[Zach/Whelan] Edge Prototype", "bucketingStrategy": null, "variations": [{"id": "15735130911", "actions": [{"viewId": "8519660958", "changes": [{"dependencies": [], "type": "custom_code", "id": "EB074546-A0D0-466D-B1F8-6C432F2D04E0", "value": function($){var utils = window.optimizely.get('utils');

/* Zachs Polling Fns ------------------------------------------------------ */

var pollingTime = 100
var waitForEl = function(selector, callback) {
    if (jQuery(selector).length) {
        callback();
    } else {
        setTimeout(function() {
            waitForEl(selector, callback);
        }, pollingTime);
    }
};

var waitForElHide = function(selector, callback) {
    if (!jQuery(selector).length) {
        callback();
    } else {
        setTimeout(function() {
            waitForElHide(selector, callback);
        }, pollingTime);
    }
};


/* CSS ------------------------------------------------------ */

// Wait for the head to apply the CSS
utils.waitForElement('head').then(function() {
	applyNewCSS();
});

function applyNewCSS(){
  // URL for edge protoytpe is stored as a secret gist: https://gist.githubusercontent.com/zleach/38413fdc9832ac148e1cd3f57b891113/raw/fefa6ac34659ab0ff51b5a1fe073d36ac8003edf/edge-proto.css
  var cssTitle = 'edge-prototype';
  var url = 'https://flip.optimizely.com/css/edge-proto.css'; // Flip acts as a proxy to load the gist.

  // Remove any existing css to allow re-activating the experiment without reloading the page.
  jQuery('link[title="' + cssTitle + '"]').remove();

  // Create new link element
  var CSSElement = document.createElement('link');             
  CSSElement.setAttribute('title',  cssTitle);
  CSSElement.setAttribute('rel', 'stylesheet');
  CSSElement.setAttribute('type', 'text/css');
  CSSElement.setAttribute('href', url);

  // Append it
  document.getElementsByTagName('head')[0].appendChild(CSSElement);
}

/* Settings ------------------------------------------------------ */
var settingsEl = '[data-test-section="project-settings-implementation"] > div:nth-of-type(2)'

function waitForSettingsToAppear(){
	waitForEl(settingsEl, function(){
  		var newSettingsHtml = '<iframe id="newSettingsIframe" src="https://flip.optimizely.com/doc/edge-quickstart"></iframe>';
  		jQuery('[data-test-section="project-settings-implementation"] > div:nth-of-type(2)').html(newSettingsHtml);
  		waitForSettingsToGoAway()
	})
}

function waitForSettingsToGoAway(){
	waitForElHide(settingsEl, function(){
		waitForSettingsToAppear()
	})
}
waitForSettingsToAppear()

/* Integrations ------------------------------------------------------ */

var integrationsEl = '[data-test-section="integrations-tab"]'

function waitForIntegrationsToAppear(){
	waitForEl(integrationsEl, function(){
		var rows = jQuery('[data-test-section="integrations-table-row"]');
		
		jQuery.each(rows,function(i,o){
			var text = jQuery(this).find('td:eq(1)').text()
			if(text!="Jira"){
				jQuery(this).hide()			
			}
		})

  		waitForIntegrationsToGoAway()
	})
}

function waitForIntegrationsToGoAway(){
	waitForElHide(integrationsEl, function(){
		waitForIntegrationsToAppear()
	})
}

waitForIntegrationsToAppear()


/* Page Conditions ------------------------------------------------------ */

var pageConditionEl = '[data-test-section="add-condition"] button'

function waitForPageConditionButtonToAppear(){
	waitForEl(pageConditionEl, function(){
		var button = jQuery('[data-test-section="add-condition"] button');
		button.html('Add URL Match Condition')

  		waitForPageConditionButtonToGoAway()
	})
}

function waitForPageConditionButtonToGoAway(){
	waitForElHide(pageConditionEl, function(){
		waitForPageConditionButtonToAppear()
	})
}

waitForPageConditionButtonToAppear()



/* Project Creation ------------------------------------------------------ */

var projectCreationEl = '[data-test-section="platform-card-web"]'

function waitForProjectCreationDialogToAppear(){
	waitForEl(projectCreationEl, function(){
  		var projectCreationDialogHtml = '<iframe id="newProjectCreationIframe" src="https://flip.optimizely.com/doc/edge-project-creation"></iframe>';
		jQuery('#dialog-manager .reading-column').html(projectCreationDialogHtml)

  		waitForProjectCreationDialogToGoAway()
	})
}

function waitForProjectCreationDialogToGoAway(){
	waitForElHide(projectCreationEl, function(){
		waitForProjectCreationDialogToAppear()
	})
}

waitForProjectCreationDialogToAppear();
}}]}], "name": "Prototype"}], "audienceIds": ["and", "15709730710"], "changes": null, "id": "15737031291", "integrationSettings": null}], "id": "15743090868", "weightDistributions": null, "name": "[Zach/Whelan] Edge Prototype", "groupId": null, "commitId": "15761401072", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["10800265460"], "experiments": [{"weightDistributions": [{"entityId": "10820022344", "endOfRange": 5000}, {"entityId": "10835212289", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[Whelan] Recommended jQuery Settings", "bucketingStrategy": null, "variations": [{"id": "10820022344", "actions": [{"viewId": "10800265460", "changes": []}], "name": "Original"}, {"id": "10835212289", "actions": [{"viewId": "10800265460", "changes": [{"selector": "[name='jquery-1.11.3-trim'], [name='jquery-1.11.3-full']", "dependencies": [], "attributes": {}, "type": "attribute", "id": "EA090D6D-E3EF-48E0-A2A9-8AD0F02F330B", "css": {}}, {"selector": "div.push-double--bottom > div:nth-of-type(2) .flush--bottom, [data-test-section=\"jquery-inclusion-settings-section\"] [for=\"jquery-1.11.3-trim\"]", "dependencies": [], "attributes": {"html": " Include trimmed jQuery (1.11.3) in project code"}, "type": "attribute", "id": "78048632-6311-44FB-8E12-C04F84AD9692", "css": {}}, {"selector": "fieldset > div:nth-of-type(2) > div:nth-of-type(1) .flush--bottom, [data-test-section=\"jquery-inclusion-settings-section\"] [for=\"none\"]", "dependencies": [], "attributes": {"html": " Do not include jQuery in project code (recommended)"}, "type": "attribute", "id": "72C9D481-E441-48F4-AA55-5E27C8D67A69", "css": {}}]}], "name": "Variation #1"}], "audienceIds": null, "changes": null, "id": "10792908947", "integrationSettings": null}], "id": "10800448350", "weightDistributions": null, "name": "[Whelan] Recommended jQuery Settings", "groupId": null, "commitId": "10794075903", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["18793941975"], "experiments": [{"weightDistributions": [{"entityId": "18769270429", "endOfRange": 5000}, {"entityId": "18743681575", "endOfRange": 10000}], "audienceName": "[ODS - Dan B] Include Free Rollouts,[DO NOT ARCHIVE] Not a BDD User", "name": "[ODS - Dan B] EXLAB-001 | [FS Growth] Better understand new user intent", "bucketingStrategy": null, "variations": [{"id": "18769270429", "actions": [{"viewId": "18793941975", "changes": [{"dependencies": [], "type": "custom_code", "id": "69B891AE-E824-44CB-BE18-3E440914671F", "value": function($){var $ = window.optimizely.get('jquery');
var utils = window.optimizely.get('utils');

waitForCreateFeaturesCTA1();
waitForCreateFeaturesCTA2();

function waitForCreateFeaturesCTA1() {
    utils.waitForElement('[data-test-section="feature-empty-state-submit"]:not(.optFound)').then(function (el) {
        $(el).addClass('optFound');
        $(el).unbind('click', window.triggerCreateFeatureEvent);
        $(el).bind('click', window.triggerCreateFeatureEvent);

        waitForCreateFeaturesCTA1();
    });
}
function waitForCreateFeaturesCTA2() {
    utils.waitForElement('[data-test-section="create-new-feature-modal-create-button"]:not(.optFound)').then(function (el) {
        $(el).addClass('optFound');
        $(el).unbind('click', window.triggerCreateFeatureEvent);
        $(el).bind('click', window.triggerCreateFeatureEvent);

        waitForCreateFeaturesCTA2();
    });
}
window.triggerCreateFeatureEvent = function () {
    window['optimizely'] = window['optimizely'] || [];
    window['optimizely'].push({
        type: "event",
        eventName: "Feature_Flag_Create",
        tags: {
            revenue: 0, // Optional in cents as integer (500 == $5.00)
            value: 0.00 // Optional as float
        }
    });
}
}}]}], "name": "Original"}, {"id": "18743681575", "actions": [{"viewId": "18793941975", "changes": [{"dependencies": [], "type": "custom_code", "id": "1E8856A0-A8E8-4A42-A1FD-FC763DA56C9A", "value": function($){var $ = window.optimizely.get('jquery');
var utils = window.optimizely.get('utils');
var getCookie = function (name) {
    var match = document.cookie.match(name + '=([^;]*)');
    return match ? match[1] : null;
};
var setCookie = function (c_name, value, exdays, c_domain) {
    c_domain = (typeof c_domain === "undefined") ? "" : "domain=" + c_domain + ";";
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays === null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value + ";" + c_domain + "path=/";
};

var optNewUserIntentModalCookie = 'optNewUserIntentModalCookie';
var videoModalHTML = '<div class="optVideoOverlay"></div><div class="optVideoModal"> <div class="optClose"> <svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10 fa-2x"> <path fill="#B1C1FD" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path> </svg> </div><div id="optVideoWrap"></div></div>';
var newHTML = '<div class="optoptNewUserIntentContentWrap"> <div class="optNewUserIntentContent optMainLevel"> <h2>What would you like to do?</h2> <div class="optTiles"> <div class="optTile optTile1"> <div class="optImg"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="52px" height="63px" viewBox="0 0 52 63" version="1.1"> <title>Flag</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Step-1---Hover" transform="translate(-400.000000, -274.000000)"> <g id="Group-2" transform="translate(266.000000, 224.000000)"> <g id="Flag" transform="translate(135.000000, 51.000000)"> <line x1="5.5067062e-14" y1="3.812" x2="20.783" y2="60.5307" id="Path" stroke="#425ED3" stroke-linecap="round"/> <path d="M10.721,31.7287 C13.978,28.2027 18.368,26.7257 22.752,26.7517 C28.098,26.6817 33.56,27.5397 38.305,27.3427 C43.051,27.1447 46.719,26.1157 49.62,21.3105 L39.852,15.6232 L40.032,-5.5067062e-14 C37.253,4.2291 33.585,5.2578 29.14,5.5191 C24.755,5.4922 19.593,4.6979 14.548,4.8318 C10.463,4.8685 5.589,6.211 2.393,9.4482" id="Path" fill="#0D42FB" fill-rule="nonzero"/> <path d="M10.721,31.7287 C13.978,28.2027 18.368,26.7257 22.752,26.7517 C28.098,26.6817 33.56,27.5397 38.305,27.3427 C43.051,27.1447 46.719,26.1157 49.62,21.3105 L39.852,15.6232 L40.032,-5.5067062e-14 C37.253,4.2291 33.585,5.2578 29.14,5.5191 C24.755,5.4922 19.593,4.6979 14.548,4.8318 C10.463,4.8685 5.589,6.211 2.393,9.4482" id="Path" stroke="#425ED3" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round"/> </g> </g> </g> </g> </svg> </div><h1>Create A Feature Flag</h1> <p>Set up a feature flag to control the release of a new feature to end users. Turn it on and off, slowly roll it out, or show it to a subset of users, without deploying new code.</p><button class="optCTA optCTA1 oui-button oui-button--highlight oui-button--default" type="button">Start Flagging</button> </div><div class="optTile optTile2"> <div class="optImg"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="59px" height="31px" viewBox="0 0 59 31" version="1.1"> <title>Group</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Step-1---Hover" transform="translate(-742.000000, -296.000000)"> <g id="Group-2" transform="translate(266.000000, 224.000000)"> <g id="Group" transform="translate(477.000000, 73.000000)"> <rect id="Rectangle" stroke="#5A72D9" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round" transform="translate(28.500000, 14.500000) rotate(-180.000000) translate(-28.500000, -14.500000) " x="0" y="0" width="57" height="29" rx="14.5"/> <ellipse id="Oval" fill="#425ED3" fill-rule="nonzero" transform="translate(41.500000, 15.000000) rotate(-180.000000) translate(-41.500000, -15.000000) " cx="41.5" cy="15" rx="9.5" ry="9"/> </g> </g> </g> </g> </svg> </div><h1>Run An A/B Test</h1> <p>Set up an experiment to gather data on how a new feature performs with users. Compare when a flag is on versus off, or create more complex variations.</p><button class="optCTA optCTA2 oui-button oui-button--highlight oui-button--default" type="button">Get Testing</button> </div><div class="optTile optTile3"> <div class="optImg"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="79px" height="71px" viewBox="0 0 79 71" version="1.1"> <title>Book Icon</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Step-1---Hover" transform="translate(-1076.000000, -275.000000)"> <g id="Group-2" transform="translate(266.000000, 224.000000)"> <g id="Book-Icon" transform="translate(811.000000, 51.000000)"> <path d="M56.348,3.5217 L49.304,3.5217 C42.261,3.5217 38.739,8.8043 38.739,15.8478 C38.739,8.8043 35.217,3.5217 28.174,3.5217 L5.68434189e-14,3.5217 L5.68434189e-14,59.8691 L28.174,59.8691 C35.217,59.8691 38.739,63.3911 38.739,70.4351 C38.739,63.3911 42.261,59.8691 49.304,59.8691 L77.478,59.8691 L77.478,3.5217 L70.435,3.5217" id="Path" fill="#E5EBFF"/> <path d="M56.348,3.5217 L49.304,3.5217 C42.261,3.5217 38.739,8.8043 38.739,15.8478 C38.739,8.8043 35.217,3.5217 28.174,3.5217 L5.68434189e-14,3.5217 L5.68434189e-14,59.8691 L28.174,59.8691 C35.217,59.8691 38.739,63.3911 38.739,70.4351 C38.739,63.3911 42.261,59.8691 49.304,59.8691 L77.478,59.8691 L77.478,3.5217 L70.435,3.5217" id="Path" stroke="#425ED3" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/> <line x1="38.739" y1="15.8478" x2="38.739" y2="68.6741" id="Path" stroke="#425ED3" stroke-width="0.75" stroke-linecap="round" stroke-linejoin="round"/> <polygon id="Path" fill="#425ED3" points="70.435 29.9347 63.391 22.8913 56.348 29.9347 56.348 1.59872116e-14 70.435 1.59872116e-14"/> </g> </g> </g> </g> </svg> </div><h1>Learn About Optimizely</h1> <p>Get an overview of capabilities in Optimizely and learn how the platform works.</p><button class="optCTA optCTA3 oui-button oui-button--highlight oui-button--default" type="button">Watch Short Video</button> </div></div></div><div class="optNewUserIntentContent optSubLevel optSubItem1"> <div class="optBack"> <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-chevron-left fa-w-10"> <path fill="#0038FF" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z" class=""></path> </svg> Back </div><h2>Create A Feature Flag</h2> <div class="optTiles"> <div class="optTile optTileSetupFlag"> <div class="optImg"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="52px" height="63px" viewBox="0 0 52 63" version="1.1"> <title>Flag</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Step-1---Hover" transform="translate(-400.000000, -274.000000)"> <g id="Group-2" transform="translate(266.000000, 224.000000)"> <g id="Flag" transform="translate(135.000000, 51.000000)"> <line x1="5.5067062e-14" y1="3.812" x2="20.783" y2="60.5307" id="Path" stroke="#425ED3" stroke-linecap="round"/> <path d="M10.721,31.7287 C13.978,28.2027 18.368,26.7257 22.752,26.7517 C28.098,26.6817 33.56,27.5397 38.305,27.3427 C43.051,27.1447 46.719,26.1157 49.62,21.3105 L39.852,15.6232 L40.032,-5.5067062e-14 C37.253,4.2291 33.585,5.2578 29.14,5.5191 C24.755,5.4922 19.593,4.6979 14.548,4.8318 C10.463,4.8685 5.589,6.211 2.393,9.4482" id="Path" fill="#0D42FB" fill-rule="nonzero"/> <path d="M10.721,31.7287 C13.978,28.2027 18.368,26.7257 22.752,26.7517 C28.098,26.6817 33.56,27.5397 38.305,27.3427 C43.051,27.1447 46.719,26.1157 49.62,21.3105 L39.852,15.6232 L40.032,-5.5067062e-14 C37.253,4.2291 33.585,5.2578 29.14,5.5191 C24.755,5.4922 19.593,4.6979 14.548,4.8318 C10.463,4.8685 5.589,6.211 2.393,9.4482" id="Path" stroke="#425ED3" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round"/> </g> </g> </g> </g> </svg> </div><h1>Set up your first flag</h1> <button class="optCTA optCTA1SetupFlag oui-button oui-button--highlight oui-button--default" type="button">Make A Real Flag</button> </div><div class="optTile optTileTryADemo"> <div class="optImg"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="65px" height="66px" viewBox="0 0 65 66" version="1.1"> <title>Group 9</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Group-9" transform="translate(0.000000, 1.000000)"> <circle id="Oval" fill="#E5EBFF" cx="32.5" cy="32.5" r="20.5"/> <polygon id="Fill-1" fill="#425ED3" points="25.1943 41.846 25.1943 22.551 43.0253 32.199"/> <g id="Group-8" transform="translate(0.000000, 0.396900)" stroke="#4C61AB" stroke-linecap="round" stroke-linejoin="round"> <path d="M63.8969,31.8016 C63.8969,49.3086 49.7059,63.4996 32.1979,63.4996 C14.6939,63.4996 0.4999,49.3086 0.4999,31.8016 C0.4999,14.2946 14.6939,0.1026 32.1979,0.1026 C49.7059,0.1026 63.8969,14.2946 63.8969,31.8016 Z" id="Stroke-2" stroke-dasharray="7.505,2.814"/> <path d="M52.8716,31.8016 C52.8716,43.2176 43.6176,52.4746 32.1986,52.4746 C20.7796,52.4746 11.5256,43.2176 11.5256,31.8016 C11.5256,20.3856 20.7796,11.1286 32.1986,11.1286 C43.6176,11.1286 52.8716,20.3856 52.8716,31.8016 Z" id="Stroke-4"/> <polygon id="Stroke-6" points="25.1943 22.1542 25.1943 41.4492 43.0253 31.8012"/> </g> </g> </g> </svg> </div><h1>Try it in a demo app</h1> <button class="optCTA optCTA1TryADemo oui-button oui-button--highlight oui-button--default" type="button">Run Demo</button> </div></div></div><div class="optNewUserIntentContent optSubLevel optSubItem2"> <div class="optBack"> <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-chevron-left fa-w-10"> <path fill="#0038FF" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z" class=""></path> </svg> Back </div><h2>Run An A/B Test</h2> <div class="optTiles"> <div class="optTile optTileCreateFirstTest"> <div class="optImg"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="54px" height="68px" viewBox="0 0 54 68" version="1.1"> <title>Group 10</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Step-2" transform="translate(-399.000000, -277.000000)"> <g id="Group-10" transform="translate(399.000000, 277.000000)"> <g id="Group-3" transform="translate(17.000000, 0.000000)" fill="#4763D4"> <path d="M18.8862322,3.48333333 L2.11376784,3.48333333 C0.947551099,3.48333333 0,2.70666667 0,1.74333333 C0,0.78 0.947551099,0 2.11376784,0 L18.8862322,0 C20.0564983,0 21,0.78 21,1.74333333 C21,2.70666667 20.0564983,3.48333333 18.8862322,3.48333333" id="Fill-1"/> </g> <g id="Group-6" transform="translate(4.000000, 6.000000)" fill="#E5EBFF" stroke="#425ED3"> <path d="M32.100427,16.5471033 C30.8996528,16.0766944 30.0991366,14.9590029 30.0991366,13.698307 L30.0991366,2.24667288 C30.0991366,1.0047934 29.0753997,0 27.80535,0 L23.3755709,0 L18.9457917,0 C17.6795907,0 16.6481565,1.0047934 16.6481565,2.24667288 L16.6481565,13.698307 C16.6481565,14.9590029 15.8476404,16.0766944 14.6507148,16.5471033 C4.98294309,20.3555337 -1.48661274,30.2868063 0.295305375,41.4336155 C1.70005724,50.2170904 8.36204483,57.525363 17.1484791,59.8096686 C19.2652285,60.3628694 21.3511887,60.6074821 23.3755709,60.6074821 C25.4038017,60.6074821 27.4859133,60.3628694 29.6065113,59.8096686 C38.3929456,57.525363 45.0549332,50.2170904 46.4558364,41.4336155 C48.2339059,30.2868063 41.7681987,20.3555337 32.100427,16.5471033" id="Fill-4"/> </g> <g id="Group-9" transform="translate(0.000000, 30.000000)" fill="#425ED3"> <path d="M1.41677607,24.0991857 C1.02537607,24.0991857 0.637776074,23.9403622 0.356576074,23.6264966 C-0.164023926,23.0403622 -0.107023926,22.1479252 0.478176074,21.6336395 L20.2305761,4.21977392 L33.3633761,17.2168327 L51.5615761,0.377757117 C52.1391761,-0.155436161 53.0321761,-0.117621035 53.5679761,0.449605856 C54.0999761,1.02061426 54.0657761,1.91305123 53.4919761,2.442463 L33.2987761,21.1306983 L20.1165761,8.09204283 L2.35917607,23.7437235 C2.08937607,23.9819588 1.75117607,24.0991857 1.41677607,24.0991857" id="Fill-7"/> </g> </g> </g> </g> </svg> </div><h1>Create your first A/B test</h1> <button class="optCTA optCTA2CreateTest oui-button oui-button--highlight oui-button--default" type="button">Create Test</button> </div><div class="optTile optTileLearnMore"> <div class="optImg"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="53px" height="66px" viewBox="0 0 53 66" version="1.1"> <title>case-study</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Step-2" transform="translate(-743.000000, -278.000000)"> <g id="Group" transform="translate(743.000000, 278.000000)"> <polygon id="Rectangle" fill="#E5EBFF" points="17.6767578 0 52 0 52 65 0 65 0 16.8223267"/> <path d="M51.5629589,64.3025591 L1.03786301,64.3025591 L1.03786301,17.888853 L16.1582466,17.888853 C16.6879452,17.888853 17.1171507,17.4631816 17.1171507,16.9378444 L17.1171507,0.941579251 L51.5096986,0.941579251 L51.5096986,64.0825591 C51.5096986,64.6078963 50.9389041,65.0335677 51.4686027,65.0335677 C51.9983014,65.0335677 52.4275068,64.6078963 52.4275068,64.0825591 L52.4275068,0.990570605 C52.4275068,0.465233429 51.9983014,0.0395619597 51.4686027,0.0395619597 L17.1582466,0.0395619597 C16.9039452,0.0395619597 16.66,0.139608069 16.4801096,0.318017291 L0.401205479,16.2652911 C0.221315068,16.4437003 0.120438356,16.6852565 0.120438356,16.9378444 L0.120438356,64.2535677 C0.120438356,64.7789049 0.549643836,65.2045764 1.07934247,65.2045764 L51.5633425,65.2045764 C52.0930411,65.2045764 52.5222466,64.7789049 52.5222466,64.2535677 C52.5222466,63.7282305 52.0926575,64.3025591 51.5629589,64.3025591 Z M1.39413699,16.9868357 L16.199726,2.28668588 L16.199726,16.9868357 L1.39413699,16.9868357 Z" id="Shape" fill="#4763D4" fill-rule="nonzero"/> </g> </g> </g> </svg> </div><h1>View Real Examples</h1> <button class="optCTA optCTA2LearnMore oui-button oui-button--highlight oui-button--default" type="button">See Examples</button> </div><div class="optTile optAlignLeft optTileReadBlog"> <div class="optImg optFullWidth"> <img src="//cdn.optimizely.com/img/5935064/d7f7dce97f1f42369909b3af2319f838.png" alt="blog"/> </div><h1>How do experiments work in Optimizely?</h1> <div class="optReadBlog"> WATCH WALKTHROUGH VIDEO <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="long-arrow-alt-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-long-arrow-alt-right fa-w-14"> <path fill="currentColor" d="M340.485 366l99.03-99.029c4.686-4.686 4.686-12.284 0-16.971l-99.03-99.029c-7.56-7.56-20.485-2.206-20.485 8.485v71.03H12c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h308v71.03c0 10.689 12.926 16.043 20.485 8.484z" class=""></path> </svg> </div></div></div></div></div>';
var modalHTML = '<div class="optModalRoleCollector"> <script async defer src="https://apis.google.com/js/api.js" onload="this.onload=function(){handleClientLoad();};" onreadystatechange="if (this.readyState===\'complete\') this.onload()"> </script> <div class="optClose"> <svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10 fa-2x"> <path fill="#B1C1FD" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path> </svg> </div><div class="optLeft"> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="119px" height="134px" viewBox="0 0 119 134" version="1.1"> <title>professional</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="PopOver-1" transform="translate(-926.000000, -541.000000)"> <g id="Group-2" transform="translate(878.000000, 493.000000)"> <g id="professional" transform="translate(48.000000, 48.000000)"> <path d="M25.3030619,83.019555 C34.460813,80.2771877 39.0396886,77.3860526 39.0396886,74.3461497 C39.0396886,67.319798 34.7015538,55.1115511 26.0252841,37.7214093 C26.0252841,37.7171884 26.7475064,37.7124399 26.7475064,37.708219 C26.7480281,37.0476494 25.9170914,36.5606641 26.556162,36.6957326 C30.0733978,37.4401924 40.5343312,38.7127912 47.6251455,29.6943287 C48.0138047,29.1999568 48.7332156,29.153527 49.1787391,29.5956654 C50.8116297,31.2143773 55.0613187,34.4475802 63.1266503,34.6865882 C63.6770336,34.7029442 62.6734174,35.1619661 62.6843729,35.7185962 C62.6864597,35.8209528 62.6875031,35.9233095 62.6875031,36.0256661 C55.5192791,55.1804287 51.9351671,68.2799403 51.9351671,75.3242009 C51.9351671,78.571818 55.9997172,81.2991743 64.1288174,83.5062697 C64.5352141,83.4424288 64.3763215,84.7635031 64.8004557,84.7635031 C64.9724631,84.7635031 64.6311503,85.9852902 64.8004557,85.9960163 C66.7816686,86.121534 69.6566705,83.2298141 71,84.539783 L71,26.1065709 C71,19.9377379 66.0095108,14.8906068 59.9099081,14.8906068 C57.8408845,14.8906068 55.9069786,15.4820592 54.2448734,16.4897971 C52.3031422,13.2128024 48.7660821,11 44.7344596,11 L39.0396886,11 C28.0179381,11 19,20.1202914 19,31.2671385 L19,84.7635031 C19.7244719,84.1774577 24.8966652,82.9562417 25.3030619,83.019555 Z" id="Path" stroke="#425ED3" fill="#DBE5FA" stroke-linecap="round" stroke-linejoin="round"/> <path d="M60.0417337,43.0608206 L60.0417337,52.1269509 C60.0417337,52.3969429 60.0248626,52.6643604 60,52.9301689 C60.3596204,52.9720032 60.7259004,53 61.1019479,53 C64.9117043,53 68,50.7615447 68,48.0001609 C68,45.2387772 64.9117043,43 61.1019479,43 C60.7409956,43 60.3875909,43.0222043 60.0417337,43.0608206 Z" id="Path" stroke="#425ED3" fill="#B1C1FD" stroke-linecap="round" stroke-linejoin="round"/> <path d="M28.9582686,52.1269509 C28.9582686,50.8860821 28.9582686,45.5277554 28.9582686,43.0608206 C28.6124306,43.0218825 28.2590455,43 27.8981132,43 C24.0885683,43 21,45.2387772 21,48.0001609 C21,50.7615447 24.0881243,53 27.8981132,53 C28.2741398,53 28.6403996,52.972325 29,52.9301689 L29,52.9298471 C28.9751387,52.6643604 28.9582686,52.3969429 28.9582686,52.1269509 L28.9582686,52.1269509 Z" id="Path" stroke="#425ED3" fill="#B1C1FD" stroke-linecap="round" stroke-linejoin="round"/> <path d="M47.4201532,29.403739 C40.2976622,38.45169 29.7912938,37.1744754 26.2586054,36.4276251 C25.6167271,36.2921229 25.000524,36.780672 25,37.4433627 L25,37.4565954 L25,53.3018897 C25,64.135718 33.775131,73 44.5,73 C55.224869,73 64,64.135718 64,53.3018897 L64,35.755407 C64,35.6527217 63.998952,35.5500364 63.9968561,35.4473511 C63.9858525,34.8889336 63.5430875,34.4284377 62.9902862,34.4120292 C54.8895204,34.1722537 50.6211608,30.9286686 48.9810963,29.3047588 C48.5330915,28.8612007 47.81052,28.9083089 47.4201532,29.403739 L47.4201532,29.403739 Z" id="Path" stroke="#425ED3" fill="#B1C1FD" stroke-linecap="round" stroke-linejoin="round"/> <path d="M42.7538166,85.4397672 C42.9107505,85.6008731 43.0073663,85.796279 43.0457991,86 L46.9547347,86 C46.9931675,85.7957593 47.0897833,85.6003534 47.2467172,85.4397672 L55,77.5040017 C54.4550016,76.5373662 54.1518095,75.4376884 54.1518095,74.2922773 L54.1518095,71 C51.33981,72.4904896 48.1221309,73.3391539 44.7112202,73.3391539 C41.5303726,73.3391539 38.5208711,72.5970273 35.8481905,71.2889513 L35.8481905,74.2922773 C35.8481905,75.4376884 35.5449984,76.5373662 35,77.5040017 L42.7538166,85.4397672 Z" id="Path" stroke="#425ED3" fill="#B1C1FD" stroke-linecap="round" stroke-linejoin="round"/> <path d="M52.0189108,128.647309 C52.0189108,127.668044 52.8135105,126.874512 53.7940916,126.874512 L59,126.874512 C57.4092332,126.874512 56.1078867,125.574913 56.1078867,123.986282 L56.1078867,88.185486 L53.3197349,91.5563046 C52.8605283,92.1114123 52.0162987,92.1343679 51.5273142,91.6053461 L50.1648446,90.1309716 C48.9972375,91.6684739 47.1604112,92.6706938 45.0790927,92.6706938 C42.9977741,92.6706938 41.1609478,91.6684739 39.9933407,90.1309716 L38.6308711,91.6053461 C38.1418867,92.1343679 37.2976571,92.1114123 36.8384505,91.5563046 L28.9729054,82.0490415 C28.9598449,82.0333899 28.9514862,82.0161733 28.9399929,82 L27.0394315,82.9359617 L11.9404686,86.7309368 C8.68422907,87.549512 6.33961121,90.3871351 6.15310752,93.7349981 L4.00335206,130.751396 C3.93543755,131.972216 4.9081823,133 6.13273316,133 L56.3774551,133 C53.9701469,133 52.0189108,131.051384 52.0189108,128.647309 L52.0189108,128.647309 Z" id="Path" stroke="#425ED3" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round"/> <path d="M52.5964577,91.5797273 L55.4937594,88.2991724 L55.4937594,85.0130324 C55.4937594,83.4669421 56.8460507,82.2021437 58.4990924,82.2021437 L60.858952,82.2021437 C61.0989009,81.8213333 61.0304992,81.3267875 60.6705758,81.0196004 L56.2548644,77.2485617 C55.8460826,76.8997394 55.214181,76.920557 54.8330856,77.2952745 L46.3170707,85.668534 C45.8990601,86.0798093 45.8936314,86.7236328 46.3051275,87.1404933 L50.733325,91.6269478 C51.241995,92.1428189 52.1192743,92.1204781 52.5964577,91.5797273 L52.5964577,91.5797273 Z" id="Path" stroke="#425ED3" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round"/> <path d="M28.3311237,81.0196836 L32.7463236,77.2485669 C33.155058,76.8997373 33.7868865,76.9205554 34.1679377,77.2952806 L42.6829661,85.6687134 C43.1009282,86.0799972 43.1063563,86.723834 42.6949078,87.1407031 L38.2672233,91.6277582 C37.7591551,92.1426246 36.8819774,92.1202832 36.4048493,91.580029 L28.2328755,82.3271598 C27.8876496,81.9366941 27.9310743,81.3614046 28.3311237,81.0196836 L28.3311237,81.0196836 Z" id="Path" stroke="#425ED3" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round"/> <path d="M40,90.3168504 C41.1479199,91.9411811 42.953775,93 45,93 C47.046225,93 48.8520801,91.9411811 50,90.3168504 L47.1499743,87.0037008 C46.9096045,86.7237008 46.8202363,86.35 46.8798151,86 L43.1186441,86 C43.1782229,86.35 43.0893683,86.7237008 42.8484848,87.0037008 L40,90.3168504 Z" id="Path" stroke="#425ED3" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round"/> <path d="M111.095803,82 L58.9041968,82 C57.3067836,82 56,83.3009343 56,84.8911971 L56,124.108803 C56,125.699066 57.3067836,127 58.9041968,127 L111.095803,127 C112.693216,127 114,125.699066 114,124.108803 L114,84.8911971 C114,83.3009343 112.692692,82 111.095803,82 Z" id="Path" stroke="#425ED3" fill="#B1C1FD" stroke-linecap="round" stroke-linejoin="round"/> <path d="M116.222618,127 L53.7768587,127 C52.7953508,127 52,127.777276 52,128.736479 C52,131.090793 53.9530804,133 56.362664,133 L113.637336,133 C116.046397,133 118,131.091304 118,128.736479 C118,127.777787 117.203603,127 116.222618,127 Z" id="Path" stroke="#425ED3" fill="#B1C1FD" stroke-linecap="round" stroke-linejoin="round"/> <path d="M85.5660255,101 L83.4344594,101 C81.540973,101 80,102.570491 80,104.500247 C80,106.430004 81.540973,108 83.4344594,108 L85.5660255,108 C87.4595119,108 89,106.430004 89,104.500247 C89,102.570491 87.4595119,101 85.5660255,101 Z" id="Path" fill="#425ED3" fill-rule="nonzero"/> <path d="M83.918035,14.8931218 C81.7332731,14.4314519 80.0114009,12.5186624 79.5961116,10.0913148 C79.5752257,9.96956174 79.4251386,9.96956174 79.4042527,10.0913148 C78.9889634,12.5186624 77.2670912,14.4320029 75.0823293,14.8931218 C74.9725569,14.9162604 74.9725569,15.0831887 75.0823293,15.1063273 C77.2670912,15.5679971 78.9889634,17.4807867 79.4042527,19.9086852 C79.4251386,20.0304383 79.5752257,20.0304383 79.5961116,19.9086852 C80.0114009,17.4813376 81.7332731,15.5679971 83.918035,15.1063273 C84.0273217,15.0831887 84.0273217,14.9168113 83.918035,14.8931218 Z" id="Path" fill="#B1C1FD" fill-rule="nonzero"/> <path d="M1.64360502,53.8564901 L2.85665529,53.8564901 L2.85665529,52.6435099 C2.85665529,51.7355969 3.59229479,51 4.50026031,51 C5.40822583,51 6.14386533,51.7355969 6.14386533,52.6435099 L6.14386533,53.8564901 L7.35639498,53.8564901 C8.2643605,53.8564901 9,54.592087 9,55.5 C9,56.407913 8.2643605,57.1435099 7.35639498,57.1435099 L6.14386533,57.1435099 L6.14386533,58.3564901 C6.14386533,59.2644031 5.40822583,60 4.50026031,60 C3.59229479,60 2.85665529,59.2644031 2.85665529,58.3564901 L2.85665529,57.1435099 L1.64360502,57.1435099 C0.735639498,57.1435099 0,56.407913 0,55.5 C0,54.592087 0.735639498,53.8564901 1.64360502,53.8564901 L1.64360502,53.8564901 Z" id="Path" fill="#B1C1FD" fill-rule="nonzero"/> <circle id="Oval" fill="#DCE5FA" fill-rule="nonzero" cx="5" cy="80" r="2"/> <circle id="Oval" fill="#425ED3" fill-rule="nonzero" cx="73" cy="2" r="2"/> <rect id="Rectangle" stroke="#425ED3" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round" x="85" y="53" width="22" height="8" rx="4"/> <rect id="Rectangle-Copy" stroke="#425ED3" fill="#DCE5FA" stroke-linecap="round" stroke-linejoin="round" x="85" y="65" width="22" height="8" rx="4"/> <circle id="Oval" fill="#425ED3" cx="89.5" cy="56.5" r="5.5"/> <circle id="Oval-Copy-4" fill="#425ED3" cx="102.5" cy="69.5" r="5.5"/> <line x1="18.5" y1="132.636364" x2="18.5" y2="109.363636" id="Line-2" stroke="#425ED3" stroke-linecap="square"/> </g> </g> </g> </g> </svg> </div><div class="optRight"> <h1> What is your role? </h1> <ul> <li><span class="optRadio"></span> Product</li><li><span class="optRadio"></span> Engineering</li><li><span class="optRadio"></span> Analyst / Data Science</li><li><span class="optRadio"></span> Growth / Marketing</li></ul> <div class="optError">Please select a role</div><button class="optCTA optCTAModalSubmit oui-button oui-button--highlight oui-button--default" type="button">Submit</button> </div></div>';

utils.waitForElement('head').then(function (element) {
    $('head').append('<style class="optFeaturesStyles"> .optHide{display: none !important;}.optNewUserIntentContent{margin-top: 40px; padding-left: 20px; padding-right: 20px; width: 100%; transition: 1s; position: absolute; left: 0; opacity: 1;}.optBack{cursor: pointer; color: #0038FF; font-size: 14px; letter-spacing: 0.22px; line-height: 28px;}.optBack svg{width: 8px; vertical-align: middle;}.optNewUserIntentContent.optSlideOut{position: absolute; left: -100%; transition: 1s; opacity: 0;}.optNewUserIntentContent.optSubLevel{position: absolute; left: 100%; transition: 1s; opacity: 0;}.optNewUserIntentContent.optSubLevel.optSlideIn{transition: 1s; left: 0; opacity: 1;}.optNewUserIntentContent h2{color: #080637; font-size: 20px; letter-spacing: 0.32px; line-height: 28px; font-weight: 400;}.optNewUserIntentContent .optTiles{display: flex; width: 100%; /*justify-content: space-between;*/}.optNewUserIntentContent .optTile{border: 1px solid #F0F0F0; border-radius: 8px; background-color: #FFFFFF; box-shadow: 0 5px 14px 0 rgba(0,0,0,0.07); padding: 50px 25px; text-align: center; margin-right: 25px; cursor: pointer; max-width: 320px; flex: 1;}.optTileReadBlog{padding-bottom: 0;}.optAlignLeft.optTile{text-align: left;}.optAlignLeft.optTile h1{text-align: left !important;}.optNewUserIntentContent .optTile:hover{border-color: #0D42FB;}.optNewUserIntentContent .optTile:last-of-type{margin-right: 0;}.optNewUserIntentContent .optTile .optImg{margin-bottom: 40px; min-height: 70px; align-items: center; justify-content: center; display: flex;}.optNewUserIntentContent .optTile .optImg svg{}.optNewUserIntentContent .optTile h1{font-size: 20px; font-weight: 500; letter-spacing: 0.32px; line-height: 28px; text-align: center; color: #080637;}.optNewUserIntentContent .optTile p{color: #080637; font-size: 14px; letter-spacing: -0.22px; line-height: 20px; text-align: center; margin-bottom: 40px; min-height: 100px;}.optNewUserIntentContent .optTile .optCTA{min-width: 140px;}.optReadBlog{font-weight: 500; color: #707070;}.optReadBlog svg{width: 20px; margin-left: 10px; vertical-align: middle; margin-bottom: 3px;}.optImg.optFullWidth{margin-left: -25px; margin-right: -25px; margin-top: -50px;}/*modal*/ .optModalRoleCollector{position: absolute; bottom: -100%; right: 150px; width: 480px; display: flex; border: 1px solid #B1C1FD; border-radius: 8px; background-color: #FFFFFF; box-shadow: 0 5px 14px 0 rgba(0,0,0,0.07); padding: 25px 45px; transition: 1s; z-index: 10000;}.optModalRoleCollector.show{bottom: 50px; transition: 1s;}.optModalRoleCollector .optLeft{flex: 2; margin-right: 60px;}.optModalRoleCollector .optLeft svg{width: 100%; height: 100%;}.optModalRoleCollector .optRight{flex: 3;}.optModalRoleCollector .optRight h1{color: #080637; font-size: 20px; font-weight: 500; letter-spacing: 0.32px; line-height: 28px;}.optModalRoleCollector .optRight ul{color: #080637; font-family: Graphik; font-size: 14px; letter-spacing: -0.22px; line-height: 26px; margin-bottom: 20px;}.optModalRoleCollector .optRight ul li{cursor: pointer;}.optModalRoleCollector .optRight ul li span.optRadio{margin-right: 10px; vertical-align: middle; box-sizing: border-box; height: 15px; width: 15px; border: 1px solid #425ED3; background-color: #DCE5FA; border-radius: 50%; display: inline-block;}.optModalRoleCollector .optRight ul li.selected span.optRadio{background-color: #425ED3; box-shadow: inset 0px 0px 0rem 2px #DCE5FA;}.optModalRoleCollector .optRight .optCTA{width: 175px;}.optRadio{box-sizing: border-box; height: 15px; width: 15px; border: 1px solid #425ED3; background-color: #DCE5FA; border-radius: 50%; display: inline-block;}.optModalRoleCollector .optClose, .optVideoModal .optClose{cursor: pointer; position: absolute; top: 10px; right: 12px;}.optModalRoleCollector .optClose svg, .optVideoModal .optClose svg{width: 22px; height: 22px; vertical-align: middle;}.optError{color: red; display: none;}.optError.show{display: block;}/*video*/ .optVideoModal{position: absolute; width: 60vw; top: 50%; left: 50%; transform: translateX(-50%) translateY(-50%); border: 1px solid #F0F0F0; border-radius: 8px; background-color: #FFFFFF; box-shadow: 0 5px 14px 0 rgba(0,0,0,0.07); padding: 50px 25px; z-index: 10000; padding-bottom: 38.25%; padding-top: 30px; height: 0; overflow: hidden;}.optVideoModal iframe{left: 0; top: 0; height: calc(100% - 100px); width: calc(100% - 50px); position: absolute; transform: translate(25px, 50px);}.optVideoModal #ptVideoWrap{width: 100%; height: 100%;}.optVideoOverlay{position: fixed; display: block; width: 100%; height: 100%; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.5); z-index: 9999; cursor: pointer;}</style>');
});

//starting state 1 - no opti cookie UI with phone image
utils.waitForElement('[data-test-section="oasis-features-dashboard"] .reading-column img[alt="cell phone"]').then(function () {
    
    $('.reading-column').addClass('optHide');
    $('.optoptNewUserIntentContentWrap').remove();
    $('.reading-column').before(newHTML);

    attachEvents();

    //load youtube
    loadScript("https://www.youtube.com/iframe_api", function() {});
});

//starting state 2 - with opti cookie UI with phone image
utils.waitForElement('[data-test-section="oasis-features-dashboard"] div.flex.flex--column[data-test-section="layers-empty-state"]').then(function (el) {
    

    $(el).addClass('optHide');
    $('.optoptNewUserIntentContentWrap').remove();
    $(el).before(newHTML);

    attachEvents();

    //load youtube
    loadScript("https://www.youtube.com/iframe_api", function () { });
});

//starting state 3 - empty features table
utils.waitForElement('[data-test-section="oasis-features-dashboard"] input[data-test-section="table-filter-input"][value=""]').then(function () {
    utils.waitForElement('a[data-test-section="entity-table-clear-filters-button"]').then(function () {
        
        var el = $('[data-test-section="oasis-features-dashboard"] > div:last');

        $(el).addClass('optHide');
        $('.optoptNewUserIntentContentWrap').remove();
        $(el).before(newHTML);

        attachEvents();

        //load youtube
        loadScript("https://www.youtube.com/iframe_api", function () { });
    });
});

var player;
function playVideo(divId, videoId, width, height, mute) {
    var player;
    player = new YT.Player(divId, {
        videoId: videoId, // YouTube Video ID
        width: width,               // Player width (in px)
        height: height,              // Player height (in px)
        playerVars: {
            autoplay: 0,        // Auto-play the video on load
            controls: 1,        // Show pause/play buttons in player
            showinfo: 0,        // Hide the video title
            modestbranding: 1,  // Hide the Youtube Logo
            loop: 1,            // Run the video in a loop
            fs: 1,              // Hide the full screen button
            cc_load_policy: 0, // Hide closed captions
            iv_load_policy: 3,  // Hide the Video Annotations
            autohide: 0         // Hide video controls when playing
        },
        events: {
            onStateChange: function (e) {
                var eventId = '';
                switch (e.data) {
                    case 1:
                        showModal();
                        break;
                    //case 2:
                    //    eventId = 'Clicks_Pause_Video';
                    //    isPlaying = false;
                    //    break;
                    //case 0:
                    //    eventId = 'Watches_full_video';
                    //    isPlaying = false;
                    //    break;
                }
            }
        }
    });
}
function showVideoModal() {
    $('.optVideoModal').remove();
    $('body').append(videoModalHTML);
    $('.optVideoModal .optClose').click(function () {
        $('.optVideoModal, .optVideoOverlay').remove();
    });

    playVideo('optVideoWrap', "DVjnOYi4214", 956, 538, false);

    $('.optVideoModal iframe').click(function () {
        showModal();
    });
}
function showModal(overrideHref) {
  return;
    if (!getCookie(optNewUserIntentModalCookie)) {
        $('.optModalRoleCollector').remove();
        $('html').append(modalHTML);
      
        setTimeout(function() {
            $('.optModalRoleCollector').addClass('show');
        },100);

        $('.optModalRoleCollector .optClose').click(function () {
            setCookie(optNewUserIntentModalCookie, "true");
            $('.optModalRoleCollector').removeClass('show');
        });

        $('.optModalRoleCollector .optCTA').click(function () {
            if ($('.optModalRoleCollector .optRight ul li.selected').length === 0) {
                $('.optModalRoleCollector .optError').addClass('show');

                return;
            }

            //add a record to google sheets
            var currentHref = overrideHref ? overrideHref : window.location.href; //not used, will use last H1 clicked
            var currentUser = window.optlyApp.getUtilities().userInfo.getUser().email;
            var currentRole = $('.optModalRoleCollector .optRight ul li.selected').text().trim();

            addRecordToGoogleSheets(sessionStorage["optLastTileH1Clicked"], currentUser, currentRole);

            $('.optModalRoleCollector').removeClass('show');
            setCookie(optNewUserIntentModalCookie, "true");
        });

        $('.optModalRoleCollector .optRight ul li').click(function() {
            $('.optModalRoleCollector .optRight ul li').removeClass('selected');
            $(this).addClass('selected');
        });
    }
}
function attachEvents() {
    //all tiles - get last h1 clicked
    $('.optTile').click(function() {
        sessionStorage["optLastTileH1Clicked"] = $(this).find('h1').text();
    });
    //main tiles
    $('.optTile1').click(function () {
        $('.optNewUserIntentContent.optMainLevel').addClass('optSlideOut');
        $('.optNewUserIntentContent.optSubLevel.optSubItem1').addClass('optSlideIn');
    });

    $('.optTile2').click(function () {
        $('.optNewUserIntentContent.optMainLevel').addClass('optSlideOut');
        $('.optNewUserIntentContent.optSubLevel.optSubItem2').addClass('optSlideIn');
    });

    $('.optTile3').click(function () {
        showVideoModal();
        //showModal();
    });


    //back
    $('.optBack').click(function () {
        $('.optNewUserIntentContent.optSubLevel').removeClass('optSlideIn');
        $('.optNewUserIntentContent.optMainLevel').removeClass('optSlideOut');
    });


    //level 2
    //first tile
    $('.optTileSetupFlag').click(function () {
        //original state
        $('.optHide').removeClass('optHide');
        $('.optoptNewUserIntentContentWrap').addClass('optHide');
        
        attachWaypointForCreateNewFeature();
    });

    $('.optTileTryADemo').click(function () {
        //tutorial link from the menu
        //same window
        $('a[data-track-id="getting-started-navbar-internal-link"]')[0].click();
        attachWaypointForRunDemo();

        //new window
        //var url = $('a[data-track-id="getting-started-navbar-internal-link"]').attr('href');
        //window.open(url, "_blank");
        //showModal("https://www.optimizely.com/customers/");
    });

    //second tile
    $('.optTileCreateFirstTest').click(function () {
        //experiments link from the menu
        $('a[data-track-id="full-stack-navbar-internal-link"]')[0].click();

        attachWaypointForExperimentsPage();
    });

    $('.optTileLearnMore').click(function () {
        window.open("https://www.optimizely.com/customers/", "_blank");

        showModal("https://www.optimizely.com/customers/");
    });
    
    $('.optTileReadBlog').click(function () {
        window.open("https://www.optimizely.com/resources/flappybird-video-tutorial/", "_blank");

        showModal("https://www.optimizely.com/resources/flappybird-video-tutorial/");
    });


    //custom events
    $('.optTile.optTile1').click(function () {
        window['optimizely'] = window['optimizely'] || [];
        window['optimizely'].push({
            type: "event",
            eventName: "optTile_optTile1",
            tags: {
                revenue: 0, // Optional in cents as integer (500 == $5.00)
                value: 0.00 // Optional as float
            }
        });
    });

    $('.optTile.optTile2').click(function () {
        window['optimizely'] = window['optimizely'] || [];
        window['optimizely'].push({
            type: "event",
            eventName: "optTile_optTile2",
            tags: {
                revenue: 0, // Optional in cents as integer (500 == $5.00)
                value: 0.00 // Optional as float
            }
        });
    });
    $('.optTile.optTile3').click(function () {
        window['optimizely'] = window['optimizely'] || [];
        window['optimizely'].push({
            type: "event",
            eventName: "optTile_optTile3",
            tags: {
                revenue: 0, // Optional in cents as integer (500 == $5.00)
                value: 0.00 // Optional as float
            }
        });
    });
    $('.optTileSetupFlag').click(function () {
        window['optimizely'] = window['optimizely'] || [];
        window['optimizely'].push({
            type: "event",
            eventName: "optTileSetupFlag",
            tags: {
                revenue: 0, // Optional in cents as integer (500 == $5.00)
                value: 0.00 // Optional as float
            }
        });
    });
    $('.optTileTryADemo').click(function () {
        window['optimizely'] = window['optimizely'] || [];
        window['optimizely'].push({
            type: "event",
            eventName: "optTileTryADemo",
            tags: {
                revenue: 0, // Optional in cents as integer (500 == $5.00)
                value: 0.00 // Optional as float
            }
        });
    });
    $('.optTileCreateFirstTest').click(function () {
        window['optimizely'] = window['optimizely'] || [];
        window['optimizely'].push({
            type: "event",
            eventName: "optTileCreateFirstTest",
            tags: {
                revenue: 0, // Optional in cents as integer (500 == $5.00)
                value: 0.00 // Optional as float
            }
        });
    });
    $('.optTileLearnMore').click(function () {
        window['optimizely'] = window['optimizely'] || [];
        window['optimizely'].push({
            type: "event",
            eventName: "optTileLearnMore",
            tags: {
                revenue: 0, // Optional in cents as integer (500 == $5.00)
                value: 0.00 // Optional as float
            }
        });
    });
    $('.optTileReadBlog').click(function () {
        window['optimizely'] = window['optimizely'] || [];
        window['optimizely'].push({
            type: "event",
            eventName: "optTileReadBlog",
            tags: {
                revenue: 0, // Optional in cents as integer (500 == $5.00)
                value: 0.00 // Optional as float
            }
        });
    });
    waitForCreateFeaturesCTA1();
    waitForCreateFeaturesCTA2();
}
function addRecordToGoogleSheets(currentHref, currentUser, currentRole) {
    //google API stuff
    function googleAPIDoAuthJWT() {
        
    }
    function initClient() {
        gapi.load('client', function () {
            
            gapi.client.load('sheets', 'v4', function () {
                

                googleAPIDoAuthJWT();
            });
        });
    }
    function insertValues() {
        //set
        var params = {
            // The ID of the spreadsheet to update.
            spreadsheetId: spreadSheetID,
            range: 'Sheet1',
            valueInputOption: 'RAW',
        };

        var valueRangeBody = {
            values: [
          [
            currentHref, currentUser, currentRole
          ]
            ]
        };

        var request = gapi.client.sheets.spreadsheets.values.append(params, valueRangeBody);
        request.then(function (response) {
            
        }, function (reason) {
            console.error('error: ' + reason.result.error.message);
        });
    }
}
function loadScript(url, callback) {

    var script = document.createElement("script");
    script.type = "text/javascript";

    if (script.readyState) { //IE
        script.onreadystatechange = function () {
            if (script.readyState == "loaded" ||
              script.readyState == "complete") {
                script.onreadystatechange = null;
                callback();
            }
        };
    } else { //Others
        script.onload = function () {
            callback();
        };
    }

    script.src = url;
    document.getElementsByTagName("head")[0].appendChild(script);
}
//waypoints
function attachWaypointForCreateNewFeature() {
    utils.waitForElement('html.dialog-shown table [data-test-section="feature-table-row-0"]').then(function () {
        utils.waitForElement('html:not(.dialog-shown) table [data-test-section="feature-table-row-0"]').then(function () {
        
        showModal();
        });
    });
}
function attachWaypointForRunDemo() {
    utils.waitForElement('button[data-test-section="step2-next-btn"]').then(function () {
        showModal();
    });
   
}
function attachWaypointForExperimentsPage() {
    setTimeout(function () {
        showModal();
    }, 1000);

}
function waitForCreateFeaturesCTA1(){
    utils.waitForElement('[data-test-section="feature-empty-state-submit"]:not(.optFound)').then(function (el) {
        $(el).addClass('optFound');
        $(el).unbind('click', window.triggerCreateFeatureEvent);
        $(el).bind('click', window.triggerCreateFeatureEvent);

        waitForCreateFeaturesCTA1();
    });
}
function waitForCreateFeaturesCTA2(){
    utils.waitForElement('[data-test-section="create-new-feature-modal-create-button"]:not(.optFound)').then(function (el) {
        $(el).addClass('optFound');
        $(el).unbind('click', window.triggerCreateFeatureEvent);
        $(el).bind('click', window.triggerCreateFeatureEvent);

        waitForCreateFeaturesCTA2();
    });
}
window.triggerCreateFeatureEvent = function() {
    window['optimizely'] = window['optimizely'] || [];
    window['optimizely'].push({
        type: "event",
        eventName: "Feature_Flag_Create",
        tags: {
            revenue: 0, // Optional in cents as integer (500 == $5.00)
            value: 0.00 // Optional as float
        }
    });
}
}}, {"value": "<img src='//cdn.optimizely.com/img/5935064/d7f7dce97f1f42369909b3af2319f838.png' />", "selector": "''body'", "dependencies": [], "operator": "before", "type": "append", "id": "EFD58A2E-E315-457D-AFCF-64CCAF53072A"}]}], "name": "Variation #1"}], "audienceIds": ["and", "18779050335", "9270393351"], "changes": null, "id": "18716251801", "integrationSettings": null}], "id": "18743760822", "weightDistributions": null, "name": "[ODS - Dan B] EXLAB-001 | [FS Growth] Better understand new user intent", "groupId": null, "commitId": "19587572841", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["22915210465"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "Everyone", "bucketingStrategy": null, "variations": [{"id": "22886120616", "actions": [{"viewId": "22915210465", "changes": [{"name": "Login cards - Opti ID", "config": {"url": "https://www.optimizely.com", "slot": "bottom-right", "image": "//cdn.optimizely.com/img/5935064/1d2fc2fd8b154dd799e1e39010f953be.svg", "alt": "Welcome to Optimizely"}, "widget_id": "22900210350", "dependencies": [], "type": "widget", "id": "83f8176077c241bba75133d8c2b510aa"}, {"selector": "#bottom-right", "dependencies": [], "attributes": {}, "type": "attribute", "id": "f8a97e4582404a6dbca595f6e0c62c84", "css": {}}]}], "name": "Banner"}], "audienceIds": null, "changes": null, "id": "22886310570", "integrationSettings": null}], "id": "22906180638", "weightDistributions": null, "name": "[23|01|13] [Michiel] Opti ID Login Promo - Bottom right \u2198\ufe0f [Promo]", "groupId": null, "commitId": "23085871320", "decisionMetadata": {"experimentPriorities": [[{"entityId": "22886310570", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["22632410290"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[Brian L] Hide AE + CSM on plan billing contacts MON-642", "bucketingStrategy": null, "variations": [{"id": "22634681045", "actions": [{"viewId": "22632410290", "changes": [{"dependencies": [], "type": "custom_code", "id": "34748921-855B-4009-A3E9-0AD80925AE96", "value": function($){var utils = window.optimizely.get('utils');
utils.waitForElement("[data-test-section='plan-billing-account-executive-info']").then(function(){
  console.log("Hide AE + CSM on plan billing is ON.");
	window.document.querySelector("[data-test-section='plan-billing-account-executive-info']").hidden = true;
	window.document.querySelector("[data-test-section='plan-billing-technical-account-manager-info']").hidden = true;
	console.log($( "[data-test-section='plan-billing-account-executive-info']").css('display'));
	console.log($( "[data-test-section='plan-billing-technical-account-manager-info']").css('display'));
});
}}, {"value": "<style>div[data-test-section=\"plan-billing-account-executive-info\"] {display: none !important;}\ndiv[data-test-section=\"plan-billing-technical-account-manager-info\"] {display: none !important;}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "CFD2FB21-55BE-487F-A14E-0BC60EBAC8EA"}]}], "name": "Original"}], "audienceIds": null, "changes": null, "id": "22631631552", "integrationSettings": null}], "id": "22634670649", "weightDistributions": null, "name": "[Brian L] Hide AE + CSM on plan billing contacts MON-642", "groupId": null, "commitId": "22629460400", "decisionMetadata": null, "policy": "single_experiment", "changes": [{"value": "<style>div[data-test-section=\"plan-billing-account-executive-info\"] {display: none !important;}\ndiv[data-test-section=\"plan-billing-technical-account-manager-info\"] {display: none !important;}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "7A7119EC-24DD-4131-B5AF-04FCCB6FB810"}, {"dependencies": [], "type": "custom_code", "id": "589393D4-9BDA-4C24-99FC-DEBAB2866733", "value": function($){var $ = window.optimizely.get('jquery');
var utils = optimizely.get('utils');
utils.waitForElement("[data-test-section='plan-billing-account-executive-info']").then(function(el) {
  var bb = $(el);
  console.log("Hide AE + CSM on plan billing is ON.");
  bb.css('display', 'none');
  $( "[data-test-section='plan-billing-account-executive-info']").css('display', 'none');
  $( "[data-test-section='plan-billing-technical-account-manager-info']").css('display', 'none');
});
}}]}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["22491790272"], "experiments": [{"weightDistributions": null, "audienceName": "Norway", "name": "Norway", "bucketingStrategy": null, "variations": [{"id": "22428272611", "actions": [{"viewId": "22491790272", "changes": [{"dependencies": [], "type": "custom_code", "id": "0aa7dec376fe4c848f3a27a5165b9470", "value": function($){// Retrieve the utils library
var utils = window.optimizely.get('utils');

// Wait for the "Support" element to appear in the DOM, then insert the DE link
utils.waitForElement('.site-header-cta-nav__list > li:first-child').then(function(targetElement) {
  
  const htmlToBeInserted = '<li class="site-header-cta-nav-item languageswitch"><a href="' + document.querySelector('link[hreflang=no]').href + '" class="site-header-cta-nav-item__link link">NO</a></li>';
  
  // Use a simple timeout of 1 second to insert the Flag after the other dynamic page loading is completed and the Flag won't be overwritten.
  setTimeout(function() {
    // Use the insertAdjacentHTML() function to insert the new element
  	// Position options: beforebegin, afterbegin, afterend, beforeend
    // See also: https://www.w3schools.com/jsref/met_node_insertadjacenthtml.asp
    targetElement.insertAdjacentHTML('beforebegin', htmlToBeInserted);
  }, 500);
  
});
}}]}], "name": "Variation #1"}], "audienceIds": ["and", "20627600274"], "changes": null, "id": "22424482653", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "DACH", "name": "DACH", "bucketingStrategy": null, "variations": [{"id": "22420772479", "actions": [{"viewId": "22491790272", "changes": [{"dependencies": [], "type": "custom_code", "id": "408E023B-EF2E-473D-962F-1CF29434DC13", "value": function($){// Retrieve the utils library
var utils = window.optimizely.get('utils');

// Wait for the "Support" element to appear in the DOM, then insert the DE link
utils.waitForElement('.site-header-cta-nav__list > li:first-child').then(function(targetElement) {
  
  const htmlToBeInserted = '<li class="site-header-cta-nav-item languageswitch"><a href="' + document.querySelector('link[hreflang=de]').href + '" class="site-header-cta-nav-item__link link">DE</a></li>';
  
  // Use a simple timeout of 1 second to insert the Flag after the other dynamic page loading is completed and the Flag won't be overwritten.
  setTimeout(function() {
    // Use the insertAdjacentHTML() function to insert the new element
  	// Position options: beforebegin, afterbegin, afterend, beforeend
    // See also: https://www.w3schools.com/jsref/met_node_insertadjacenthtml.asp
    targetElement.insertAdjacentHTML('beforebegin', htmlToBeInserted);
  }, 500);
  
});
}}, {"selector": ".languageswitch >a", "dependencies": [], "attributes": {}, "type": "attribute", "id": "77C29911-58AA-41A8-AB91-30A72CE471CA", "css": {}}]}], "name": "Variation #1"}], "audienceIds": ["and", "11191915512"], "changes": null, "id": "22446252702", "integrationSettings": null}, {"weightDistributions": null, "audienceName": "Sweden", "name": "Sweden", "bucketingStrategy": null, "variations": [{"id": "22473421559", "actions": [{"viewId": "22491790272", "changes": [{"dependencies": [], "type": "custom_code", "id": "1a93b77ffa704902ae7601f1488919b3", "value": function($){// Retrieve the utils library
var utils = window.optimizely.get('utils');

// Wait for the "Support" element to appear in the DOM, then insert the DE link
utils.waitForElement('.site-header-cta-nav__list > li:first-child').then(function(targetElement) {
  
  const htmlToBeInserted = '<li class="site-header-cta-nav-item languageswitch"><a href="' + document.querySelector('link[hreflang=sv]').href + '" class="site-header-cta-nav-item__link link">SV</a></li>';
  
  // Use a simple timeout of 1 second to insert the Flag after the other dynamic page loading is completed and the Flag won't be overwritten.
  setTimeout(function() {
    // Use the insertAdjacentHTML() function to insert the new element
  	// Position options: beforebegin, afterbegin, afterend, beforeend
    // See also: https://www.w3schools.com/jsref/met_node_insertadjacenthtml.asp
    targetElement.insertAdjacentHTML('beforebegin', htmlToBeInserted);
  }, 500);
  
});
}}]}], "name": "Variation #1"}], "audienceIds": ["and", "20788940263"], "changes": null, "id": "22480190238", "integrationSettings": null}], "id": "22381486320", "weightDistributions": null, "name": "[22|11|04] [Felix] Regional language switch [promo]", "groupId": null, "commitId": "22933881003", "decisionMetadata": {"experimentPriorities": [[{"entityId": "22446252702", "endOfRange": null}], [{"entityId": "22480190238", "endOfRange": null}], [{"entityId": "22424482653", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["8661493677"], "experiments": [{"weightDistributions": null, "audienceName": "Everyone else", "name": "[Bryce][Hotfix] Hide State Farm Billing Information", "bucketingStrategy": null, "variations": [{"id": "8669154267", "actions": [{"viewId": "8661493677", "changes": [{"value": "<style>li[href='/v2/accountsettings/account/billing'] {\n  display: none !important;\n}\n\ndiv[data-test-section=\"new-billing-tab\"] {\n  display: none !important;\n}</style>", "selector": "head", "dependencies": [], "type": "append", "id": "A5041665-2F6B-4D64-AAC3-20B7F6FF6D60"}]}], "name": "Original"}], "audienceIds": null, "changes": null, "id": "8662072841", "integrationSettings": null}], "id": "8632878651", "weightDistributions": null, "name": "[Bryce][Hotfix] Hide State Farm Billing Information", "groupId": null, "commitId": "8667933068", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["13258280174"], "experiments": [{"weightDistributions": null, "audienceName": "[Bill C] - IBM Account Only", "name": "[Bill C] - Warn IBM users about query parameters when simple match is selected", "bucketingStrategy": null, "variations": [{"id": "13225730391", "actions": [{"viewId": "13258280174", "changes": [{"dependencies": [], "type": "custom_code", "id": "5F7D5CC8-563B-4851-8384-FF1B4ED7EF42", "value": function($){function addMessage(){
var queryCheck = new RegExp('(\\?)');
var urlConditionBoxes = document.querySelectorAll('[data-test-section="condition-card-url-match"]');

urlConditionBoxes.forEach(function(condition){

  var urlMatches = condition.querySelectorAll('[data-test-section="include-url-condition"]');

  urlMatches.forEach(function(urlMatch){
    var messageAlreadyAppended = false;
  
      if(!!urlMatch.nextElementSibling){
        messageAlreadyAppended = urlMatch.nextElementSibling.getAttribute('class') == "warnP";
      }

    var isSimple = urlMatch.querySelectorAll('.isSelected[data-test-section="dropdown-block-link-simple"]');

    if(isSimple.length == 1){
    //Now check the value
      console.log("is simple");
      var urlValue = urlMatch.querySelector('.oui-text-input').value;
      
      if(queryCheck.test(urlValue)){
        //Question Mark Match
        
         if(!messageAlreadyAppended){
          urlMatch.insertAdjacentHTML('afterend', '<div class="warnP" data-optly><p class="lego-form-note flush--bottom lego-form-note--bad-news" data-test-section="test-url-invalid-row-0">Warning: Using a Simple Match will ignore a URL query parameter. If the query parameter should be considered for page targeting, we recommend Exact Match or Substring Match</p></div>');
        }
 
      } else {
        if(messageAlreadyAppended){
          urlMatch.nextElementSibling.remove();
        }
      }

    } else {
         if(messageAlreadyAppended){
          urlMatch.nextElementSibling.remove();
        }
    }

  });

});
  
}

document.addEventListener('keyup', addMessage);
document.addEventListener('click', addMessage);

addMessage();
}}]}], "name": "Warning Message"}], "audienceIds": ["and", "13222000364"], "changes": null, "id": "13260420365", "integrationSettings": null}], "id": "13262280316", "weightDistributions": null, "name": "[Bill C] - Warn IBM users about query parameters when simple match is selected", "groupId": null, "commitId": "13256710157", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 0, "activation": {}, "integrationSettings": {}, "integrationStringVersion": 2, "viewIds": ["16147620420", "16150530217", "16157560479"], "experiments": [{"weightDistributions": [{"entityId": "16142900592", "endOfRange": 10000}], "audienceName": "Everyone else", "name": "[Byron] Hide Classic Preview Buttons", "bucketingStrategy": null, "variations": [{"id": "16146290233", "actions": [{"viewId": "16147620420", "changes": []}, {"viewId": "16157560479", "changes": []}], "name": "Original"}, {"id": "16142900592", "actions": [{"viewId": "16147620420", "changes": [{"selector": "#js-variation-menu > li:nth-of-type(1) > a:nth-of-type(1)", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "8F14BCB2-6CEB-43C0-B054-94AE349CB67A", "css": {}}]}, {"viewId": "16157560479", "changes": [{"selector": "button.anchor--right", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "A8D3A359-9B70-4D06-AA23-5C53C493E653", "css": {}}]}, {"viewId": "16150530217", "changes": [{"selector": "#preview-select", "dependencies": [], "attributes": {"remove": true}, "type": "attribute", "id": "D94D1ECA-4900-40C3-B76A-434629D87BE6", "css": {}}]}], "name": "Removed Classic Preview Button"}], "audienceIds": null, "changes": null, "id": "16136860443", "integrationSettings": null}], "id": "16136920618", "weightDistributions": null, "name": "[Byron] Hide Classic Preview Buttons", "groupId": null, "commitId": "16164360128", "decisionMetadata": null, "policy": "single_experiment", "changes": null}, {"holdback": 500, "activation": {}, "integrationSettings": {"10698082558": {}}, "integrationStringVersion": 2, "viewIds": ["10682665138"], "experiments": [{"weightDistributions": null, "audienceName": "[DO NOT ARCHIVE][Whelan] Has Stats Accelerator Access", "name": "Has SA Access but not enabled", "bucketingStrategy": null, "variations": [{"id": "10698820100", "actions": [{"viewId": "10682665138", "changes": [{"name": "New Optimizely Butter Bar", "config": {"dismissible": "page", "color": "aqua", "text": "Want to reach statistical significance faster?   Try out Stats Accelerator by clicking on Traffic Allocation and selecting a new Distribution Mode.", "link": "https://help.optimizely.com/Build_Campaigns_and_Experiments/Stats_Accelerator", "cta": "Learn more.", "more_styles": "", "test": " ", "id": "my_promo"}, "id": "507AEA06-9876-4AD6-AC1E-D7315408D92B", "dependencies": [], "type": "widget", "widget_id": "8441744253"}]}], "name": "Variation #1"}], "audienceIds": ["and", "10677965675"], "changes": null, "id": "10701660084", "integrationSettings": null}], "id": "10700620031", "weightDistributions": null, "name": "[Whelan] Drive Stats Accelerator Adoption", "groupId": null, "commitId": "10798204880", "decisionMetadata": {"experimentPriorities": [[{"entityId": "10701660084", "endOfRange": null}]], "offerConsistency": null}, "policy": "equal_priority", "changes": null}], "dimensions": [{"segmentId": "5847390353", "id": "5842990157", "apiName": "mobile", "name": "Mobile Visitors"}, {"segmentId": null, "id": "9176074733", "apiName": "project_id", "name": "Project ID"}, {"segmentId": null, "id": "9184515964", "apiName": "plan_type", "name": "Plan Type"}, {"segmentId": null, "id": "9184675006", "apiName": "is_impersonating", "name": "Is Impersonating?"}, {"segmentId": null, "id": "9218501893", "apiName": "user_email", "name": "User Email"}, {"segmentId": null, "id": "9221721120", "apiName": "account_id", "name": "Account ID"}, {"segmentId": null, "id": "11393183396", "apiName": "has_optimizely_email", "name": "Has Optimizely Email"}, {"segmentId": null, "id": "12113750420", "apiName": "zendesk_chat_interaction", "name": "[DO NOT ARCHIVE][Mario] Interact with Zendesk Chat module"}, {"segmentId": null, "id": "12182860623", "apiName": "experiment_started", "name": "[Mario] Start experiment button clicked "}, {"segmentId": null, "id": "12188896269", "apiName": "zendesk_chat_with_tse", "name": "[Mario] Zendesk Chat with TSE"}], "projectId": "8413020910", "namespace": "a5935064", "dcpKeyfieldLocators": [{"dcp_datasource_id": "23001950065", "is_optimizely": false, "type": "cookie", "name": "abcd"}, {"dcp_datasource_id": "5769742095", "is_optimizely": true, "type": "uid", "name": ""}, {"dcp_datasource_id": "9859069758", "is_optimizely": true, "type": "uid", "name": ""}], "visitorAttributes": [], "events": [{"category": "other", "name": "[DO NOT ARCHIVE] Optimizely JIRA Open", "eventType": "click", "viewId": "8401730346", "apiName": "8370151241_optimizely_jira_open", "id": "8752400285", "eventFilter": {"filterType": "target_selector", "selector": "#jiraOptlyLogo"}}, {"category": "other", "name": "[DO NOT ARCHIVE] Optimizely JIRA Closed", "eventType": "click", "viewId": "8401730346", "apiName": "8370151241__optimizely_jira_closed", "id": "8763570401", "eventFilter": {"filterType": "target_selector", "selector": "#jiraOptlyClose"}}, {"category": "other", "name": "Clicked Link", "eventType": "click", "viewId": "9668421158", "apiName": "8370151241_clicked_link", "id": "9663582998", "eventFilter": {"filterType": "target_selector", "selector": ".cta"}}, {"category": "other", "name": "[DO NOT ARCHIVE][Zach] Click Plug Dialog CTA", "eventType": "click", "viewId": "8519660958", "apiName": "8370151241_zach_click_plug_dialog_cta", "id": "10103000413", "eventFilter": {"filterType": "target_selector", "selector": ".optimizley-x-plug-cta-button"}}, {"category": "other", "name": "KB Link Clicks", "eventType": "click", "viewId": "10312230186", "apiName": "8370151241_kb_link_clicks", "id": "10317232638", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"trigger-text\"]"}}, {"category": "other", "name": "Clicked Link", "eventType": "click", "viewId": "10431330599", "apiName": "8370151241_clicked_link_2", "id": "10408815377", "eventFilter": {"filterType": "target_selector", "selector": ".transition-cta > a"}}, {"category": "other", "name": "Click Event for li > li:nth-of-type(1) > .root-nav__link.truncate", "eventType": "click", "viewId": "10023894788", "apiName": "8370151241_click_event_for_li__linthoftype1__rootnav__linktrunca", "id": "10450352605", "eventFilter": {"filterType": "target_selector", "selector": "li > li:nth-of-type(1) > .root-nav__link.truncate"}}, {"category": "other", "name": "Program Managment Sidebar Nav Item Click", "eventType": "click", "viewId": "8519660958", "apiName": "8370151241_click_event_for_bodynotrootnavclose_linthoftype2__roo", "id": "10463800191", "eventFilter": {"filterType": "target_selector", "selector": "body:not(.root-nav--close) li:nth-of-type(2) > .root-nav__link.truncate"}}, {"category": "other", "name": "[DO NOT ARCHIVE][Jamie] Contact Me Clicks", "eventType": "custom", "viewId": null, "apiName": "contact_me_clicks", "id": "10652370860", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Jamie] Poll Clicks", "eventType": "custom", "viewId": null, "apiName": "poll_clicks", "id": "10653210733", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Jamie] saw FM modal", "eventType": "custom", "viewId": null, "apiName": "saw_fm_modal", "id": "10659690161", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Jamie] Clicked Dismiss", "eventType": "custom", "viewId": null, "apiName": "dismiss_clicks", "id": "10671091200", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE] Save Page Clicks", "eventType": "click", "viewId": "10312230186", "apiName": "8370151241_save_page_clicks", "id": "10682780198", "eventFilter": {"filterType": "target_selector", "selector": ".oui-button-row--right > .oui-button--highlight"}}, {"category": "other", "name": "[DO NOT ARCHIVE] Started w Stats Accelerator", "eventType": "custom", "viewId": null, "apiName": "started_w_stats_accel", "id": "10711173231", "eventFilter": null}, {"category": "other", "name": "Clicked Here", "eventType": "click", "viewId": "10665880103", "apiName": "8370151241_clicked_rsvp", "id": "10758390935", "eventFilter": {"filterType": "target_selector", "selector": ".cta"}}, {"category": "other", "name": "Include jQuery clicks", "eventType": "click", "viewId": "10800265460", "apiName": "8370151241_include_jquery_clicks", "id": "10827102457", "eventFilter": {"filterType": "target_selector", "selector": "[name='jquery-1.11.3-trim'], [name='jquery-1.11.3-full']"}}, {"category": "other", "name": "[DO NOT ARCHIVE][Lucas] Close upsell modal after contacting", "eventType": "custom", "viewId": null, "apiName": "close_modal_success", "id": "11081739954", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Lucas] Upsell contact us clicked", "eventType": "custom", "viewId": null, "apiName": "primary_cta_modal_success", "id": "11105339856", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Lucas] Open upsell popup", "eventType": "custom", "viewId": null, "apiName": "upsell_modal_shown", "id": "11169352223", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Lucas] Close upsell popup without contacting", "eventType": "custom", "viewId": null, "apiName": "close_modal_initial", "id": "11175471408", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE] Create New Feature", "eventType": "click", "viewId": "11490471782", "apiName": "8370151241_create_new_feature", "id": "11475871847", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"create-feature-button\"]"}}, {"category": "other", "name": "[DO NOT ARCHIVE][CANON] X > Butter Bar > CTA", "eventType": "click", "viewId": "8519660958", "apiName": "8370151241_canon_x__butter_bar__cta", "id": "11694010735", "eventFilter": {"filterType": "target_selector", "selector": ".butterbar a.cta"}}, {"category": "other", "name": "[DO NOT ARCHIVE][CANON] X > Butter Bar > Dismiss", "eventType": "click", "viewId": "8519660958", "apiName": "8370151241_canon_x__butter_bar__dismiss", "id": "11720530642", "eventFilter": {"filterType": "target_selector", "selector": ".butterbar a.closer"}}, {"category": "other", "name": "Date Range Apply Click", "eventType": "click", "viewId": "11808634290", "apiName": "8370151241_date_range_apply_click_1", "id": "11791915636", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"daterange-apply-button\"]"}}, {"category": "other", "name": "Results Toolbar Click", "eventType": "click", "viewId": "11808634290", "apiName": "8370151241_results_toolbar_click_1", "id": "11791994945", "eventFilter": {"filterType": "target_selector", "selector": ".toolbar"}}, {"category": "other", "name": "Share Button Click", "eventType": "click", "viewId": "11808634290", "apiName": "8370151241_share_button_click_1", "id": "11795515443", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"results-header-share\"]"}}, {"category": "other", "name": "Apply Segments Click", "eventType": "click", "viewId": "11808634290", "apiName": "8370151241_apply_segments_click_1", "id": "11804844559", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"segment-picker-apply-button\"]"}}, {"category": "other", "name": "Export CSV Button Click", "eventType": "click", "viewId": "11808634290", "apiName": "8370151241_export_csv_button_click_1", "id": "11826154814", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"export-csv-btn\"]"}}, {"category": "other", "name": "Change Primary Metric Click", "eventType": "click", "viewId": "11808634290", "apiName": "8370151241_change_primary_metric_click_1", "id": "11910530594", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"results-header-non-selected-metric\"]"}}, {"category": "other", "name": "Manage Metrics Button Click:", "eventType": "click", "viewId": "11808634290", "apiName": "8370151241_manage_metrics_button_click_1", "id": "11914270713", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"manage-metrics-btn\"]"}}, {"category": "other", "name": "[DO NOT ARCHIVE][Brie] Experiment started for the first time", "eventType": "custom", "viewId": null, "apiName": "first time starting experiment", "id": "11933094004", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Click] Results Button in Experiments Overview", "eventType": "click", "viewId": "11950472651", "apiName": "8370151241_click_results_button_in_experiments_overview", "id": "12093808231", "eventFilter": {"filterType": "target_selector", "selector": "tr:nth-of-type(1) a.oui-button"}}, {"category": "other", "name": "[DO NOT ARCHIVE][Mario] Start experiment button clicked", "eventType": "custom", "viewId": null, "apiName": "start_button_clicked", "id": "12099933244", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Jon] Pages/Audiences Quickback 10s", "eventType": "custom", "viewId": null, "apiName": "pages-quickback-10s", "id": "12368090066", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Jon] Pages/Audiences Quickback 2s", "eventType": "custom", "viewId": null, "apiName": "pages-quickback-2s", "id": "12369910067", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Jon] Pages/Audiences Quickback 5s", "eventType": "custom", "viewId": null, "apiName": "pages-quickback-5s", "id": "12377300114", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE][Jon] Pages/Audiences Navigate Away", "eventType": "custom", "viewId": null, "apiName": "pages-leave", "id": "12377550133", "eventFilter": null}, {"category": "other", "name": "[Becca] Different MGMT Account", "eventType": "custom", "viewId": null, "apiName": "mgmt_account_switch", "id": "13267710111", "eventFilter": null}, {"category": "other", "name": "[Extension][Breana]Single Pane Modal Close", "eventType": "custom", "viewId": null, "apiName": "close_modal", "id": "13762650357", "eventFilter": null}, {"category": "other", "name": "[Extension][Breana]Single Pane Modal CTA button", "eventType": "custom", "viewId": null, "apiName": "modal_cta_btn", "id": "13772180503", "eventFilter": null}, {"category": "other", "name": "presentation_mode", "eventType": "click", "viewId": "11099710611", "apiName": "8370151241_presentation_mode", "id": "14312950066", "eventFilter": {"filterType": "target_selector", "selector": "#presentationMode"}}, {"category": "other", "name": "Dev docs dashboard link", "eventType": "click", "viewId": "10609215822", "apiName": "8370151241_dev_docs_dashboard_link", "id": "14343750285", "eventFilter": {"filterType": "target_selector", "selector": "#devDocsLink"}}, {"category": "other", "name": "Go to dev docs", "eventType": "click", "viewId": "10609215822", "apiName": "8370151241_go_to_dev_docs", "id": "14349420409", "eventFilter": {"filterType": "target_selector", "selector": "a.oui-button"}}, {"category": "other", "name": "Invite Collaborators", "eventType": "click", "viewId": "9985865588", "apiName": "8370151241_invite_collaborators", "id": "14363230162", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"invite-button\"]"}}, {"category": "other", "name": "Opened Collaborator Invite Dialogue", "eventType": "click", "viewId": "9985865588", "apiName": "8370151241_opened_collaborator_invite_dialogue", "id": "14363720017", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"new-collab-button\"]"}}, {"category": "other", "name": "Clicked on \"All Projects\"", "eventType": "click", "viewId": "14711880608", "apiName": "8370151241_clicked_on_all_projects", "id": "14741540485", "eventFilter": {"filterType": "target_selector", "selector": ".flex-align--end > a"}}, {"category": "other", "name": "[Yeesheen] Click collaborators help link", "eventType": "click", "viewId": "9985865588", "apiName": "8370151241_yeesheen_click_collaborators_help_link", "id": "14918900849", "eventFilter": {"filterType": "target_selector", "selector": ".oui-sheet__body > div:nth-of-type(1) > a:nth-of-type(1)"}}, {"category": "other", "name": "Try Rollouts Cancel", "eventType": "click", "viewId": "15185731079", "apiName": "8370151241_try_rollouts_cancel", "id": "15201800259", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"try-rollouts-cancel\"]"}}, {"category": "other", "name": "Try Rollouts Agree", "eventType": "click", "viewId": "15185731079", "apiName": "8370151241_try_rollouts_agree", "id": "15221390354", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"try-rollouts-agree\"]"}}, {"category": "other", "name": "Chose Number in NPS Modal", "eventType": "click", "viewId": "10665880103", "apiName": "8370151241_chose_number_in_nps_modal", "id": "15296371016", "eventFilter": {"filterType": "target_selector", "selector": "#nps-modal-numbers"}}, {"category": "other", "name": "NPS Modal Submitted", "eventType": "click", "viewId": "10665880103", "apiName": "8370151241_nps_modal_submitted", "id": "15296770423", "eventFilter": {"filterType": "target_selector", "selector": "#nps-modal-submit"}}, {"category": "other", "name": "Closed NPS Modal", "eventType": "click", "viewId": "10665880103", "apiName": "8370151241_closed_nps_modal", "id": "15311080614", "eventFilter": {"filterType": "target_selector", "selector": "#nps-modal-close"}}, {"category": "other", "name": "Clicked Extensions Link in NPS Modal", "eventType": "click", "viewId": "10665880103", "apiName": "8370151241_clicked_extensions_link_in_nps_modal", "id": "15317520524", "eventFilter": {"filterType": "target_selector", "selector": "#nps-modal-extension"}}, {"category": "other", "name": "Submit NPS Modal", "eventType": "custom", "viewId": null, "apiName": "nps-modal-submit", "id": "15424150433", "eventFilter": null}, {"category": "other", "name": "Clicked Extensions Link in NPS Modal", "eventType": "click", "viewId": "10609215822", "apiName": "8370151241_clicked_extensions_link_in_nps_modal_2", "id": "15496580857", "eventFilter": {"filterType": "target_selector", "selector": "#nps-modal-extension"}}, {"category": "other", "name": "Closed NPS Modal", "eventType": "click", "viewId": "10609215822", "apiName": "8370151241_closed_nps_modal_2", "id": "15500150563", "eventFilter": {"filterType": "target_selector", "selector": "#nps-modal-close"}}, {"category": "other", "name": "Chose Number in NPS Modal", "eventType": "click", "viewId": "10609215822", "apiName": "8370151241_chose_number_in_nps_modal_2", "id": "15504240429", "eventFilter": {"filterType": "target_selector", "selector": "#nps-modal-numbers"}}, {"category": "other", "name": "NPS Modal Submitted", "eventType": "click", "viewId": "10609215822", "apiName": "8370151241_nps_modal_submitted_2", "id": "15511090297", "eventFilter": {"filterType": "target_selector", "selector": "#nps-modal-submit"}}, {"category": "other", "name": "App UI Notification", "eventType": "custom", "viewId": null, "apiName": "appUiNotification", "id": "15690450710", "eventFilter": null}, {"category": "other", "name": "Click Event for #root > div.wrap.position--relative > div > div.root-panel > div > div > div > div > div.two-col__content.overflow-x--auto > div > div > div:nth-child(4) > div > div > div > div > ul > li:nth-child(2) > ul > li > div > div > div > div", "eventType": "click", "viewId": "16838290953", "apiName": "8370151241_click_event_for_root__divwrappositionrelative__div__d", "id": "16840354996", "eventFilter": {"filterType": "target_selector", "selector": "#root > div.wrap.position--relative > div > div.root-panel > div > div > div > div > div.two-col__content.overflow-x--auto > div > div > div:nth-child(4) > div > div > div > div > ul > li:nth-child(2) > ul > li > div > div > div > div"}}, {"category": "other", "name": "[Caitlin] MAB start", "eventType": "custom", "viewId": null, "apiName": "MAB_start", "id": "16875291152", "eventFilter": null}, {"category": "other", "name": "Click Event for button.oui-button--outline", "eventType": "click", "viewId": "16838290953", "apiName": "8370151241_click_event_for_buttonouibuttonoutline", "id": "16881580287", "eventFilter": {"filterType": "target_selector", "selector": "button.oui-button--outline"}}, {"category": "other", "name": "[Danny] Product Modal Shown", "eventType": "custom", "viewId": null, "apiName": "product_modal_shown", "id": "17262352853", "eventFilter": null}, {"category": "other", "name": "[Giannis] Test Value Metric", "eventType": "custom", "viewId": null, "apiName": "test_value_metric", "id": "17281432226", "eventFilter": null}, {"category": "other", "name": "Rollouts Banner CTA Click", "eventType": "click", "viewId": "11950472651", "apiName": "8370151241_rollouts_banner_cta_click", "id": "17754390575", "eventFilter": {"filterType": "target_selector", "selector": ".cta"}}, {"category": "other", "name": "Add Rollouts Nav Click", "eventType": "click", "viewId": "11950472651", "apiName": "8370151241_add_rollouts_nav_click_1", "id": "17779710012", "eventFilter": {"filterType": "target_selector", "selector": "#try-rollouts-experiment .root-nav__link--primary"}}, {"category": "other", "name": "[DO NOT ARCHIVE] Salesforce Lead --> MQL Conversion", "eventType": "custom", "viewId": null, "apiName": "sfdc_mql_conversion", "id": "17877901066", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE] Salesforce Lead --> SAL Conversion", "eventType": "custom", "viewId": null, "apiName": "sfdc_sal_conversion", "id": "17975590296", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE] Salesforce Lead --> SQL Conversion", "eventType": "custom", "viewId": null, "apiName": "sfdc_sql_conversion", "id": "18018630407", "eventFilter": null}, {"category": "other", "name": "[DO NOT ARCHIVE] Salesforce Lead --> SAO Conversion", "eventType": "custom", "viewId": null, "apiName": "sfdc_sao_conversion", "id": "18043050188", "eventFilter": null}, {"category": "other", "name": "Rollouts Banner CTA Click DKwddeZ32yiwD273VsiFoD", "eventType": "click", "viewId": "11950472651", "apiName": "8370151241_rollouts_banner_cta_click_DKwddeZ32yiwD273VsiFoD", "id": "18148493590", "eventFilter": {"filterType": "target_selector", "selector": ".cta"}}, {"category": "other", "name": "No Thanks Clicked", "eventType": "click", "viewId": "10665880103", "apiName": "8370151241_no_thanks_clicked", "id": "18158164222", "eventFilter": {"filterType": "target_selector", "selector": "button.optly-survey-close"}}, {"category": "other", "name": "Book a time clicked", "eventType": "click", "viewId": "10665880103", "apiName": "8370151241_book_a_time_clicked", "id": "18170902508", "eventFilter": {"filterType": "target_selector", "selector": ".optly-survey-answer"}}, {"category": "other", "name": "Close Button Clicked", "eventType": "click", "viewId": "10665880103", "apiName": "8370151241_close_button_clicked", "id": "18178580945", "eventFilter": {"filterType": "target_selector", "selector": "#survey-modal-close"}}, {"category": "other", "name": "Add Rollouts Nav Click 36NB779uiJ4cKm4SswdC4G", "eventType": "click", "viewId": "11950472651", "apiName": "8370151241_add_rollouts_nav_click_1_36NB779uiJ4cKm4SswdC4G", "id": "18178660057", "eventFilter": {"filterType": "target_selector", "selector": "#try-rollouts-experiment .root-nav__link--primary"}}, {"category": "other", "name": "[Becca] Butter Bar CTA Click", "eventType": "click", "viewId": "11950472651", "apiName": "8370151241_becca_butter_bar_cta_click", "id": "18596950003", "eventFilter": {"filterType": "target_selector", "selector": "#opticon20-bb .cta"}}, {"category": "other", "name": "[ODS - Dan B] Full Stack & Rollouts - Create Experiment - Click", "eventType": "click", "viewId": "18798281682", "apiName": "8370151241_experiments_created", "id": "18802850993", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"create-feature-test-button\"], [data-test-section=\"oasis-create-experiment-button\"], [data-test-section=\"create-feature-test\"], [data-test-section=\"oasis-create-mab-button\"]"}}, {"category": "other", "name": "[ODS - Dan B] CTA - Level 2 - Set Up First Flag - Click", "eventType": "custom", "viewId": null, "apiName": "optTileSetupFlag", "id": "18910344936", "eventFilter": null}, {"category": "other", "name": "[ODS - Dan B] CTA - Level 1 - Create A Feature Flag - Click", "eventType": "custom", "viewId": null, "apiName": "optTile_optTile1", "id": "18920664322", "eventFilter": null}, {"category": "other", "name": "[ODS - Dan B] CTA - Level 2 - Try Demo - Click", "eventType": "custom", "viewId": null, "apiName": "optTileTryADemo", "id": "18935285496", "eventFilter": null}, {"category": "other", "name": "[ODS - Dan B] Feature Flags Created (old, requires per variation event code)", "eventType": "custom", "viewId": null, "apiName": "Feature_Flag_Create", "id": "18964233589", "eventFilter": null}, {"category": "other", "name": "[ODS - Dan B] CTA - Level 1 -  Run An A/B Test - Click", "eventType": "custom", "viewId": null, "apiName": "optTile_optTile2", "id": "18987772057", "eventFilter": null}, {"category": "other", "name": "[ODS - Dan B] CTA - Level 2 - Examples - Click", "eventType": "custom", "viewId": null, "apiName": "optTileLearnMore", "id": "18991592632", "eventFilter": null}, {"category": "other", "name": "[ODS - Dan B] CTA - Level 1 - Learn About Optimizely - Click", "eventType": "custom", "viewId": null, "apiName": "optTile_optTile3", "id": "18996071536", "eventFilter": null}, {"category": "other", "name": "[ODS - Dan B] CTA - Level 2 - How Do Experiments Work - Click", "eventType": "custom", "viewId": null, "apiName": "optTileReadBlog", "id": "19008890203", "eventFilter": null}, {"category": "other", "name": "[ODS - Dan B] CTA - Level 2 - Create A/B Test", "eventType": "custom", "viewId": null, "apiName": "optTileCreateFirstTest", "id": "19014280327", "eventFilter": null}, {"category": "other", "name": "Invites Sent", "eventType": "custom", "viewId": null, "apiName": "Invites_Sent", "id": "19554220163", "eventFilter": null}, {"category": "other", "name": "Collaborators Modal - CTA - Open Modal - Click (equivalent to Collaborators Modal Views)", "eventType": "click", "viewId": "19574624591", "apiName": "8370151241_collaborators_modal__view", "id": "19591273856", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"new-collab-button\"]"}}, {"category": "other", "name": "Collaborators Modal - CTA - Invite - Click", "eventType": "click", "viewId": "19574624591", "apiName": "8370151241_collaborators_modal__cta__invite__click", "id": "19688830006", "eventFilter": {"filterType": "target_selector", "selector": "[data-test-section=\"invite-button\"]"}}, {"category": "other", "name": "Form success", "eventType": "custom", "viewId": null, "apiName": "form_success", "id": "20829020191", "eventFilter": null}, {"category": "other", "name": "Drift meeting", "eventType": "custom", "viewId": null, "apiName": "drift_meeting", "id": "20862701772", "eventFilter": null}, {"category": "other", "name": "Top banner clicks 5qpwWE7wFUpMC5U3G2p6N", "eventType": "click", "viewId": "22900330491", "apiName": "4391536040_top_banner_clicks_5qpwWE7wFUpMC5U3G2p6N", "id": "22878240753", "eventFilter": {"filterType": "target_selector", "selector": "#bottom-left"}}, {"category": "other", "name": "Click", "eventType": "click", "viewId": "22491790272", "apiName": "4391536040_click_2", "id": "22897982243", "eventFilter": {"filterType": "target_selector", "selector": ".languageswitch >a"}}, {"category": "other", "name": "Top banner clicks", "eventType": "click", "viewId": "22882510647", "apiName": "4391536040_top_banner_clicks", "id": "22899930435", "eventFilter": {"filterType": "target_selector", "selector": "#top"}}, {"category": "other", "name": "Top banner clicks NHSi31C5gxcC5BWxpnWP1", "eventType": "click", "viewId": "22915210465", "apiName": "4391536040_top_banner_clicks_NHSi31C5gxcC5BWxpnWP1", "id": "22907580640", "eventFilter": {"filterType": "target_selector", "selector": "#bottom-right"}}, {"category": "other", "name": "Read more cta", "eventType": "click", "viewId": "23118291229", "apiName": "4391536040_read_more_cta", "id": "23085750879", "eventFilter": {"filterType": "target_selector", "selector": ".blogListing .secondary"}}], "revision": "36509", "views": [{"category": "other", "staticConditions": ["or", ["not", ["or", {"type": "url", "value": "/results", "match": "substring"}]]], "name": "[DO NOT ARCHIVE]Global (Exclude Results)", "apiName": "8370151241_global", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8401730346"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "app.optimizely.com/v2", "match": "substring"}]], "name": "[DO NOT ARCHIVE][CANON] X > Global", "apiName": "canon_x_global", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8519660958"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/\\d+/results/", "match": "regex"}], ["or", {"type": "custom_code", "value": /**
 * Sample JavaScript Condition
 * This function is called after the page is triggered. It should return true
 * when the page is ready to activate.
 */

function () {
  var $ = optimizely.get('jquery');
  return $('button:contains("Reset Results")');
}
}]], "activationType": "url_changed", "name": "[DO NOT ARCHIVE] App: X Results Page", "apiName": "8370151241_app_x_results_page", "tags": [], "undoOnDeactivation": false, "activationCode": function calbackFn(a, o) {
  var $ = window.optimizely.get('jquery');
  var pollForElem = function() {
    if ($('button:contains("Reset Results")') && window.location.href.indexOf('results') > -1) 
    {
      a();
    } else {
      setTimeout(pollForElem, 25);
    }
  };
  pollForElem();
}
, "deactivationEnabled": false, "id": "8519711501"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/accountsettings/", "match": "substring"}]], "activationType": "callback", "name": "[DO NOT ARCHIVE] State Farm Account Settings", "apiName": "8370151241_state_farm_account_settings", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var utils = window.optimizely.get('utils');
  if (!window.location.pathname.match(/^\/signin/)) {
      var stopPolling = utils.poll(function() {
        var optlyAppUtils = window.optlyApp && window.optlyApp.getUtilities && window.optlyApp.getUtilities();
            var userInfo = optlyAppUtils && optlyAppUtils.userInfo && optlyAppUtils.userInfo.getUser && optlyAppUtils.userInfo.getUser();
        if (userInfo && userInfo.accountId === 8367280580) {
          activate();
          stopPolling();
          }
      }, 50);
      setTimeout(function(){
        stopPolling();
      }, 2000);
  }
}
, "deactivationEnabled": false, "id": "8661493677"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "rc-app.optimizely.com", "match": "substring"}, {"type": "url", "value": "develrc-app.optimizely.com", "match": "substring"}], ["not", ["or", {"type": "url", "value": "develrc-app.optimizely.com/signin", "match": "substring"}, {"type": "url", "value": "rc-app.optimizely.com/signin", "match": "substring"}]]], "name": "[DO NOT ARCHIVE] Release Candidate Environments", "apiName": "8370151241_release_candidate", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "8766730119"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "custom_code", "value": /**
 * Sample JavaScript Condition
 * This function is called after the page is triggered. It should return true
 * when the page is ready to activate.
 */

function () {
  return Array.prototype.filter.call(
      document.querySelectorAll('[data-iframe-wrapper] h3'),
      function(node) {
        return node.offsetHeight > 0 && node.innerHTML.trim().includes('This page failed to load.');
      }
    ).length > 0;
}
}]], "activationType": "dom_changed", "name": "[DO NOT ARCHIVE]App: Web Editor v2 Load Failed", "apiName": "8370151241_optimizely_web_editor", "tags": [], "undoOnDeactivation": false, "activationCode": function(a, o) {
  /* A function to test if our element is visible. */
  function LoadFailVisible() {
    return Array.prototype.filter.call(
      document.querySelectorAll('[data-iframe-wrapper] h3'),
      function(node) {
        return node.offsetHeight > 0 && node.innerHTML.trim().includes('This page failed to load.');
      }
    ).length > 0;
  }
  
  /* Use the smartPagesProto module to invoke activate everytime the DOM changes with the correct value for isActive */
  optimizely.get('custom/smartPagesProto').DOMChange(
    a, o,
    LoadFailVisible
  );
}
, "deactivationEnabled": true, "id": "9479362274"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/", "match": "substring"}], ["or", {"type": "element_present", "value": "[data-test-section=\"audience-editor-default-conditions\"]"}]], "activationType": "dom_changed", "name": "[DO NOT ARCHIVE][Danny] Audiences Modal", "apiName": "8370151241_danny_audiences_modal", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
    var checkForAudienceModal = function(){
	var title = document.querySelector('.audience-editor-form .lego-dialog__title');
	if(title){
		return title.innerText && title.innerText.indexOf('Audience') > -1;
	}
	else return false;
};
optimizely.get('custom/smartPagesProto').DOMChange(activate,options,checkForAudienceModal);
  }
, "deactivationEnabled": false, "id": "9667330007"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/", "match": "substring"}]], "activationType": "callback", "name": "URL Targeting for [Bryce][Hotfix] PayGo Deprecation Butter Bar in X", "apiName": "8370151241_url_targeting_for_bryce", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
  var utils = window.optimizely.get('utils');
  var stopPolling = utils.poll(function() {
    var accountIsPayGo = window.optlyConfig && window.optlyConfig.account_info && window.optlyConfig.account_info.plan_id === 'paygo';
    if (accountIsPayGo) {
      activate();
      stopPolling();
      }
  }, 50);
  setTimeout(function(){
    stopPolling();
  }, 2000);
}
, "deactivationEnabled": false, "id": "9668421158"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/*.*/settings/collaborators", "match": "regex"}]], "activationType": "dom_changed", "name": "[DO NOT ARCHIVE][Zach] v2 Collaborators (Does not activate when navigating inter-page due to non-SPA trigger)", "apiName": "8370151241_zach_v2_collaborators", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "9985865588"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/*.*/results/*.*/experiments/*.*", "match": "regex"}]], "name": "[DO NOT ARCHIVE][Zach] v2 Results", "apiName": "8370151241_zach_v2_results", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10023894788"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "element_present", "value": "[data-test-section=dropdown-block-link-url_changed]"}], ["or", {"type": "custom_code", "value": /**
 * Sample JavaScript Condition
 * This function is called after the page is triggered. It should return true
 * when the page is ready to activate.
 */

function () {
  return !!document.querySelector('[data-test-section="condition-card-header-title"]');
}
}]], "activationType": "dom_changed", "name": "[DO NOT ARCHIVE] Page Settings Dialog", "apiName": "8370151241_page_settings", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "10312230186"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/projects", "match": "substring"}]], "name": "URL Targeting for [Bryce] Account Deprecation Butter Bars in Classic", "apiName": "8370151241_url_targeting_for_bryce_monthly_metal_deprecation_but", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10431330599"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/app\\.optimizely\\.com\\/v2\\/projects\\/[0-9]+\\/", "match": "regex"}], ["or", {"type": "custom_code", "value": function activateFn() {
	return window.optlyApp.getUtilities().userInfo.evaluateUserInfo({
    projectPlatform: 'custom',
  }).allValuesMatch;
}
}], ["or", {"type": "custom_code", "value": // Exclude this page from BDD tests
function ignoreBDDTestRuns() {
  var match = document.cookie.match(new RegExp('(^| )' + 'green' + '=([^;]+)'));
  if (match) {
    var inBDDEnvironment = !!match[2];
    return !inBDDEnvironment
  } 
  return true
}
}]], "activationType": "url_changed", "name": "[DO NOT ARCHIVE][Jamie] Full Stack Projects (excluding /profile & /accountsettings)", "apiName": "8370151241_jamie_full_stack_projects", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "10609215822"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https:\\/\\/app.optimizely.com\\/v2\\/projects\\/[0-9]+$", "match": "regex"}, {"type": "url", "value": "https:\\/\\/app.optimizely.com\\/v2\\/projects\\/[0-9]+\\/experiments$", "match": "regex"}]], "activationType": "callback", "name": "[DO NOT ARCHIVE] X Dashboard (User Info Ready)", "apiName": "8370151241_x_dashboard_user_info_ready", "tags": [], "undoOnDeactivation": false, "activationCode": function(activate) {
	window.optlyApp.getUtilities()
    .userInfo.getUser()
  	.complete.then(activate);
}
, "deactivationEnabled": false, "id": "10665880103"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "element_present", "value": "[data-test-section=\"editor-nav-item-traffic_allocation\"]"}], ["not", ["or", {"type": "url", "value": "traffic_allocation", "match": "substring"}]]], "activationType": "dom_changed", "name": "URL Targeting for [Whelan] Drive Stats Accelerator Adoption", "apiName": "8370151241_url_targeting_for_whelan_drive_stats_accelerator_adop", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "10682665138"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/", "match": "substring"}], ["or", {"type": "element_present", "value": "[data-test-section=\"create-project-dialog\"]"}], ["or", {"type": "url", "value": "#modal", "match": "substring"}]], "activationType": "dom_changed", "name": "[DO NOT ARCHIVE][Jamie] New Projects Modal", "apiName": "8370151241_jamie_new_projects_modal", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "10729041176"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "element_present", "value": "[data-test-section=\"condition-builder-empty-state\"]"}]], "activationType": "dom_changed", "name": "[DO NOT ARCHIVE] Pages Settings - No Conditions", "apiName": "8370151241_pages_settings__no_conditions", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "10755871418"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/settings/implementation", "match": "substring"}], ["or", {"type": "element_present", "value": "[data-test-section=\"jquery-settings\"], [data-test-section=\"jquery-inclusion-settings-section\"]"}]], "activationType": "dom_changed", "name": "[DO NOT ARCHIVE] X Web Snippet Settings", "apiName": "8370151241_x_web_snippet_settings", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "10800265460"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/10516631504/features", "match": "simple"}]], "activationType": "url_changed", "name": "[DO NOT ARCHIVE][Lucas] The /features page on the OoO Feature rollouts project", "apiName": "8370151241_lucas_the_features_page_on_the_ooo_feature_rollouts_p", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "10842901991"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https\\:\\/\\/app\\.optimizely\\.com\\/v2\\/projects\\/\\d*/results/\\d*\\/experiments\\/\\d*", "match": "regex"}, {"type": "url", "value": "https\\:\\/\\/app\\.optimizely\\.com\\/v2\\/projects\\/\\d*\\/results/\\d*", "match": "regex"}]], "activationType": "url_changed", "name": "[DO NOT ARCHIVE][Giannis] X Results Page", "apiName": "8370151241_giannis_x_results_page", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "11099710611"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/8351122416/features", "match": "simple"}]], "name": "[DO NOT ARCHIVE][Yeesheen] Features Dashboard", "apiName": "8370151241_yeesheen_features", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11490471782"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "custom_code", "value": function () {
  var projectId = window.optly.flux.evaluate(['currentProjectId']);
  var currentProject = window.optly.flux.evaluateToJS(['entityCache', 'projects'])[projectId];
  var isV2 = currentProject.manifest_version === 2;
  var hasNoSdkLanguage = !currentProject.sdks.length;
  var isCustomProject = currentProject.project_platforms.includes('custom');
  var isNewFullStack = hasNoSdkLanguage && isCustomProject;
  return isNewFullStack;
}
}], ["or", {"type": "url", "value": "app.optimizely.com/v2", "match": "substring"}]], "name": "[DO NOT ARCHIVE][CANON] X > Full Stack Project", "apiName": "canon_x_migrated_full_stack_project", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11724201503"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "^https://app\\.optimizely\\.com/v2/projects/[0-9]*/results/[0-9]*.*$", "match": "regex"}, {"type": "url", "value": "^https://app\\.optimizely\\.com/v2/projects/[0-9]*/results/[0-9]/experiments/[0-9]*.*$", "match": "regex"}]], "activationType": "url_changed", "name": "[DO NOT ARCHIVE][Evan] Optimizely X Experiment and Campaign Results Pages", "apiName": "8370151241_evan_optimizely_x_experiment_and_campaign_results_pag", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "11808634290"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "^https\\:\\/\\/app\\.optimizely\\.com\\/v2\\/projects\\/\\d*(/)?$", "match": "regex"}]], "name": "[DO NOT ARCHIVE] Experiments Overview", "apiName": "8370151241_experiments_overview", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11950472651"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https:\\/\\/app\\.optimizely\\.com\\/v2\\/projects\\/[0-9]+\\/experiments\\/[0-9]+.*", "match": "regex"}, {"type": "url", "value": "https:\\/\\/app\\.optimizely\\.com\\/v2\\/projects\\/[0-9]+\\/multivariate\\/[0-9]+.*", "match": "regex"}, {"type": "url", "value": "https:\\/\\/app\\.optimizely\\.com\\/v2\\/projects\\/[0-9]+\\/campaigns\\/[0-9]+.*", "match": "regex"}]], "activationType": "url_changed", "name": "[DO NOT ARCHIVE][Jon] Experiment Manager - All Tabs", "apiName": "8370151241_lucas_experiment_manager", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "11970583767"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://app.optimizely.test/v2", "match": "simple"}]], "name": "[DO NOT ARCHIVE] Local Dev Environment", "apiName": "8370151241_local_dev_environment", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "12035721691"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https\\:\\/\\/app\\.optimizely\\.com\\/v2\\/projects\\/\\d*/experiments\\/\\d*\\/variations", "match": "regex"}]], "name": "[DO NOT ARCHIVE][Giannis] Experiment Details", "apiName": "8370151241_giannis_experiment_details", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "12058130959"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "custom_code", "value": /**
 * Sample JavaScript Condition
 * This function is called after the page is triggered. It should return true
 * when the page is ready to activate.
 */

function () {
var answer = false;
var queryCheck = new RegExp('(\\?)');
var urlConditionBoxes = document.querySelectorAll('[data-test-section="condition-card-url-match"]');

urlConditionBoxes.forEach(function(condition){

  var urlMatches = condition.querySelectorAll('[data-test-section="include-url-condition"]');

  urlMatches.forEach(function(urlMatch){

    //var isSimple = urlMatch.querySelectorAll('.isSelected[data-test-section="dropdown-block-link-simple"]');

    //if(isSimple.length == 1){
    //Now check the value
      var urlValue = urlMatch.querySelector('.oui-text-input').value;
      if(queryCheck.test(urlValue)){
        answer = true;
      }
      
  //  }

  });

});
  return answer;
}
}]], "activationType": "dom_changed", "name": "[Bill C] - Page Builder - Query Param Present and Simple Match Selected Only", "apiName": "8370151241_bill_c__page_builder__query_param_present_and_simple_", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "13258280174"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects", "match": "substring"}], ["or", {"type": "element_present", "value": ".lego-dropdown-group.is-active [data-test-section=\"layers-create-new-experiment\"]"}]], "activationType": "dom_changed", "name": "[Whelan] Create New Active", "apiName": "8370151241_whelan_create_new_active", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "14352480433"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "element_present", "value": "[data-test-section=\"change-editor-sidebar\"]"}]], "activationType": "dom_changed", "name": "[Whelan] Visual Editor - Change Element Sidebar open", "apiName": "8370151241_whelan_visual_editor__change_element_sidebar_open", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "14362290741"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/\\d+\\/experiments/\\d+/metrics", "match": "regex"}, {"type": "url", "value": "https://app.optimizely.com/v2/projects/\\d+\\/campaigns/\\d+/metrics", "match": "regex"}]], "name": "[Kelly] Campaign/Experiment metrics", "apiName": "8370151241_kelly_campaignexperiment_metrics", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "14711880608"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "app.optimizely.com/v2/try-rollouts", "match": "simple"}]], "name": "[Yeesheen] Try Rollouts Modal", "apiName": "8370151241_yeesheen_try_rollouts_modal", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "15185731079"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "app.optimizely.com/v2/try-rollouts", "match": "simple"}]], "name": "URL Targeting for [Yeesheen] Try-Rollouts Click Tracking", "apiName": "8370151241_url_targeting_for_yeesheen_tryrollouts_click_tracking", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "15221300279"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://app.optimizely.com/edit?", "match": "simple"}]], "name": "Classic Editor", "apiName": "8370151241_classic_editor", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "16147620420"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https:\\/\\/app\\.optimizely\\.com\\/results2\\?experiment_id=\\d+", "match": "regex"}]], "name": "[Byron] Classic Results Page", "apiName": "8370151241_byron_classic_results_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "16150530217"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https:\\/\\/app\\.optimizely\\.com\\/projects\\/\\d+\\/experiments", "match": "regex"}]], "name": "[Byron] Classic Dashboard", "apiName": "8370151241_byron_classic_dashboard", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "16157560479"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "multivariate", "match": "substring"}], ["or", {"type": "url", "value": "traffic_allocation", "match": "substring"}]], "name": "[Caitlin] Traffic Allocation Page", "apiName": "8370151241_caitlin_traffic_allocation_page", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "16838290953"}, {"category": "other", "staticConditions": ["and", ["not", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/profile/preferences", "match": "simple"}]], ["not", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/accountsettings/projects", "match": "simple"}]]], "name": "[Greeshma] Exclude Account Settings", "apiName": "8370151241_greeshma_exclude_account_settings", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "18167694591"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "/rules", "match": "substring"}], ["or", {"type": "custom_code", "value": /**
 * Sample JavaScript Condition
 * This function is called after the page is triggered. It should return true
 * when the page is ready to activate.
 */

function jsCondition() {
  this_test_length = 0;
document.querySelectorAll('[data-test-section="variables-value-cell-read-only"]').forEach(function(element){this_test_length += element.innerText.length});
  
  return this_test_length > 20;
}
}]], "activationType": "url_changed", "name": "[Danny] Feature Management Modal with Variables", "apiName": "8370151241_danny_feature_management_modal_with_variables", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "18231730036"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "\\/v2\\/projects\\/[0-9]+\\/features", "match": "regex"}], ["or", {"type": "custom_code", "value": function jsCondition() {
    var boo = document.querySelectorAll('[data-test-section="oasis-features-dashboard"] .reading-column').length !== 0 ||
        (document.querySelectorAll('[data-test-section="oasis-features-dashboard"] input[data-test-section="table-filter-input"][value=""]').length !== 0 &&
        document.querySelectorAll('a[data-test-section="entity-table-clear-filters-button"]').length !== 0);
    boo = boo && (document.querySelectorAll('.optoptNewUserIntentContentWrap').length === 0);
   
    return boo;
}
}]], "activationType": "dom_changed", "name": "[ODS - Dan B] Full Stack & Rollouts - Features Overview & Zero Features Created", "apiName": "8370151241_ods_features_dashboard__zero_features_created", "tags": [], "undoOnDeactivation": false, "activationCode": function callbackFn(activate, options) {
    var utils = window.optimizely.get('utils');
    //pages with phone image
    utils.waitForElement('[data-test-section="oasis-features-dashboard"] .reading-column').then(function () {
        activate();
    });
    //page with empty table
    utils.waitForElement('[data-test-section="oasis-features-dashboard"] input[data-test-section="table-filter-input"][value=""]').then(function () {
        utils.waitForElement('a[data-test-section="entity-table-clear-filters-button"]').then(function () {
            activate();
        });
    });
}
, "deactivationEnabled": true, "id": "18793941975"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "/experiments$", "match": "regex"}]], "activationType": "url_changed", "name": "[ODS - Dan B] Full Stack & Rollouts - Experiments Overview", "apiName": "8370151241_ods_rollouts__experiments_overview", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "18798281682"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "\\/projects\\/\\d+\\/(experiments|campaigns|multivariate)\\/\\d+", "match": "regex"}], ["not", ["or", {"type": "url", "value": "optimizely_editor=true", "match": "substring"}]], ["or", {"type": "element_present", "value": "[data-test-section=\"campaign-overview-sidebar-publish\"]:not(.optVisited)"}], ["or", {"type": "custom_code", "value": function jsCondition() {
    return !!window.optlyApp;
}
}]], "activationType": "dom_changed", "name": "[ODS] ODS-001 - A/B, MVT, or Personalization, with `Publish` button present and `optlyApp` object defined", "apiName": "8370151241_url_targeting_for_ods_ods001__disabling_publish_butto", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "19036780362"}, {"category": "other", "staticConditions": ["or", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/projects/*.*/settings/collaborators", "match": "regex"}]], "activationType": "url_changed", "name": "[ODS - Dan B] V2 Collaborators (Works properly due to SPA trigger)", "apiName": "8370151241_ods__dan_b_v2_collaborators_works_properly_due_to_spa", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": true, "id": "19574624591"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "element_present", "value": "[data-test-section=platform-card-full-stack] button[data-test-section=\"select-platform\"]"}]], "activationType": "dom_changed", "name": "[Danny] Project Creation Modal", "apiName": "8370151241_danny_project_creation_modal", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "19930632869"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "element_present", "value": "[data-test-section=\"flags-navbar\"]"}]], "activationType": "dom_changed", "name": "[Danny] Flags Project overview", "apiName": "8370151241_danny_flags_project_overview", "tags": [], "undoOnDeactivation": false, "activationCode": /**
 * Sample Polling Function
 * Supply an expression to return a boolean inside a function.
 * For complete documentation, see https://developers.optimizely.com/x/solutions/javascript/topics/dynamic-websites/index.html#polling
 */

function pollingFn() {
  return window.optlyConfig && window.optlyConfig.current_project && optlyConfig.current_project.is_flags_enabled  === true;
}
, "deactivationEnabled": true, "id": "20081145161"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://www.optimizely.com/", "match": "substring"}], ["not", ["or", {"type": "url", "value": "https://www.optimizely.com/(de|sv|no)", "match": "regex"}]]], "activationType": "dom_changed", "name": "URL Targeting for [22|11|04] [Felix] Regional language switch [promo]", "apiName": "4391536040_url_targeting_for_copy_of_221020_felix_regional_en_ho", "tags": [], "undoOnDeactivation": true, "deactivationEnabled": true, "id": "22491790272"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://app.optimizely.com/v2/accountsettings/account/plan", "match": "simple"}, {"type": "url", "value": "https://app.optimizely.com/v2/accountsettings/account/plan-billing", "match": "simple"}]], "activationType": "url_changed", "name": "[Todd] Billing Tab", "apiName": "8370151241_todd_billing_tab", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "22632410290"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "login.optimizely.com", "match": "substring"}]], "name": "URL Targeting for [23|01|13] [Michiel] Opti ID Login Promo - Top \u2191 [Promo]", "apiName": "4391536040_url_targeting_for_230113_michiel_opti_id_login_promo_", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "22882510647"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "login.optimizely.com", "match": "substring"}]], "name": "URL Targeting for [23|01|13] [Michiel] Opti ID Login Promo - Bottom left \u2199\ufe0f[Promo]", "apiName": "4391536040_url_targeting_for_copy_of_230113_michiel_opti_id_logi", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "22900330491"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "login.optimizely.com", "match": "substring"}]], "name": "URL Targeting for [23|01|13] [Michiel] Opti ID Login Promo - Bottom right \u2198\ufe0f [Promo]", "apiName": "4391536040_url_targeting_for_copy_of_230113_michiel_opti_id_lo_1", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "22915210465"}, {"category": "other", "staticConditions": ["and", ["or", {"type": "url", "value": "https://world.optimizely.com/", "match": "simple"}]], "name": "URL Targeting for [23|02|09] [Patrick] Read More Blog CTA World", "apiName": "4391536040_url_targeting_for_230209_patrick_read_more_blog_cta_w", "tags": [], "undoOnDeactivation": false, "deactivationEnabled": false, "id": "23118291229"}], "integrationSettings": [], "interestGroups": [{"keywords": ["dxp"], "tagGroupId": "3", "available": true, "id": "1058"}, {"keywords": ["commerce", "ecommerce", "shopping", "webshop"], "tagGroupId": "3", "available": true, "id": "1059"}, {"keywords": ["experimentation", "experiments", "testing", "tests"], "tagGroupId": "3", "available": true, "id": "1060"}, {"keywords": ["author", "authoring", "content", "writing"], "tagGroupId": "3", "available": true, "id": "1061"}], "groups": [], "projectJS": function(){// window.optlyConfig is an object that's inlined into app.optimizely.com server responses
// to help bootstrap the frontend with data. optlyApp is a similar utility, account id and project id are
// mapped to window-level variables to allow for use with list Targeting
window.optlyAccountId = window.optlyConfig.admin_account.id;
window.optlyProjectId = window.optlyApp && window.optlyApp.getUtilities().userInfo.getUser().projectId;


/**
 * Helper Functions
 */
window.optlyFn = {
  getQueryParam: function(name) {
    var match = window.location.search.match(name + '=([^&]*)');
    return match ? match[1] : undefined;
  },
  getCookie: function(name) {
    var match = document.cookie.match(name+'=([^;]*)');
    return match ? match[1] : undefined;
  },
  setCookie: function(c_name,value,exdays,c_domain) {
    c_domain = (typeof c_domain === "undefined") ? "" : "domain=" + c_domain + ";";
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays === null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value + ";" + c_domain + "path=/";
  },
};

// [Greeshma] Send first-contentful-paint to NewRelic as part of dogfood-test
// TODO: Remove this later
var sendToNR = function(list) {
  list.getEntries().forEach(function(entry) {
    if (entry.name === 'first-contentful-paint') {
      if (window.newrelic) {
        window.newrelic.setCustomAttribute('firstContentfulPaint', entry.startTime);
      }
    }
  });
};

// Observe paint and send to New Relic
try {
    var observer = new PerformanceObserver(sendToNR);
    observer.observe({entryTypes: ["paint"]});
} catch (e) {
  // Browser doesn't support PerformanceObserver
}

// Populate has_optimizely_email custom attribute based on info from the optlyAppApi. 
var userInfo = window.optlyApp && window.optlyApp.getUtilities().userInfo;
var email = userInfo && userInfo.getUser().email || '';
var hasOptimizelyEmail = email.endsWith('@optimizely.com');

window["optimizely"] = window["optimizely"] || [];
window["optimizely"].push({
  "type": "user",
  "attributes": {
    "account_id": optlyConfig.account_info.account_id,
    "project_id": optlyConfig.current_project.id,
    "is_impersonating":  optlyConfig.is_impersonating,
    "plan_type": optlyConfig.admin_account.plan_id,
    "has_optimizely_email" : String(hasOptimizelyEmail)
  }
});

//logic for App Ui Notification Event Breana|Dave
window.trackUiElement = function(){
    //define attributes to send as tags in custom event
    trackClasses = JSON.stringify(window.myUiElement.classList);
    trackBounding= JSON.stringify(window.myUiElement.getBoundingClientRect());
    trackHtml= window.myUiElement.outerHTML;

    //send event with defined tags
    window['optimizely'].push({
    type: "event",
    eventName: "appUiNotification",
    tags: {
        elClasses: window.trackClasses, // classes attached to element
        elBounding: window.trackBounding, //x, y and width informaiton
        outterHtml: window.trackHtml // a string value of the instance of the element
    }
    });
};

// check if wrapper is on Dom
var checkExist = setInterval(function() {
    if (document.querySelectorAll('#root').length >0) {
        clearInterval(checkExist);

        // Notification wrapper will be observed for mutations
        var targetNode = document.querySelector('#root');

        // Options for the observer (which mutations to observe)
        var config = { attributes: true, childList: true, subtree: true };

        // Callback function to execute when mutations are observed
        var callback = function(mutationsList, observer) {
            mutationsList.forEach(function(mutation){
                if (mutation.type == 'childList') {
                    //check presence of the UI messaging and only fire event when element is visible
                    if(mutation.addedNodes.length >0){
                        for (var i = 0; i < mutation.addedNodes.length; i++) {
                            try{
                                if (mutation.addedNodes[i].classList.contains('lego-notification')){    
                                      window.myUiElement = mutation.addedNodes[i];
                                      window.trackUiElement();                          
                                }
                                if (mutation.addedNodes[i].classList.contains('lego-attention')){
                                    window.myUiElement = mutation.addedNodes[i];
                                    window.trackUiElement();
                                }
                                if (mutation.addedNodes[i].classList.contains('oui-attention')){
                                    window.myUiElement = mutation.addedNodes[i];
                                    window.trackUiElement();
                                }      
                            } catch(err){
                                /* Swallow errors */ 
                            }
                        }
                    }                       
                }
            });
          };

    // Create an observer instance linked to the callback function
    var observer = new MutationObserver(callback);

    // Start observing the target node for configured mutations
    observer.observe(targetNode, config);
    }
}, 100);

// (owner: @derek) Manually triggers below Page on initial initial app load, since URL trigger won't
// https://app.optimizely.com/v2/projects/8370151241/implementation/pages/16933730643
window['optimizely'] = window['optimizely'] || [];
window['optimizely'].push({
  type: "page",
  pageName: "8370151241_pages_where_improved_change_history_tab_is_visible"
});
}, "visitorIdLocator": null, "snippetId": "8413020910", "enableForceParameters": true, "experimental": {"trimPages": true}},d=__webpack_require__(2881),h="initializeOptimizelyPreview";if(d.initGlobalStore(l),s.populateDirectiveData(),u.clientHasAlreadyInitialized())r.warn("Main / Disabling because Optimizely has already initialized on this page load. Are there multiple snippets on the page?");else if(u.shouldBailForDesktopApp())r.log("Main / Disabling because of desktop app.");else if(u.conflictInObservingChanges())r.log("Main / Disabling: Observe Changes Indefinitely is on, but browser does not support it.");else{if(u.shouldLoadInnie())c.registerFunction("getProjectId",(function(){return l.projectId})),c.registerFunction("getAccountId",(function(){return l.accountId})),f.addScriptAsync("https://app.optimizely.com/js/innie.js"),r.log("Main / Disabling in favor of the editor client.");else if(u.shouldLoadPreview())(u.isSlave()?window.optimizely:window.optimizely=window.optimizely||[]).push({type:"load",data:l}),r.log("Main / Disabling in favor of the preview client."),__webpack_require__(6608).setupPreviewGlobal(),__webpack_require__(6608).pushToPreviewGlobal({type:"pushPreviewData",name:"liveCommitData",data:l}),u.isSlave()||(c.registerFunction("getProjectId",(function(){return l.projectId})),f.addScriptSync("https://cdn-assets-prod.s3.amazonaws.com/public/5935064/s/optimizely_app/preview.js"));else if(u.shouldBootstrapDataForPreview()){c.registerFunction(h,(function(t){n(),c.unregisterFunction(h)}));var v=u.isSlave()?PROJECT_ID_FOR_SLAVE_PREVIEW:c.getFunction("getProjectId")();p=u.getProjectToken(),g=v,m=u.getPreviewLayerIds(),a="/dist/preview_data.js?token=__TOKEN__&preview_layer_ids=__PREVIEW_LAYER_IDS__".replace("__TOKEN__",p).replace("__PROJECT_ID__",g).replace("__PREVIEW_LAYER_IDS__",m.join(",")).replace("__GET_ONLY_PREVIEW_LAYERS__",!0),f.addScriptSync(a),__webpack_require__(6608).setupPreviewGlobal(),f.addScriptAsync("/dist/js/preview_ui.js")}else u.shouldBootstrapDataForEditor()?(c.registerFunction(h,(function(t){n(),c.unregisterFunction(h)})),f.addScriptAsync(window.optimizely_editor_data_endpoint)):u.shouldInitialize()&&n();var p,g,m;t.timeEnd("block");var y=t.now();t.setMark("optimizelyFinished",startTime=y,duration=y)}}()}catch(n){try{__webpack_require__(7136).handleError(n)}catch(t){console.log(t)}}}()})();