(window.__optlyJsonp=window.__optlyJsonp||[]).push([[1],{3674:function(e,t,a){"use strict";var r=a(4080);a.d(t,"a",(function(){return r.a}));var n=a(205),i=a(350);a.d(t,"b",(function(){return i.default}));var u=a(3748);a.d(t,"d",(function(){return u.a}));var s=a(3726);a.d(t,"e",(function(){return s.a}));var o=a(4082);t.c={actions:r.a,actionTypes:n.a,constants:i.default,fns:u.a,getters:s.a,RetryQuery:o.a}},3681:function(e,t,a){"use strict";a.r(t),a.d(t,"ToolbarLink",(function(){return f})),a.d(t,"Left",(function(){return m})),a.d(t,"Right",(function(){return g})),a.d(t,"ToolbarButton",(function(){return v})),a.d(t,"Toolbar",(function(){return E}));var r=a(1),n=a.n(r),i=a(0),u=a.n(i),s=a(9),o=a.n(s),c=a(368),l=a(2076),d=function ToolbarButtonContents(e){return u.a.createElement("div",{className:"flex flex-align--center editor__select-size__text"},e.icon&&u.a.createElement("svg",{className:"lego-icon push--right vertical-align--middle"},u.a.createElement("use",{xlinkHref:e.icon})),u.a.createElement("div",null,e.title&&u.a.createElement("div",{className:"editor__select-size__value"},e.title),u.a.createElement("span",null,e.label)),e.isDropdown&&u.a.createElement("span",{className:"lego-arrow-inline--down push--left"}))};d.propTypes={label:n.a.oneOfType([n.a.string.isRequired,n.a.node.isRequired]).isRequired,title:n.a.string,icon:n.a.string,isDropdown:n.a.bool};var f=function ToolbarLink(e,t){return u.a.createElement(c.a,{className:o()({flex:!0,toolbar__button:!0,"is-active":e.isActive}),isDisabled:e.isDisabled,testSection:e.testSection,href:e.href},d(e))};f.propTypes={label:n.a.oneOfType([n.a.string.isRequired,n.a.node.isRequired]).isRequired,title:n.a.string,icon:n.a.string,href:n.a.string,isDropdown:n.a.bool,isActive:n.a.bool,isDisabled:n.a.bool,testSection:n.a.string,onClick:n.a.func};var m=l.a.Left,g=l.a.Right,v=l.a.Button,E=l.a;t.default={Toolbar:E,ToolbarButton:v,ToolbarLink:f,Left:m,Right:g}},3709:function(e,t,a){"use strict";var r=a(3758);a.d(t,"a",(function(){return r.a}));var n=a(1389),i=a(3710);a.d(t,"b",(function(){return i.b}));var u=a(3759);a.d(t,"c",(function(){return u.a}));var s=a(1396);r.a,n.a,i.b,u.a,s.a},3710:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={CUSTOM_ATTRIBUTE:"custom_attribute",CUSTOM_DIMENSION:"custom_dimension"};t.b={ATTRIBUTE_STATUS:{ACTIVE:"Active",INACTIVE:"Inactive"},ConditionTypes:r}},3726:function(e,t,a){"use strict";var r=a(2),n=a(161),i=a(385),u=a(38),s=a(244),o=a(132),c=a.n(o),l=a(23),d=a(95),f=a(374),m=a(1378),g=a(1147),v=a(362),E=a(3821),S=a(350),p=a(3748),h=S.default.baseGetterPaths,T=h.andOrSegmentCondition,y=h.colorOrder,I=h.currencyType,_=h.differenceTypeOverride,C=h.isCleaningResultsFilters,b=h.resultsQueryPromises,R=h.selectedExperimentId,N=h.selectedExperimentIdsForFilter,L=h.selectedSectionId,P=h.selectedSegments,O=h.statsConfig,F=[n.getters.entityCache,function(e){return e.toList()}],A=[u.getters.id,g.b.entityCache,function(e,t){var a=t.find((function(t){return t.get("layer_id")===e}));return a?a.get("share_link"):null}],D=[u.getters.liveCommitTag,m.d.campaignTimerange,p.a.daysSinceLastPublish],x=[O,function(e){return e&&e.get("differenceType")?e.get("differenceType"):m.b.DIFFERENCE_TYPES.RELATIVE}],M=[O,function(e){return!!e&&e.get("epochEnabled")}],V=[u.getters.allExperimentsPointingToLayer,u.getters.orderedExperimentIds,u.getters.layer,u.getters.liveCommit,u.getters.liveCommitTag,F,y,function(e,t,a,s,o,c,d){if(!a)return Object(r.toImmutable)({});var f,m=c.reduce((function(e,t){return e[t.get("id")]=t,e}),{});return s&&(f=i.b.getLiveCommitLayerExperimentsMap(s)),e.map((function(e){var t=e.get("audience_ids").map((function(e){return m[e]})),i=n.fns.constructAudienceLabelFromList(e.get("audience_conditions"),t),c=Object(r.toImmutable)([]);c=c.concat(e.get("variations").map((function(e,t){return e.set("color",d.get(t))}))),l.fns.isPersonalizationLayer(a)&&!p.a.isSingleVariationP13NExperiment(e.toJS(),a)&&(c=c.push(Object(r.toImmutable)({variation_id:S.default.holdbackProperties.VARIATION_ID,color:S.default.chartColors.BASELINE,name:S.default.holdbackProperties.NAME})));var g=s?f[e.get("id")]:null;e=e.set("audiences",t).set("audienceLabels",i).set("snippetStatus",u.fns.getExperimentSnippetStatus(e,g,o)).set("variations",c);var v=l.fns.getExperimentName(e,a);return v||(v=i.join(" ")),e.set("name",v)})).sortBy((function(e){return t.indexOf(e.get("id"))}))}],U=function experimentById(e){return[V,function(t){return t.find((function(t){return t.get("id")===e}))}]},B=[V,function(e){return e.reduce((function(e,t){return e.set(t.get("id"),t)}),r.default.Map()).sort((function(e,t){return p.a.experienceDisplayName(e).localeCompare(p.a.experienceDisplayName(t))}))}],k=[V,function(e){return e.map((function(e){return e.get("id")}))}],j=[k,N,function(e,t){return t.size?t:e}],J=[C,function(e){return e}],w=[V,j,function(e,t){return e.size<=S.default.MAX_EXPERIMENTS_TO_FETCH||t&&t.size>0&&t.size<=S.default.MAX_EXPERIMENTS_TO_FETCH}],G=[u.getters.liveCommitTag,m.d.campaignTimerange,p.a.millisecondsSinceLastPublish],q=[R,B,function(e,t){return t.get(e)}],Y=[q,function(e){return e&&n.fns.hasAnyProcessingAdaptiveAudienceConditions(e.get("audiences"))}],Q=[q,function(e){return e?e.get("variations").map((function(e){return Object(r.toImmutable)({id:e.get("variation_id"),combinationSources:e.get("combination_sources")})})):null}],z=[T,P,function(e,t){return t.size?Object(r.toImmutable)([e]).concat(t.map((function(e){return Object(r.toImmutable)({segment_id:e.get("id"),value:e.get("value")})}))):null}],W=[u.getters.layer,q,["p13n/results","selectedVariations"],function(e,t,a){if(e&&l.fns.isPersonalizationLayer(e))return Object(r.toImmutable)(S.default.holdbackVariation);var n;if(t&&(n=a.getIn([e.get("id"),t.get("id")])||t.getIn(["variations",0])))return n;console.warn("No selected variation for results")}],H=[W,function(e){return e&&e.get("variation_id")}],X=[q,function(e){return e?e.get("variations"):Object(r.toImmutable)([])}],K=[u.getters.id,["p13n/results","selectedMetric"],function(e,t){return t.get(e)}],Z=[u.getters.currentLayerMetricWrappers,K,function(e,t){var a=e.find((function(e){return r.default.is(e.get("metric"),t)}));return a||(setTimeout((function(){v.a.withScope((function(e){e.setLevel("warning"),v.a.captureMessage("results/section_module/getters: selectedMetricWrapper has no selected metric")}))}),0),Object(r.toImmutable)({metric:{}}))}],$=[["p13n/results","selectedSectionId"],s.d.entityCache,function(e,t){return t?e&&e!==S.default.allCombinationsSection.id?t.get(e):Object(r.toImmutable)(S.default.allCombinationsSection):null}],ee=[$,H,y,function(e,t,a){return e&&e.get("variations")?e.get("variations").map((function(e,t){return e.set("color",a.get(t))})).sort((function(e,a){return e.get("variation_id")===t?-1:a.get("variation_id")===t?1:0})):null}],te=[X,ee,u.getters.isMultivariateTestLayer,$,function(e,t,a,r){return a&&t&&r?t.map((function(e){return e.set("name","".concat(r.get("name")," (").concat(e.get("name"),")"))})):e}],ae=[P,function(e){return e.reduce((function(e,t){return t.get("id")===S.default.DEVICE_TYPE_SEGMENT_ID?e.add(S.default.DEVICE_SEGMENT_ID):e.add(t.get("id"))}),r.default.Set())}],re=[N,k,function(e,t){return e.size?e.size>S.default.MAX_EXPERIMENTS_FOR_DETAILED_RESULTS:t.size>S.default.MAX_EXPERIMENTS_FOR_DETAILED_RESULTS}],ne=[u.getters.id,["p13n/results","timerange"],m.d.campaignTimerange,function(e,t,a){return t.get(e)||a}],ie=[u.getters.layer,E.a.segments,ne,m.d.campaignTimerange,H,q,Z,u.getters.currentLayerMetricWrappers,f.a.isFeatureEnabled(d.b.FEATURES.fdr_notifications.FEATURE_KEY),f.a.isFeatureEnabled(d.b.FEATURES.restricts_daterange.FEATURE_KEY),function(e,t,a,r,n,i,u,s,o,d){if(!e||!o)return!1;if(i&&n&&!l.fns.isPersonalizationLayer(e)&&i.get("variations").get(0).get("variation_id")!==n)return!0;if(u&&s.size&&s.getIn([0,"alias"])!==u.get("alias"))return!0;var f=r.begin;return(d||-1!==c.a.getSearch().indexOf("share_token"))&&(f=r.restrictedBegin),t.size||a.get("begin")!==f||a.get("end")!==r.end}];t.a={andOrSegmentCondition:T,audiences:F,currencyType:I,currentLayerShareLink:A,daysSinceLastPublish:D,differenceType:x,differenceTypeOverride:_,epochEnabled:M,experimentById:U,experiments:V,experimentsById:B,experimentIds:k,filteredExperimentIds:j,getIsCleaningResultsFilters:J,hasAnyProcessingAdaptiveAudienceConditions:Y,metricWrapperByMetric:function metricWrapperByMetric(e){return[u.getters.currentLayerMetricWrappers,function(t){return t.find((function(t){return t.get("metric").equals(e)}))}]},millisecondsSinceLastPublish:G,mvtVariations:Q,resultsFilteringEnabled:ie,resultsQueryPromises:b,segmentCondition:z,selectedBaselineVariation:W,selectedBaselineVariationId:H,selectedExperiment:q,selectedExperimentId:R,selectedExperimentIdsForFilter:N,selectedExperimentVariations:X,selectedMetric:K,selectedMetricWrapper:Z,selectedSection:$,selectedSectionId:L,selectedSectionVariations:ee,selectedSegmentIds:ae,selectedSegments:P,shouldFetchLayerData:w,simplifyResultsPage:re,timerange:ne,variationById:function variationById(e,t){return[U(e),function(e){return e&&e.get("variations")?e.get("variations").find((function(e){return e.get("variation_id").toString()===t})):Object(r.toImmutable)({})}]},variationsForMvtMetrics:te}},3748:function(e,t,a){"use strict";var r,n=a(4),i=a.n(n),u=a(59),s=a.n(u),o=a(186),c=a(83),l=a(45),d=a(275),f=a(395),m=a(309),g=a(350);function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v=function calculateTotalWidthForConfidenceIntChart(e){var t=Math.abs(e[1]),a=Math.abs(e[0]);return 2*Math.max(a,t)},E=function formatSegmentValue(e,t){if(!r.isDefaultSegmentId(e.id))return t;var a=e.name;e.id===g.default.DEVICE_TYPE_SEGMENT_ID&&(a="device type");var n=a?a.toLowerCase().replace("_",""):"",i=g.default.segmentValues;return i[n]&&i[n][t]||t},S=function getMetricFromResults(e,t){return i.a.find(e.metrics,(function(e){return e.alias===t.get("alias")}))},p=function isSingleVariationP13NExperiment(e,t){return!(!e||!e.variations)&&(1===e.variations.length&&c.default.isPersonalizationLayer(t))},h=function v2IsStatSigPositive(e){return e.lift&&e.lift.isSignificant&&e.lift.status===l.default.liftStatus.BETTER},T=function v2IsStatSigNegative(e){return e.lift&&e.lift.isSignificant&&e.lift.status===l.default.liftStatus.WORSE};r={backfillExperimentResultsEmptyVariations:function backfillExperimentResultsEmptyVariations(e,t){var a=e.metrics;e.metrics=a.map((function(e){return t.forEach((function(t){var a=t.get("variation_id");e.results[a]||(e.results[a]=function makeMetricResultDefault(e){return{baseline:!1,lift:{confidenceInterval:["-Infinity","Infinity"],isSignificant:!1,significance:0,value:0,visitorsRemaining:0x8000000000000000},rate:0,value:0,variationId:e}}(a))})),e}));var r=e.reach.variations;return t.forEach((function(e){var t=e.get("variation_id");r[t]||(r[t]={variationId:t,count:0,variationReach:0})})),e.reach.variations=r,e},calculateLeftEdgeForConfidenceIntChart:function calculateLeftEdgeForConfidenceIntChart(e,t){var a=t||v(e),r=e[0],n=Math.abs(r),i=a/2,u=(r<0?i-n:i+n)/a;return"".concat(o.a.round(100*u),"%")},calculateLeftEdgeForMidMarkerConfidenceIntChart:function calculateLeftEdgeForMidMarkerConfidenceIntChart(e,t,a){var r=a||v(e),n=Math.abs(t)/r;return n=t>0?.5+n:.5-n,"".concat(o.a.round(100*n),"%")},calculateTotalWidthForConfidenceIntChart:v,calculateWidthForConfidenceIntChart:function calculateWidthForConfidenceIntChart(e,t){var a=t||v(e),r=e[1],n=e[0],i=Math.abs(r-n)/a;return"".concat(o.a.round(100*i),"%")},createDefaultSegments:function createDefaultSegments(){var e=[];return i.a.map(g.default.defaultSegmentCategories,(function(t,a){e.push({id:a,name:t})})),e},createMapForImpactLabels:function createMapForImpactLabels(e){var t={};return e.forEach((function(e){t[e.data[2][0]]=e.uuid})),t},daysSinceLastPublish:function daysSinceLastPublish(e,t){return Math.round((s()(t.end).valueOf()-s()(e.get("last_modified")).valueOf())/864e5)},decodeSegmentCondition:function decodeSegmentCondition(e){var t;try{t=atob(e)}catch(e){return null}try{return JSON.parse(t)}catch(e){var a=decodeURIComponent(t);try{return JSON.parse(a)}catch(e){return null}}},deviceSegmentValueSortFn:function deviceSegmentValueSortFn(e,t){return i.a.findIndex(g.default.deviceSegmentSortOrder,(function(t){return t.segmentId===e.originalId&&t.value===e.value}))-i.a.findIndex(g.default.deviceSegmentSortOrder,(function(e){return e.segmentId===t.originalId&&e.value===t.value}))},encodeSegmentCondition:function encodeSegmentCondition(e){return btoa(encodeURIComponent(JSON.stringify(e)))},experienceDisplayName:function experienceDisplayName(e){return e&&e.get("name")?e.get("name"):e.get("audienceLabels").size?e.get("audienceLabels").join(" "):""},formatConversionRate:function formatConversionRate(e,t,a){var n=g.default.currencies[e],i=r.shouldPreserveDecimalValue(e,!0);return a.get("rateFormatFn")(t,!1,n,i)},formatConversionValue:function formatConversionValue(e,t,a){var n=g.default.currencies[e],i=r.shouldPreserveDecimalValue(e,!1);return a.get("conversionFormatFn")(t,!1,n,i)},formatDataForImpactChart:function formatDataForImpactChart(e){var t=e.audienceAbsoluteResults,a=e.audienceRelativeResults,r=e.experimentMap,n=e.metricWrapper,u=0;return t=i.a.sortBy(t.experiments,(function(e){return-e.reach.audienceReach})),i.a.map(t,(function(e){var t=S(e,n),i=a.experiments[e.experimentId],s=S(i,n),c=t.results[g.default.RESULTS_TREATMENT_KEY].lift.value,l=e.reach.audienceReach,d=function getV2ChartColor(e){return h(e)?g.default.chartColors.IS_SIGNIFICANT_POSITIVE:T(e)?g.default.chartColors.IS_SIGNIFICANT_NEGATIVE:g.default.chartColors.IS_NOT_SIGNIFICANT}(s.results.variation);l=Number(o.a.formatPercent(l));var f={name:r.getIn([e.experimentId.toString(),"name"]),color:d,data:[[u,0],[u,c],[o.a.round(u+l/2,2),c],[o.a.round(u+l,2),c],[o.a.round(u+l,2),0]],uuid:e.experimentId,w:l,h:c};return u=o.a.round(u+l,2),f}))},formatLift:function formatLift(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m.b.DIFFERENCE_TYPES.RELATIVE,i=g.default.currencies[e],u=r.shouldPreserveDecimalValue(e,!0),s=n===m.b.DIFFERENCE_TYPES.ABSOLUTE?a.get("absoluteLiftFormatFn"):a.get("relativeLiftFormatFn");return s(t,!1,i,u)},formatOverviewImprovementTimeseries:function formatOverviewImprovementTimeseries(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.b.DIFFERENCE_TYPES.RELATIVE,r=a===m.b.DIFFERENCE_TYPES.RELATIVE?"value":"valueScaled",n=a===m.b.DIFFERENCE_TYPES.RELATIVE?"confidenceInterval":"confidenceIntervalScaled";if(e&&e.variation){var u,s,o,c=(_defineProperty(u={},g.default.timeseriesNodeState.INCONCLUSIVE,[]),_defineProperty(u,g.default.timeseriesNodeState.NEGATIVE,[]),_defineProperty(u,g.default.timeseriesNodeState.POSITIVE,[]),u),l=(_defineProperty(s={},g.default.timeseriesNodeState.INCONCLUSIVE,[]),_defineProperty(s,g.default.timeseriesNodeState.NEGATIVE,[]),_defineProperty(s,g.default.timeseriesNodeState.POSITIVE,[]),s),d=0;return e.variation.timeseries.forEach((function(e){if(!Number.isNaN(Number(e.lift[r]))&&"Infinity"!==e.lift[r]){var t=e.lift[r],a=e.lift[n][0],u=e.lift[n][1];i.a.isNumber(a)&&i.a.isNumber(u)&&(d=Math.max(d,Math.max(Math.abs(u-t),Math.abs(a-t))))}})),e.variation.timeseries.forEach((function(e){var a=e.timestamp;if(!Number.isNaN(Number(e.lift[r]))&&"Infinity"!==e.lift[r]){var u=e.lift[r],s=e.lift[n]&&e.lift[n][0],f=e.lift[n]&&e.lift[n][1];if(!Number.isNaN(Number(u))){var m=u<0?g.default.timeseriesNodeState.NEGATIVE:g.default.timeseriesNodeState.POSITIVE,v=e.lift.isSignificant&&!t?m:g.default.timeseriesNodeState.INCONCLUSIVE;i.a.forEach(g.default.timeseriesNodeState,(function(e){e===v?(o&&v!==o&&l[o].push([a-1,u]),l[v].push([a,u]),i.a.isNumber(s)&&i.a.isNumber(f)||(f=u+Math.max(d,u),s=u-Math.max(d,u)),o&&o!==v&&c[o].push([a-1,s,f]),c[v].push([a,s,f])):(l[e].push([a,null]),c[e].push([a,null,null]))})),o=v}}})),i.a.forEach(c,(function(e,t){c[t]=i.a.sortBy(e,(function(e){return e[0]}))})),i.a.forEach(l,(function(e,t){l[t]=i.a.sortBy(e,(function(e){return e[0]}))})),{confidenceIntervalSeries:c,conversionRateSeries:l}}return null},formatSegmentValue:E,formatSegmentValues:function formatSegmentValues(e){if(!e.size)return"";var t=e.sortBy((function(e){return Number(e.get("id"))}));return(t=t.map((function(e){return e.set("name",g.default.defaultSegmentCategories[Number(e.get("id"))])}))).map((function(e){return E({id:e.get("id"),name:e.get("name")},e.get("value"))}))},generateColorArray:function generateColorArray(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],n=a?g.default.chartColors.REBRAND_BASELINE:g.default.chartColors.BASELINE,i=a?g.default.chartColors.REBRAND_TIMESERIES:g.default.chartColors.TIMESERIES_COLORS;if(t||(r=[n]),e<=i.length)return r.concat(i.slice(0,t?e:e-1));for(var u=0;r.length<e;)r.push(i[u++%i.length]);return r},getChartYAxisLabelMap:function getChartYAxisLabelMap(e){var t=e.get("aggregator"),a=e.get("field"),r=e.get("scope");switch(t){case l.default.aggregator.BOUNCE:return g.default.chartYAxisLabelBounces;case l.default.aggregator.EXIT:return g.default.chartYAxisLabelExits;case l.default.aggregator.UNIQUE:case l.default.aggregator.COUNT:return g.default.chartYAxisLabelConversions;case l.default.aggregator.SUM:return g.default.chartYAxisLabelSums[a][r.toUpperCase()];default:throw new Error("Unable to get chart Y axis lable due to invalid aggregator")}},getDashStyle:function getDashStyle(e,t){return t?g.default.dashStyles.BASELINE_STYLE:g.default.dashStyles.VARIATION_STYLES[e%g.default.dashStyles.VARIATION_STYLES.length]},getDaysToExpirationDate:function getDaysToExpirationDate(e){var t=e.expirationDate,a=new Date,r=new Date(t);return a.setUTCHours(0,0,0,0),r.setUTCHours(0,0,0,0),(r.getTime()-a.getTime())/864e5},getExperimentGroupingForLayer:function getExperimentGroupingForLayer(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=g.default.EXPERIMENT_GROUPING.variations;return c.default.isMultivariateTestLayer(e)&&(a=t?g.default.EXPERIMENT_GROUPING.sectionVariations:g.default.EXPERIMENT_GROUPING.combinations),a},getExpirationDate:function getExpirationDate(e){var t=e.begin,a=e.monthsToExpire,r=new Date(t);return new Date(r.setMonth(r.getMonth()+a))},getHeaderValue:function getHeaderValue(e,t){if(!e.get("aggregator")||!e.get("scope"))return"";var a=e.get("aggregator"),r=l.default.metricsCardHeaders[a];if(!r)return"";var n=r[e.get("scope")];if(!n)return"";if(e.get("field")){var i=n[e.get("field")];return i?i[e.get("event_id")?l.default.metricLevel.EVENT:l.default.metricLevel.GLOBAL][t]:""}return n[t]||""},getLiftFormatFunction:function getLiftFormatFunction(e,t){return t===m.b.DIFFERENCE_TYPES.RELATIVE?e.get("relativeLiftFormatFn"):e.get("absoluteLiftFormatFn")},getMetricFromResults:S,getTimezoneOffsetInMinutesForHighcharts:function getTimezoneOffsetInMinutesForHighcharts(e){var t=f.a.getOffsetFromTimezone(e);return t*=-1},getVariationColor:function getVariationColor(e,t){return"baseline"===e?g.default.chartColors.BASELINE:"variation"===e?g.default.chartColors.PERSONALIZED:t&&t.get(e)&&t.get(e).get("color")||""},getVariationName:function getVariationName(e,t){if(t){var a=t.get(e);return t.get(e)&&(a.get("name")||a.get("api_name"))||""}return""},hasUnavailableExperimentReachResults:function hasUnavailableExperimentReachResults(e){return e&&e.experiments&&Object.values(e.experiments).some((function(e){return e.reach.audienceReachUnavailable}))},isDefaultSegmentId:function isDefaultSegmentId(e){return i.a.keys(g.default.defaultSegmentCategories).includes(String(e))},isRevenueMetric:function isRevenueMetric(e){return e===g.default.eventType.REVENUE},isSegmentSelected:function isSegmentSelected(e,t){return t.includes(e)},isSingleVariationP13NExperiment:p,millisecondsSinceLastPublish:function millisecondsSinceLastPublish(e,t){return Math.round(s()(t.end).valueOf()-s()(e.get("last_modified")).valueOf())},orderVariationsList:function orderVariationsList(e,t){return e.sortBy((function(e){return e.get("variation_id")===t?-1:1}))},resultsAttributes:function resultsAttributes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=null;return t&&c.default.isPersonalizationLayer(e)&&(a=p(t,e)?d.a.resultsType.P13N_WITHOUT_VARIATIONS:d.a.resultsType.P13N_WITH_VARIATIONS),{experiment_id:t?t.id:null,layer_id:e.id,results_type:a}},shouldPreserveDecimalValue:function shouldPreserveDecimalValue(e,t){return t&&g.default.nonDecimalCurrencyTypes.includes(e)},v2FilterDeletedVariations:function v2FilterDeletedVariations(e,t){var a=t.map((function(e){return String(e.get("variation_id"))})).concat(["baseline","holdback","variation"]);e.metrics.forEach((function(e){Object.keys(e.results).forEach((function(t){a.contains(t)||delete e.results[t]}))}))},v2IsStatSigNegative:T,v2IsStatSigPositive:h},t.a=r},3758:function(e,t,a){"use strict";var r=a(36),n=a(1389);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var i=r.default.createEntityActions(n.a);t.a=_extends({},i,{fetchAttributesForProject:function fetchAttributesForProject(e,t){return this.fetchAll({project_id:e},t)},archive:function archive(e){return this.save(_extends({},e,{archived:!0}))},unarchive:function unarchive(e){return this.save(_extends({},e,{archived:!1}))}})},3759:function(e,t,a){"use strict";var r=a(56),n=a(3710);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}t.a={create:function create(e){return _extends({},{id:null,project_id:null,name:"",description:"",status:n.b.ATTRIBUTE_STATUS.ACTIVE,last_modified:null},e)},activeCustomAttributes:function activeCustomAttributes(e){return e.filter((function(e){return!e.get("archived")}))},hasNoAttribute:function hasNoAttribute(e){return e.count()<=0},hasTooManyCustomAttributesForProject:function hasTooManyCustomAttributesForProject(e,t){var a,n=r.default.customAttributeLimit(t.toJS());return n&&(a=e.filter((function(e){return!e.get("archived")})).count()),!!n&&a>=n}}},3821:function(e,t,a){"use strict";t.a={andOrSegmentCondition:["segmentDisplayStore","andOrSegmentCondition"],segments:["segmentDisplayStore","segments"]}},3875:function(e,t,a){"use strict";var r=a(3876);a.d(t,"a",(function(){return r.a}));var n=a(3821);a.d(t,"b",(function(){return n.a}));r.a,n.a},3876:function(e,t,a){"use strict";var r=a(3),n=a(983);t.a={reset:function reset(){r.default.dispatch(n.a.SEGMENT_DISPLAY_RESET)},setSegmentConditions:function setSegmentConditions(e,t){r.default.batch((function(){r.default.dispatch(n.a.SEGMENT_DISPLAY_SET_AND_OR_CONDITION,{andOrSegmentCondition:e}),r.default.dispatch(n.a.SEGMENT_DISPLAY_SET_SEGMENTS,{segments:t})}))}}},3877:function(e,t,a){"use strict";t.a={entity:"share_token"}},4080:function(e,t,a){"use strict";var r,n=a(12),i=a.n(n),u=a(4),s=a.n(u),o=a(1408),c=a.n(o),l=a(59),d=a.n(l),f=a(31),m=a(75),g=a(2),v=a(493),E=a.n(v),S=a(3),p=a(35),h=a(497),T=a.n(h),y=a(123),I=a.n(y),_=a(201),C=a.n(_),b=a(132),R=a.n(b),N=a(43),L=a(38),P=a(14),O=a(3709),F=a(23),A=a(95),D=a(20),x=a(263),M=a(3875),V=a(1378),U=a(1147),B=a(4627),k=a(3726),j=a(3748),J=a(350),w=a(205);function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function addPromise(e){e.then((function(){S.default.dispatch(w.a.API_REQUEST_RESOLVED)}),(function(){S.default.dispatch(w.a.API_REQUEST_REJECTED)})),S.default.dispatch(w.a.RESULTS_ADD_PROMISE,{promise:e})}function createBaseMetricQuery(){var e=S.default.evaluateToJS(k.a.timerange),t=S.default.evaluateToJS(L.getters.currentLayerMetricWrappers).map((function(e){var t=e.alias,a=e.metric;return s.a.extend(a,{alias:t})})),a={begin:e.begin,end:e.end,metrics:t},r=S.default.evaluateToJS(L.getters.layer);r&&(a.__earliest_original=r.earliest_original);var n=function getOutlierFilterParam(){var e=S.default.evaluateToJS(L.getters.layer);if(e&&e.outlier_filter)return e.outlier_filter.enabled}();n&&(a.outlierFilter=n);var i=S.default.evaluateToJS(k.a.segmentCondition);return i&&(a.segmentCondition=JSON.stringify(i)),a}var G=function overrideOrSetDifferenceType(e){var t=S.default.evaluateToJS(k.a.differenceTypeOverride);return t&&Object.values(V.c.constants.DIFFERENCE_TYPES).includes(t)&&(e.statsConfig?e.statsConfig.difference_type=t:e.statsConfig={difference_type:t}),e};function createExperimentBaseMetricQuery(){var e=createBaseMetricQuery(),t=S.default.evaluateToJS(k.a.selectedBaselineVariationId);t&&(e.baselineVariationId=t);var a=S.default.evaluateToJS(k.a.selectedExperiment);a&&(e.experimentId=a.id,e.statsConfig=a.stats_config),e=G(e);var r=S.default.evaluateToJS(k.a.selectedSectionId);r&&(e.sectionId=r,e.variations=S.default.evaluateToJS(k.a.mvtVariations));var n=S.default.evaluateToJS(L.getters.layer);return n&&(e.__earliest=n.earliest?n.earliest:n.created,e.layerId=n.id,F.fns.isMultiArmedBandit(n)&&(e.include="bandit_performance")),e.__featureId=S.default.evaluateToJS(N.getters.id),e}function createLayerBaseMetricQuery(){var e=createBaseMetricQuery(),t=S.default.evaluateToJS(k.a.selectedBaselineVariationId);t&&(e.baselineVariationId=t);var a=S.default.evaluateToJS(k.a.filteredExperimentIds);a&&(e.experimentIds=a);var r=S.default.evaluateToJS(L.getters.layer);return r&&(e.__earliest=r.earliest?r.earliest:r.created,e.layerId=r.id,e.statsConfig=r.stats_config),(e=G(e)).__featureId=S.default.evaluateToJS(N.getters.id),e}function createNewShareLinkForLayer(e){return U.a.flush(),U.a.save({layer_id:e}).then((function(){return U.a.fetchAll({layer_id:e},!0)}))}function isCurrentLayerSet(){return!!S.default.evaluate(L.getters.layer)}function setColorOrder(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=S.default.evaluateToJS(k.a.experimentById(e)),r=S.default.evaluateToJS(L.getters.layer),n=[];a&&(n=j.a.generateColorArray(a.variations.length,F.fns.isPersonalizationLayer(r),t)),S.default.dispatch(w.a.RESULTS_ORDER_COLORS,{colorOrder:n})}var q=function addSelectedSegment(e){S.default.dispatch(w.a.ADD_SELECTED_SEGMENT,{segment:e})},Y=function clearSelectedSegments(){S.default.dispatch(w.a.CLEAR_SELECTED_SEGMENTS)},Q=function setCurrencyType(e){var t=decodeURIComponent(e.getQueryParam(J.default.queryParams.CURRENCY_TYPE));Object.keys(J.default.currencyTypes).includes(t)&&r.setSelectedCurrencyType(t,!1)},z=function setStatsConfig(e){S.default.dispatch(w.a.RESULTS_SET_STATS_CONFIG,{statsConfig:e})},W=function setTimerange(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=S.default.evaluateToJS(L.getters.id);(S.default.dispatch(w.a.RESULTS_SET_TIMERANGE,{layerId:i,begin:e,end:t}),n)&&r.updateParams((_defineProperty(a={},J.default.queryParams.DATE_RANGE_BEGIN,e),_defineProperty(a,J.default.queryParams.DATE_RANGE_END,t),a))},H=function setInitialTimerange(){if(isCurrentLayerSet()){var e=S.default.evaluateToJS(V.c.getters.defaultLoadTimerange),t=S.default.evaluate(V.c.getters.stubTimerange);if(t.size&&(e=t.toJS()),e){var a=e.begin;return(Object(f.isFeatureEnabled)(A.b.FEATURES.restricts_daterange.FEATURE_KEY)||-1!==R.a.getSearch().indexOf("share_token"))&&(a=e.restrictedBegin),W(a,e.end)}}},X=function setSelectedMetric(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=S.default.evaluateToJS(L.getters.id);S.default.dispatch(w.a.RESULTS_SET_SELECTED_METRIC,{layerId:a,selectedMetric:e});var n=S.default.evaluate(k.a.metricWrapperByMetric(e));n&&t&&r.updateParams(_defineProperty({},J.default.queryParams.METRIC_ALIAS,n.get("alias")))},K=function setSelectedMetricById(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=S.default.evaluate(L.getters.currentLayerMetricWrappers).find((function(t){return t.get("alias")===e}));if(!a)throw new Error("Invalid metric");X(a.get("metric"),t)},Z=function setSelectedVariation(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=S.default.evaluateToJS(L.getters.id),n=S.default.evaluateToJS(k.a.selectedExperimentId);S.default.dispatch(w.a.RESULTS_SET_SELECTED_VARIATION,{layerId:a,experimentId:n,selectedVariation:e}),t&&(Object(g.isImmutable)(e)||(e=Object(g.toImmutable)(e)),r.updateParams(_defineProperty({},J.default.queryParams.BASELINE_VARIATION_ID,e.get("variation_id"))))},$=function getTimestampFromDateString(e){var t=parseInt(e,10);if(!Number.isNaN(t))return t;var a=d()(e).valueOf;return Number.isNaN(a)?new Date(e).valueOf():a},ee=function setAndOrSegmentCondition(e){S.default.dispatch(w.a.SET_AND_OR_SEGMENT_CONDITION,{value:e})},te=function setDateRange(e,t){var a=S.default.evaluateToJS(V.c.getters.defaultLoadTimerange),r=a.restrictedBegin,n=a.begin,i=a.end,u=e.getQueryParam(J.default.queryParams.DATE_RANGE_BEGIN),s=n;(Object(f.isFeatureEnabled)(A.b.FEATURES.restricts_daterange.FEATURE_KEY)||-1!==R.a.getSearch().indexOf("share_token"))&&(s=r),u&&(u=$(u));var o=e.getQueryParam(J.default.queryParams.DATE_RANGE_END);o&&(o=$(o));var c=u||s,l=o||i;(c=t&&t.earliest?Math.max(c,d()(t.earliest).valueOf()):c)<(l=Math.min(l,i))?W(c,l):H()},ae=function setMetric(e){var t,a=e.getQueryParam(J.default.queryParams.METRIC_ALIAS);if(a&&!Number.isNaN(parseInt(a,10)))try{K(a),t=!0}catch(e){console.log("Unable to find metric, defaulting to primary")}if(!t){var r=S.default.evaluate(L.getters.currentLayerMetrics);r.size>0&&X(r.get(0))}},re=function setSegmentCondition(e){Y();var t=e.getQueryParam(J.default.queryParams.SEGMENT_CONDITION);if(t)if(!(t=j.a.decodeSegmentCondition(t))||t.length<2)console.warn("Invalid segment condition");else{var a=t[0],r=t.slice(1),n=S.default.evaluate(k.a.selectedSegments);ee(a),r.forEach((function(e){var t={id:e.segment_id,value:e.value};n.includes(Object(g.toImmutable)(t))||q(t)}));var i=S.default.evaluate(k.a.selectedSegments);M.a.setSegmentConditions(a,i)}},ne=function setVariationAndSection(e,t,a){var r=e.getQueryParam(J.default.queryParams.BASELINE_VARIATION_ID),n=S.default.evaluate(D.getters.entityCache),i=S.default.evaluate(k.a.selectedSectionId),u=S.default.evaluate(k.a.selectedSectionVariations),s=!1;if(r){var o,c=n.filter((function(e){return e.get("layer_id")===t.id}));if(c.size&&!i&&c.forEach((function(e){o=e.get("variations").find((function(e){return Number.isNaN(e.get("variation_id"))&&Number.isNaN(r)?e.get("variation_id")===r:e.get("variation_id")===parseInt(r,10)}))})),i&&u){var l=null;u.forEach((function(e){e.get("variation_id")===parseInt(r,10)&&(l=e)})),o=l}o&&(Z(o),s=!0)}if(i&&!s&&u&&u.size&&(Z(u.first()),s=!0),a&&!s){var d=n.find((function(e){return e.get("id")===a}));d&&(Z(d.get("variations").first()),s=!0)}s||Z(n.first().get("variations").first())};r={addSelectedSegment:q,clearSelectedExperimentId:function clearSelectedExperimentId(){S.default.dispatch(w.a.RESULTS_SET_SELECTED_EXPERIMENT,{selectedExperimentId:null})},clearSelectedSectionId:function clearSelectedSectionId(){S.default.dispatch(w.a.RESULTS_SET_SELECTED_SECTION_ID,{selectedSectionId:null})},clearSelectedSegments:Y,fetchExperimentSectionResults:function fetchExperimentSectionResults(){var e=createExperimentBaseMetricQuery(),t=V.c.actions.makeSectionResultsRequest(e);return addPromise(t),t},fetchSegments:function fetchSegments(){var e=S.default.evaluate(P.getters.id),t=O.a.fetchAttributesForProject(e),a=V.c.actions.makeSegmentCategoriesRequest();return i.a.when(a,t).then((function(e){if(!isCurrentLayerSet())return i.a.Deferred().reject();if(e&&e.segments&&(e=[e]),!e||!e[0])return[];var t=e[0],a=S.default.evaluateToJS(P.getters.customAttributes),r=j.a.createDefaultSegments(),n=a.concat(t.segments,r);s.a.uniqBy(n,"id").length!==n.length&&E.a.logToServer("Duplicate Segment ID",{errorMessage:"Duplicate Segment ID",accountId:S.default.evaluateToJS(N.getters.id)});var u=S.default.evaluateToJS(k.a.selectedExperimentId);return V.c.actions.makeSegmentValueRequest(u).then((function(e){var t=[];return s.a.forEach(e.segmentValues,(function(e,a){var r=s.a.find(n,(function(e){return e.id.toString()===a}));r&&t.push(s.a.extend({values:e},r))})),t}))}))},fetchTimeseriesForMVTSection:function fetchTimeseriesForMVTSection(e){var t=createExperimentBaseMetricQuery(),a=e.toJS();t.metrics=t.metrics.map((function(e){return s.a.extend(e,{hidden:e.alias!==a.alias})}));var r=V.c.actions.makeSectionTimeseriesRequest(t).then((function(e){return isCurrentLayerSet()?e:i.a.Deferred().reject()}));return addPromise(r),r},getURLWithoutFilters:function getURLWithoutFilters(){var e=I.a.create(p.default.getLocation()),t=e._params,a={};t.share_token&&(a.share_token=t.share_token);var r=T.a.create(e.pathname);return r.param(a),r.toString()},removeSelectedSegment:function removeSelectedSegment(e){S.default.dispatch(w.a.REMOVE_SELECTED_SEGMENT,{segment:e})},resetShareLink:function resetShareLink(){var e=S.default.evaluate(U.b.activeShareTokenId),t=S.default.evaluate(L.getters.id);return e?B.a.delete({id:e}).then((function(){return createNewShareLinkForLayer(t)})):createNewShareLinkForLayer(t)},setAndOrSegmentCondition:ee,setCurrencyType:Q,setSelectedCurrencyType:function setSelectedCurrencyType(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];C.a.setItem("currencyType",e),S.default.dispatch(w.a.RESULTS_SET_CURRENCY_TYPE,{currencyType:e}),t&&r.updateParams(_defineProperty({},J.default.queryParams.CURRENCY_TYPE,e))},setDefaults:function setDefaults(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=I.a.create(p.default.getLocation()),a=S.default.evaluateToJS(L.getters.layer);Q(t),te(t,a);var r=S.default.evaluateToJS(k.a.selectedExperimentId);r&&setColorOrder(r,e),ae(t),re(t),ne(t,a,r)},setDateRange:te,setDifferenceTypeOverride:function setDifferenceTypeOverride(e){S.default.dispatch(w.a.RESULTS_SET_DIFFERENCE_TYPE_OVERRIDE,{differenceType:e})},setInitialTimerange:H,setSegmentCondition:re,setSegmentConditionParam:function setSegmentConditionParam(){var e=S.default.evaluateToJS(k.a.segmentCondition);r.updateParams(_defineProperty({},J.default.queryParams.SEGMENT_CONDITION,e?j.a.encodeSegmentCondition(e):""))},setSelectedExperimentId:function setSelectedExperimentId(e){S.default.dispatch(w.a.RESULTS_SET_SELECTED_EXPERIMENT,{selectedExperimentId:e})},setSelectedExperimentIdsForFilter:function setSelectedExperimentIdsForFilter(e){S.default.dispatch(w.a.RESULTS_SET_SELECTED_EXPERIMENT_IDS_FOR_FILTER,{experimentIds:e})},setSelectedMetric:X,setSelectedMetricById:K,setSelectedSectionId:function setSelectedSectionId(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];S.default.dispatch(w.a.RESULTS_SET_SELECTED_SECTION_ID,{selectedSectionId:e}),t&&r.updateParams(_defineProperty({},J.default.queryParams.SECTION_ID,e))},setSelectedVariation:Z,setStatsConfig:z,setTimerange:W,updateHighchartsLocalTime:function updateHighchartsLocalTime(){c.a.setOptions({global:{timezoneOffset:0,useUTC:!1}})},updateHighchartsTimezone:function updateHighchartsTimezone(e){if(e){var t=j.a.getTimezoneOffsetInMinutesForHighcharts(e);Number.isNaN(t)||c.a.setOptions({global:{timezoneOffset:t,useUTC:!0}})}},updateIsCleaningFilterResults:function updateIsCleaningFilterResults(){S.default.dispatch(w.a.SET_IS_CLEANING_RESULTS_FILTERS)},updateIsCleaningFilterResultsToFalse:function updateIsCleaningFilterResultsToFalse(){S.default.dispatch(w.a.SET_IS_CLEANING_RESULTS_FILTERS_TO_FALSE)},updateParams:function updateParams(e){var t=I.a.create(p.default.getLocation()),a=t._params,r=s.a.extend(Object(m.default)(a),e),n=T.a.create(t.pathname);n.param(r),p.default.go(n.toString())},v2FetchExperimentResults:function v2FetchExperimentResults(){var e=createExperimentBaseMetricQuery(),t=S.default.evaluate(k.a.selectedExperimentVariations),a=V.c.actions.makeExperimentResultsRequest(e).then((function(e){return isCurrentLayerSet()?(j.a.backfillExperimentResultsEmptyVariations(e,t),j.a.v2FilterDeletedVariations(e,t),e.statsConfig&&z(e.statsConfig),e):i.a.Deferred().reject()}));return addPromise(a),a},v2FetchLayerReachResults:function v2FetchLayerReachResults(){var e=createLayerBaseMetricQuery(),t=V.c.actions.makeLayerReachRequest(e);return addPromise(t),t},v2FetchLayerResults:function v2FetchLayerResults(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=createLayerBaseMetricQuery(),a=V.c.actions.makeLayerResultsRequest(t).then((function(t){return isCurrentLayerSet()?(e&&t.statsConfig&&z(t.statsConfig),t):i.a.Deferred().reject()}));return addPromise(a),a},v2FetchLayerResultsByExperiment:function v2FetchLayerResultsByExperiment(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=createLayerBaseMetricQuery();e.differenceType&&(t.statsConfig?t.statsConfig.differenceType=e.differenceType:t.statsConfig={differenceType:e.differenceType});var a=V.c.actions.makeLayerExperimentsRequest(t).then((function(e){return isCurrentLayerSet()?e:i.a.Deferred().reject()}));return addPromise(a),a},v2FetchLayerTimeseries:function v2FetchLayerTimeseries(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=createLayerBaseMetricQuery();e.onlyOverall&&(t.onlyOverall=!0);var a=V.c.actions.makeLayerTimeseriesRequest(t);return addPromise(a),a},v2FetchTimeseriesForABExperiment:function v2FetchTimeseriesForABExperiment(e){var t=createExperimentBaseMetricQuery(),a=e.toJS();t.metrics=t.metrics.map((function(e){return s.a.extend(e,{hidden:e.alias!==a.alias})}));var r=V.c.actions.makeExperimentTimeseriesRequest(t).then((function(e){return isCurrentLayerSet()?e:i.a.Deferred().reject()}));return addPromise(r),r},v2TrackDataReady:function v2TrackDataReady(e){var t=e.pageName,a=e.isCached,r=e.retryCount,n=e.timeSinceFetch,i=e.timeSinceRouteStart,u=e.layer,s=e.experiment,o=j.a.resultsAttributes(Object(g.toJS)(u),Object(g.toJS)(s));x.a.trackDataReady(t,a,n,i,r,o)}},t.a=r},4081:function(e,t,a){"use strict";var r=a(36),n=a(3877);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var i=r.default.createEntityActions(n.a);i.save,i.fetch,i.fetchAll,i.fetchPage,i.fetchAllPages,i.flush,i.delete;t.a=_extends({},i)},4082:function(e,t,a){"use strict";var r=a(3),n=a(512),i=a.n(n),u=a(149),s=a.n(u),o=a(383),c=a(350);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function RetryQuery(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,RetryQuery),this.initialDelay=5e3,this.retryCount=0,this.onResults=e.onResults,this.queryFn=e.queryFn,this.timeoutId=null,this.currentRequestId=null}return function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}(RetryQuery,[{key:"isStale",value:function isStale(e,t){return t-e.end>this.freshnessTolerance}},{key:"getFetchDelay",value:function getFetchDelay(e){return this.initialDelay*Math.pow(1.114,e)}},{key:"execQuery",value:function execQuery(e){var t=this,a=e.expectedEndDate,n=e.initialLoad,u=e.fetchStartTime,l=s()();return this.currentRequestId=l,this.queryFn().then((function(e){if(l!==t.currentRequestId)return e;var s=r.default.evaluate(o.b.routeStartTime),d=i.a.getNow(),f=d-s,m=d-u,g=e.shouldRetry,v=t.isStale(e,a);return t.onResults({isStale:v,isZeroSecondResponse:e.begin===e.end,retryCount:t.retryCount,results:e,initialLoad:!!n,timeSinceFetch:m,timeSinceRouteStart:f}),g&&t.retryCount<c.MAX_RESULTS_RETRIES&&(t.timeoutId=setTimeout((function(){t.execQuery({expectedEndDate:a,initialLoad:n,fetchStartTime:u})}),t.getFetchDelay(t.retryCount)),t.retryCount+=1),e}))}},{key:"query",value:function query(e){var t=e.expectedEndDate,a=e.initialLoad;this.retryCount=0,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null);var r=i.a.getNow();return this.execQuery({expectedEndDate:t,initialLoad:a,fetchStartTime:r})}}]),RetryQuery}();t.a=l},4627:function(e,t,a){"use strict";var r=a(4081);a.d(t,"a",(function(){return r.a}));var n=a(3877);r.a,n.a}}]);
//# sourceMappingURL=ab-exp-editor-bundle~full-stack-bundle~project-settings-bundle~results-bundle-35050cc3bdf972d39978.js.map